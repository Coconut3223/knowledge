{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"#try","title":"try","text":"Lucy.py<pre><code>import math\nprint('s')\ndef func():\n    ...\n</code></pre> <pre>\n      <code>\n        const numbers = [1, 2, 3, 4, 5];\n        for (let i = 0; i &lt; numbers.length; i++) {\n          console.log(numbers[i]);\n          // \u8f93\u51fa\u6bcf\u4e2a\u6570\u5b57\n        }\n      </code>\n    </pre> \u590d\u5236 head1 head2 span two cols span two rows _"},{"location":"AI/","title":"Artificial Intelligence, AI","text":"<p>data_drived \u7684\u8fd9\u4e2a\u6982\u5ff5</p> <p>\u4e16\u754c\u77ac\u606f\u4e07\u53d8\uff0c\u5982\u4f55\u4f7fAI\u5177\u6709\u4eba\u8111\u7684\u667a\u80fd\u4ece\u800c\u5904\u7406\u5343\u53d8\u4e07\u5316\u7684\u95ee\u9898\uff0c\u5b9a\u6b7b\u4e00\u4e2a\u5b9a\u4e49\u548c\u5199\u6b7b\u4e00\u4e2a\u7a0b\u5e8f\u6c38\u8fdc\u4e0d\u662f best\u3002\u6211\u4eec\u9700\u8981\u6570\u636e\u9a71\u52a8\u3002ML\u548cDL\u6b63\u662f\u540c\u51fa\u8fd9\u4e00\u8109\u3002</p> <p>AI is\u00a0intelligence\u00a0exhibited by\u00a0machines, rather than humans or other animals (natural intelligence,\u00a0NI).</p> <p>AI is a big concept, ML is just one subarea of AI. DL is just a part of ML, which uses DNN mapping function.</p> <p></p> <p>List six subareas of AI: Knowledge Data science, Reasoning, Statistics, Nature Language Process (NLP), Planning, Computer Vision (CV), Neuroscience, Machine Learning (ML), Robotics and so on. the differences between traditional ML &amp; DL?</p> <p></p> diff Traditional ML DL feature feature engineering feature learning domain-specific knowledge more less model capacity low high"},{"location":"AI/#terminology","title":"Terminology","text":"<ul> <li>records \u8bb0\u5f55 = instance \u5b9e\u4f8b = sample \u6837\u672c = feature vector  \u7279\u5f81\u5411\u91cf = example \u6837\u4f8b(\u4e25\u683c\uff1a\u6709\u4e86 label \u7684 sample)</li> <li>attribute \u5c5e\u6027 = feature \u7279\u5f81 attribute value \u5c5e\u6027\u503c attribute space \u5c5e\u6027\u7a7a\u95f4 = sample space \u6837\u672c\u7a7a\u95f4\uff08\u7ef4\u6570 dimension \\(d\\)</li> <li>label \u6807\u7b7e prediction \u9884\u6d4b label space \u6807\u7b7e\u7a7a\u95f4</li> <li>training\uff1atraining sample - training set</li> <li>testing\uff1atesting sample</li> <li>ground truth \u771f\u5b9e learner \u5b66\u4e60\u5668 hypotheis \u5047\u8bbe \u5b66\u4e60\u5668\u4ece\u771f\u5b9e\u4e2d\u5b66\u4e60\u5047\u8bbe</li> <li>version space \u7248\u672c\u7a7a\u95f4\uff1a\u540c\u65f6\u591a\u4e2a\u7b26\u5408\u8bad\u7ec3\u96c6\u7684\u5047\u8bbe\u3002</li> <li>inductive bias \u5f52\u7eb3\u504f\u597d\u3002\u7b97\u6cd5\u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u5bf9\u67d0\u79cd\u7c7b\u578b\u5047\u8bbe\u7684\u504f\u597d\u3002\u5b66\u4e60\u7b97\u6cd5\u81ea\u8eab\u5728\u4e00\u4e2a\u53ef\u80fd\u5f88\u5e9e\u5927\u7684\u5047\u8bbe\u7a7a\u95f4\u4e2d\u5bf9\u5047\u8bbe\u8fdb\u884c\u9009\u62e9\u7684\u542f\u53d1\u5f0f\u6216\u201d\u4ef7\u503c\u89c2\u201c     &gt; \u504f\u597d \u590d\u6742 | \u7b80\u5355 \u5965\u5361\u59c6\u5243\u5200 Occam\u2018s razor     &gt; \u504f\u597d \u67d0\u4e2a\u7279\u5f81\uff0c\u6743\u91cd\u8bbe\u7f6e</li> </ul>"},{"location":"AI/#task","title":"Task","text":"<ul> <li>Classification \u5206\u7c7b\u3002 binary, multi-class Decision Tree, Naive Bayes, k-Nearest Neighbor (KNN), Support Vector Machines (SVM), Logistic Regression</li> <li>Regression \u56de\u5f52\u3002real-valued, multi-output, functional</li> <li>Ranking\u3002 pointwise, pairwise, listwise</li> <li>Transcription \u8f6c\u5f55\u3002\u975e\u7ed3\u6784\u5316\u7684\u6570\u636e \u27a1\ufe0f \u79bb\u6563\u7684\u6587\u672c\u5f62\u5f0f\u3002     &gt; \u6587\u5b57\u8bc6\u522b, \u8bed\u97f3\u8bc6\u522b</li> <li>Machine Translation \u673a\u5668\u7ffb\u8bd1\u3002A\u8bed\u8a00\u7b26\u53f7\u5e8f\u5217 \u27a1\ufe0f B \u8bed\u8a00\u7b26\u53f7\u5e8f\u5217</li> <li>\u7ed3\u6784\u5316\u8f93\u51fa\u3002\u8f93\u51fa \ud83d\udff0 \u5411\u91cf\uff5c\u5176\u5b83\u5305\u542b\u591a\u4e2a\u503c\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5e76\u4e14\u6784\u6210\u8f93\u51fa\u7684\u4e0d\u540c\u5143\u7d20\u4e4b\u95f4\u5177\u6709\u91cd\u8981\u5173\u7cfb\u3002     &gt; \u7406\u8bba\u4e0a\u5305\u62ec\u8f6c\u5f55&amp;\u7ffb\u8bd1     &gt; \u8bed\u6cd5\u5206\u6790\uff1a\u53e5\u5b50\u27a1\ufe0f\u8bed\u6cd5\u7ed3\u6784\u6811\uff0c\u6807\u8bb0\u6811\u7684\u8282\u70b9\u4e3a \u52a8\uff5c\u540d\uff5c\u526f     &gt; \u56fe\u50cf\u7684\u50cf\u7d20\u7ea7\u5206\u5272\uff1a\u5c06\u50cf\u7d20\u5206\u914d\u5230\u7279\u5b9a\u7c7b\u522b\u3002\uff1a\u6807\u6ce8\u822a\u62cd\u4e2d\u7684\u9053\u8def\u3002     &gt; \u4e3a\u56fe\u7247\u6dfb\u52a0\u63cf\u8ff0\u3002</li> <li>\u5f02\u5e38\u68c0\u6d4b\u3002\u5728\u4e00\u7ec4\u4e8b\u4ef6\u6216\u5bf9\u8c61\u4e2d\u7b5b\u9009\u51fa\uff0c\u5e76\u6807\u8bb0\u4e0d\u6b63\u5e38\uff5c\u975e\u5178\u578b\u7684\u4e2a\u4f53\u3002     &gt; \u4fe1\u7528\u5361\u6b3a\u8bc8\u68c0\u6d4b</li> <li>\u5408\u6210\uff5c\u91c7\u6837\u3002\u751f\u6210\u4e00\u4e9b\u548c\u8bad\u7ec3\u6570\u636e\u76f8\u4f3c\u7684\u65b0\u6837\u672c\u3002\u5e0c\u671b\u8f93\u51fa\u7684\u7ed3\u679c\u662f\u66f4\u52a0\u81ea\u7136\u548c\u771f\u5b9e\u3002     &gt; \u89c6\u9891\u6e38\u620f\u81ea\u52a8\u751f\u6210\u5927\u578b\u7269\u4f53\u6216\u98ce\u666f\u7684\u7eb9\u7406     &gt; \u8bed\u97f3\u5408\u6210\u3010\u7ed3\u6784\u5316\u8f93\u51fa\u3011</li> <li>\u7f3a\u5931\u503c\u586b\u8865\u3002\u7ed9\u5b9a\u4e00\u4e2a\u65b0\u6837\u672c\uff0c\u586b\u8865\u6837\u672c\u4e2d\u7f3a\u5931\u7684\u5143\u7d20\u3002</li> <li>\u53bb\u566a\u3002\u8f93\u5165 \ud83d\udff0 \u7ecf\u8fc7\u672a\u77e5\u635f\u574f\u8fc7\u7a0b\u540e\u7684\u635f\u574f\u6837\u672c \\(\\tilde{x}\\)\uff1b\u8f93\u51fa \ud83d\udff0 \u5e72\u51c0\u6837\u672c \\(x\\)\uff5c\u6761\u4ef6\u6982\u7387 \\(p(x|\\tilde{x})\\)</li> <li>\u5bc6\u5ea6\u4f30\u8ba1\uff5c\u6982\u7387\u8d28\u91cf\u51fd\u6570\u4f30\u8ba1\u3002\u3002\u3002\u3002\u3002</li> </ul>"},{"location":"AI/#ml","title":"ML","text":"<p>\u201cMachine learning is the field of study that gives computers the ability to  learn without being explicitly programmed.\u201d \u2014 Arthur Samuel (1959) \u201cA computer program is said to learn from experience E with respect to  some class of tasks T and performance measure P, if its performance at  tasks in T, as measured by P, improves with experience E.\u201d \u2014 Tom  Mitchell (1998)</p>"},{"location":"AI/#_1","title":"\u5206\u7c7b","text":"<p>Supervised learning\u3002learning \\(x\\xrightarrow{P(y|x)} y\\) with labels\uff5ctargets.</p> <p>\u751f\u6210\u6a21\u578b &amp; \u5224\u522b\u6a21\u578b \\(\\in\\) Supervised learning</p> <ul> <li>\u751f\u6210\u6a21\u578b\u3002\u5b66\u4e60\u5f97\u5230\u8054\u5408\u6982\u7387\u5206\u5e03 \\(P(x,y)\\) \u7136\u540e\u6c42\u6761\u4ef6\u6982\u7387\u5206\u5e03\u3002\u4ee5 \u7edf\u8ba1\u5b66 &amp; bayes \u4e3a\u7406\u8bba\u57fa\u7840\u3002     &gt; \u6734\u7d20\u8d1d\u53f6\u65af\uff0c\u6df7\u5408\u9ad8\u65af\u6a21\u578b\uff0c\u9690\u9a6c\u5c14\u53ef\u592b\u6a21\u578b</li> <li>\u5224\u522b\u6a21\u578b\u3002\u5b66\u4e60\u5f97\u5230\u6761\u4ef6\u6982\u7387\u5206\u5e03 \\(P(y|x)\\)     &gt; SVM\uff0c\u51b3\u7b56\u6811\u3002LR\uff0c\u3002\u3002\u3002\u3002</li> </ul> <p>Unsupervised learning: learning \\(P(x)\\) without labels.</p> <ul> <li>clustering \u805a\u7c7b</li> <li>representation</li> <li>self-supervised</li> <li>generative models/AIGC</li> </ul> <p>\u76d1\u7763\u5b66\u4e60 &amp; \u65e0\u76d1\u7763\u5b66\u4e60 \u754c\u9650\u662f\u6a21\u7cca\u7684\u3002</p> <p>\u56e0\u4e3a\u6ca1\u6709\u5ba2\u89c2\u7684\u5224\u65ad\u6765\u533a\u5206\u76d1\u7763\u8005\u63d0\u4f9b\u7684\u503c\u662f feature\uff5ctarget\u3002\u901a\u4fd7\u5730\u8bf4\uff0c\u65e0\u76d1\u7763\u5b66\u4e60\u7684\u5927\u591a\u6570\u5c1d\u8bd5\u662f\u6307\u4ece\u4e0d\u9700\u8981\u4eba\u4e3a\u6ce8\u91ca\u7684\u6837\u672c\u7684\u5206\u5e03\u4e2d\u62bd\u53d6\u4fe1\u606f\u3002</p> <p>\\(p(x)=\\prod\\limits_{i=1}^np(x_i|x_1,\\dots,x_{i-1})\\) \u65e0\u76d1\u7763\u5b66\u4e60 \\(p(x)\\) \u53ef\u88ab\u5206\u89e3\u6210 n \u4e2a\u76d1\u7763\u5b66\u4e60\u95ee\u9898\u3002 \\(p(y|x)=\\cfrac{p(x,y)}{\\sum\\limits_{y'}p(xy')}\\) \u6709\u76d1\u7763\u5b66\u4e60 \\(p(y|x)\\) \u7528\u65e0\u76d1\u7763\u5b66\u4e60\u7684\u6cd5\u5b50\u5148\u5b66\u4e60\u8054\u5408\u5206\u5e03\u3002</p> <p>Semi-supervised learning \u534a\u76d1\u7763\u5b66\u4e60\u3002\u4e00\u4e9b\u6837\u672c\u6709\uff0c\u4e00\u4e9b\u6837\u672c\u6ca1\u6709\u3002 Reinforcement learning \u5f3a\u5316\u5b66\u4e60\u3002machine takes an action; teacher provides rewards</p> <ul> <li>control</li> <li>pricing</li> <li>games</li> </ul> <p></p> <p>Semi-supervised / active learning</p> <p>Evaluation  words Representation: how to encode the raw data? Generalization: how well can we do on unseen data? Interpretation: how to explain the findings? Complexity: how much time and space? Efficiency: how many samples? Privacy: how to respect data privacy? Robustness: how to degrade gracefully under (malicious) error?</p> <p>Big data is a collection of data sets so large and  complex that it becomes difficult to process using on-  hand database management tools or traditional data  processing applications.</p> <p>Characteristics of Big Data: 4V Volume Velocity Variaty Veracity</p> <p></p>"},{"location":"AI/#assumption","title":"Assumption","text":"<p>\u72ec\u7acb\u540c\u5206\u5e03 independent &amp; identically \\((i.i.d.)\\)\u3002\u5047\u8bbe\u6837\u672c\u7a7a\u95f4\u4e2d\u5168\u4f53\u6837\u672c\u670d\u4ece\u4e00\u4e2a\u672a\u77e5 \u201c\u5206\u5e03 distribution\u201d \\(D\\)\uff0c\u73b0\u6709\u7684\u6bcf\u4e2a sample \u90fd\u662f\u72ec\u7acb\u5730\u4ece\u8fd9\u4e2a\u5206\u5e03\u4e0a\u91c7\u6837\u5f97\u5230\u7684\u3002</p> <p>\u5173\u4e8e\u5206\u7c7b</p> <p>\u6709\u5f88\u591a\u7684\u5206\u7c7b\u6a21\u578b\uff0c\u4ed6\u4eec\u5404\u81ea\u6709\u5404\u81ea\u7684\u4f5c\u7528\u539f\u7406\uff0c\u4e5f\u6709\u5404\u81ea\u7684\u51e0\u4f55\u8868\u793a\u3002\u4f46\u5f52\u6839\u5176\u672c\u8d28\u8fd8\u662festimate distribution.</p> <p>\u8d1d\u53f6\u65af \u957f\u8fd9\u6837</p> <p>SVM \u957f\u8fd9\u6837\uff0c\u8fd9\u4e2a\u5176\u5b9e\u4e5f\u662f\u4e00\u4e2a\u5206\u5e03</p>"},{"location":"AI/#identifiability-of-model","title":"identifiability of model \u6a21\u578b\u7684\u53ef\u8bc6\u522b\u6027","text":"<p>Statistical Modelling and Identifiability of Parameters</p> <p>\u53c2\u6570\u7684 \u53ef\u8bc6\u522b\u6027 identifiability \u4f7f\u6211\u4eec\u80fd\u591f\u83b7\u5f97\u8be5\u53c2\u6570\u503c\u7684\u7cbe\u786e\u4f30\u8ba1\u503c\u3002\u5728\u6ca1\u6709\u53ef\u8bc6\u522b\u6027\u7684\u60c5\u51b5\u4e0b\uff0c\u5373\u4f7f\u6709\u65e0\u9650\u6b21\u89c2\u6d4b\uff0c\u6211\u4eec\u4e5f\u65e0\u6cd5\u4f30\u8ba1\u53c2\u6570\u03b8\u7684\u771f\u5b9e\u503c\u3002</p> <p>X\uff5eN(a+b, \u03c3) is not identifiable X\uff5eN(\u03bc, \u03c3) is identifiable \u6bcf\u4e2a\u4e0d\u540c\u7684 \u03bc \u90fd\u6307\u5411\u4e00\u4e2a\u4e0d\u540c\u7684\u671f\u671b\uff0c\u6307\u5411\u4e0d\u540c\u7684\u6b63\u6001\u5206\u5e03\uff0c\u540c\u6837\u5730\u6bcf\u4e00\u4e2a\u62e5\u6709\u4e0d\u540c\u671f\u671b\u7684\u6b63\u6001\u5206\u5e03\u90fd\u80fd\u552f\u4e00\u6c42\u51fa\u4e00\u4e2a \u03bc\u3002\u4f46\u662f\u5bf9\u4e0d\u540c\u7684 a \u548c b \u6765\u8bf4\uff0ca+b \u4e5f\u8bb8\u662f\u76f8\u540c\u7684\uff0c\u610f\u5473\u7740\u4e00\u4e2a\u6b63\u6001\u5206\u5e03\u5e76\u4e0d\u80fd\u552f\u4e00\u63a8\u65ad\u51fa (a, b, \u03c3)\u7684\u503c\u3002\uff08e.g. (1, 1, \u03c3) = (0, 2, \u03c3)</p>"},{"location":"AI/#dnn","title":"DNN","text":"<p>why it is difficult for neural networks to be deep before 2010s.</p> <ol> <li>No enough computation resources,</li> <li>No enough training data,</li> <li>Gradient vanish problem and no advanced optimization techniques</li> </ol>"},{"location":"AI/#condition","title":"condition","text":"<p>Product Rule, Chain Rule and Bayes\u2019 Rule?</p> <p>Product Rule: P(y)P(x|y)=P(x,y) Chain Rule: P(A1A2A3\u2026An)= P(A1|A2A3\u2026An) P(A2|A3A4\u2026An)\u2026 P(An-1| An) P(An) Bayes\u2019 Rule: \\(P(F|E)=\\cfrac{P(E|F)P(F)}{P(E|F)P(F)+ P(E|\\neg F)P(\\neg F)}\\)</p> <p>\u2753Suppose 1 in 1000 persons has a certain disease. We have two test methods: 1\ufe0f\u20e3  detect the disease (produce positive results) in 99% of the diseased persons and in 5% of the healthy persons (false alarm). 2\ufe0f\u20e3 : detect the disease (produce positive results) in 90% of the diseased persons and in 1% of the healthy persons (false alarm). Which test method is better? Give the reason.</p> <p>\ud83d\udca1</p> <p>D:={Diseased person}; H={Healthy Persons}, +I ={Persons with positive results with Test method I}, +II ={Persons with positive results with Test method II } \\(P(D)=0.001,\\\\ P(+I|D)=0.99, P(+I|H)=0.05,\\\\ P(+II|D)=0.90, P(+II|H)=0.01\\) We compute the probability of a diseased person that can be detect by Test method I or Test method II, repectively, which is| \\(P(D|+I)= \\cfrac{P(+I|D)P(D)}{P(+I|D) P(D)+ P(+I|H) P(H)}=\\frac{0.99\\times 0.001}{0.99\\times0.001+0.05\\times0.999}=0.0194\\) \\(P(D|+II)= \\cfrac{P(+II|D)P(D)}{P(+II|D) P(D)+ P(+II|H) P(H)}=\\frac{0.90\\times 0.001}{0.90\\times0.001+0.01\\times0.999}=0.0826\\)</p> <p>\\(P(D|+ I)&lt; P(D|+ II)\\) It means if a person has the disease, it has more chance of being detected by Test Method II. So Test method II is better.</p>"},{"location":"AI/#search","title":"search","text":"<p>A search algorithm is admissible if it is guaranteed to find a minimal path to a solution whenever such a path exists.</p>"},{"location":"AI/#j","title":"j","text":"<p>Q4. the motivations of employing heuristics in solving AI problems?</p> <p>1.A problem may not have an exact solution because of ambiguities in problem statement or available data 2.A problem may have an exact solution, but the computational cost (time and space) of finding it may be prohibitive.</p> <p>informed search method</p> <p>Hill-climbing search; A* algorithm; Best-first.</p>"},{"location":"AI/#best-first-search","title":"Best-first search","text":"<p>Best-first search is neither complete nor optimal \u2705</p> <p></p> step open closed notes 1 [S70] [ ] S=0+70 2 [A80, B85] [S70] A=45+35 &lt; B=55+30 3 [B85, C100] [A80, S70] B85 &lt; B_A=45+30+30B85 &lt; C= 45+25+30 4 [G100, C100] [B85, A85, S70] G=55+45 =C100 5 [] [G100, C100, B85, A85, S70] Goal reached. Stop. <p>Solution path : S-B-G</p> <p>Best-first \\(\\xRightarrow{\\forall n, h(n)\\leq h^*(n)}\\) A *algorithm Algorithm A* is a special best-first search algorithm \u2714\ufe0f</p> <p>example1</p> \\(n\\) \\(h(n)\\)heuristic estimation ? \\(h^*(n)\\) actual n\\(\\rightarrow\\) goal G S 70 &lt; 55 +45 A 35 &lt; 25 + 35 B 30 &lt; 45 C 30 &lt; 35 G 0 = 0 &gt; All h(n)&lt;=h(n),so it is an A algorithm and it is admissible. The path S-B-G is the shortest path."},{"location":"AI/#bnn-bayesian-belief-net","title":"BNN, Bayesian Belief Net","text":"<p>A Bayesian Belief Net consists of a graph and some local conditional probabilities.</p> <p>Serial connection:      \\(P(AVB)=P(B|V)P(V|A)P(A)\\) Diverging Connection:   \\(P(AVB)=P(B|V)P(A|V)P(V)\\) Converging Connection: \\(P(AVB)=P(V|AB)P(A)P(B)\\) Modus Ponens rule \\(\\cfrac{a,a\\implies b}{b}\\)</p> <p></p> <p>\\(P(ABC)=P(AB)P(C)=.6*.8*.7=.336\\)</p> <p>\\(P(A)=.6*.8+.4*.2=.56\\)</p> <p>\\(P(AC)=P(A)P(C)=.56*.7=.392\\)</p> <p>\\(P(D|B)=P(D|BC)P(C)+(PD|B\\neg C)P(\\neg C)=.8*.7+.2*.3=.62\\) \\(P(D|\\neg B)=P(D|\\neg BC)P(C)+(PD|\\neg B\\neg C)P(\\neg C)=.1*.7+.1*.3=.1\\) \\(P(B|D)=\\cfrac{P(BD)}{P(D)}=\\cfrac{P(D|B)P(B)}{P(D|B)P(B)+P(D|\\neg B)P(\\neg B)}=\\cfrac{.62*.8}{.62*.8+.1*.2}=.9612\\) \\(P(B|\\neg D)=\\cfrac{P(B\\neg D)}{P(\\neg D)}=\\cfrac{P(\\neg D|B)P(B)}{1-P(D)}=\\cfrac{(1-P(D|B))P(B)}{1-P(D)}=.6281\\)</p>"},{"location":"AI/#breadth-firth-search","title":"Breadth-firth search","text":"<p>If the search space contains very deep branches without solution, breadth-first search will be a better choice than depth-first search.  T</p> <p>\u641c\u7d22\u7a7a\u95f4\u5305\u542b\u975e\u5e38\u6df1\u7684\u5206\u652f \\(\\neq\\) \u76ee\u6807\u5728\u5f88\u6df1\u7684\u5206\u652f\u91cc\u3002 contains very deep branches without solution \u8fd9\u4e2a\u6df1\u7684\u652f\u662f\u6ca1\u6709\u89e3\uff0c\u90a3\u4e48\u89e3\u5728\u6d45\u5c42\u7684\u8282\u70b9\u91cc \\(\\implies\\) BFS better</p> <p>breadth-first search</p> <p>storage cost - branch factor \\(b\\) - storage cost \\(s\\) bytes/node - search speed \\(v\\) nodes/second - goal depth \\(d\\) \\(\\(\\sum_{i=0}^db^i\\times s\\)\\)</p> <p>\u2753 For a searching tree, assume that the branch factor is b=10, the storage cost is 1000 bytes/node and the searching speed is 10,000 nodes/second. With breadth-first search, what is the required storage space at depth 3? \ud83d\udca1 At depth 3, the number of created nodes is 1+10+100+1000=111,1, and thus the storage space is 111,1\uf0b41000=11,11K bytes.</p> <p>time complxity - branch factor \\(b\\) - goal depth \\(d\\) \\(\\(b^{d+1}\\)\\)</p>"},{"location":"AI/#_2","title":"\u79bb\u6563","text":"<p>Why in some cases we need to use First Order Logic (FOL) rather than Propositional Logic (PL)?</p> <p>1.Propositional logic (PL) is too \u201ccoarse\u201d to easily describe properties of objects. 2.First order logic (FOL) is to extend the expressiveness of PL.</p> <p>Forward chaining in first order logic is a data-driven algorithm. Backwards chaining in first order logic is a goal-driven algorithm.</p> <p>\\(\\forall\\) &amp; \\(\\exist\\)</p> <ul> <li>\\(\\forall x\\forall y=\\forall y\\forall x\\)</li> <li>\\(\\exist x, y = \\neg \\forall x\\neg y\\)</li> <li>\\(\\exist x\\forall y\\neq \\forall y \\exist x\\)</li> </ul> <p>Satisfiable: A sentence is satisfiable if there is some interpretation for which it is true. Unsatisfiable: A sentence is unsatisfiable if there is no interpretation for which it is true. Valid: A sentence is valid if it is true for every interpretation.</p> <p>Compute the loss of eight-puzzle </p> 1 2 3 4 5 6 7 8 State1 \u274c 1 \u274c 1 \u2714\ufe0f \u274c 1 \u274c 1 \u274c 2 State2 \u274c 1 \u274c 1 \u2714\ufe0f \u274c 2 --- Tiles out of place \u4e0d\u5bf9\u7684\u6709\u51e0\u4e2a Sum of distances out of places \u6539\u56de\u6765\u9700\u8981\u51e0\u6b65 State1 5 6 State2 3 4"},{"location":"AI/#kmeans","title":"kmeans","text":"<p>Manhattan distance is usually larger than Euclidean distance. \u2714\ufe0f</p> <p>\u5f53\u5b58\u5728\u4e09\u89d2\u5f62\u5f62\u72b6\uff0c\u659c\u8fb9\u6bd4\u76f4\u89d2\u8fb9\u52a0\u548c\u8981\u5c0f</p>"},{"location":"AI/#parameter-tuning","title":"parameter tuning","text":""},{"location":"AI/#guess","title":"Guess","text":""},{"location":"AI/#grid-search","title":"Grid Search","text":"<ol> <li>specify a list of possible hyperparameter values \u9700\u8981\u4eba\u4e3a\u8bbe\u5b9a\u8d85\u53c2\u6570\u7684\u8303\u56f4</li> <li>Grid Search will train models with every possible combination of the provided hyperparameter values and assess the performance of each trained model using a specified metric (e.g., the accuracy of predictions on a test data set). Grid Search \u5c31\u4f1a\u7528\u8bbe\u5b9a\u533a\u95f4\u5185\u7684\u5404\u79cd\u7ec4\u5408\u8fdb\u884c\u8bad\u7ec3\u5e76\u6839\u636e\u4eba\u4e3a\u6307\u5b9a\u7684metric\u8fdb\u884cassess</li> </ol> <p>Limitation\uff1a</p> <ol> <li>\u4e8b\u5148\u5f88\u96be\u77e5\u9053\u6700\u4f18\u662f\u5728\u54ea\u91cc\uff0c\u6240\u4ee5\u662f\u5426\u627e\u5230\u6700\u4f18\u5f88\u4f9d\u8d56\u4eba\u4e3a\u9009\u62e9\u7684\u8303\u56f4\uff0c\u5e76\u4e14\u53ea\u662f\u8fdb\u884c\u8303\u56f4\u5185\u7684compare\uff0c\u5e76\u4e0d\u786e\u5b9a\u662f\u5426\u5168\u5c40\u6700\u5c0f</li> <li>\u5bb9\u6613loss control\uff0c\u5982\u679c\u662f2\u4e2ahyper-parameter\uff0c\u6bcf\u4e2a\u67093\u4e2a\u5907\u9009\u90fd\u8981\u8bad\u7ec3\\(3^2\\)\u4e2amodel</li> </ol>"},{"location":"AI/#random-search","title":"Random Search","text":"<p>Idea Monte Carlo method\uff0c\u8499\u7279\u5361\u6d1b\u6cd5\uff0c\u7edf\u8ba1\u6a21\u62df\u6cd5. \u6240\u6c42\u89e3\u95ee\u9898\u53ef\u4ee5\u8f6c\u5316\u4e3a\u67d0\u79cd\u968f\u673a\u5206\u5e03\u7684\u7279\u5f81\u6570\uff0c\u6bd4\u5982\u968f\u673a\u4e8b\u4ef6\u51fa\u73b0\u7684\u6982\u7387\uff0c\u6216\u8005\u968f\u673a\u53d8\u91cf\u7684\u671f\u671b\u503c\u3002\u901a\u8fc7\u968f\u673a\u62bd\u6837\u7684\u65b9\u6cd5\uff0c\u4ee5\u968f\u673a\u4e8b\u4ef6\u51fa\u73b0\u7684\u9891\u7387\u4f30\u8ba1\u5176\u6982\u7387\uff0c\u6216\u8005\u4ee5\u62bd\u6837\u7684\u6570\u5b57\u7279\u5f81\u4f30\u7b97\u968f\u673a\u53d8\u91cf\u7684\u6570\u5b57\u7279\u5f81\uff0c\u5e76\u5c06\u5176\u4f5c\u4e3a\u95ee\u9898\u7684\u89e3\u3002\u8fd9\u79cd\u65b9\u6cd5\u591a\u7528\u4e8e\u6c42\u89e3\u590d\u6742\u7684\u591a\u7ef4\u79ef\u5206\u95ee\u9898\u3002</p> <p>Loop: 1. Random guess 2. Check and compare 3. Update.</p> <ol> <li>provide statistical distributions of hyperparameter values \u4eba\u4e3a\u8bbe\u5b9a\u8d85\u53c2\u6570\u7684\u5206\u5e03</li> <li>Random Search randomly samples hyperparameter values from the defined distributions and then tests them by generating a model. Random Search \u5c31\u4f1a\u5728\u8bbe\u5b9a\u5206\u5e03\u5185\u968f\u673asample\u8fdb\u884c\u8bad\u7ec3\u5e76\u6839\u636e\u4eba\u4e3a\u6307\u5b9a\u7684metric\u8fdb\u884cassess</li> </ol> <p>Advantage\uff1a</p> <ol> <li>\u968f\u673a\u641c\u7d22\u6709\u6548\u5730\u641c\u7d22\u4e86\u6bd4\u7f51\u683c\u641c\u7d22\u66f4\u5927\u7684\u914d\u7f6e\u7a7a\u95f4\u3002\u56e0\u4e3a\u662f\u968f\u673a\u53d6\u6837</li> <li>\u627e\u5230\u8fd9\u4e9b\u663e\u6027\u8d85\u53c2\u6570\u7684\u6700\u4f73\u503c\u5c06\u6bd4\u83b7\u5f97\u6240\u6709\u8d85\u53c2\u6570\u7684\u6700\u4f73\u7ec4\u5408\u66f4\u6709\u6027\u4ef7\u6bd4</li> <li>\u91cd\u8981\u7684\u8d85\u53c2\u6570\u56e0\u6570\u636e\u96c6\u800c\u5f02\u3002\u7f51\u683c\u641c\u7d22\u5c31\u4f1a\u5f88\u96be\u5177\u4f53\u5236\u5b9a\u67d0\u4e00\u4e2a</li> </ol>"},{"location":"AI/#tuning-parameter-work","title":"tuning parameter work","text":""},{"location":"AI/eva/","title":"\u6a21\u578b\u8bc4\u4f30\u4e0e\u9009\u62e9","text":"<p>\u8bad\u7ec3\u8bef\u5dee \\(\\xrightarrow{\u8fd1\u4f3c}\\) \u6d4b\u8bd5\u8bef\u5dee \u6d4b\u8bd5\u8bef\u5dee \\(\\xrightarrow{\u8fd1\u4f3c}\\)  \u6cdb\u5316\u8bef\u5dee\u3002</p> <p>\u4f9d\u636e\uff1a\u8bad\u7ec3\u96c6 &amp; \u6d4b\u8bd5\u96c6 \u72ec\u7acb\u540c\u5206\u5e03 \u5730\u5728\u6570\u636e\u7a7a\u95f4\u4e2d\u91c7\u6837\u5f62\u6210\u3002 \u901a\u8fc7\u964d\u4f4e\u8bad\u7ec3\u8bef\u5dee\u6765\u8ba9\u6d4b\u8bd5\u8bef\u5dee\u2b07\ufe0f\uff0c\u901a\u8fc7\u6d4b\u91cf\u6d4b\u8bd5\u8bef\u5dee\u6765\u8861\u91cf\u5728\u6574\u4e2a\u6570\u636e\u96c6\u7684\u6cdb\u5316\u6027\u80fd\u3002</p>"},{"location":"AI/eva/#_2","title":"\u6570\u636e\u5212\u5206","text":"<p>\u7559\u51fa\u6cd5\u548ck\u6298\u4ea4\u53c9\u9a8c\u8bc1\u6700\u5e38\u7528\u3002</p> <p>dataset \\(D\\)\uff1btraining set \\(S\\)\uff1btesting set \\(T\\)</p> <p></p> <p>hold-out \u7559\u51fa\u6cd5\u3002\u76f4\u63a5\u5206\u6210\u4e92\u65a5\u5927\u5c0f\u4e0d\u4e00\u4e24\u4efd\uff0c\u591a\u6b21\u53d6\u8bef\u5dee\u5e73\u5747\u3002\u6bd4\u4f8b\u4e00\u822c\u662f \\(\\(D=S\\cup T, S\\cap T=\\empty, S:T=2:1 \uff5e4:1\\)\\) k-fold cross- validation k\u6298\u4ea4\u53c9\u9a8c\u8bc1\u3002\u5206\u6210k\u4e2a\u5927\u5c0f\u76f8\u4f3c\uff0c\u591a\u6b21\u53d6\u8bef\u5dee\u5e73\u5747\u3002 p\u6b21k\u6298\u4ea4\u53c9\u9a8c\u8bc1 \\(\\(D=D_1\\cup D_2\\cup\\dots\\cup D_k, D_i\\cap D_j=\\empty(i\\neq j),k=10|5|20\\\\T=D_i, S=D-D_i,i=1\\dots k\\)\\) Leave-One-Out LOO \u7559\u4e00\u6cd5\u3002n\u6298\u4ea4\u53c9\u9a8c\u8bc1\uff0ck=n=# \u6837\u672c\u6570\u91cf\u3002\\(D-S=1\\) \u6bd4\u8f83\u51c6\u786e\u4f46\u8ba1\u7b97\u6210\u672c\u5927\u3002 bootstrapping \u81ea\u52a9\u6cd5 \u6709\u653e\u56de\u91c7\u6837n\u6b21\u3002\u4ece n \u4e2a\u6837\u672c\u7684\u6570\u636e\u96c6 \\(D\\) \u6709\u653e\u56de\u91c7\u6837 n \u6b21\u5f97\u5230 \\(D'\\) \\(\\(S=D', T=D\\setminus D'\\)\\) \u5bf9\u6837\u672c\u800c\u8a00\uff0c\u5728 n \u6b21\u91c7\u6837\u4e2d\u59cb\u7ec8\u627e\u4e0d\u5230\uff1a\\(\\lim\\limits_{m\\rightarrow\\infin}(1-\\frac{1}{m})^m=\\frac{1}{e}\\approx0.368\\implies S:T=2:1\\)</p>"},{"location":"AI/eva/#_3","title":"\u6570\u636e\u91c7\u6837","text":"<p>stratified sampling \u5206\u5c42\u91c7\u6837\u3002\u4fdd\u7559\u7c7b\u6bd4\u6bd4\u4f8b</p>"},{"location":"AI/eva/#_4","title":"\u8bc4\u4f30\u6307\u6807","text":"<ul> <li>\u5206\u7c7b \u51c6\u786e\u7387 Accuracy\uff0c\u9519\u8bef\u7387 Error rate \u7cbe\u786e\u7387 Precision\uff0c\u53ec\u56de\u7387 Recall</li> <li>\u56de\u5f52<ul> <li>MAE\u7cfb\u5217\uff0c\u5373\u7531 Mean Absolute Error \u884d\u751f\u5f97\u5230\u7684\u6307\u6807\uff1b</li> <li>MSE\u7cfb\u5217\uff0c\u5373\u7531 Mean Squared Error \u884d\u751f\u5f97\u5230\u7684\u6307\u6807\uff1b<ul> <li>\u5747\u65b9\u6839\u8bef\u5dee\uff08Root Mean Square Error\uff0cRMSE\uff09</li> <li>\\(R^2\\)</li> </ul> </li> </ul> </li> </ul> <p>\u5728\u82f1\u8bed\u4e2d\uff0cerror \u548cdeviation \u7684\u542b\u4e49\u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5Mean Absolute Error \u4e5f\u53ef\u4ee5\u53eb\u505a Mean Absolute Deviation(MAD)</p> <p>\u673a\u5668\u5b66\u4e60\u57fa\u7840\uff0c\u56de\u5f52\u6a21\u578b\u8bc4\u4f30\u6307\u6807</p>"},{"location":"AI/eva/#_5","title":"\u5206\u7c7b","text":"<p>accuracy \u51c6\u786e\u7387. \u5206\u7c7b\u6b63\u786e\u7684\u6837\u672c\u5360\u603b\u6837\u672c\u4e2a\u6570\u7684\u6bd4\u4f8b.\u3010\u6b63\u8d1f\u4e00\u6837\u91cd\u8981\u3011\\(\\(\\cfrac{TP+TN}{all}\\)\\)</p> <p>\u7c7b\u522b\u6781\u5ea6\u4e0d\u5e73\u8861\u614e\u7528(\u5355\u7eaf\u51c6\u786e\u7387\u5bb9\u6613\u50bb\u74dc\u5224\u522b)-&gt; \u7c7b\u51c6\u786e\u7387</p> <p>\u5f53\u6709\u522b\u7684\u9700\u8981\u6211\u4eec\u7279\u6b8a\u5173\u6ce8\uff1a</p> <p>\u201c\u641c\u7d22\u7ed3\u679c(\u5224\u5b9a\u4e3a P )\u4e2d\u6709\u591a\u5c11\u662f\u7528\u6237\u611f\u5174\u8da3\uff1f\u201d \\(\\frac{TP}{TP+FP}=\\) precision \u201c\u7528\u6237\u611f\u5174\u8da3(\u771f\u5b9e\u4e3a P )\u6709\u591a\u5c11\u51fa\u73b0\u5728\u641c\u7d22\u7ed3\u679c\u4e2d\uff1f\u201d \\(\\frac{TP}{TP+FN}=\\)recall</p> <p>precision \u7cbe\u786e\u7387 \u67e5\u51c6\u7387\u3002\u5206\u7c7b\u6b63\u786e\u7684\u6b63\u6837\u672c\u4e2a\u6570\u5360\u5224\u5b9a\u4e3a\u6b63\u7684\u6837\u672c\u4e2a\u6570\u7684\u6bd4\u4f8b \\(\\(\\cfrac{TP}{TP+FP=\uff5eP}\\)\\) recall sensitivity Sensitivity \u53ec\u56de\u7387\uff0c\u7075\u654f\u5ea6\uff0cTPR\uff0c \u67e5\u5168\u7387\u3002\u5206\u7c7b\u6b63\u786e\u7684\u6b63\u6837\u672c\u4e2a\u6570\u5360\u771f\u6b63\u7684\u6b63\u6837\u672c\u4e2a\u6570\u7684\u6bd4\u4f8b\u3002\u3010\u6b63\u91cd\u8981\u3011 \\(\\(\\cfrac{TP}{TP+FN}\\)\\)</p> <p>Specificity\u7279\u5f02\u6027\u3002\u5206\u7c7b\u6b63\u786e\u7684\u8d1f\u6837\u672c\u4e2a\u6570\u5360\u771f\u6b63\u7684\u8d1f\u6837\u672c\u4e2a\u6570\u7684\u6bd4\u4f8b\u3002\u3010\u8d1f\u91cd\u8981\u3011 \\(\\(\\cfrac{TN}{TN+FP}\\)\\)</p> <p>False Positive Rate, FPR\u3002 \u5206\u7c7b\u9519\u8bef\u7684\u8d1f\u6837\u672c\u4e2a\u6570\u5360\u771f\u6b63\u7684\u8d1f\u6837\u672c\u4e2a\u6570\u7684\u6bd4\u4f8b\u3002 \\(\\(\\cfrac{FP}{TN+FP}\\)\\)</p> <p>\u6709\u591a\u4e2a\u4e8c\u5206\u7c7b\u6df7\u6dc6\u77e9\u9635 (\u591a\u6b21\u8bad\u7ec3\u6d4b\u8bd5 \uff5c \u4e0d\u540c\u5b50\u6570\u636e\u96c6\uff5cmulti-class)</p> <p>macro- \u5b8f\u3002\u5148\u5404\u6df7\u6dc6\u77e9\u9635\u5206\u522b\u8ba1\u7b97\uff0c\u518d\u5e73\u5747\u3002\\(\\text{macro-P}=\\overline{P}=\\cfrac{1}{n}\\sum\\limits_{i=1}^nP_i\\) micro- \u5fae\u3002\u5148\u5e73\u5747\u6df7\u6dc6\u77e9\u9635\uff0c\u518d\u4e00\u8d77\u8ba1\u7b97 \\(\\text{micro-P}=\\cfrac{\\overline{TP}}{\\overline{TP}+\\overline{FP}}\\)</p>"},{"location":"AI/eva/#precision-recall","title":"precision &amp; recall","text":"<p>\u5b9a\u4e49\u7ecf\u5e38\u8bb0\u9519</p> <ul> <li>precision \u662f==\u8bf4\u591a\u9519\u591a==\u3002\u9ad8 prec \u503c\u9700\u8981\u5728\u5f88\u6709\u628a\u63e1\u7684\u65f6\u5019\u9884\u6d4b\u4e3a\u6b63 \\(\\implies\\) \u8fc7\u4e8e\u4fdd\u5b88\uff0c\u6f0f\u6389\u5f88\u591a\u6b63\u6837\u672c\uff0crecall\u2193  \u201c\u641c\u7d22\u7ed3\u679c(\u5224\u5b9a\u4e3a P )\u4e2d\u6709\u591a\u5c11\u662f\u7528\u6237\u611f\u5174\u8da3\uff1f\u201d</li> <li>recall \u662f==\u4eba\u6709\u591a\u5927\u80c6\u5730\u6709\u591a\u5927\u4ea7==\u3002\u53ea\u8981\u6211\u5168\u8bf4\u6b63\uff0c\u90a3\u4e48 recall = 1.  \\(\\implies\\) \u8fc7\u4e8e\u5192\u9669\uff0c\u9519\u5224\u5f88\u591a\u8d1f\u6837\u672c\uff0cprecision\u2193 \u201c\u7528\u6237\u611f\u5174\u8da3(\u771f\u5b9e\u4e3a P )\u6709\u591a\u5c11\u51fa\u73b0\u5728\u641c\u7d22\u7ed3\u679c\u4e2d\uff1f\u201d</li> </ul> <p>\u9700\u8981\u7efc\u5408\u8003\u8651 precision \u548c recall</p> P-R\uff08Precision-Recall\uff09 ROC X Recall = TP/(TP+FN) [0,1] FPR = FP/(FP+TN)\uff0c\u5047\u9633\u6027\u7387 Y Precision = TP/(-P) [0,1] TPR = TP/(TP+FN)\uff0c\u771f\u9633\u6027\u7387 \u6b63\u8d1f\u6837\u672c\u7684\u5206\u5e03\u53d8\u5316 \u8f83\u5267\u70c8\u7684\u53d8\u5316 \u57fa\u672c\u4fdd\u6301\u4e0d\u53d8\u964d\u4f4e\u4e0d\u540c\u6d4b\u8bd5\u96c6\u5e26\u6765\u7684\u5e72\u6270 \u66f4\u76f4\u89c2\u770b\u89c1\u7279\u5b9a\u6570\u636e\u96c6\u7684\u8868\u73b0 \u9002\u7528\u573a\u666f\u66f4\u591a\uff0c\u88ab\u5e7f\u6cdb\u7528\u4e8e\u6392\u5e8f\u3001\u63a8\u8350\u3001\u5e7f\u544a\u7b49\u9886\u57df <p>socre-based classifier.</p> <p>For a specified \\(\\lambda\\), let \\(f_C(x) = \\begin{cases}P&amp;f_z(x) \u2265 \u03bb\\\\N&amp;f_z(x) &lt; \u03bb\\end{cases}\\). \u70b9\u7684\u8868\u793a:\u5728\u67d0\u4e00\u9608\u503c \u03bb\u4e0b\uff0c\u5927\u4e8e\u8be5\u9608\u503c\u7684\u6837\u672c\u4f1a\u88ab\u5224\u4e3a\u6b63\u4f8b P\uff0c\u5c0f\u4e8e\u8be5\u9608\u503c\u7684\u6837\u672c\u4f1a\u88ab\u5224\u4e3a\u8d1f\u4f8b N\u3002 \\(\u03bb\\rightarrow-\\infin\\), the classifier predicts everything as positive. \\(\u03bb\\rightarrow\\infin\\), the classifier predicts everything as negative.</p>"},{"location":"AI/eva/#p-r-precision-recall","title":"P-R \u66f2\u7ebf, Precision-Recall","text":"<p>socre-based classifier</p> <p>\\(\u03bb\\rightarrow\\infin, P(\\infin)=1,R(-\\infin) =0\\). an useless predictor. \\(\u03bb\\rightarrow-\\infin, P(-\\infin)=0,R(-\\infin) =1\\). an useless predictor</p> <p>As \\(\u03bb=\u221e\\rightarrow\u2212\u221e, P(\u03bb)\\downarrow, R(\u03bb)\\uparrow\\)</p> \\[x:\\text{recall}\uff1by:\\text{precision}\\] <p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cP-R\u66f2\u7ebf\u4e0b\u7684\u9762\u79ef\u8d8a\u5927\uff0c\u6a21\u578b\u6027\u80fd\u8d8a\u597d\uff1a\u5373\u56fe\u4e2d\u66f2\u7ebfB\u5b8c\u5168\u5305\u4f4f\u4e86\u66f2\u7ebfC\uff0c\u6240\u4ee5\u66f2\u7ebfB\u4e00\u5b9a\u4f18\u4e8eC\u3002 \u4f46\u50cfA\u548cB\u8fd9\u6837\u53d1\u751f\u4e86\u4ea4\u53c9\uff0c\u4e0d\u80fd\u65ad\u8a00\u5b70\u4f18\u5b70\u52a3\uff0c\u53ea\u80fd\u5728\u5177\u4f53\u7684P\u6216R\u6761\u4ef6\u4e0b\u5206\u6790\u3002\u53e6\u8bbe\u522b\u7684\u6027\u80fd\u5ea6\u91cf\uff1a BEP: B=0.72 &lt; A=0.8\uff0cA\u4f18\u4e8eB</p> <p>Break-Event Point \u5e73\u8861\u70b9 BEP\u3002\u662f\u201c\u67e5\u51c6\u7387==\u67e5\u5168\u7387\u201d\u7684\u70b9\u3002\u8be5\u70b9\u4ee3\u8868\u6a21\u578b\u7684\u80fd\u529b\u5728\u4e24\u8005\u8868\u73b0\u90fd\u5904\u4e8e\u4e00\u4e2a\u76f8\u5bf9\u4f18\u79c0\u7684\u72b6\u6001\u3002(\u4f46\u662f\u592a\u7b80\u5316)</p> <p>F1\u8c03\u548c\u5e73\u5747 \u548c\u66f4\u4e00\u822c \\(F_\\beta\\)\u3002\u66f4\u91cd\u89c6\u504f\u5c0f\u503c\u3002\u9002\u7528\u4e8e\u9700\u8981\u5bf9\u67e5\u51c6\u7387\u6216\u67e5\u5168\u7387\u7684\u67d0\u4e00\u9879\u6709\u504f\u597d\u3002</p> \\[F1=\\cfrac{2\\times \\text{precision}\\times\\text{recall}}{ \\text{precision}+\\text{recall}}\\\\ F_\\beta=\\cfrac{(1+\\beta^2)\\times \\text{precision}\\times\\text{recall}}{ \\beta^2\\times\\text{precision}+\\text{recall}},\\beta\\begin{cases}=1&amp;F1\\\\=2&gt;1&amp;\\text{\u504frecall}\\\\=0.5&lt;1&amp;\\text{\u504fprecision}\\end{cases}\\] <p>F1\u8c03\u548c\u5e73\u5747\u66f4\u91cd\u89c6\u504f\u5c0f\u503c\u3002</p> <p>\\(\\frac{1}{F1}=\\frac{1}{2}(\\frac{1}{P}+\\frac{1}{R})=\\frac{P+R}{2PR}\\implies F1=\\cfrac{2PR}{P+R}\\) Assume \\(P\\rightarrow 0, R\\rightarrow 1\\) \u6781\u5ea6\u4e0d\u5e73\u8861 \\(F1=\\cfrac{2PR}{P+R}=\\cfrac{\\rightarrow0}{\\rightarrow 1}\\rightarrow0\\)\uff08\u5f88\u7cdf\uff09 \\(F1=\\cfrac{P+R}{2}=\\cfrac{\\rightarrow1}{2}\\rightarrow0.5\\)\uff08\u4e2d\u7b49\uff09 Btw \\(\\frac{1}{F_\\beta}=\\frac{1}{1+\\beta^2}(\\frac{1}{P}+\\frac{\\beta^2}{R})\\)</p> <p>5 \u4e2a\u6837\u672c\u6309\u5206\u6570\u6392\u5217 \uff08gt, score\uff09 \uff081\uff0c0.9\uff09\uff081\uff0c0.8\uff09\uff080\uff0c0.7\uff09\uff081\uff0c0.6\uff09\uff080\uff0c0.4\uff09</p> \u03bb (1\uff0c0.9) (1\uff0c0.8) (0\uff0c0.7) (1\uff0c0.6) (0\uff0c0.4) P R 0.9 1 0 0 0 0 \\(\\frac{1}{1+0}\\) \\(\\frac{1}{1+2}\\) 0.8 1 1 0 0 0 \\(\\frac{2}{2+0}\\) \\(\\frac{2}{2+1}\\) 0.7 1 1 1 0 0 \\(\\frac{2}{2+1}\\) \\(\\frac{2}{2+1}\\) 0.6 1 1 1 1 0 \\(\\frac{3}{3+1}\\) \\(\\frac{3}{3+0}\\) 0.4 1 1 1 1 1 \\(\\frac{3}{3+2}\\) \\(\\frac{3}{3+0}\\) <p></p>"},{"location":"AI/eva/#roc-auc","title":"ROC &amp; AUC","text":"<p>ROC, the Receiver Operating Characteristics curve \u53d7\u8bd5\u8005\u5de5\u4f5c\u7279\u5f81\u66f2\u7ebf\u3002 \\(\\(x=FPR=\\cfrac{FP}{TN+FP}; y=TPR=\\cfrac{TP}{TP+FN}\\)\\)</p> <p>socre-based classifier</p> <p>\\(\u03bb\\rightarrow\\infin, TPR(\\infin)=0,FPR(-\\infin) =0\\). an useless predictor. \\(\u03bb\\rightarrow-\\infin, TPR(-\\infin)=1,FPR(-\\infin) =1\\). an useless predictor</p> <p>As \\(\u03bb=\u221e\\rightarrow\u2212\u221e, FPR(\u03bb)\\: \\&amp;\\: TPR(\u03bb)\\uparrow\\)</p> <p>5 ROC curvesCurve I is typical. \u4e00\u822c\u5728 y=x \u4e0a\u9762\u3002Curve II \u968f\u673a\u9884\u6d4b \u2639\ufe0f Curve III is kind of useful in the sense that one benefits by using it reversely. IV perfect classifier \ud83d\udc4d so is V.\u9884\u6d4b\u5bf9\u8c03\u540e\u7ffb\u8f6c\u5b8c\ud83d\udc4d</p> <p>AUC, ROC\u66f2\u7ebf\u4e0b\u7684\u9762\u79ef\u5927\u5c0f</p> <p>AUC Area Under ROC Curve\u3002 \u91cf\u5316\u5730\u53cd\u6620\u57fa\u4e8eROC\u66f2\u7ebf\u8861\u91cf\u51fa\u7684\u6a21\u578b\u6027\u80fd \\(AUC\\in[0,1]\\) \u4e00\u822c\u57280.5-1\u4e4b\u95f4\uff0c\u2191\ud83d\udc4d</p> <ul> <li>\\(AUC\\rightarrow1\\) Good</li> <li>\\(AUC\\rightarrow0\\) Good yet one should use it reversely.</li> <li>\\(AUC\\rightarrow0.5\\) BAD like a random guess.</li> </ul> <p>5 \u4e2a\u6837\u672c\u6309\u5206\u6570\u6392\u5217 \uff08gt, score\uff09 \uff081\uff0c0.9\uff09\uff081\uff0c0.8\uff09\uff080\uff0c0.7\uff09\uff081\uff0c0.6\uff09\uff080\uff0c0.4\uff09</p> \u03bb (1\uff0c0.9) (1\uff0c0.8) (0\uff0c0.7) (1\uff0c0.6) (0\uff0c0.4) TPR FPR 0.9 1 0 0 0 0 \\(\\frac{1}{1+2}\\) \\(\\frac{0}{2+0}\\) 0.8 1 1 0 0 0 \\(\\frac{2}{2+2}\\) \\(\\frac{0}{2+0}\\) 0.7 1 1 1 0 0 \\(\\frac{2}{2+1}\\) \\(\\frac{1}{1+1}\\) 0.6 1 1 1 1 0 \\(\\frac{3}{3+0}\\) \\(\\frac{1}{1+1}\\) 0.4 1 1 1 1 1 \\(\\frac{3}{3+0}\\) \\(\\frac{2}{0+2}\\)"},{"location":"AI/eva/#_6","title":"\u4ee3\u4ef7\u654f\u611f\u9519\u8bef\u7387 &amp; \u4ee3\u4ef7\u66f2\u7ebf","text":"<p>\u4e3a\u6743\u8861\u4e0d\u540c\u7c7b\u578b\u9519\u8bef\u6240\u9020\u6210\u7684\u635f\u5931\uff0c\u5c06\u9519\u8bef\u8d4b\u4e88\u201c\u975e\u5747\u7b49\u4ee3\u4ef7\u201d\u3002\u4e0a\u8ff0\u7684\u90a3\u4e9b\u5176\u5b9e\u662f\u9ed8\u8ba4\u5747\u7b49\u4ee3\u4ef7, target\uff1a\u6700\u5c0f\u9519\u8bef\u6b21\u6570. Cost Matrix \u4ee3\u4ef7\u77e9\u9635\u3002 \\(\\text{cost}_{ij}:=\\) \u5c06 i \u7c7b \u8bef\u8ba4\u4e3a j \u7c7b\u7684\u4ee3\u4ef7\u3002target\uff1a\u6700\u5c0f\u603b\u4f53\u4ee3\u4ef7 total cost.</p> <p>cost curve \u4ee3\u4ef7\u66f2\u7ebf\u3002\u53cd\u6620\u51fa\u671f\u671b\u603b\u4f53\u4ee3\u4ef7\u3002\uff08ROC\u4e0d\u80fd\u53cd\u6620\uff09</p>"},{"location":"AI/eva/#mse","title":"MSE \u7cfb\u5217","text":"<p>MSE\u3002\\(\\(MSE=\\cfrac{\\sum\\limits_{i=1}^n(\\hat{y}-y)^2}{n}\\)\\)</p> <p>RMSE, Root Mean Square Error, \u5747\u65b9\u6839\u8bef\u5dee</p> \\[RMSE=\\sqrt{\\cfrac{\\sum\\limits_{i=1}^n(\\hat{y}-y)^2}{n}}\\] <p>RMSE\u5f88\u9ad8\u4f46\u662f\u572895%\u9884\u6d4b\u8bef\u5dee\u90fd\u5c0f\u4e8e1%</p> <p>\u662f\u5426\u5b58\u5728 outliers\u3002\u662f noise \u8fd8\u662f\u6b63\u5e38\u7684\u6837\u672c\u591a\u6837\u6027\u3002 1. noises: \u9884\u5904\u7406\u65f6\u8fc7\u6ee4 2. \u6b63\u5e38\u6837\u672c\u7684\u591a\u6837\u6027\uff1a     - \u589e\u52a0\u5173\u4e8e outliers \u5efa\u6a21     - \u9009\u62e9\u66f4\u9c81\u68d2\u7684 metrics \uff1aMAPE</p>"},{"location":"AI/eva/#mae","title":"MAE","text":"\\[MAPE=\\cfrac{1}{n}\\sum\\limits_{i=1}^n\\vert\\hat{y_i}-y_i\\vert \\times100\\%\\]"},{"location":"AI/eva/#mape-mean-absolute-percent-error","title":"MAPE, Mean Absolute Percent Error, \u5e73\u5747\u7edd\u5bf9\u767e\u5206\u6bd4\u8bef\u5dee","text":"\\[MAPE=\\cfrac{1}{n}\\sum\\limits_{i=1}^n\\vert\\cfrac{\\hat{y_i}-y_i}{y_i}\\vert \\times100\\%\\] <p>\u76f8\u6bd4RMSE\uff0cMAPE\u76f8\u5f53\u4e8e==\u628a\u6bcf\u4e2a\u70b9\u7684\u8bef\u5dee\u8fdb\u884c\u4e86\u5f52\u4e00\u5316==\uff0c\u964d\u4f4e\u4e86\u4e2a\u522b\u79bb\u7fa4\u70b9\u5e26\u6765\u7684\u7edd\u5bf9\u8bef\u5dee\u7684\u5f71\u54cd \u76f8\u5f53\u4e8e\u52a0\u6743\u7248\u7684 MAE MAPE \u53ef\u4ee5\u770b\u505a\u662f MAE \u548c MPE (Mean Percentage Error) \u7efc\u5408\u800c\u6210\u7684\u6307\u6807</p>"},{"location":"AI/eva/#_7","title":"\u6392\u5e8f\u95ee\u9898","text":"<p>\u5728\u6392\u5e8f\u95ee\u9898\u4e2d\uff0c\u901a\u5e38\u6ca1\u6709\u4e00\u4e2a\u786e\u5b9a\u7684\u9608\u503c\u628a\u5f97\u5230\u7684\u7ed3\u679c\u76f4\u63a5\u5224\u5b9a\u4e3a\u6b63\u6837\u672c\u6216\u8d1f\u6837\u672c\uff0c\u800c\u662f\u91c7\u7528Top N\u8fd4\u56de\u7ed3\u679c\u7684Precision\u503c\u548cRecall\u503c\u6765\u8861\u91cf\u6392\u5e8f\u6a21\u578b\u7684\u6027\u80fd\uff0c\u5373\u8ba4\u4e3a\u6a21\u578b\u8fd4\u56de\u7684Top N\u7684\u7ed3\u679c\u5c31\u662f\u6a21\u578b\u5224\u5b9a\u7684\u6b63\u6837\u672c\uff0c\u7136\u540e\u8ba1\u7b97\u524dN\u4e2a\u4f4d\u7f6e\u4e0a\u7684\u51c6\u786e\u7387Precision@N\u548c\u524dN\u4e2a\u4f4d\u7f6e\u4e0a\u7684\u53ec\u56de\u7387Recall@N</p>"},{"location":"AI/eva/#_8","title":"\u6bd4\u8f83\u68c0\u9a8c","text":"<p>\u76f4\u63a5\u6570\u503c\u6bd4\u8f83\u5417\uff1f</p> <p>\u274c\u3002\u9700\u8981\u6d4b\u7684\u662f\u6cdb\u5316\u6027\u80fd\uff0c\u4f46\u662f\u5728\u9009\u51fa\u7684 testing set \u4e0a\u6d4b\u7684\u3002\uff08\u4e24\u8005\u4e0d\u7b49\u4ef7\uff0c\u4e14\u540e\u8005\u53d7\u6d4b\u8bd5\u96c6\u7684\u5927\u5c0f\u548c\u9009\u62e9\u5f71\u54cd\uff09 \u270f\ufe0f \u7edf\u8ba1\u5047\u8bbe\u68c0\u9a8c hypothesis test\u3002\u82e5\u5728\u6d4b\u8bd5\u96c6\u4e0a\u89c2\u5bdf\u5230 A \u6bd4 B \u597d\uff0c\u5219 A \u7684\u6cdb\u5316\u6027\u80fd\u662f\u5426\u5728\u7edf\u8ba1\u610f\u4e49\u4e0a\u4f18\u4e8e B\uff1f\u4ee5\u53ca\u8fd9\u4e2a\u7ed3\u8bba\u7684\u628a\u63e1\u6709\u591a\u5927\uff1f</p> <p>\u4f46\u5b9e\u9645\u4e0a\u6781\u5c11\u4eba\u7528 \u4e3a\u4ec0\u4e48\u505a\u673a\u5668\u5b66\u4e60\u7684\u5f88\u5c11\u4f7f\u7528\u5047\u8bbe\u68c0\u9a8c\uff1f</p> <p>\u4ee5 \u9519\u8bef\u7387 \\(\\epsilon\\) \u4e3e\u4f8b\u3002 \u6d4b\u8bd5\u96c6\u7684\u6d4b\u8bd5\u9519\u8bef\u7387 \\(\\hat{\\epsilon}\\) \u662f\u5bf9\u6cdb\u5316\u6027\u80fd\u7684\u6cdb\u5316\u9519\u8bef\u7387 \\(\\epsilon\\) \u7684\u4e00\u4e2a\u9884\u6d4b\u3002\u53ef\u4ece \\(\\hat{\\epsilon}\\) \u63a8\u6d4b \\(\\epsilon\\) \u7684\u5206\u5e03\u3002 \\(\\epsilon:=\\) \u7b97\u6cd5\u5728\u4e00\u4e2a\u6837\u672c\u4e0a\u72af\u9519\u7684\u6982\u7387\u662f \\(\\epsilon\\) \\(\\hat{\\epsilon}:=\\) \u662f\u5728 m \u4e2a\u6d4b\u8bd5\u6837\u672c\u4e2d\uff0c\u6070\u597d\u6709 \\(m\\times\\hat{\\epsilon}\\) \u4e2a\u6837\u672c\u88ab\u8bef\u5206\u7c7b\u3002</p> <p>\u5728\u5305\u542b m \u4e2a\u6837\u672c\u4e0a\u7684\u6d4b\u8bd5\u96c6\u4e0a\uff0c\u6cdb\u5316\u9519\u8bef\u7387\ud83d\udff0\\(\\epsilon\\) \u7684\u7b97\u6cd5\u88ab\u6d4b\u5f97\u6d4b\u8bd5\u9519\u8bef\u7387\ud83d\udff0\\(\\hat{\\epsilon}\\)\u7684\u6982\u7387\uff1a \\(\\(P(\\hat{\\epsilon};\\epsilon)={m\\choose m\\times\\hat{\\epsilon}}\\epsilon^{m\\times\\hat{\\epsilon}}(1-\\epsilon)^{m(1-\\hat{\\epsilon})}\uff5eBin(m, \\epsilon)\\)\\) \u6ee1\u8db3\u4e8c\u9879\u5206\u5e03(\u4f2f\u52aa\u5229\u5206\u5e03). \u4f7f\u7528\u4e8c\u9879\u68c0\u9a8c binomial test \u6765\u5bf9 \\(\\epsilon\\le\\epsilon_0\\) \u7684\u5047\u8bbe\u8fdb\u884c\u68c0\u9a8c\u3002\u4f7f\u7528==\u7f6e\u4fe1\u5ea6 confidence \\(1-\\alpha\\)== \u5728 \\(1-\\alpha\\) \u7684\u6982\u7387\u6240\u80fd\u89c2\u6d4b\u7684\u6700\u5927\u9519\u8bef\u7387=:\u4e34\u754c\u503c \\(1-\\overline{\\epsilon}\\)\uff1a \\(\\(\\text{\u4e34\u754c\u503c }\\overline{\\epsilon}=\\max_{\\epsilon} \\epsilon\\\\\\text{s.t.} \\sum_{i=m\\times\\epsilon+1}^m{m\\choose i}\\epsilon^i(1-\\epsilon)^{m-i}\\le\\alpha\\)\\)</p> <ul> <li>\\(\\hat{\\epsilon}&lt;\\overline{\\epsilon}\\): \u5728 \u03b1 \u7684\u663e\u8457\u5ea6\u4e0b\uff0c\u5047\u8bbe \\(\\epsilon\\le\\epsilon_0\\) \u4e0d\u80fd\u88ab\u62d2\u7edd \ud83d\udff0 \u5728 1-\u03b1 \u7684\u7f6e\u4fe1\u5ea6\u8ba4\u4e3a\uff0c\\(\\epsilon\\le\\epsilon_0\\)</li> <li>\\(\\hat{\\epsilon}\\ge\\overline{\\epsilon}\\): \u5728 \u03b1 \u7684\u663e\u8457\u5ea6\u4e0b\uff0c\u5047\u8bbe \\(\\epsilon\\le\\epsilon_0\\) \u88ab\u62d2\u7edd \ud83d\udff0 \u5728 1-\u03b1 \u7684\u7f6e\u4fe1\u5ea6\u8ba4\u4e3a\uff0c\\(\\epsilon\\gt\\epsilon_0\\)</li> </ul> <p>\u786e\u5b9a\u4e00\u4e2a\u663e\u8457\u5ea6 \u03b1 \u5373 \u7f6e\u4fe1\u5ea6 1-\u03b1\uff0c\u5728\u6d4b\u8bd5\u96c6\u4e0a\u6d4b\u51fa \\(\\hat{\\epsilon}\\)\uff0c\u7b97\u51fa\u4e34\u754c\u503c \\(\\overline{\\epsilon}\\)\uff0c \\(\\epsilon\\xlongequal{SET}\\overline{\\epsilon}\\)</p> <p>\u03b1 \u4e00\u822c\u662f 0.05\uff0c 0.1</p> <p>\u6211\u4eec\u591a\u6b21\u91cd\u590d\u7559\u51fa\u6cd5\uff5c\u4ea4\u53c9\u9a8c\u8bc1\u6cd5\uff0c\u83b7\u5f97\u591a\u6b21\u6d4b\u8bd5\u9519\u8bef\u7387\u3002\u270f\ufe0f t\u68c0\u9a8c t-test\u3002\u53cc\u8fb9\u5047\u8bbe\u3002</p> <p>k \u6b21\u6d4b\u8bd5\uff0ck \u4e2a\u6d4b\u8bd5\u9519\u8bef\u7387 \\(\\hat{\\epsilon}_1,\\dots,\\hat{\\epsilon}_k\\) \\(\\implies\\) \u5e73\u5747\u6d4b\u8bd5\u9519\u8bef\u7387 \\(\\mu=\\frac{1}{k}\\sum\\limits_{i=1}^k\\hat{\\epsilon}_i\\), \u65b9\u5dee \\(\\sigma^2=\\frac{1}{k-1}\\sum\\limits_{i=1}^k(\\hat{\\epsilon}_i-\\mu)^2\\)\u3002\\(\\hat{\\epsilon}_1,\\dots,\\hat{\\epsilon}_k\\) \u662f\u5bf9\u6cdb\u5316\u9519\u8bef\u7387 \\(\\epsilon\\) \u7684\u72ec\u7acb\u91c7\u6837\u3002 \\(\\implies \\tau_t=\\cfrac{\\sqrt{k}(\\mu-\\epsilon)}{\\sigma}\uff5et(k-1)\\)\uff0c\u81ea\u7531\u5ea6=k-1 \u5bf9\u5047\u8bbe\u201c\\(\\epsilon=\\epsilon_0\\)\u201d \u548c\u663e\u8457\u5ea6 \u03b1 ,</p>"},{"location":"AI/eva/#generalization","title":"generalization \u6cdb\u5316\u6027\u80fd","text":"<p>generalization error, \u6cdb\u5316\u8bef\u5dee\u3002\u8bad\u7ec3\u6570\u636e\u96c6\u7684\u635f\u5931\u4e0e\u4e00\u822c\u5316\u7684\u6570\u636e\u96c6\u7684\u635f\u5931\u4e4b\u95f4\u7684\u5dee\u5f02</p> <p>\u6cdb\u5316\u8bef\u5dee\u53ef\u4ee5\u5206\u89e3\u4e3a Bias \u504f\u5dee\u3001Variance \u65b9\u5dee\u3001Noise \u566a\u58f0 \u671f\u671b\u6cdb\u5316\u8bef\u5dee = \u504f\u5dee + \u65b9\u5dee \u504f\u5dee=\u5b66\u4e60\u5668\u7684\u62df\u5408\u80fd\u529b \u65b9\u5dee=\u5b66\u4e60\u5668\u7a33\u5b9a\u6027</p> <p>bias-variance decomposition, \u504f\u5dee-\u65b9\u5dee\u5206\u89e3\uff0c\u5c31\u662f\u4ece\u504f\u5dee\u548c\u65b9\u5dee\u7684\u89d2\u5ea6\u6765\u89e3\u91ca\u5b66\u4e60\u7b97\u6cd5\u6cdb\u5316\u6027\u80fd\u7684\u4e00\u79cd\u91cd\u8981\u5de5\u5177\u3002</p>"},{"location":"AI/eva/#mse_1","title":"MSE","text":"<p>Mean Squared Error, MSE. one of evaluations of an estimator of parameter.</p> \\[  \\begin{align*}MSE(\\hat\\mu)=\\mathbb E\\Vert \\mu-\\hat\\mu \\Vert^2&amp;=\\mathbb E\\{\\red{(\\mu-\\hat\\mu)^T(\\mu-\\hat\\mu)_{\\in\\R}}\\}\\\\&amp;=\\mathbb Etr\\{ \\red{(\\mu-\\hat\\mu)(\\mu-\\hat\\mu)^T_{\\in S^n}}\\}\\\\&amp;=tr\\{Var(\\hat\\mu)\\}+\\Vert Bias(\\hat\\mu)\\Vert^2\\\\&amp;=tr\\{Var(\\hat\\mu)\\}+Bias(\\hat\\mu)^TBias(\\hat\\mu)\\end{align*} \\] <p>\u4e3a\u4ec0\u4e48MSE\u5e38\u7528?</p> <p>\u56e0\u4e3aMSE\u53ef\u4ee5\u5316\u6210 variance of estimate + bias of variance\u3002 - \u524d\u8005\u6211\u4eec\u5e0c\u671b\u8d8a\u5c0f\u8d8a\u597d\uff0c\u56e0\u4e3a\u65b9\u5dee\u5c31\u662f\u968f\u673a\u53d8\u91cf\u7684\u5206\u6563\u7a0b\u5ea6 - \u540e\u8005\u6211\u4eec\u5e0c\u671b\u8d8a\u5c0f\u8d8a\u597d\uff0c\u751a\u81f3\u5e0c\u671b\u4ed6\u80fd\u8fbe\u52300\u2192 unbiased estimate, \u56e0\u4e3a\u504f\u5dee\u662f estimate \u548cground truth \u4e4b\u95f4\u7684\u671f\u671b\u8ddd\u79bb</p> <p>UMVUE, uniformly minimum-variance unbiased estimator, \u5728\u65e0\u504f\u4f30\u8ba1\u5668\u4e2d\u8fdb\u884c\u6700\u4f73\u9009\u62e9\u7684\u6807\u51c6\uff1a\u5982\u679c\u5b83\u4eec\u90fd\u662f\u65e0\u504f\u7684\uff0c\u5219\u9009\u62e9\u65b9\u5dee\u6700\u5c0f\u7684\u90a3\u4e2a\uff01\u66f4\u901a\u4fd7\u7684\u8bf4\u6cd5\u5c31\u662f\u5c31\u662f\u201c\u5982\u679c\u6709\u4e24\u4e2a\u5177\u6709\u76f8\u540c\u504f\u5dee\u7684\u4f30\u8ba1\u5668\uff0c\u6211\u4eec\u9009\u62e9\u65b9\u5dee\u8f83\u5c0f\u7684\u4e00\u4e2a\u201d</p> <p>assume that \\(Y=f(X)+\u03b5,\u03b5\uff5eN(0,\u03c3_\u03b5)\\)</p> \\[ \\begin{align*}MSE&amp;=\\mathbb E\\{(Y-\\hat Y)^2\\}=\\mathbb E\\{(f_X-\\hat f_X)^2\\}\\\\&amp;=(\\mathbb E\\hat f- f)^2+\\mathbb E\\{(\\hat f-\\mathbb E \\hat f)^2\\}+\\sigma_\\epsilon^2\\\\&amp;=Bias^2+Var+\\text{Irreducible Error}\\end{align*} \\]"},{"location":"AI/eva/#bias","title":"bias, \u504f\u5dee","text":"<p>Bias. \\(=\\mathbb E\\hat f- f\\) \u7528\u6240\u6709\u53ef\u80fd\u7684\u8bad\u7ec3\u6570\u636e\u96c6\u8bad\u7ec3\u51fa\u7684\u6240\u6709\u6a21\u578b\u7684\u8f93\u51fa\u503c\u4e0e\u771f\u5b9e\u6a21\u578b\u7684\u8f93\u51fa\u503c\u4e4b\u95f4\u7684\u5dee\u5f02\u3002\u5ea6\u91cf\u4e86\u5b66\u4e60\u7b97\u6cd5\u7684\u671f\u671b\u9884\u6d4b\u4e0e\u771f\u5b9e\u7ed3\u679c\u7684\u504f\u79bb\u7a0b\u5ea6\uff0c\u5373\u523b\u753b\u4e86\u5b66\u4e60\u7b97\u6cd5\u672c\u8eab\u7684\u62df\u5408\u80fd\u529b\u3002 Bias\u7684\u5bf9\u8c61\u662f\u5355\u4e2a\u6a21\u578b\uff0c\u662f\u671f\u671b\u8f93\u51fa\u4e0e\u771f\u5b9e\u6807\u8bb0\u7684\u5dee\u522b\u3002\u5b83\u63cf\u8ff0\u4e86\u6a21\u578b\u5bf9\u672c\u8bad\u7ec3\u96c6\u7684\u62df\u5408\u7a0b\u5ea6\u3002</p>"},{"location":"AI/eva/#variance","title":"variance, \u65b9\u5dee","text":"<p>Variance\\(=\\mathbb E\\{(\\hat f-\\mathbb E \\hat f)^2\\}\\) \u6570\u636e\u7684\u79bb\u6563\u7a0b\u5ea6\uff0c\u4e0d\u540c\u7684\u8bad\u7ec3\u6570\u636e\u96c6\u8bad\u7ec3\u51fa\u7684\u6a21\u578b\u8f93\u51fa\u503c\u4e4b\u95f4\u7684\u5dee\u5f02.\u5ea6\u91cf\u4e86\u540c\u6837\u5927\u5c0f\u7684\u8bad\u7ec3\u96c6\u7684\u53d8\u52a8\u6240\u5bfc\u81f4\u7684\u5b66\u4e60\u6027\u80fd\u7684\u53d8\u5316\uff0c\u5373\u523b\u753b\u4e86\u6570\u636e\u6270\u52a8\u6240\u9020\u6210\u7684\u5f71\u54cd\u3002 Variance\u7684\u5bf9\u8c61\u662f\u591a\u4e2a\u6a21\u578b\uff0c\u662f\u76f8\u540c\u5206\u5e03\u7684\u4e0d\u540c\u6570\u636e\u96c6\u8bad\u7ec3\u51fa\u6a21\u578b\u7684\u8f93\u51fa\u503c\u4e4b\u95f4\u7684\u5dee\u5f02\u3002\u5b83\u523b\u753b\u7684\u662f\u6570\u636e\u6270\u52a8\u5bf9\u6a21\u578b\u7684\u5f71\u54cd\u3002</p>"},{"location":"AI/eva/#noise","title":"noise, \u566a\u8072","text":"<p>Noise. \\(=\u03b5\uff5eN(0,\u03c3_\u03b5)\\) \u5b66\u4e60\u7b97\u6cd5\u6240\u65e0\u6cd5\u89e3\u51b3\u7684\u95ee\u9898\uff0c\u6570\u636e\u7684\u8d28\u91cf\u51b3\u5b9a\u4e86\u5b66\u4e60\u7684\u4e0a\u9650\u3002\u6211\u4eec\u8981\u505a\u7684\u5c31\u662f\u5c3d\u53ef\u80fd\u7684\u63a5\u8fd1\u8fd9\u4e2a\u4e0a\u9650\u3002\u8868\u8fbe\u4e86\u5728\u5f53\u524d\u4efb\u52a1\u4e0a\u4efb\u4f55\u5b66\u4e60\u7b97\u6cd5\u6240\u80fd\u8fbe\u5230\u7684\u671f\u671b\u6cdb\u5316\u8bef\u5dee\u7684\u4e0b\u754c\uff0c\u5373\u523b\u753b\u4e86\u5b66\u4e60\u95ee\u9898\u672c\u8eab\u7684\u96be\u5ea6</p>"},{"location":"AI/eva/#bias-variance-dilemma-","title":"bias-variance dilemma, \u504f\u5dee-\u65b9\u5dee\u7a98\u5883","text":"<p>\u8bad\u7ec3\u8bef\u5dee \\(\\xrightarrow{\u8fd1\u4f3c}\\) \u6d4b\u8bd5\u8bef\u5dee\\(\\xrightarrow{\u8fd1\u4f3c}\\)  \u6cdb\u5316\u8bef\u5dee\u3002</p> <p>\u51b3\u5b9a\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u6548\u679c\u662f\u5426\u597d\u7684\u56e0\u7d20\uff1a - \u964d\u4f4e\u8bad\u7ec3\u8bef\u5dee - \u7f29\u5c0f \u8bad\u7ec3\u8bef\u5dee &amp; \u6d4b\u8bd5\u8bef\u5dee\u7684\u5dee\u8ddd\u3002</p> ![](./pics/RES_fit_3.png) <p>\u8bad\u7ec3\u4e0d\u8db3\u65f6\uff1a\u5b66\u4e60\u5668\u7684\u62df\u5408\u80fd\u529b\u4e0d\u591f\u5f3a\uff0c\u8bad\u7ec3\u6570\u636e\u7684\u6270\u52a8\u4e0d\u8db3\u4ee5\u4f7f\u5b66\u4e60\u5668\u4ea7\u751f\u663e\u8457\u53d8\u5316\uff0c\u6b64\u65f6\u504f\u5dee\u4e3b\u5bfc\u4e86\u6cdb\u5316\u9519\u8bef\u7387\u3002\u6a21\u578b\u5728\u8bad\u7ec3\u96c6\u4e0a\u4e0d\u80fd\u83b7\u5f97\u8db3\u591f\u4f4e\u7684\u8bef\u5dee\uff1b\u8bad\u7ec3\u7a0b\u5ea6\u5145\u8db3\u540e\uff1a\u5b66\u4e60\u5668\u7684\u62df\u5408\u80fd\u529b\u5df2\u7ecf\u975e\u5e38\u5f3a\uff0c\u8bad\u7ec3\u6570\u636e\u53d1\u751f\u7684\u8f7b\u5fae\u6270\u52a8\u90fd\u4f1a\u5bfc\u81f4\u5b66\u4e60\u5668\u53d1\u751f\u663e\u8457\u53d8\u5316\uff0c\u65b9\u5dee\u4e3b\u5bfc\u4e86\u6cdb\u5316\u9519\u8bef\u7387\uff0c\u8bad\u7ec3\u8bef\u5dee\u548c\u6d4b\u8bd5\u8bef\u5dee\u7684\u5dee\u8ddd\u3002\u82e5\u8bad\u7ec3\u6570\u636e\u81ea\u8eab\u7684\u3001\u975e\u5168\u5c40\u7684\u7279\u6027\u88ab\u5b66\u4e60\u5668\u5b66\u5230\u4e86\uff0c\u5219\u5c06\u53d1\u751f\u8fc7\u62df\u5408</p> <p>Understanding the Bias-Variance Tradeoff</p>"},{"location":"AI/eva/#underfitting","title":"underfitting \u6b20\u62df\u5408","text":"<p>\u8868\u793a\u6a21\u578b\u4e0d\u61c2\u6570\u636e\uff0c\u65e0\u6cd5\u5b66\u5230\u6570\u636e\u4e4b\u95f4\u5185\u5728\u7684\u89c4\u5f8b\uff0c\u5ffd\u7565\u6570\u636e\u7279\u5f81\u3002\u5ffd\u7565\u4e86\u591a\u5c11\u6570\u636e</p> <p>Methods to Prevent Underfitting\uff1a</p> <p>1\u3001\u5bfb\u627e\u66f4\u597d\u7684\u7279\u5f81 -- \u5177\u6709\u4ee3\u8868\u6027\u3002 2\u3001\u7528\u66f4\u591a\u7684\u7279\u5f81 -- \u589e\u5927\u8f93\u5165\u5411\u91cf\u7684\u7ef4\u5ea6\u3002\uff08\u589e\u52a0\u6a21\u578b\u590d\u6742\u5ea6\uff09</p> <p>\u6b20\u62df\u5408\uff1a \u5355\u7eaf\u589e\u52a0\u8bad\u7ec3\u6570\u636e\u96c6\u6ca1\u6709\u7528\u3002\u6838\u5fc3\u662f\u6a21\u578b\u592a\u62c9\u5b66\u4e0d\u5230\u4e1c\u897f\u3002\u589e\u52a0\u6a21\u578b\u590d\u6742\u5ea6\u624d\u662f\u6b63\u9053\u3002</p> <p>\u5373\u4f7f\u589e\u52a0\u6570\u636e\u7684\u6570\u91cf\uff0c\u65e0\u8bba\u662f\u4f7f\u7528\u8bad\u7ec3\u6570\u636e\u8fd8\u662f\u6d4b\u8bd5\u6570\u636e\uff0c\u7cbe\u5ea6\u4e5f\u90fd\u4f1a\u5f88\u5dee\u7684\u72b6\u6001</p>"},{"location":"AI/eva/#overfitting-","title":"overfitting, \u8fc7\u62df\u5408 - \u9ad8\u65b9\u5dee","text":"<p>\u662f\u6307\u6a21\u578b\u5bf9\u6570\u636e\u7684\u4f9d\u8d56\u7a0b\u5ea6.</p> <p>Methods to Prevent Overfitting:</p> <ol> <li>more training examples \u589e\u5927\u6570\u636e\u96c6\u5408 -- \u4f7f\u7528\u66f4\u591a\u7684\u6570\u636e\uff0c\u51cf\u5c11\u6570\u636e\u6270\u52a8\u6240\u9020\u6210\u7684\u5f71\u54cd</li> <li>smaller  sets of features, \u51cf\u5c11\u6570\u636e\u7279\u5f81 -- \u51cf\u5c11\u6570\u636e\u7ef4\u5ea6\uff0c\u51cf\u5c11\u6a21\u578b\u590d\u6742\u5ea6</li> <li>increasing regularization hyperparameter lambda. decrease model complexity \u6b63\u5219\u5316\u65b9\u6cd5</li> <li>\u4ea4\u53c9\u9a8c\u8bc1\u6cd5</li> </ol>"},{"location":"AI/eva/#of-vs-uf","title":"OF vs UF","text":"<p>\u5047\u8bbe\u7ea2\u8272\u7684\u9776\u5fc3\u533a\u57df\u662f\u5b66\u4e60\u7b97\u6cd5\u5b8c\u7f8e\u7684\u6b63\u786e\u9884\u6d4b\u503c\uff0c\u84dd\u8272\u70b9\u4e3a\u8bad\u7ec3\u6570\u636e\u96c6\u6240\u8bad\u7ec3\u51fa\u7684\u6a21\u578b\u5bf9\u6837\u672c\u7684\u9884\u6d4b\u503c\u5de6\u8fb9\u4e00\u5217\u7684\u84dd\u8272\u70b9\u6bd4\u8f83\u96c6\u4e2d\u2014\u2014\u65b9\u5dee\u8f83\u5c0f\uff0c\u53f3\u8fb9\u4e00\u5217\u7684\u84dd\u8272\u70b9\u6bd4\u8f83\u5206\u6563\u2014\u2014\u65b9\u5dee\u8f83\u5927\u4e0a\u8fb9\u4e00\u884c\u7684\u84dd\u8272\u70b9\u6bd4\u8f83\u9760\u8fd1\u7ea2\u8272\u9776\u5fc3\u2014\u2014\u504f\u5dee\u8f83\u5c0f\uff0c\u4e0b\u8fb9\u4e00\u884c\u7684\u84dd\u8272\u70b9\u6bd4\u8f83\u8fdc\u79bb\u9776\u5fc3\u2014\u2014\u504f\u5dee\u8f83\u5927</p> <p>\u70b9\u5230\u62df\u5408\u76f4\u7ebf\u8ddd\u79bb\u548c\u7684\u5927\u5c0f\u4f5c\u4e3a\u504f\u5dee\u7684\u5927\u5c0f\u9009\u51fa\u62df\u5408\u66f2\u7ebf\u4e0a\u7684\u70b9\uff0c\u7136\u540e\u8ba1\u7b97\u8fd9\u4e9b\u70b9\u7684\u65b9\u5dee\uff0c\u65b9\u5dee\u8d8a\u5927\u8868\u793a\u8d8a\u79bb\u6563\uff0c\u62df\u5408\u76f4\u7ebf\u7a7f\u8fc7\u7684\u70b9\u8d8a\u591a\uff0c\u65b9\u5dee\u5f80\u5f80\u8d8a\u5927\uff0c\u8d8a\u5bb9\u6613\u8fc7\u62df\u5408</p> <p>\u6211\u4eec\u4ee5\u6570\u636e\u7684\u6570\u91cf\u4e3a\u6a2a\u8f74\u3001\u4ee5\u7cbe\u5ea6\u4e3a\u7eb5\u8f74\uff0c\u7136\u540e\u628a\u7528\u4e8e\u8bad\u7ec3\u7684\u6570\u636e\u548c\u7528\u4e8e\u6d4b\u8bd5\u7684\u6570\u636e\u753b\u6210\u5b66\u4e60\u66f2\u7ebf.</p> <p>\u5b66\u4e60\u66f2\u7ebf, \u4ee5\u6570\u636e\u7684\u6570\u91cf\u4e3a\u6a2a\u8f74\u3001\u4ee5\u7cbe\u5ea6\u4e3a\u7eb5\u8f74\uff0c\u6bd4\u8f83\u7528\u4e8e\u8bad\u7ec3\u7684\u6570\u636e\u548c\u7528\u4e8e\u6d4b\u8bd5\u7684\u6570\u636e\u3002</p> <p>\u8fc7\u62df\u5408\u53ea\u5bf9\u8bad\u7ec3\u6570\u636e\u62df\u5408\u5f97\u8f83\u597d</p>"},{"location":"AI/eva/#_9","title":"\u89e3\u51b3\u65b9\u6cd5","text":"underfitting overfitting performace high training error high testing error low training error high testing error ^ high bias \u9ad8\u504f\u5deelow variance low biashigh variance \u9ad8\u65b9\u5dee stategies increase model complexity\u6839\u672c 1. more training examples, 2. smaller  sets of features, 3. increasing regularization hyperparameter lambda.  decrease model complexity <p>\u270f\ufe0f \u901a\u8fc7\u8c03\u6574\u6a21\u578b\u7684\u5bb9\u91cf\uff0c\u63a7\u5236\u6a21\u578b\u662f\u5426\u504f\u5411 UF\uff5cOF</p>"},{"location":"AI/eva/#capacity","title":"capacity \u5bb9\u91cf","text":"<p>\u6a21\u578b\u7684\u5bb9\u91cf capacity\u3002\u5176\u62df\u5408\u5404\u79cd\u51fd\u6570\u7684\u80fd\u529b\u3002 \u5bb9\u91cf\u4f4e\u7684\u6a21\u578b\u53ef\u80fd\u5f88\u96be\u62df\u5408\u8bad\u7ec3\u96c6\uff0c\u5bb9\u91cf\u9ad8\u7684\u6a21\u578b\u53ef\u80fd\u4f1a\u8fc7\u62df\u5408\uff0c\u56e0\u4e3a\u8bb0\u4f4f\u4e86\u4e0d\u9002\u7528\u4e8e\u6d4b\u8bd5\u96c6\u7684\u8bad\u7ec3\u96c6\u6027\u8d28\u3002</p> <p>\u8868\u793a\u5bb9\u91cf representational capacity\u3002\u6a21\u578b\u89c4\u5b9a\u4e86\u8c03\u6574\u53c2\u6570\u964d\u4f4e\u8bad\u7ec3\u76ee\u6807\u51fd\u6570\u65f6\uff0c\u5b66\u4e60\u7b97\u6cd5\u53ef\u4ee5\u4ece\u51fd\u6570\u65cf\u4e2d\u9009\u62e9\u90a3\u4e2a\u5177\u4f53\u51fd\u6570\u3002 \u6709\u6548\u5bb9\u91cf effective capacity\u3002\u5b66\u4e60\u7b97\u6cd5\u5e76\u4e0d\u4f1a\u771f\u7684\u9009\u5230\u6700\u4f18\u51fd\u6570\uff0c\u800c\u662f\u53d7\u9650\u4e8e\u989d\u5916\u7684\u9650\u5236\u56e0\u7d20\uff0c\u9009\u62e9\u4e00\u4e2a\u53ef\u4ee5\u5927\u5927\u964d\u4f4e\u8bad\u7ec3\u8bef\u5dee\u7684\u51fd\u6570\u3002</p> <p>\u8868\u793a\u5bb9\u91cf\uff08\u6700\u4f18\u51fd\u6570\uff09 &gt; \u6709\u6548\u542b\u91cf\uff08\u6700\u7ec8\u9009\u62e9\u7684\u51fd\u6570\uff09</p> <p>\u4f46\u662f\u5bb9\u91cf\u7406\u8bba\u5f88\u5c11\u5e94\u7528\u4e8e\u5b9e\u9645\u7684\u6df1\u5ea6\u5b66\u4e60\u7b97\u6cd5</p> <ul> <li>\u9009\u62e9 \u5047\u8bbe\u7a7a\u95f4 hypothesis space\u3002\u5b66\u4e60\u7b97\u6cd5\u53ef\u4ee5\u9009\u62e9\u4e3a\u89e3\u51b3\u65b9\u6848\u7684\u51fd\u6570\u96c6\u3002     &gt; \u7ebf\u6027\u56de\u5f52\u51fd\u6570 \u27a1\ufe0f \u6240\u6709\u7ebf\u6027\u51fd\u6570     &gt; \u5e7f\u4e49\u7ebf\u6027\u56de\u5f52 \u27a1\ufe0f \u6240\u6709\u7ebf\u6027\u51fd\u6570+\u591a\u9879\u5f0f\u51fd\u6570</li> </ul>"},{"location":"AI/highd/","title":"high dimentional DA","text":"<p>Data mining is the process of discovering new patterns from LARGE DATA sets using methods of artificial intelligence, machine learning, statistics and database systems.</p> <p>Curse of Dimensionality \u7ef4\u5ea6\u707e\u96be\u3002 \u4f1a\u5bfc\u81f4\u5206\u7c7b\u5668\u51fa\u73b0\u8fc7\u62df\u5408\u3002\u8fd9\u662f\u56e0\u4e3a\u5728\u6837\u672c\u5bb9\u91cf\u56fa\u5b9a\u65f6\uff0c\u968f\u7740\u7279\u5f81\u6570\u91cf\u7684\u589e\u52a0\uff0c\u5355\u4f4d\u7a7a\u95f4\u4e2d\u7684\u6837\u672c\u6570\u91cf\u4f1a\u53d8\u5c11\u3002\u6070\u5f53\u7684\u7ef4\u6570\u7279\u5f81\u6570\u5bf9\u4e8e\u673a\u5668\u5b66\u4e60\u6a21\u578b\u975e\u5e38\u91cd\u8981\u3002\u6df1\u5ea6\u5b66\u4e60\u901a\u8fc7\u5bf9\u6837\u672c\u7684\u7279\u5f81\u8fdb\u884c\u590d\u6742\u7684\u53d8\u6362\uff0c\u5f97\u5230\u5bf9\u7c7b\u522b\u6700\u6709\u6548\u7684\u7279\u5f81\uff0c\u4ece\u800c\u63d0\u9ad8\u673a\u5668\u5b66\u4e60\u7684\u6027\u80fd\u3002</p> <p>\u5047\u8bbe\u6837\u672c\u96c6\u662f\u7531\u5706\u5f62\u548c\u4e09\u89d2\u5f62\u7ec4\u6210\u768420\u4e2a\u6837\u672c\uff0c\u5047\u8bbe\u8fd9\u4e9b\u6837\u672c\u5747\u5300\u5730\u5206\u5e03\u5728\u8fd94\u4e2a\u533a\u57df\uff0c\u5219\u6bcf\u4e2a\u533a\u57df\u7684\u6837\u672c\u4e2a\u6570\u7ea6\u4e3a5\u4e2a\u3002\u82e5\u5e0c\u671b\u5728\u4e8c\u7ef4\u7a7a\u95f4\u4e2d\u6bcf\u4e2a\u533a\u57df\u7684\u6837\u672c\u6570\u91cf\u4e0e\u4e00\u7ef4\u65f6\u5927\u81f4\u76f8\u7b49\uff0c\u5219\u9700\u8981400\u4e2a\u6837\u672c\uff1b\u82e5\u662f\u4e09\u7ef4\u7a7a\u95f4\uff0c\u5219\u9700\u89818000\u4e2a\u6837\u672c</p> <p>\u5f88\u5c11 observation n\uff0c \u5f88\u591a features p \u60c5\u51b5\u4e0b\u7684\u9ad8\u7ef4. p is very large, but n is relatively small.</p> <p>\u5c31\u62ff\u533b\u5b66\u6765\u8bf4\uff0c\u75c5\u4eba\u603b\u662f\u5c11\u6570\u7684\uff0c\u4f46\u662f\u76f8\u5173\u7684\u56e0\u7d20\u603b\u662f\u7279\u522b\u591a\u7684\u3002\u8b6c\u5982\u90a3\u4e2a\u57fa\u56e0\u68c0\u6d4b\u3002\u6211\u4eec\u603b\u5f97\u89e3\u51b3\u8fd9\u79cd\u9ad8\u7ef4\u95ee\u9898\u3002</p> <p>\u6709569\u4e2aobservations\uff0c30\u4e2a features\u3002\u5bf9\u4e8e\u6c42features \u7684 covariance matrix \\(\u03a3\\in S\\)\u6765\u8bf4\uff0c\u6709\\(\\cfrac{30*29}{2}\\approx 430\\)\u4e2a parameters \u8981\u53bb estimate\u3002\u5982\u679c take average \u51e0\u4e4e\u662f\u4e00\u4e2aparameter \u4e00\u4e2aobservation\uff0c\u8fd9\u5df2\u7ecf\u7b97\u662f high dimensional problem\uff0c\u9664\u975e\u6570\u636every clean.</p> \u6570\u636e\u964d\u7ef4 dimensionally reduction \u7279\u5f81\u9009\u62e9 Variable Selection \u591a\u4e2a\u7279\u5f81\u5408\u6210\u4e3a\u4e00\u4e2a\u7279\u5f81 \u5728\u591a\u4e2a\u7279\u5f81\u4e2d\u9009\u62e9\u67d0\u4e2a\u7279\u5f81 \u83b7\u53d6\u65e0\u6cd5\u89e3\u91ca\u7684\u7279\u5f81\u4e0e\u53d8\u91cf\u4e4b\u95f4\u7684\u5173\u7cfb \u53ef\u89e3\u91ca\u6027\u5f3a"},{"location":"AI/highd/#some-special-notation","title":"some special notation","text":"<p>Random Vector \\(Z=\\begin{bmatrix}Z_1\\\\\\vdots\\\\Z_p\\end{bmatrix}\\in\\R^p\\)</p> <ul> <li>Expectation Matrix \\(\\mathbb EZ=\\begin{bmatrix}\\mathbb EZ_1\\\\\\vdots\\\\\\mathbb EZ_p\\end{bmatrix}\\)</li> <li>Covariance Matrix \\(\\Sigma=Var(Z)\\\\=\\mathbb E\\{(Z-\\mathbb EZ)(Z-\\mathbb EZ)^T\\}\\\\=\\begin{bmatrix}Var(Z_1)&amp;Cov(Z_1,Z_2)&amp;\\dots&amp;Cov\\{Z_1,Z_p\\}\\\\Cov(Z_1,Z_2)&amp;Var(Z_2)&amp;\\dots&amp;Cov(Z_2,Z_p)\\\\\\vdots&amp;&amp;\\ddots&amp;\\vdots\\\\Cov(Z_p,Z_1)&amp;Cov(Z_p,Z_2)&amp;\\dots&amp;Var(Z_p)\\end{bmatrix}\\)<ul> <li>\\(\\Sigma \\succeq0\\) proof: the sample covariance matrix is non-negative definite.</li> </ul> </li> </ul> <p>Correlation\u53ea\u662f\u8003\u5bdf\u7ebf\u6027\u5173\u7cfb\u7684\u76f8\u5173\u6027\uff0c\u5e76\u4e0d\u662f\u4ee3\u8868independent</p> <ul> <li>\\(\\mathbb E(X+Y)=\\mathbb EX+\\mathbb EY\\)</li> <li> <p>\\(W:=A_{p\\times p}Z_{p\\times 1}+c\\in\\R^p\\), constant matrix\u00a0A, constant vector c</p> <p>\\(\\mathbb E(AZ+c)=c+A\\mathbb EZ\\)</p> <p>\\(Var(AZ+c)=Var(AZ)=AVar(Z)A^T\\)</p> </li> <li> <p>\\(\\mathbb E(AXB+c)=A\\mathbb EXB+c\\)</p> </li> <li> <p>Positive-definite matrices )</p> <p>Eigenvalue decomposition \\(A=\\Gamma\\Lambda\\Gamma^T=\\sum\\limits_{i=1}^p\\lambda_i\\gamma_i\\gamma_i^T\\)</p> </li> </ul> <p>Multivariate Normal Distribution \\(Z\uff5eN(b,\\Sigma)\\) Suppose \\(Z=\\begin{bmatrix}\u03be_1\\\\\\vdots\\\\\u03be_p\\end{bmatrix}\\in\\R^p\\) is a random vector, \\(\\mathbb EZ=b\\in\\R^p,Var(Z)=\\Sigma\\in S^p\\) \\(\\forall l\\in\\R^p,l^TZ\\in\\R\\) \uff5e Normal distribution. \\(\\implies Z\\) follows Multivariate Normal Distribution. \\(\\iff Z\uff5eN(b,\\Sigma),b=\\begin{bmatrix}b_1\\\\\\vdots\\\\b_p\\end{bmatrix},\\Sigma=\\begin{bmatrix}\\sigma_{11}&amp;\\dots&amp;\\sigma_{1p}\\\\\\vdots&amp;\\ddots&amp;\\vdots\\\\\\sigma_{p1}&amp;\\dots&amp;\\sigma_{pp}\\\\\\end{bmatrix}\\\\ \\iff  f_Z(\u03be_1,\\dots,\u03be_p)=\\cfrac{1}{(2\\pi)^{k/2}|\\Sigma|^{1/2}}\\exp\\Big(-\\cfrac{1}{2}(\u0396-b)^T)\\Sigma^{-1}(Z-b) \\Big)\\)</p> <p>properties:</p> <ol> <li>\\(\\forall\\text{ constant }l\\in\\R^p,c\\in\\R,\\space l^TZ+c\uff5eN(l^Tb+c,l^T\\Sigma l)\\)</li> <li> <p>Partial correlation and conditional independence \\((\u0396_1^T,\u0396_2^T)^T\uff5eN\\Big(\\begin{bmatrix}b_1^T&amp;b_2^T\\end{bmatrix}^T,\\begin{bmatrix}\\Sigma_{11}&amp;\\Sigma_{12}\\\\\\Sigma_{21}&amp;\\Sigma_{22}\\end{bmatrix}\\Big)\\) \\(\\\\\\quad \\iff \\begin{bmatrix}\u03be_{11}\\\\\\vdots\\\\\u03be_{1p}\\\\\u03be_{21}\\\\\\vdots\\\\\u03be_{2p}\\end{bmatrix}\uff5eN\\Big(\\begin{bmatrix}b_1\\\\b_2\\end{bmatrix},\\begin{bmatrix}\\Sigma_{11}&amp;\\Sigma_{12}\\\\\\Sigma_{21}&amp;\\Sigma_{22}\\end{bmatrix}\\Big)\\\\\\quad\\iff \\begin{cases}Z_i\uff5e\u039d(b_i,\\Sigma_{ii})\\\\Z_1|Z_2\uff5eN\\Big(b_1+\\Sigma_{12}\\Sigma_{22}^{-1}(X_2-b_2),\\Sigma_{11}-\\Sigma_{12}\\Sigma_{22}^{-1}\\Sigma_{21}\\Big)\\end{cases}\\)</p> </li> <li> <p>proof:</p> </li> <li> <p>\u5728 normal multivariate distribution \u91cc Covariance = 0  \u7b49\u540c\u4e8e independent \\(cov(Z_1,Z_2)=\\sigma_{ij}=0\\iff Z_1,Z_2 \\text{ are independent}\\)</p> </li> <li>proof</li> <li>\\(\u03be_k\uff5eN(b_k,\\sigma_{kk}),\\begin{cases}\u03be_i+\u03be_j\uff5eN(b_i+b_j,\\sigma_{ii}+2\\sigma_{ij}+\\sigma_{j})\\in\\R\\\\\u03be_i-\u03be_j\uff5eN(b_i-b_j)\uff5e\u039d(\\sigma_{ii}-2\\sigma_{ij}+\\sigma_{jj})\\in\\R\\end{cases}\\)</li> </ol> <p>I.I.D. observations. \\(\\text{Suppose } X_1,X_2,\\dots,X_m\\in\\R^p \\text{ are i.d.d.}\\)</p> <ol> <li>\\(\\mathbb EX=\\overline X=\\cfrac{1}{n}\\sum\\limits_{i=1}^nX_i\\)</li> <li>Sample covariance matrix \\(S=\\begin{cases}\\cfrac{1}{n}\\sum\\limits_{i=1}^n(X_i-\\overline X)(X_i-\\overline X)^T\\\\\\cfrac{1}{n-1}\\sum\\limits_{i=1}^n(X_i-\\overline X)(X_i-\\overline X)^T\\end{cases}\\in S^{p}\\) \u5173\u4e8e\u8fd9\u4e2a n-1 \u662f\u56e0\u4e3a\u5747\u503c\u5df2\u77e5\uff0c\u65e0\u504f\u4f30\u8ba1</li> <li>Central Limit Theorem CLT. Suppose \\(X_1,X_2,\\dots,X_m\\in\\R^p \\text{ are i.d.d.},\\mathbb EX=\\mu\\in\\R^p,Cov(X)=\\Sigma\\\\\\qquad\\lim\\limits_{n\\rightarrow\\infin}\\cfrac{1}{n}\\sum\\limits_{i=1}^n(X_i-\\mu)\\rightarrow N(0,\\Sigma)\\)</li> <li>Law of Large numbers. Suppose \\(X_1,X_2,\\dots,X_m\\in\\R^p \\text{ are i.d.d.},EX_i=\\mu,Cov(X_i)=\\Sigma\\\\\\qquad\\begin{cases}\\lim\\limits_{n\\rightarrow\\infin}\\cfrac{1}{n}\\sum\\limits_{i=1}^nX_i\\rightarrow E(X_i)=\\mu\\\\\\lim\\limits_{n\\rightarrow\\infin}\\cfrac{1}{n}\\sum\\limits_{i=1}^n(X_i-\\mu)(X_i-\\mu)^T\\rightarrow\\Sigma\\end{cases}\\)</li> </ol> <p>(AMA565_L0_T2) Suppose\u00a0\\(e\u00a0\uff5e\u00a0N(0,\u03c3^2I)\\), what is the distribution of \\(\\hat{\u03b2}\u00a0= (X^TX)^{\u22121}X^T(X\u03b2\u00a0+\u00a0e)\\)? (Assume that the inverse and matrix multiplication are well defined)</p> <p>(AMA565_L0_T3) Suppose\u00a0\\(X\u00a0\uff5e\u00a0N\u00a0(\u03bc,\u00a0\u03a3)\\), and let the eigenvalue decomposition of\u00a0\\(\u03a3 = (\u03c3_{ij})_{1\u2264i,j\u2264p}\\)\u00a0be given as\u00a0\\(\u03a3 = \u0393\u039b\u0393\u2032\\)\u00a0where\u00a0\u0393\u00a0is an orthogonal matrix and\u00a0\\(\u039b = \\text{diag}\\{\u03bb_1, . . . , \u03bb_p\\}\\)\u00a0is the matrix of the eigenvalues. 1). What is the distribution of\u00a0\\(\u0393\u2032X\\)?&gt; &gt; 2). Let\u00a0\\(\u03a3^{\u2212\u00a01/2}\u00a0= \u0393\u039b^{\u2212\u00a01/2}\u00a0\u0393\u2032.\\) What is the distribution of\u00a0\\(\u03a3^{\u2212\u00a01/2}\u00a0X\\)? 3). Suppose\u00a0p\u00a0= 2\u00a0and denote\u00a0\\(X\u00a0= (X_1, X_2)\u2032\\). In addition,\u00a0\\(\u03c3_{11}=\u03c3_{22} = 1, \u03c3_{12}=\u03c1\\). What is the distribution of \\((Y_1,Y_2), Y_1=\\cfrac{(X_1+X_2)}{\\sqrt{2+2\u03c1}}, Y_2 = \\cfrac{(X_1 \u2212 X_2)}{\\sqrt{2 \u2212 2\u03c1}} ?\\)</p>"},{"location":"AI/highd/#special-matrix","title":"Special Matrix","text":"<p>\\(A=11^T=\\begin{bmatrix}1&amp;1&amp;\\dots&amp;1\\\\\\vdots&amp;\\ddots&amp;\\dots&amp;\\vdots\\\\1&amp;\\dots&amp;\\dots&amp;1\\end{bmatrix}\\in\\R^p=p\\cdot \\begin{bmatrix}\\cfrac{1}{\\sqrt p}\\\\\\vdots\\\\\\cfrac{1}{\\sqrt{p}}\\end{bmatrix}*\\begin{bmatrix}\\cfrac{1}{\\sqrt p}&amp;\\dots&amp;\\cfrac{1}{\\sqrt{p}}\\end{bmatrix}+0...\\)</p> <p>AR(1) model \\(A=\\begin{bmatrix}1&amp;\\rho&amp;\\rho^2&amp;\\dots&amp;\\rho^{n-1}\\\\\\rho&amp;1&amp;\\rho&amp;\\dots&amp;\\rho^{n-2}\\\\\\vdots&amp;\\vdots&amp;\\vdots&amp;\\ddots&amp;\\vdots\\\\\\rho^{n-1}&amp;\\rho^{n-2}&amp;\\dots&amp;\\dots&amp;1\\end{bmatrix} \\xrightarrow{e.g,}\\begin{bmatrix}1&amp;0.9&amp;0.9^2&amp;0.9^3\\\\0.9&amp;1&amp;0.9&amp;0.9^2\\\\0.9^2&amp;0.9&amp;1&amp;0.9\\\\0.9^3&amp;0.9^2&amp;0.9&amp;1\\end{bmatrix}\\)</p>"},{"location":"AI/highd/#variable-selection","title":"Variable Selection","text":"<p>\ud83d\udcd1\u00a0ref</p> <ul> <li>\u5982\u4f55\u8fdb\u884c\u7279\u5f81\u9009\u62e9\uff08\u7406\u8bba\u7bc7\uff09\u673a\u5668\u5b66\u4e60\u4f60\u4f1a\u9047\u5230\u7684\u201c\u5751\u201d</li> <li>Are screening methods useful in feature selection? An empirical study</li> </ul> <p>\u7279\u5f81 |useful, important features|irreverent features|redundant feature| |--|--|--| |\u6211\u4eec\u5e0c\u671b\u80fd\uff1aextract \u4ed6\u4eec\uff0c\u4ed6\u4eec\u80fd\u4e3b\u5bfc\u6574\u4e2a signals|\u65e0\u5173\u7279\u5f81\u3002\u6709\u4ed6\u6ca1\u4ed6\u90fd\u4e00\u6837|\u5197\u4f59\u7279\u5f81\u3002Delete|</p> <p>redundant variable. that preditor with 0 coefficient  \\(\\beta_k=0\\implies\\)  unimportant and meaningless</p> <p>Variable, Predictor, in the model, plays two roles: improving the model flexibility and adversely affecting the model stability. Redundant variables are not helpful in prediction, thus should be removed.</p> <p>\u4e3a\u4ec0\u4e48\u6211\u4eec\u8981 Figure out what important variables are and Delete redundant features\uff1f</p> <p>\u56e0\u4e3a\u5982\u679c\u6211\u4eec\u4e0d\u5904\u7406\u6389 redundant variables\uff0c \u90a3\u4e9b noises created by redundant variables maybe dominate the signals, causing trouble to ask for allocating those useful signals. \u6bd4\u5982\uff0c\u901a\u8fc7\u623f\u5c4b\u7684\u9762\u79ef\uff0c\u5367\u5ba4\u7684\u9762\u79ef\uff0c\u8f66\u5e93\u7684\u9762\u79ef\uff0c\u6240\u5728\u57ce\u5e02\u7684\u6d88\u8d39\u6c34\u5e73\uff0c\u6240\u5728\u57ce\u5e02\u7684\u7a0e\u6536\u6c34\u5e73\u7b49\u7279\u5f81\u6765\u9884\u6d4b\u623f\u4ef7\uff0c\u90a3\u4e48\u6d88\u8d39\u6c34\u5e73\uff08\u6216\u7a0e\u6536\u6c34\u5e73\uff09\u5c31\u662f\u591a\u4f59\u7279\u5f81\u3002\u8bc1\u636e\u8868\u660e\uff0c\u6d88\u8d39\u6c34\u5e73\u548c\u7a0e\u6536\u6c34\u5e73\u5b58\u5728\u76f8\u5173\u6027\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5176\u4e2d\u4e00\u4e2a\u7279\u5f81\u5c31\u591f\u4e86\uff0c\u56e0\u4e3a\u53e6\u4e00\u4e2a\u80fd\u4ece\u5176\u4e2d\u4e00\u4e2a\u63a8\u6f14\u51fa\u6765\u3002\uff08\u5982\u679c\u662f\u7ebf\u6027\u76f8\u5173\uff0c\u90a3\u4e48\u6211\u4eec\u5728\u7528\u7ebf\u6027\u6a21\u578b\u505a\u56de\u5f52\u7684\u65f6\u5019\uff0c\u4f1a\u51fa\u73b0\u4e25\u91cd\u7684\u591a\u91cd\u5171\u7ebf\u6027\u95ee\u9898\uff0c\u5c06\u4f1a\u5bfc\u81f4\u8fc7\u62df\u5408\u3002\uff09 \u7279\u5f81\u9009\u62e9\u8fd8\u53ef\u4ee5\u4f7f\u6a21\u578b\u83b7\u5f97\u66f4\u597d\u7684\u89e3\u91ca\u6027\uff0c\u52a0\u5feb\u6a21\u578b\u7684\u8bad\u7ec3\u901f\u5ea6\uff0c\u4e00\u822c\u7684\uff0c\u8fd8\u4f1a\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd</p> <p>\u5e38\u89c1\u7684\u65b9\u6cd5\u5305\u62ec\u8fc7\u6ee4\u6cd5\uff08Filter, Screening\u3001\u5305\u88f9\u6cd5\uff08Warpper\uff09\uff0c\u5d4c\u5165\u6cd5\uff08Embedding\uff09\u3002</p>"},{"location":"AI/highd/#filter-screening","title":"Filter, Screening, \u8fc7\u6ee4\u6cd5","text":"<p>\u9009\u62e9\u4e00\u4e9b important features, which is a subset of all features, \u4f46\u6211\u4eec\u4e0d\u662f\u7b80\u5355\u7684\u9009\u62e9\uff0c\u800c\u662f\u8bbe\u7f6e\u4e00\u4e2a threshold \u5c3d\u91cf save all signals\u3002\u4f46 No free lunch, it just a trade.</p> <p>SAME Assumptions:</p> <p>\\(\\begin{cases}\\text{centered X: } \\mathbb EX=0,Cov(X)=\\Sigma, \\text{centered Y: } \\mathbb EY=0\\implies \\beta_0=0\\\\(X_i,Y_i)\\text{ are IDD}\\\\(X_i,Y_i,\\epsilon_i)\\text{ are independent}\\\\\\red {\\Xi}:=\\text{error between estimator and truth}\\in\\R^n=\\begin{bmatrix}\\epsilon_1&amp;\\dots&amp;\\epsilon_n\\end{bmatrix}^T\\\\\\mathbb E\\Xi=0,Var(\\Xi)=\\sigma^2I\\in\\R^{n\\times n}\\end{cases}\\)</p> Perfect Models More Redundant Variables Less Important Variables p \\(p=p_0\\) \\(p&gt;p_0\\) \\(p&lt;p_0\\) Correct Correct Wrong \\(\\epsilon_i\\) \\(N(0,\\sigma^2)\\) \\(N(0,\\sigma^2)\\) \\(\\red {\\tilde\\epsilon_i ,E(\\tilde\\epsilon_i)\\neq0}\\) \\(Bias(\\hat{Y}_{new})\\) \u274c \u274c \u2b55 \\(E\\tilde{\\beta}-\\beta)^TX_{new}\\) \\(E\\{(Y-\\hat{Y})^2\\}\\) \\(\\approx\\sigma^2(1+\\cfrac{p_0}{n})\\) \\(\\approx\\sigma^2(1+\\cfrac{p}{n})\\) \\(\\approx\\sigma^2+(\\beta_{p+1}^2+\\dots+\\beta_{p_o^2})\\lambda_{min}(\\Sigma)\\)"},{"location":"AI/highd/#perfect-models-with-general-variables","title":"Perfect Models with General Variables","text":"<p>Perfect model (\\(p=p_0\\)) variables. \\(Y_i=\\beta_1x_{i,1}+\\dots+\\beta_{p_0}x_{i,p_0}+\\red{\\epsilon_i}\\) \\(\\iff Y_i=\\beta^TX_i+\\epsilon_i, \\begin{cases}Y_i\\in\\R,\\\\\\beta=\\begin{bmatrix}\\beta_1&amp;\\dots&amp;\\beta_{p_0}\\end{bmatrix}^T\\in\\R^{p_0}\\\\X_i=\\begin{bmatrix}x_{i,1}&amp;\\dots&amp;x_{i,p_0}\\end{bmatrix}^T\\in\\R^{p_0}\\\\[1em]Cov(X)=\\Sigma\\in\\R^{p_0\\times p_0}\\\\\\red{\\epsilon_i\\text{ are IID}\uff5eN(0,\\sigma^2)}\\end{cases}\\) \\(\\implies Y=X\\beta+\\Xi,\\begin{cases}Y\\in\\R^n\\\\ X\\in\\R^{n\\times p_0 }=\\begin{bmatrix}X_1^T&amp;\\dots&amp;X_n^T\\end{bmatrix}^T\\\\\\beta\\in\\R^{p_0}\\end{cases}\\)</p> <p>the estimator. $ \\hat{\\beta} = (\\mathbb X^T\\mathbb X)^{-1}\\mathbb X^T\\mathbb Y=\\beta+(\\mathbb X^T\\mathbb X)^{-1}\\mathbb X^T \\red {\\Xi }$ \\(\\\\\\quad \\begin{cases}\\mathbb X:= \\text{training dataset with n traing samples } X_i\\\\\\mathbb X^T\\mathbb  X =\\sum\\limits_{i=1}^nX_iX_i^T,\\\\X_i \\text{ are IID }\uff5eN(0,\\Sigma)\\implies\\mathbb  X^T\\mathbb X=\\sum\\limits_{i=1}^n(X_i-0)(X_i-0)^T=\\red{n\\Sigma}\\\\\\end{cases}\\)</p> <p>\\(\\hat{\\beta}=\\beta+(n^{-1}\\mathbb X^T\\mathbb X)^{-1}n^{-1}\\mathbb X^T\\Xi\\approx \\beta+\\Sigma^{-1}n^{-1}\\mathbb X^T\\Xi\\implies\\\\[1em]\\hat{\\beta}-\\beta=(n^{-1}\\mathbb X^T\\mathbb X)^{-1}n^{-1}\\mathbb X^T\\Xi\\approx\\Sigma^{-1}n^{-1}\\mathbb X^T\\Xi\\)</p> <p>\u524d\u8005 \\((n^{-1}\\mathbb X^T\\mathbb X)\\) \u662f\u6837\u672c\u7b97\u51fa\u6765\u7684\uff0c\u540e\u8005  \\(\\Sigma\\)  \u662f\u5206\u5e03\u7684\u65b9\u5dee\uff0c\u524d\u8005 converge into \u540e\u8005\uff0c\u51cf\u5c11\u4e86 randomness\uff0c\u6240\u4ee5\u662f approximately</p> <p>For a new random observation \\(X_{new}\\) \\(\\(\\begin{align*}Y_{new}&amp;=\\beta^TX_{new}+\\epsilon_{new}\\\\\\hat{Y}_{new} &amp;=\\hat{\\beta}^TX_{new} \\end{align*}\\)\\)</p> <p>\\((X_{new},Y_{new},\\epsilon_{new})\\) is independent of \\((X_i,Y_i,\\epsilon_i)\\)</p> \\[\\begin{align*} Y_{new}-\\hat{Y}_{new}&amp;=\\underline{\\red {\\epsilon_{new}}+\\beta^{\\red{T}}X_{new}}-\\underline{\\hat{\\beta}^{\\red T}X_{new}}\\\\ &amp;=\\red {\\epsilon_{new}}+(\\beta-\\hat{\\beta})^{\\red T}X_{new}\\\\ &amp;\\approx\\red {\\epsilon_{new}}-\\underline{n^{-1}\\Xi^T\\mathbb X\\Sigma^{-1}}X_{new} \\end{align*}\\] <p>Square of Prediction Error</p> \\[ \\begin{align*}(Y_{new}-\\hat{Y}_{new})^2&amp;\\approx(\\red {\\epsilon_{new}}-\\underline{n^{-1}\\Xi^T\\mathbb X\\Sigma^{-1}}X_{new})^2\\\\[1em]&amp;\\approx\\red {\\epsilon_{new}}^2-2\\red {\\epsilon_{new}}\\cdot n^{-1}X_{new}^T\\Sigma^{-1}\\mathbb X^T\\Xi+n^{-2}(\\Xi^T\\mathbb X\\Sigma^{-1}X_{new})^2\\end{align*} \\] <p>Take expectation:</p> \\[ \\begin{align*}\\mathbb E\\{(Y-\\hat{Y})^2\\}&amp;=\\mathbb E\\{(Y-\\hat{\\beta}^TX)^2\\}\\\\&amp;\\approx\\mathbb E\\Big(\\red {\\epsilon}^2-2\\red {\\epsilon}\\cdot n^{-1}X^T\\Sigma^{-1}\\mathbb X^T\\Xi+n^{-2}(\\Xi^T\\mathbb X\\Sigma^{-1}X)^2\\Big)\\\\&amp;\\approx\\sigma^2-0+\\cfrac{p_0}{n}\\sigma^2\\\\&amp;\\approx\\sigma^2(1+\\cfrac{p_0}{n})\\end{align*} \\] <p>\\(\\implies\\) When n is large, the perfect model has the smallest prediction error</p>"},{"location":"AI/highd/#working-model-with-more-redundant-variables","title":"Working Model with More Redundant Variables","text":"<p>\u5982\u679c\u6211\u4eec\u4e0d\u9009\u62e9\u91cd\u8981\u7279\u5f81\uff0c\u6211\u4eec\u5c1d\u8bd5\u4e3a\u6298\u6709\u4e8b\u7269\u6dfb\u52a0\u4f30\u8ba1\u7cfb\u6570\uff0c\u90a3\u4e48\u8bef\u5dee\u5c06\u6c47\u603b\u6743\u5c06\u6c47\u603b\uff0c\u5373\u6bcf\u6b21\u6211\u4eec\u4f30\u8ba1\u67d0\u4e9b\u4e1c\u897f\u65f6\uff0c\u60a8\u90fd\u4f1a\u521b\u4e00\u4e2a\u9519\u8bef\u3002</p> <p>Wroking model with more redundant variables (\\(p\\) variables, \\(\\red{p&gt;p_0}\\))</p> <p>\\(Y_i=\\beta_1x_{i,1}+\\dots+\\beta_{p_0}x_{i,p_0}+0\\times x_{i,p_0}+\\dots+0\\times x_{i,p}+\\red{\\epsilon_i},\\) \\(\\iff Y_i=\\beta^TX_i+\\epsilon_i,i=1,\\dots,n, \\\\\\qquad\\begin{cases}Y_i\\in\\R,\\\\\\beta=\\begin{bmatrix}\\beta_1&amp;\\dots&amp;\\beta_{p_0}&amp;0&amp;\\dots&amp;0\\end{bmatrix}^T\\in\\R^p,X_i=\\begin{bmatrix}x_{i,1}&amp;\\dots&amp;x_{i,p_0}&amp;x_{i,p_0}&amp;\\dots&amp;x_{i,p}\\end{bmatrix}^T\\in\\R^p\\\\Cov(X)=\\Sigma\\in\\R^{p\\times p}\\\\\\red{\\epsilon_i\\text{ are IID}\uff5eN(0,\\sigma^2)}\\end{cases}\\)</p> <p>the estimator \\(\\hat{\\beta} = (\\mathbb X^T\\mathbb X)^{-1}\\mathbb X^T\\mathbb Y=\\beta+(\\mathbb X^T\\mathbb X)^{-1}\\mathbb X^T \\red {\\Xi }\\\\\\quad \\begin{cases}\\mathbb X\\in\\R^{n\\times p},\\mathbb X^T\\mathbb  X =\\sum\\limits_{i=1}^nX_iX_i^T\\in\\R^{p\\times p},\\\\X_i \\text{ are IID }\uff5eN(0,\\Sigma)\\implies\\mathbb  X^T\\mathbb X=\\sum\\limits_{i=1}^n(X_i-0)(X_i-0)^T=\\red{n\\Sigma}\\in\\R^{p\\times p}\\\\\\end{cases}\\)</p> <p>Expected Square of Prediction Error</p> \\[\\mathbb E\\{(Y-\\hat{Y})^2\\}=\\mathbb E\\{(Y-\\hat{\\beta}^TX)^2\\}\\approx\\sigma^2(1+\\cfrac{p}{n})&gt;\\sigma^2(1+\\cfrac{p_0}{n}),p&gt;p_0 \\] <p>proof of</p> <p>\\(\\implies\\) the more redundant variables, the worse the prediction is. \\(\\implies\\) if n is very large, it is ok to put all features in model as well since \\(\\cfrac{p_0}{n}\\)  would vanish</p>"},{"location":"AI/highd/#working-model-with-less-important-variables","title":"Working Model with Less Important Variables","text":"<p>Wroking model with less important variables (\\(p\\) variables, \\(\\red{p&lt;p_0, \\beta_{p_0}\\neq0}\\) \\(Y_i=\\beta_1x_{i,1}+\\dots+\\beta_p\\times x_{i,p}+\\red{\\tilde{\\epsilon_i}}\\) \\(\\iff Y_i=\\beta^TX_i+\\red{\\tilde{\\epsilon_i}},i=1,\\dots,n, \\\\\\qquad\\begin{cases}Y_i\\in\\R,\\\\\\beta=\\begin{bmatrix}\\beta_1&amp;\\dots&amp;\\beta_{p}\\end{bmatrix}^T\\in\\R^p,X_i=\\begin{bmatrix}x_{i,1}&amp;\\dots&amp;x_{i,p}\\end{bmatrix}^T\\in\\R^p\\\\Cov(X)=\\Sigma\\in\\R^{p\\times p}\\\\\\red{!!E(\\tilde{\\epsilon})\\neq 0\\impliedby\\text{wrong model without enough variables}}\\\\\\lambda_{\\min}(\\Sigma)&gt;0\\end{cases}\\)</p> <p>the estimator \\(\\hat{\\beta}=\\begin{bmatrix}\\hat{\\beta_1}&amp;\\dots&amp;\\hat{\\beta_p}\\end{bmatrix}^T\\in\\R^p,\\red{p&lt;p_0}\\\\\\xrightarrow{\u53d8\u5f62}\\red{\\tilde{\\beta}}=\\begin{bmatrix}\\hat{\\beta}\\\\0\\end{bmatrix}=\\begin{bmatrix}\\hat{\\beta_1}&amp;\\dots&amp;\\hat{\\beta_p}&amp;0&amp;\\dots&amp;0\\end{bmatrix}^T\\in\\R^{p_0}\\)</p> <p>\\(\\implies\\hat{Y}_{new}=\\hat{\\beta}_{1\\times p}{X_{new}}_{p\\times1}=\\tilde{\\beta}^T_{1\\times p_0}{X_{new}}_{p_0\\times1}\\\\\\qquad\\qquad=\\hat\\beta_1x_1+\\dots+\\hat{\\beta_p}x_p+0\\times x_p+\\dots+0\\times x_{p_0}\\)</p> <p>There is a bias in the prediction for a given X.</p> <p>\\(Bias(\\hat{Y}_{new})=\\mathbb EY_{new}-\\mathbb E\\hat{Y}_{new}=\\mathbb E\\{(\\beta-\\tilde{\\beta})^TX_{new}+\\epsilon_{new}\\}=(\\mathbb E\\tilde{\\beta}-\\beta)^TX_{new}\\)</p> <p>Expected Square of Prediction Error</p> \\[ \\begin{align*}\\mathbb E\\{(Y-\\hat{Y})^2\\}&amp;=\\sigma^2+\\mathbb E\\{(\\beta-\\tilde{\\beta})^T\\Sigma(\\beta-\\tilde{\\beta})\\}\\\\[1em]&amp;\\ge\\sigma^2+\\Vert\\beta-\\tilde\\beta\\Vert^2\\lambda_{min}(\\Sigma)\\\\[1em]&amp;\\ge\\sigma^2+(\\beta_{p+1}^2+\\dots+\\beta_{p_0^2})\\lambda_{min}(\\Sigma)\\end{align*} \\] <ul> <li>proof of</li> </ul> <p>\\(\\implies\\)  If the working model does not include all the important variables (those with \\(\u03b2_{k}\u2260 0,k=1,\\dots,p_0\\)), the prediction error (lower bound) is also bigger than the model with exactly the important variables. \\(\\implies\\) \u6837\u672c\u6570 n \u518d\u5927\u4e5f\u62ef\u6551\u4e0d\u4e86\u8fd9\u4e2aerror \u56e0\u4e3a\\((\\beta_{p+1}^2+\\dots+\\beta_{p_0^2})\\lambda_{min}(\\Sigma)\\) is constant\uff0c\u800c\u4e14\u8fd9\u53ea\u662f\u4e0b\u754c lower bound</p>"},{"location":"AI/highd/#candidate-models-for-p1-predictor-1-x_1-x_p","title":"Candidate Models for p+1 predictor \\(1\uff0c x_1, ..., x_p\\)","text":"<p><p>un-centralized</p></p> <p>Suppose we have n samples. Consider any sub-model (A) \\((A):= Y =\\beta_0+\u03b2_1x'_1 +...+\u03b2_qx'_q+\u03b5, \\space\\{x'_1,\\dots,x'_q\\}\\sub\\{x_1,\\dots,x_p\\}\\)</p> <p>RRS of A. \\(RSS(A)=\\sum\\limits_{i=1}^n\\{Y_i-\\hat{Y}_{A,i}\\}^2\\). \\(\\hat{Y}_{A,i}:=\\) the fitted value(estimation) of \\(Y_i\\) generated by model (A</p> <p>Fitted error (RSS) \u53ef\u4ee5\u53bb\u8861\u91cfhow good model are\uff0c \u4f46\u662f cannot be used as one criterion for the selection.</p> <ol> <li>For any two models A and B, if A is a sub-model of B, then \\(RSS(A) \u2265 RSS(B).\\) \u53ea\u8981 A\u662f B \u7684\u5b50\u96c6\uff0c\u90a3\u4e48 RSS(A) \u4e00\u5b9a\u2265 RSS(B)\u3002</li> <li>\u800c\u4e14\u8fd9\u4e2aRSS\u662f\u5728 training set 1-n \u4e0a\u8fdb\u884c\uff0c\u5982\u679c\u662f overfitting \u7684\u8bdd\uff0cerror\u518d\u5c0f\uff0c\u4f46\u662f\u5728\u9c81\u68d2\u6027\u8fd8\u662f\u5f88\u5783\u573e\u7684\u3002\u6240\u4ee5\u6211\u4eec\u4e0d\u80fd\u7528\u5728\u8bad\u7ec3\u96c6\u4e0a\u7684RSS\u53bb compare</li> </ol>"},{"location":"AI/highd/#model-selection-for-lr","title":"Model Selection for LR","text":"<p>For example, an empirical method like Cross-Validation, Bootstrap methods or sample penalties such as AIC, BIC, Mallow's CP.</p> <p>Model Selection: AIC/BIC and Cross-Validation gives different conclusion</p> <p>Cross validation. \u56e0\u4e3a\u8981\u6bd4\u8f83\u4e00\u4e9b\u6a21\u578b\uff0c\u5982\u679c\u6bcf\u4e2a\u6a21\u578b\u90fd\u62ff\u4e00\u4e9b\u8fdb\u884c\u8bad\u7ec3\u7136\u540e\u6d4b\u9a8c\u8bc1\u96c6\u7684\u51c6\u786e\u7387\u3002\u5f53\u8bad\u7ec3\u96c6\u7684 n \u975e\u5e38\u5927\u7684\u65f6\u5019\uff0c\u5c31\u5f88\u5bb9\u6613 time-consuming\u3002</p> <p>K-fold. \u548c\u4ea4\u53c9\u9a8c\u8bc1\u6bd4\uff0c\u662f computation more efficient\uff0c \u4f46\u66f4model is less stable</p> <p>AIC</p> <p>/BIC</p> <p>the computational efficiency of AIC/BIC or when the sample size is relatively small for cross-validation AIC and BIC explicitly penalize the number of parameters, cross-validation not, so again, it's not surprising that they suggest a model with fewer parameters (though nothing prohibits cross-validation from picking a model with fewer parameters).</p>"},{"location":"AI/highd/#dimensionality-reduction","title":"Dimensionality Reduction\uff0c\u6570\u636e\u964d\u7ef4","text":"<p>\u6570\u636e\u964d\u7ef4\u5176\u5b9e\u8fd8\u6709\u53e6\u4e00\u4e2a\u597d\u5904\uff1a\u6570\u636e\u53ef\u89c6\u5316\u3002\u56e0\u4e3a\u8d85\u8fc7\u4e09\u7ef4\u7684\u6570\u636e\u5c31\u65e0\u6cd5\u53ef\u89c6\u5316\u4e86\u3002\u6570\u636e\u964d\u7ef4\u6700\u5e38\u7528\u7684\u65b9\u6cd5\u662f\u4e3b\u6210\u5206\u5206\u6790\u3002</p> <p>\u6211\u4eec\u60f3\u627e\u5230\u91cd\u8981\u4fe1\u53f7\u7684\u4f4d\u7f6e\u3002\u5176\u6b21\uff0c\u6211\u4eec\u627e\u5230\u91cd\u8981\u4fe1\u53f7\u6216\u5f3a\u4fe1\u53f7\uff0c\u6216\u8005\u8fd9\u4e9b\u5f31\u4fe1\u53f7\u73b0\u5728\u662f\u96f6\uff0c\u5c31\u6254\u6389\uff0c\u6211\u4eec\u5e0c\u671b\u4e3a\u8fd9\u4e9b\u5f3a\u4fe1\u53f7\u63d0\u4f9b\u9002\u5f53\u7684\u4f30\u8ba1\u3002</p> <p>\u6211\u4eec\u80af\u5b9a\u6ca1\u6709 enough information\uff0c\u56e0\u4e3a\u540c\u65f6\u5b58\u5728\u7740 noise\u3002\u51b3\u5b9a\u6211\u4eec\u662f\u5426\u80fd\u5b8c\u6210\u76ee\u6807\u5c31\u662f\uff1awhether the important signals in data are stronger than noises\u3002\u6211\u4eec\u73b0\u5728\u5047\u5b9a\u8fd9\u4e2a important signals are stronger than noises. \u63a5\u4e0b\u6765\u5c31\u8981\u60f3\u5982\u4f55\u5c06important information \u5265\u79bb noise\uff1f</p>"},{"location":"AI/highd/#principal-component-analysis-pca","title":"Principal Component Analysis, PCA, \u4e3b\u6210\u5206\u5206\u6790","text":"<p>The basic idea is to transform the p random variables into linear combinations called Principal Components. Extracting linear combinations from multivariate data, a subset of PCs captures most of the variability  in the data.</p> <p>\u6b63\u4ea4\u53d8\u6362\u628a\u7531\u7ebf\u6027\u76f8\u5173\u53d8\u91cf\u8868\u793a\u7684\u89c2\u6d4b\u6570\u636e\u8f6c\u6362\u4e3a\u5c11\u6570\u51e0\u4e2a\u7531\u7ebf\u6027\u65e0\u5173\u53d8\u91cf\u8868\u793a\u7684\u6570\u636e\uff0c\u7ebf\u6027\u65e0\u5173\u7684\u53d8\u91cf\u79f0\u4e3a==\u4e3b\u6210\u5206==</p>"},{"location":"AI/highd/#key-maximize-the-variance","title":"KEY: Maximize the variance","text":"<p>Maximize the variance</p> <p>Identify key components which can maximize the information with a reasonable dimension. Find unit-vector g to transform X into Y with the target that maximizes the variance of Y.</p> <p>Suppose \\(X=\\begin{bmatrix}X_1\\\\\\vdots\\\\X_p\\end{bmatrix}\\in\\R^p\\) is a random vector with Covariance Matrix \\(Var\\{X\\}=\\Sigma=\\begin{bmatrix}\\sigma_{1}^2&amp;\\dots&amp;\\sigma_{1p}\\\\\\vdots&amp;\\ddots&amp;\\vdots\\\\\\sigma_{p1}&amp;\\dots&amp;\\sigma_{p}^2\\\\\\end{bmatrix}\\)</p> <p>Look for the linear transformations:</p> \\[ \\begin{align*}\\begin{cases}Y_1=g_{11}X_1+\\dots+g_{1p}X_p\\\\Y_2=g_{21}X_1+\\dots+g_{2p}X_p\\\\\\vdots\\\\Y_p=g_{p1}X_1+\\dots+g_{pp}X_p\\end{cases}\\iff\\begin{bmatrix}Y_1\\\\\\vdots\\\\Y_p\\end{bmatrix}&amp;=\\begin{bmatrix}g_{11}&amp;\\dots&amp;g_{1p}\\\\\\vdots\\\\g_{p1}&amp;\\dots&amp;g_{pp}\\end{bmatrix}\\begin{bmatrix}X_1\\\\\\vdots\\\\X_p\\end{bmatrix}\\\\&amp;=\\begin{bmatrix}g_1^T&amp;\\dots&amp;g_p^T\\\\\\end{bmatrix}\\begin{bmatrix}X_1\\\\\\vdots\\\\X_p\\end{bmatrix}\\end{align*}\\\\\\vec{g_i}=\\begin{bmatrix}g_{i1}\\\\\\vdots\\\\g_{ip}\\end{bmatrix},\\Vert \\vec{g_i}\\Vert_2=1,\\forall i=1,...p \\] <p>property of  r.vector \\(Y=g^TX, g\\in\\text{constant}\\\\\\implies Var(Y)=g^TVar(X)g=g^T\\Sigma g\\)</p> <p>Target:</p> \\[g=\\max\\limits_{\\Vert g\\Vert_2=1} Var(Y)=\\max\\limits_{\\Vert g\\Vert_2=1} g^T\\Sigma g\\tag{1}\\] <p>eign about postive definite A.\\(\\Sigma=\\sum\\limits_{i=1}^{p}\\lambda_i\\gamma_i^T\\gamma_i=\\Gamma^T\\Lambda\\Gamma\\)  specially suppose \\(\\lambda_1&gt;\\dots&gt;\\lambda_p&gt;0\\) in anascending order</p> <ol> <li>\\(g_1:=\\max\\limits_{\\Vert g\\Vert_2=1} g^T\\Sigma g\\implies g_1=\\gamma_1 \\text{ of }\\Sigma\\) \\(\\implies g_1\\) is the direction where the variance is maximized. \uff08not PC \\(\\implies g_1^Tx\\) is the 1st PC</li> <li>\\(g_2:=\\max\\limits_{\\Vert g\\Vert_2=1,\\:g_2^Tg_1=0} g^T\\Sigma g\\implies g_2=\\gamma_2 \\text{ of }\\Sigma\\) \\(\\implies g_2\\) is the one that maximizes the variance among all directions orthogonal to \\(g_1\\)</li> <li>proof: i th-PC = i th eigen vector Let \\(\\lambda_i:=\\) the i-th largest eigen-value of \\(\\Sigma\\), \\(\\gamma_i:=\\) the eigen-vector corresponding to \\(\\lambda_i\\). Therefore, \\(\\{\\gamma_1,\\gamma_n\\}\\) are one set of the basis of \\(\\R^p\\) \u7279\u5f81\u5411\u91cf\u662f\u7279\u5f81\u7a7a\u95f4\u7684\u4e00\u7ec4 basic vectors\u3002 \\(\\implies\\forall g\\in\\R^p,\\exist c_1, c_2,\\dots, c_p\\text{ s.t. } g=c_1\\gamma_1+c_2\\gamma_2+c_n\\gamma_n\\)</li> </ol> \\[\\begin{align*}\\implies g^T\\Sigma g&amp;=\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^nc_ic_j\\gamma_i^T\\Sigma\\gamma_j\\\\ &amp;\\xlongequal{\\Sigma\\gamma_i=\\lambda_i\\gamma_i}\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^pc_ic_j\\gamma_i^T\\gamma_j\\lambda_j\\\\ &amp;\\xlongequal[\\lambda_i^T\\lambda_i=1]{\\lambda_i^T\\lambda_j=0,\\forall i\\neq j} \\sum_{i=1}^nc_i^2\\lambda_i\\\\ &amp;\\le\\lambda_1\\sum_{i=1}^nc_i^2\\\\ &amp;\\xlongequal[\\Vert g\\Vert_2^2=1=c_1^2+\\dots+c_n^2]{\\text{when }c_2=\\dots=c_n=0 }\\lambda_1 \\end{align*}\\] \\[\\implies g=\\gamma_1\\iff g^T\\Sigma g=\\lambda_1\\] <p>Conclusion:</p> <ol> <li>the best direction is the direction of eigenvectors</li> <li>the variance of the direction is Eigen value \\(Var(Y_i)=g_i^T\\Sigma g_i=g_i^T\\lambda_i g_i = \\lambda_i\\\\tr(\\Sigma)=tr(\\Gamma\\Lambda\\Gamma^T)=tr(\\Lambda\\Gamma\\Gamma^T)=tr(\\Lambda)=\\sum\\limits_{i=1}^p\\lambda_i\\)</li> <li>What is the relationship between \\(Y_i \\&amp; Y_j, i\\neq j\\) orthogonal and are the Eigen-vector of Sigma</li> <li>What if X is following a multivariate normal distribution? Multivariate Normal Distribution \\(Z\uff5eN(b,\\Sigma),\\forall l\\in\\R^p,l^TZ\\in\\R\uff5e\\) Normal distri... \\(\\implies Z\\) \uff5e Multivariate Normal Distri... If X is following a multivariate normal distribution, \\(g_i^TX\uff5eN\\)</li> </ol> <p>Advantages:</p> <ol> <li>Identify key components which can maximize the information with a reasonable dimension. \u53d1\u73b0\u6570\u636e\u4e2d\u7684\u57fa\u672c\u7ed3\u6784\uff0c\u5373\u6570\u636e\u4e2d\u53d8\u91cf\u4e4b\u95f4\u7684\u5173\u7cfb,\u80fd\u8fd1\u4f3c\u5730\u8868\u8fbe</li> <li>Reduce the dimension of other forms of analysis.</li> <li>Linearity is assumed.</li> </ol> <p>Limits:</p> <ol> <li>It can be more difficult to interpret than using a subset of the original variables.</li> <li>It uses only covariances/correlations but not higher-order moments. This can be extended to independent component analysis ICA</li> </ol>"},{"location":"AI/highd/#pca-transformation","title":"PCA Transformation","text":"<p>\\(Y_i = g_i^TX\\implies Y=\\Gamma^TX\\)</p> <p>the 1 PC $Y_1=g_1^TX, g_1:= $ the eigen-vector with the 1 largest eigen-value \\(\\lambda_1\\) the 2 PC \\(Y_2=g_2^TX, g_2:=\\) the eigen-vector with the 2 largest Eigen-value \\(\\lambda_2\\) \\(\\(\\vdots\\\\ \\begin{bmatrix}Y_1\\\\\\vdots\\\\Y_p\\end{bmatrix}=\\begin{bmatrix}g_1^T\\\\\\vdots\\\\g_p^T\\end{bmatrix}_{p\\times p}\\begin{bmatrix}X_1\\\\\\vdots\\\\X_p\\end{bmatrix}\\iff \\Gamma=\\begin{bmatrix}g_1&amp;\\dots&amp;g_p\\end{bmatrix}\\in\\R^{p\\times p}\\)\\)</p>"},{"location":"AI/highd/#practical-use","title":"Practical Use","text":"<ol> <li>Standardize \u89c4\u8303\u5316 the data, \u4f7f\u5f97\u6570\u636e\u6bcf\u4e00\u53d8\u91cf\u7684\u5747\u503c\u4e3a0\uff0c\u65b9\u5dee\u4e3a1</li> <li>SVD \u6b63\u4ea4\u5206\u89e3 of the sample covariance M/correlation M</li> <li>Sort the eigenvalues in descending order and choose the K largest eigenvectors (plots, the proportion of variances interpreted etc.)</li> <li>Linear Transform \u53d8\u6362 X into Y(Dimension Reduction!)</li> </ol> <p>\u539f\u6765\u7531\u7ebf\u6027\u76f8\u5173\u53d8\u91cf\u8868\u793a\u7684\u6570\u636e\uff0c\u901a\u8fc7\u6b63\u4ea4\u53d8\u6362\u53d8\u6210\u7531\u82e5\u5e72\u4e2a\u7ebf\u6027\u65e0\u5173\u7684\u65b0\u53d8\u91cf\u8868\u793a\u7684\u6570\u636e\u3002\u65b0\u53d8\u91cf\u662f\u53ef\u80fd\u7684\u6b63\u4ea4\u53d8\u6362\u4e2d\u53d8\u91cf\u7684\u65b9\u5dee\u7684\u548c\uff08\u4fe1\u606f\u4fdd\u5b58\uff09\u6700\u5927\u7684\uff0c\u65b9\u5dee\u8868\u793a\u5728\u65b0\u53d8\u91cf\u4e0a\u4fe1\u606f\u7684\u5927\u5c0f\u3002\u5c06\u65b0\u53d8\u91cf\u4f9d\u6b21\u79f0\u4e3a\u7b2c\u4e00\u4e3b\u6210\u5206\u3001\u7b2c\u4e8c\u4e3b\u6210\u5206\u7b49\u3002</p> <p>how large dimensions we keep\uff1a</p> <p>\u8fd9\u91cc\u6240\u8bf4\u7684\u4fe1\u606f\u662f\u6307\u539f\u6709\u53d8\u91cf\u7684\u65b9\u5dee\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a certain level, maybe 85%\uff0c90%\uff0c\u7136\u540e\u6211\u4eec\u770b the cumulative proportion of k PCs, \u56e0\u4e3a\u8fd9\u5c31\u662f\u8bf4 \u8fd9k \u4e2a PCs \u80fd\u591f\u5728\u591a\u5927\u7a0b\u5ea6\u4e0a\u63cf\u8ff0\u8fd9\u4e9b\u70b9\u7684\u5dee\u5f02\u95f4\u9694\u3002\u800c\u5728\u5269\u4e0b\u7684PCs\u91cc\uff0c\u8fd9\u4e9b\u70b9\u5927\u591a\u662f\u91cd\u53e0\uff0c\u5e76\u4e0d\u5177\u6709\u5f88\u9ad8\u7684\u5dee\u5f02\u4fe1\u606f\u4ef7\u503c\u3002\u53ea\u8981\u8fd9\u4e2a cumulative\u8fbe\u5230\u4e86\u8fd9\u4e2a certain level \u6211\u4eec\u5c31\u91c7\u7528\u524d k \u4e2a PCs</p> <p>covariance M vs correlation M? \u2014\u2014 Scale</p> <p>covariance M. \\(Cov(x,y)=\\cfrac{1}{n}\\sum\\limits_{i=1}^n(x-\\overline{x})(y-\\overline{y})\\) correlation M. \\(\\rho_{xy}=\\cfrac{Cov(x,y)}{\\sqrt{Var(x)}\\sqrt{Var(y)}}\\) Covariance Vs Correlation: Here are the Difference You Should Know ,Simplilearn \u5f53\u6211\u4eec\u8981\u53bb\u9664\u7279\u5f81\u503c\u91cf\u7eb2\u7684\u533a\u522b \u6211\u4eec\u4f7f\u7528 correlation\uff0cscale=true \u5982\u679c\u4e0d\u53bb\uff0c\u5c31\u662fcovariance\uff0cscale=false\uff08\u9ed8\u8ba4</p> <p>Suppose \\(x_1\\) is a length measured either in cm. or mm., \\(x_2\\) is a weight measurement in gm. The covariance M with \\(y_1\\) in cm. is \\(\\begin{bmatrix}80&amp;44\\\\44&amp;80\\end{bmatrix}\\) the Covariance M with \\(y_1\\) in mm. is \\(\\begin{bmatrix}8000&amp;440\\\\440&amp;80\\end{bmatrix}\\)</p>"},{"location":"AI/highd/#graphical-rotate-the-data-without-scaling","title":"Graphical: Rotate the data without scaling","text":"<p>\u6570\u636e\u96c6\u5408\u4e2d\u7684\u6837\u672c\u7531\u5b9e\u6570\u7a7a\u95f4\uff08\u6b63\u4ea4\u5750\u6807\u7cfb\uff09\u4e2d\u7684\u70b9\u8868\u793a\uff0c\u7a7a\u95f4\u7684\u4e00\u4e2a\u5750\u6807\u8f74\u8868\u793a\u4e00\u4e2a\u53d8\u91cf\uff0c\u89c4\u8303\u5316\u5904\u7406\u540e\u5f97\u5230\u7684\u6570\u636e\u5206\u5e03\u5728\u539f\u70b9\u9644\u8fd1\u3002\u5bf9\u539f\u5750\u6807\u7cfb\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u4e3b\u6210\u5206\u5206\u6790\u7b49\u4ef7\u4e8e\u8fdb\u884c\u5750\u6807\u7cfb\u65cb\u8f6c\u53d8\u6362\uff0c\u5c06\u6570\u636e\u6295\u5f71\u5230\u65b0\u5750\u6807\u7cfb\u7684\u5750\u6807\u8f74\u4e0a\u3002</p> <p>Graphical: \\(Y=\\Gamma^TX\\): Multiplication by an orthogonal matrix: Rotation!</p> <p>proof of rotation: $\\Vert y_1-y_2\\Vert_2=\\Vert x_1-x_2\\Vert_2, $ without scaling \\(\\forall x_1,x_2,\\) any two points in space</p> \\[\\begin{align*}\\Vert y_1-y_2\\Vert_2^2&amp;=(y_1-y_2)^T(y_1-y_2)\\\\&amp;=(x_1-x_2)^T\\Gamma\\Gamma^T(x_1-x_2)\\\\&amp;\\xlongequal[\\Gamma\\Gamma^T=I]{\\Gamma^T=\\Gamma^{-1}}(x_1-x_2)^T(x_1-x_2)=\\Vert x_1-x_2\\Vert_2^2\\end{align*}\\] <p>\u65b0\u5750\u6807\u7cfb\u7684\u7b2c\u4e00\u5750\u6807\u8f74\u3001\u7b2c\u4e8c\u5750\u6807\u8f74\u7b49\u5206\u522b\u8868\u793a\u7b2c\u4e00\u4e3b\u6210\u5206\u3001\u7b2c\u4e8c\u4e3b\u6210\u5206\u7b49\uff0c\u6570\u636e\u5728\u6bcf\u4e00\u8f74\u4e0a\u7684\u5750\u6807\u503c\u7684\u5e73\u65b9\u8868\u793a\u76f8\u5e94\u53d8\u91cf\u7684\u65b9\u5dee\uff1b\u5e76\u4e14\uff0c\u8fd9\u4e2a\u5750\u6807\u7cfb\u662f\u5728\u6240\u6709\u53ef\u80fd\u7684\u65b0\u7684\u5750\u6807\u7cfb\u4e2d\uff0c\u5750\u6807\u8f74\u4e0a\u7684\u65b9\u5dee\u7684\u548c\u6700\u5927\u7684</p> <p>\u65b9\u5dee\u548c\u6700\u5927: \u4e3b\u6210\u5206\u5206\u6790\u65e8\u5728\u9009\u53d6\u6b63\u4ea4\u53d8\u6362\u4e2d\u65b9\u5dee\u6700\u5927\u7684\u53d8\u91cf\uff0c\u4f5c\u4e3a\u7b2c\u4e00\u4e3b\u6210\u5206\uff0c\u65cb\u8f6c\u53d8\u6362\u4e2d\u5750\u6807\u503c\u7684\u5e73\u65b9\u548c\u6700\u5927\u7684\u8f74, \u65cb\u8f6c\u53d8\u6362\u4e2d\u9009\u53d6\u79bb\u6837\u672c\u70b9\u7684\u8ddd\u79bb\u5e73\u65b9\u548c\u6700\u5c0f\u7684\u8f74</p> <p>transformation\uff1a\u65cb\u8f6c\u53d8\u6362</p> <p>\u539f\u5750\u6807\u7cfb:\u5f88\u660e\u663e\u6709\u6b63\u5411\u7ebf\u6027\u76f8\u5173\uff0c13\u8c61\u9650\u6700\u591a\u65b0\u5750\u6807\u7cfb:\u7ebf\u6027\u65e0\u5173\uff0c1234\u8c61\u9650\u90fd\u5dee\u4e0d\u591a</p> <p>\u5982\u679c\u4e3b\u6210\u5206\u5206\u6790\u53ea\u53d6\u7b2c\u4e00\u4e3b\u6210\u5206\uff0c\u5373\u65b0\u5750\u6807\u7cfb\u7684y1\u8f74\uff0c\u90a3\u4e48\u7b49\u4ef7\u4e8e\u5c06\u6570\u636e\u6295\u5f71\u5728\u692d\u5706\u957f\u8f74\u4e0a\uff0c\u7528\u8fd9\u4e2a\u4e3b\u8f74\u8868\u793a\u6570\u636e\uff0c\u5c06\u4e8c\u7ef4\u7a7a\u95f4\u7684\u6570\u636e\u538b\u7f29\u5230\u4e00\u7ef4\u7a7a\u95f4\u4e2d\u3002</p> 1st PC 2nd PC \u65b9\u5dee\u6700\u5927 \u4e0e\u7b2c\u4e00\u5750\u6807\u8f74\u6b63\u4ea4\uff0c\u4e14\u65b9\u5dee\u6b21\u4e4b \u7b2c\u4e00\u5750\u6807\u8f74 \\(y_1\\) \u7b2c\u4e8c\u5750\u6807\u8f74 \\(y_2\\) \u692d\u5706\u7684\u957f\u8f74 \u692d\u5706\u7684\u77ed\u8f74"},{"location":"AI/highd/#linear-discriminant-analysis-lda","title":"Linear Discriminant Analysis, LDA, \u7ebf\u6027\u5224\u522b\u5206\u6790","text":"<p>LDA\u7684\u76ee\u6807\u662f\u63d0\u53d6\u4e00\u4e2a\u65b0\u7684\u5750\u6807\u7cfb\uff0c\u5c06\u539f\u59cb\u6570\u636e\u96c6\u6295\u5f71\u5230\u4e00\u4e2a\u4f4e\u7ef4\u7a7a\u95f4\u4e2d\u3002 \u548cPCA\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\uff0cLDA\u4e0d\u4f1a\u4e13\u6ce8\u4e8e\u6570\u636e\u7684\u65b9\u5dee\uff0c\u800c\u662f\u4f18\u5316\u4f4e\u7ef4\u7a7a\u95f4\uff0c\u4ee5\u83b7\u5f97\u6700\u4f73\u7684\u7c7b\u522b\u53ef\u5206\u6027\u3002\u610f\u601d\u662f\uff0c\u65b0\u7684\u5750\u6807\u7cfb\u5728\u4e3a\u5206\u7c7b\u6a21\u578b\u67e5\u627e\u51b3\u7b56\u8fb9\u754c\u65f6\u66f4\u6709\u7528\uff0c\u975e\u5e38\u9002\u5408\u7528\u4e8e\u6784\u5efa\u5206\u7c7b\u6d41\u6c34\u7ebf\u3002</p> <p>\u4f18\u70b9\uff1a\u57fa\u4e8e\u7c7b\u522b\u53ef\u5206\u6027\u7684\u5206\u7c7b - \u6709\u52a9\u4e8e\u907f\u514d\u673a\u5668\u5b66\u4e60\u6d41\u6c34\u7ebf\u7684\u8fc7\u62df\u5408\uff0c\u4e5f\u53eb\u9632\u6b62\u7ef4\u5ea6\u8bc5\u5492\u3002 - LDA\u4e5f\u4f1a\u964d\u4f4e\u8ba1\u7b97\u6210\u672c\u3002</p> <p>Fisher\u2019s LDA and Bayes\u2019 LDA are essentially different! They are equivalent under the Gaussian assumption with a common \u03a3 for the two-class case</p> <p>Both Fisher\u2019s LDA and Bayes rule reduce to:</p> empirical estimators \\(\u03bc_X\\) \\(\\overline{X}\\) \\(\u03bc_Y\\) \\(\\overline{Y}\\) \\(\u03a3\\) \\(\u03a3\\) <p>\u4e0d\u53ef\u5c06\u7ebf\u6027\u5224\u522b\u5206\u6790\u4e0e==\u9690\u72c4\u5229\u514b\u96f7\u5206\u914dLatentDirichlet Allocation, LDA== \u76f8\u6df7\u6dc6\u3002</p> <p>\u9690\u72c4\u5229\u514b\u96f7\u5206\u914d\u7528\u4e8e\u6587\u672c\u548c\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff0c\u4e0e\u7ebf\u6027\u5224\u522b\u5206\u6790\u6ca1\u6709\u5173\u7cfb\u3002</p> \u7c7b\u5185 within-class \u7c7b\u95f4 between-class S_w S_b"},{"location":"AI/highd/#fishers-lda","title":"Fisher\u2019s LDA","text":"<p>LDA\u7684\u76ee\u6807\u662f\u63d0\u53d6\u4e00\u4e2a\u65b0\u7684\u5750\u6807\u7cfb\uff0c\u5c06\u539f\u59cb\u6570\u636e\u96c6\u6295\u5f71\u5230\u4e00\u4e2a\u4f4e\u7ef4\u7a7a\u95f4\u4e2d\uff0c\u4ee5\u83b7\u5f97\u6700\u4f73\u7684\u7c7b\u522b\u53ef\u5206\u6027\u3002</p> <p>Target\uff1a \u83b7\u5f97\u6700\u4f73\u7684\u7c7b\u522b\u53ef\u5206\u6027 Find the line\u00a0\\(P_Z\u00a0=\u00a0w^TZ\\)\u00a0that best separates the two classes. \\(\\(w =\\max\\limits_w \\cfrac{w^TS_Bw}{w^TS_Ww}\\)\\) Force \\(\\begin{cases}S_B=(\\mu_X-\\mu_Y)(\\mu_X-\\mu_Y)^T&amp;\\text{ between-class}\\uparrow\\\\S_W=\\Sigma&amp;\\text{ within-class}\\downarrow\\end{cases}\\)</p> <ol> <li>the center of the two after transformation linear projection be as far away as possible \\(S_B\\uparrow\\)</li> <li>the variance of two classes to be as small as possible  \\(S_w \\downarrow\\)</li> </ol> <p>LDA:\u6700\u4f73\u7684\u7c7b\u522b\u53ef\u5206\u6027\u5047\u8bbe\uff1a\u6b63\u6001\u5206\u5e03</p> <p>\u6a5f\u5668\u5b78\u7fd2: \u964d\u7dad(Dimension Reduction)- \u7dda\u6027\u5340\u5225\u5206\u6790( Linear Discriminant Analysis)</p>"},{"location":"AI/highd/#bayes-lda","title":"Bayes\u2019 LDA","text":"<p>\u8d1d\u53f6\u65af\u7684\u4f18\u70b9\uff1a\u4e0d\u9700\u8981\u77e5\u9053\u5177\u4f53\u7684\u5206\u5e03</p> <p>\\(f_X (\u00b7):=\\) pdf  for Class-X, $f_Y (\u00b7) := $ pdf  for Class-Y</p> <p>Bayes rule. \\(\u03b4(Z) = I\\{\u03c0_1f_X(Z) &gt; \u03c0_2f_Y(Z)\\}\\). \\(\\begin{cases}\\pi_i \\text{ prior possibility },\\pi_1+\\pi_2=1 \\\\f_i(Z)\\text{ likelihoood function}\\end{cases}\\)</p> <p>For simplicity let\u2019s assume that \\(\u03c0_1 = \u03c0_2 = 1/2.\\) without any assumption.</p> <p>\\(\u03b4(Z) =I \\{[Z\u2212(\u03bc_X+\\mu_Y)/2]^T \u03a3^{\u22121}(\u03bc_X\u2212\\mu_Y)&gt;0\\}\\\\\\hat{\u03b4}(Z) =I \\{[Z\u2212(\\overline{X}+\\overline{Y} )/2]^T \\hat{\u03a3}^{\u22121}(\\overline{X} \u2212 \\overline{Y})&gt;0\\}\\) Z will be assigned as $ \\begin{cases}X&amp;\u03b4(Z) =1\\Y&amp;\u03b4(Z) =0\\end{cases}$</p>"},{"location":"AI/highd/#quadratic-discriminant-analysis-qda","title":"Quadratic Discriminant Analysis, QDA","text":"<p>Assume:\u00a0\\(Y_1\u223cN(\u03bc_1,\u03a3_1), Y_2\u223cN(\u03bc_2,\u03a3_2)\\) The two classes have different covariance matrices!</p> <p>\\(\\delta(x) = (x\u2212\u03bc)^T\u03a9(x\u2212\u03bc)+\u03b4^T(x\u2212 \u03bc)+\u03b7\\\\\\begin{cases}\u03bc=(\u03bc_1+ \u03bc_2)/2\\space\\text{ (mean)}\\\\\\Omega=\\Sigma_2^{-1}-\\Sigma^{-1}\\space\\text{ the difference of the two precision matrices}\\\\\\delta=(\\Sigma_1^{-1}+\\Sigma_2^{-1})(\\mu_1-\\mu_2)\\\\\u03b7=2\\log(\\pi_1/\\pi_2)+\\frac{1}{4}(\\mu_1-\\mu_2)^T\\Omega(\\mu_1-\\mu_2)+\\log|\\Sigma_2|-\\log|\\Sigma_1|\\end{cases}\\)</p> <p>\u56e0\u4e3a\u662f\u5173\u4e8ex\u7684\u4e8c\u6b21\u51fd\u6570\uff0c\u6240\u4ee5\u662f quadratic \u4e8c\u6b21</p> <p></p> <p>(T1 in Chap1.1 in AMA565) Suppose the covariance M of a p-dimensional random vector\u00a0X\u00a0is\u00a0\\(\u03a3 = \\text{diag}\\{1, 2, . . . , p\\}.\\) What are the Principal Components of\u00a0X? (T2 in Chap1.1 in AMA565) Suppose the covariance matrix of a p-dimensional random vector\u00a0X\u00a0is\u00a0\\(\u03a3 =\u00a0{11}^T\\). What are the Principal Components of X? (T3 in Chap1.1 in AMA565) Suppose \\(X \u223c N(\u03bc_1,\u03a3),Y \u223c N(\u03bc_2,\u03a3).\\:f_1(x):=\\text{ pdf of }X, f_2(x):= \\text{ pdf of }Y\\), and let \u03c0_i be the prior probability that X is coming from class i, i = 1, 2. Show that \\(\u03c0_1f_1(x)/[\u03c0_2f_2(x)] &gt; 1\\iff (\u03a3^{\u22121}(\u03bc_1 \u2212 \u03bc_2))T (x \u2212 (\u03bc_1 + (\u03bc_2)/2)) &gt; c\\) Derive c.*</p>"},{"location":"AI/loss/","title":"Loss","text":"<p>What do we care about\uff1f</p> <ol> <li>What types of errors do we care about\uff1f \u4ec0\u4e48\u6837\u7684\u9519\u8bef\u662f\u6211\u66f4\u5173\u6ce8\u7684     \u4e00\u4e9b\u5f88\u5fae\u5c0f\u7684 errors \u9700\u8981\u5728\u610f\u5417\uff1f     \u4e00\u4e9b\u9519\u5f97\u5f88\u79bb\u8c31\u7684errors \u6211\u4eec\u8981\u600e\u4e48\u8c03\u6574\u5b83\u7684\u6743\u91cd\u5462\uff1f(outlier?)     which class data do we care about\uff1f</li> <li>How much do we care about the errors\uff1f \u6211\u4eec\u975e\u5e38\u5728\u610f\u8fd9\u4e2a\u9519\u8bef\u5417\uff1f</li> </ol> <p>Two types of error\u00a0\ud835\udf02\u00a0are considered:</p> <ol> <li>Standard Cauchy distribution(with location parameter 0 and scale parameter 1) \\(\\(\u03b7\uff5e\\text{Cauchy}(0; 1);\\)\\)</li> <li>Normal mixture distribution, denoted by \u201cMixture\u201d, \\(\\(\u03b7\uff5e 0.8 \u00d7 N(0,1) + 0.2 \u00d7 N(0,10^4)\\)\\)</li> </ol>"},{"location":"AI/loss/#data-loss","title":"Data Loss","text":"<p>Data loss: Model predictions should match training data. Loss over the dataset is an average of loss over examples:</p> <p>\u505a data mining \u76ee\u7684\u662f\u8981\u627e\u5230\u6570\u636e\u7684\u5206\u5e03\uff0c\u8fd9\u4e2a\u65f6\u5019\u7684\u6570\u636e\u5c31\u662f\u4e00\u4e2a\u5927\u7684\u6982\u5ff5\uff0c\u771f\u6b63\u7684\u6570\u636e\uff0c\u5c5e\u4e8epopulation level\uff0c\u6b64\u65f6\u7684\u6240\u6709\u6570\u636e\u7684\u7edf\u8ba1\u503c\u5305\u62ec\u5747\u503c\uff0c\u5305\u62ec\u635f\u5931\u51fd\u6570\uff0c\u90fd\u662f expected \u671f\u671b\u7684\uff0cpopulation \u603b\u4f53\u7684\u3002\u4f46\u662f\u6211\u4eec\u4e0d\u53ef\u80fd\u77e5\u9053\u771f\u6b63\u7684\u6570\u636e\u5206\u5e03\u662f\u4ec0\u4e48\uff0c\u56e0\u4e3a\u5728\u4e0d\u77e5\u9053\u5177\u4f53\u5206\u5e03\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ea\u80fd\u901a\u8fc7\u6781\u9ad8\u6781\u9ad8\u6570\u91cf\u7684\u6837\u672c\u53bb\u9760\u8fd1\u5b83\uff0c\u4f46\u662f observations \u662f\u65e0\u7a77\u65e0\u5c3d\u7684\uff0c\u6211\u4eec\u51e0\u4e4e\u4e0d\u53ef\u80fd\u9760\u6709\u9650\u7684 observations \u53bb\u627e\u5230\u6570\u636e\u5206\u5e03\u3002\u6240\u4ee5\u6211\u4eec\u53ea\u80fd\u8bf4\u6211\u4eec\u6536\u96c6\u6837\u672c\uff0c\u901a\u8fc7\u6709\u9650\u7684\u6837\u672c\u53bb\u89c2\u6d4b\u53bb observe\uff0c\u6b64\u65f6\u6211\u4eec\u6240\u5f97\u5230\u7edf\u8ba1\u503c\u53ea\u662f\u5efa\u7acb\u5728\u6211\u4eec\u6240\u91c7\u7684\u6837\u672c\uff0c\u662f empirical \u7ecf\u9a8c\u7684\u3002</p>"},{"location":"AI/loss/#_1","title":"\u7ed3\u6784\u98ce\u9669 &amp; \u7ecf\u9a8c\u98ce\u9669","text":"\\[\\min_f\\Omega(f)+C\\sum_{i=1}^nl(f(x_i),y_i)\\] <p>\\(\\Omega(f)\\), \u7ed3\u6784\u98ce\u9669\uff0cstructural risk\uff0c\u63cf\u8ff0 \\(f\\) \u7684\u67d0\u4e9b\u6027\u8d28\u3002\u6b63\u5219\u5316\u9879 \u7ed3\u6784\u7ecf\u9a8c\u6700\u5c0f\u5316\u53ef\u4ee5\u770b\u4f5c\u662f\u91c7\u7528\u4e86\u6700\u5927\u540e\u9a8c\u6982\u7387\u4f30\u8ba1\u7684\u601d\u60f3\u6765\u63a8\u6d4b\u6a21\u578b\u53c2\u6570\uff0c\u4e0d\u4ec5\u4f9d\u8d56\u6570\u636e\uff0c\u6d77\u4f9d\u9760\u6a21\u578b\u53c2\u6570\u7684\u5148\u9a8c\u5047\u8bbe\u3002</p> <p>\\(\\sum\\limits_{i=1}^nl(f(x_i),y_i)\\), \u7ecf\u9a8c\u98ce\u9669\uff0cempirical risk\uff0c\u63cf\u8ff0 \\(f\\) \u4e0e\u6570\u636e\u7684\u5951\u5408\u7a0b\u5ea6. = \u8bad\u7ec3\u8bef\u5dee training error \u7ecf\u9a8c\u98ce\u9669\u6700\u5c0f\u5316\u53ef\u4ee5\u770b\u4f5c\u662f\u91c7\u7528\u4e86\u6781\u5927\u4f3c\u7136\u7684\u53c2\u6570\u8bc4\u4f30\u65b9\u6cd5\uff0c\u66f4\u4fa7\u91cd\u4ece\u6570\u636e\u4e2d\u5b66\u4e60\u6a21\u578b\u7684\u6f5c\u5728\u53c2\u6570\uff0c\u53ea\u770b\u91cd\u6570\u636e\u672c\u8eab\u3002</p> <p>\\(C\\)\uff0c\u6298\u4e2d</p> \u5b9e\u8d28\u8ba1\u7b97 \u6982\u7387\u89d2\u5ea6 \uff5e \u6700\u5c0f\u4e8c\u4e58\u6cd5 \u6700\u5927\u4f3c\u7136\u4f30\u8ba1 MAE \\((y-\\hat{y})^2\\) \u5cad\u56de\u5f52 \u6700\u5927\u540e\u9a8c\u4f30\u8ba1 MAP \u5f15\u5165\u6b63\u5219\u9879 \\(P(w), w^2\\) <p>\u6700\u5927\u4f3c\u7136\u6cd5 \\(\\xrightarrow{\\text{\u5960\u5b9a}}\\\\\\xrightarrow{\\text{\u6982\u7387\u89e3\u91ca}}\\) \u6700\u5c0f\u4e8c\u4e58\u6cd5 \u6700\u5927\u540e\u9a8c\u4f30\u8ba1 \\(\\xrightarrow{\\text{\u5960\u5b9a}}\\\\\\xrightarrow{\\text{\u6982\u7387\u89e3\u91ca}}\\) \u5cad\u56de\u5f52 (\u6700\u5c0f\u4e8c\u4e58\u6cd5 &amp; \u6700\u5927\u4f3c\u7136\u6cd5),(\u5cad\u56de\u5f52 &amp; \u6700\u5927\u540e\u9a8c\u4f30\u8ba1) \u5f62\u5f0f\u5b9e\u8d28\u76f8\u7b49\uff0c\u5b9e\u8d28\u601d\u60f3\u4e00\u81f4\uff0c\u4f46\u51fa\u53d1\u89d2\u5ea6\u4e0d\u540c \u6700\u5927\u540e\u9a8c\u4f30\u8ba1\u662f\u589e\u52a0\u4e86 \\(p(w)\\)\u5148\u9a8c\uff0c\u4f5c\u4e3a\u6b63\u5219\u9879\u5b58\u5728\u3002 |\uff5e|\u6700\u5927\u4f3c\u7136|\u6700\u5927\u540e\u9a8c\u4f30\u8ba1| |--|--|--| |\u76ee\u6807\u51fd\u6570|\\(P(x\\vert w)\\)|\\(P(w\\vert x)=\\cfrac{P(x\\vert w)P(w)}{P(x)}\\)| |\u5047\u8bbe|\\(\\epsilon\uff5eN(0,\\sigma^2)\\)\u9ad8\u65af\u566a\u58f0|\\(\\epsilon\uff5eN(0,\\sigma_\\epsilon^2)\\)\u9ad8\u65af\u566a\u58f0\\(w\uff5eN(0,\\sigma_w^2)\\)\u9ad8\u65af\u5148\u9a8c|</p> <p>\u4ece\u7ed3\u6784\u98ce\u9669\u6700\u5c0f\u5316\u7684\u89d2\u5ea6\u4e0a\u770b\uff0c\\(\\Omega(f)\\) \u5e0c\u671b\u83b7\u5f97\u5177\u6709\u4f55\u79cd\u6027\u8d28\u7684\u6a21\u578b(e.g. \u590d\u6742\u6027\u8f83\u5c0f or \u5f15\u5165\u9886\u57df\u77e5\u8bc6 or \u52a0\u5165\u7528\u6237\u610f\u56fe)\uff0c\u6709\u52a9\u4e8e\u524a\u51cf\u5047\u8bbe\u7a7a\u95f4\uff0c\u4ece\u800c\u964d\u4f4e\u4e86\u6700\u5c0f\u5316\u8bad\u7ec3\u8bef\u5dee\u7684\u8fc7\u62df\u5408\u98ce\u9669\u3002</p> <p>\u5982\u679c\u5728\u4e00\u4e2a\u5b8c\u5168\u76f8\u540c\u7684\u8bad\u7ec3\u96c6\u4e0a\u8bad\u7ec3\u51fa\u4e94\u4e2a\u4e0d\u540c\u7684\u6a21\u578b\uff0c\u54ea\u6015\u4ed6\u4eec\u5355\u4e2a\u51c6\u786e\u7387\u90fd\u5f88\u9ad8\uff0c\u5c06\u5b83\u4eec\u4f7f\u7528\u6295\u7968\u96c6\u6210\u7ec4\u5408\u6210\u4e00\u4e2a\u65b0\u7684\u5206\u7c7b\u5668\uff0c\u901a\u5e38\u4e5f\u4f1a\u5e26\u6765\u66f4\u597d\u7684\u7ed3\u679c\u3002\u5c24\u5176\u662f\u6a21\u578b\u4e4b\u95f4\u975e\u5e38\u4e0d\u540c\uff0c\u4f8b\u5982(SVM, DT, LR, ...) \u6548\u679c\u66f4\u4f18\u3002</p> <p>\u5982\u679c\u4ed6\u4eec\u662f\u4e0d\u540c\u7684\u8bad\u7ec3\u5b9e\u4f8b\u4e0a\u5b8c\u6210\u8bad\u7ec3\uff0c\u90a3\u5c31\u66f4\u597d\u4e86</p> <p>\\\\qquad \\rightarrow \\begin{cases}R_{LAD}(f)=\\mathbb E\\Vert Y-f(X)\\Vert_1&amp;\\text{population level}\\R_n(f)=\\frac{1}{n}\\sum\\limits_{i=1}^n\\Vert Y_i-f(X_i)\\Vert_1&amp;\\text{empirical risk}\\end{cases}$</p>"},{"location":"AI/loss/#loss-functions","title":"loss functions","text":"<p>requirements: (\u5176\u5b9e\u672c\u8d28\u4e0a\u5c31\u662f\u9884\u6d4b\u70b9\u548c\u5b9e\u9645\u771f\u5b9e\u70b9\u7684 distance measure )</p> <ol> <li>symmetric</li> <li>non-negative</li> <li>identified</li> <li>\u5c3d\u53ef\u80fd\u7684 robust</li> </ol> <p></p>"},{"location":"AI/loss/#0-1","title":"0-1","text":"\\[L_i=I(Y_i\\neq f(X_i;\\theta))\\] <p>non-continuous, non-smooth</p> <p>extremely complicated ! The optimization problem is extremely hard !</p>"},{"location":"AI/loss/#least-squares-error-lse-l2-loss-conditional-mean","title":"Least Squares Error, LSE, L2-loss \u2014\u2014 conditional mean","text":"\\[L_i=(Y_i-f(X_i;\\theta))^2\\] <p>Regression \u2192 Ordinary Least Squares (OLS) according to estimation \u5206\u7c7b</p> <p>Targets: conditional mean \\(\\iff f^*(x)=\\mathbb E(Y|X=x)=\\min\\limits_f\\mathbb E\\mathbb\\{(Y-f(X))^2|X=x\\}\\)</p> <p>Properties:</p> <ol> <li>differentiable and convex     Differentiability allows us to take the derivative and locate the minimum point. Convexity allows us to claim a global minimizer (also unique if the objective function is strictly convex).</li> <li>\u4f1a\u66f4\u91cd\u89c6 outliers</li> </ol> <p>LSE fail with contaminated data  \u6570\u636e\u5b58\u5728 outliers \u7684\u65f6\u5019\u5c31\u5bb9\u6613\u4e0d robust</p> <ul> <li>\u56e0\u4e3a\u5e73\u65b9\u653e\u5927\u4e86\u5dee\u522b \\(\\text{large}\\rightarrow\\text{large}^2,\\text{small}\\rightarrow\\text{small}^2\\). \u548c outlier \u76f8\u5bf9\u5e94\u7684 loss \u5c31\u4f1a dominate the empirical risk, \u5728 regression with outliers \u91cc\u5c31\u4f1a\u66f4\u504f\u5411 approximate the outliers, the fitted curve has been distorted quite significantly.</li> <li>LSE \u9884\u6d4b\u51fa\u6765\u7684 conditional mean\uff0c\u5176\u4e2d outlier \u70b9\u6709\u53c2\u4e0e\u8ba1\u7b97\uff0c\uff08\u6bd4\u8d77 median \u6765\u8bf4 mean \u662f\u66f4\u5bb9\u6613\u53d7\u5230 outlier \u5f71\u54cd\uff0c\u66f4\u4e0d robust metric\uff09  </li> </ul>"},{"location":"AI/loss/#least-absolute-deviation-lad-conditional-median","title":"Least Absolute Deviation, LAD \u2014\u2014 conditional median","text":"\\[\\Vert Y_i-f(X_i)\\Vert_1=|Y_i-f(X_i;\\theta)|\\] <p>Targets: conditional median \\(\\iff f^*(x)=\\text{median}(Y|X=x)=\\min\\limits_f\\mathbb E\\{\\vert Y-f(X)\\vert\\: |X=x\\}\\)</p> <p></p> <ul> <li>proof \\(f^*(x)=\\text{median}(Y\\vert X=x)=\\min\\limits_f\\mathbb{E}\\{\\Vert Y-f(X)\\Vert_1\\vert X=x\\}\\)   Assume:<ul> <li>\\(\\forall x, \\mathbb{E}[Y|X=x]\\lt\\infin\\)(\u5b58\u5728)</li> <li>\\(F_{Y|X=x}(\\cdot):=\\) the conditional cdf of \\(Y|X=x, \\begin{cases}\\text{cdf of} -\\infin=0\\\\\\text{cdf of} +\\infin=1\\\\\\text{cdf of median} =\\frac{1}{2}\\end{cases}\\)</li> </ul> </li> </ul> \\[\\begin{align*} \\mathcal{L}(f)&amp;=\\mathbb{E}\\{\\Vert Y-f(X)\\Vert_1\\vert X=x\\}\\\\ &amp;=\\int_{-\\infin}^{f(x)}f(x)-y\\text{d}F_{Y|X=x}(y)+\\int_{f(x)}^{+\\infin}y-f(x)\\text{d}F_{Y|X=x}(y)\\\\ \\cfrac{\\partial\\mathcal{L}(f)}{\\partial f}&amp;=\\int_{-\\infin}^{f(x)}1\\cdot\\text{d}F_{Y|X=x}(y)+\\int_{f(x)}^{+\\infin}-1\\cdot\\text{d}F_{Y|X=x}(y)\\\\ &amp;=F_{Y|X=x}(y)\\Big\\vert_{-\\infin}^{f(x)}-F_{Y|X=x}(y)\\Big\\vert^{+\\infin}_{f(x)}\\\\ &amp;=F_{Y|X=x}(f(x))-0-1+F_{Y|X=x}(f(x))\\xlongequal{SET}0\\\\ \\implies &amp; F_{Y|X=x}(f(x))=\\cfrac{1}{2}\\implies f(x)\\text{ is median} \\end{align*}\\] <p>Properties:</p> <ol> <li>No amplification \u653e\u5927. \\(\\text{large}\\rightarrow\\text{large},\\text{small}\\rightarrow\\text{small}\\). \u5728\u5f88\u591a\u6570\u636e\u7684\u60c5\u51b5\u4e0b\uff0c their contributions are less prominent. \uff08\u5982\u679c\u592a\u591a strong outliers \u4f9d\u65e7\u4f1afailed</li> <li>try to downplay the importance of the data point with a large deviation. \u5c1d\u8bd5\u4ee5\u8f83\u5927\u7684\u504f\u5dee\u6de1\u5316\u6570\u636e\u70b9\u7684\u91cd\u8981\u6027\u3002</li> <li>Non-differentiable.     exists an alternative approach for solving this problem: using linear programming \u5355\u7eaf\u5f62\u6cd5</li> </ol>"},{"location":"AI/loss/#check-loss-function-conditional-quantile","title":"Check Loss function \u2014\u2014 conditional quantile","text":"<p>Which class of data do we care about\uff1f We can trace the Quartile</p> \\[L_i=\\rho_\u03c4(a)=(\u03c4-I\\{a&lt;0\\})*a=\\begin{cases}\u03c4a&amp;a&gt;0\\\\(\u03c4-1)a&amp;a&lt;0\\end{cases}\\] <p>Targets: conditional median \\(\\iff f^*(x)=\u03c4-\\text{th quantile of }(Y|X=x)=\\argmin_f\\mathbb\\{\\Vert Y-f(X)\\Vert_1\uff5cX=x\\}\\)</p> <p></p> <ul> <li>proof:   Assume:</li> <li>\\(\\forall x, \\mathbb{E}[Y|X=x]\\lt\\infin\\)(\u5b58\u5728)</li> <li>\\(F_{Y|X=x}(\\cdot):=\\) the conditional cdf of \\(Y|X=x, \\begin{cases}\\text{cdf of} -\\infin=0\\\\\\text{cdf of} +\\infin=1\\\\\\text{cdf of median} =\\frac{1}{2}\\end{cases}\\)</li> </ul> \\[\\begin{align*} \\mathcal{L}(f)&amp;=\\mathbb{E}\\{\\rho_\u03c4\\cdot\\Vert Y-f(X)\\Vert_1\\vert X=x\\}\\\\ &amp;=\\int_{-\\infin}^{f(x)}(\u03c4-1)(y-f(x))\\text{d}F_{Y|X=x}(y)+\\int_{f(x)}^{+\\infin}\u03c4(y-f(x))\\text{d}F_{Y|X=x}(y)\\\\ \\cfrac{\\partial\\mathcal{L}(f)}{\\partial f}&amp;=\\int_{-\\infin}^{f(x)}(1-\u03c4)\\cdot\\text{d}F_{Y|X=x}(y)+\\int_{f(x)}^{+\\infin}-\u03c4\\cdot\\text{d}F_{Y|X=x}(y)\\\\ &amp;=(1-\u03c4)F_{Y|X=x}(y)\\Big\\vert_{-\\infin}^{f(x)}-\u03c4F_{Y|X=x}(y)\\Big\\vert^{+\\infin}_{f(x)}\\\\ &amp;=(1-\u03c4)(F_{Y|X=x}(f(x))-0)-\u03c4(1-F_{Y|X=x}(f(x)))\\xlongequal{SET}0\\\\ \\implies &amp; F_{Y|X=x}(f(x))=\u03c4 \\implies f(x)\\text{ is \u03c4 th quantile of} \\end{align*}\\] <p>\\(F_{Y|X=x}(f^*(x))=\u03c4,\\forall \u03c4\\in(0,1)\\implies f^*(x)=F_{Y|X=x}^{-1}(\u03c4)\\) will be the conditional\u00a0\ud835\udf49\u2013th quantile of\u00a0\ud835\udc80|\ud835\udc7f\u00a0=\u00a0\ud835\udc99</p>"},{"location":"AI/loss/#hinge-loss","title":"Hinge Loss","text":"\\[L_i=\\sum\\limits_{j\u2260y_i}\\max(0,s_j-s_{y_i}+1)\\]"},{"location":"AI/loss/#squared-hinge-loss","title":"Squared Hinge Loss","text":"\\[L_i=\\sum\\limits_{j\u2260y_i}\\max(0,s_j-s_{y_i}+1)^2\\]"},{"location":"AI/loss/#softmax","title":"Softmax","text":"<p>\\(\\(L_i=-\\log\\Big(\\cfrac{\\exp(s_{y_i})}{\\sum\\limits_j\\exp(s_j)}\\Big)\\)\\) \u66f4\u5173\u6ce8\u5c11\u89c1\u7684\u9519\u8bef</p>"},{"location":"AI/loss/#regularization-measure-complexity-and-penalize","title":"Regularization - measure complexity and penalize","text":"<p>Prevent the model from doing\u00a0too\u00a0well on training data, control \u590d\u6742\u5ea6</p> <p>according to problem</p>"},{"location":"AI/loss/#classification","title":"Classification","text":"<ul> <li>data: \\((X_i,Y_i),i=1,\\dots,n,X_i\\in\\R^p, X\\in\\R^{n\\times p}, Y_i\\) is categorical</li> <li>Classifier: \\(\\mathcal{F}=\\{f:f(\\cdot)\\in \\text{dom}(Y)\\}\\)</li> </ul> <p>Y \u662f\u7c7b\u522b\u5c5e\u6027 without numerical meaning\uff0c\u6211\u4eec\u53ea\u5728\u4e4e whether sample is assigned into the correct label or not\u3002</p> <p>\u56de\u5f52\u7684\u65f6\u5019\u5904\u7406\u7684\u662f\u8bef\u5dee\uff0c\u6240\u4ee5\u8981\u6700\u5c0f\u5316\uff0c\u800c\u73b0\u5728\u8003\u8651\u7684\u662f\u8054\u5408\u6982\u7387\uff0c\u6211\u4eec\u5e0c\u671b\u6982\u7387\u5c3d\u53ef\u80fd\u5927\uff0c\u6240\u4ee5\u8981\u6700\u5927\u5316</p> <p>\u591a\u5206\u7c7b Adjust the output of neural network</p> <p>the number of success \u9519\u6709\u591a\u5c11\u7684\u89d2\u5ea6 \u3002\u6211\u4eec\u5148\u60f3\u5230\u7684\u662f\uff1aIndictor &amp; 0-1 loss</p>"},{"location":"AI/loss/#from-0-1-loss","title":"From 0-1 loss","text":"<p>Empirical Risk with 0-1 Loss. with \\(Y_i\\in\\{-1,1\\}\\)</p> \\[\\min_f R(f) =\\cfrac{1}{n}\\sum\\limits_{i=1}^nI(f(X_i\u2260Y_i))\\Leftrightarrow\\max_f R(f)=\\cfrac{{1}}{n}\\sum\\limits_{i=1}^nf(X_i, \\theta)\\times Y_i\\] <p>0-1 loss is non-continuous, non-smooth.</p> <p> <p>non-continuous, non-smooth</p> <p>but we expect: continuous, smooth \ud83d\udca1 Surrogate Loss function \u4ee3\u7406\u635f\u5931\u51fd\u6570\u3002Proper surrogate loss function will lead to a consistent classifier. </p> </p> <p>Surrogate Loss function \u4ee3\u7406\u635f\u5931\u51fd\u6570. $L_i=\\phi(L_i) $, \\(\\phi\\) is continuous and decreasing.</p> <p>properties of \\(\\phi(\\cdot):\\)</p> <ol> <li>continuous: \u80fd\u901a\u8fc7\u68af\u5ea6\u6c42\u89e3\u4f18\u5316</li> <li>decreasing: $f(\u03a7_i,\\theta)Y_i\\uparrow\\iff \\phi(f(X_i,\\theta)\\times Y_i)\\downarrow $ \\(\\begin{cases}Y_i=+1&amp;\\xrightarrow{\\text{force}} f(X_i,\\theta)&gt;0\\uparrow\\implies\\hat{Y_i}=+1 \\\\Y_i=-1&amp;\\xrightarrow{\\text{force}} f(X_i,\\theta)&lt;0\\downarrow \\implies \\hat{Y_i}=-1\\end{cases}\\)</li> </ol> <p>Empirical Risk with 0-1 Loss</p> <p>Empirical Risk with Surrogate Loss Function</p> <p>$\\max_f R(f)=\\cfrac{{1}}{n}\\sum\\limits_{i=1}^nf(X_i, \\theta)\\times Y_i$</p> <p>$\\min_f R(f) =\\cfrac{1}{n}\\sum\\limits_{i=1}^n\\phi(f(X_i,\\theta)\\times Y_i)$</p> \\(\\phi(\\cdot)\\) Loss Function 0-1 loss: \\(I(\\cdot)\\) \\(I(y\\cdot f(x,\\theta)&lt;0)\\) Exponential loss(AdaBoost) \\(e^{-(\\cdot)}\\) \\(e^{-y\\cdot f(x,\\theta)}\\) Logistic loss \\(\\log\\{1+e^{-(\\cdot)}\\}\\) \\(\\log\\{1+\\exp(-y\\cdot f(x,\\theta))\\}\\) Hinge loss(SVM) \\(\\max\\{1-(\\cdot),0\\}\\) $ \\max{1-y\\cdot f(x,\\theta),0}$ <p></p>"},{"location":"AI/loss/#the-likelihood","title":"The Likelihood \u4f3c\u7136\u7684\u89d2\u5ea6","text":"<p>The Likelihood Function</p> <p>\\(\\small{[P(Y_i=(1,0,...)|X_i=x)]^{I(Y_i=(1,0,...))}\\times\\dots\\times [P(Y_i=(0,...,1)|X_i=x)]^{I(Y_i=(0,...,1))}}\\\\ =\\prod\\limits_{j=1}^{\\text{\\#category}}[P(Y_i=j|X=x)]^{I(Y_i=j)}\\\\ =[\\hat{y_{i1}}]^{I(Y_{i1}=\\red{1})}\\times[\\hat{y_{i2}}]^{I(Y_{i2}=\\red{1})}\\times\\dots\\times [\\hat{y_{ij}}]^{I(Y_{ij}=\\red{1})}\\times\\dots, \\red{\\begin{cases}\\hat{y_i}=(\\hat{y_{i1}},...,\\hat{y_{ij}}\\dots)\\\\\\hat{y_{ij}}=P(Y_i=j|X=x)\\\\\\hat{y_{ij}}\\in[0,1],\\sum\\limits_{j=1}^m\\hat{y_{ij}}=1\\end{cases}}\\\\ =[\\hat{y}_{i1}]^{Y_{i1}}\\times[\\hat{y}_{i2}]^{Y_{i2}}\\times\\dots\\times [\\hat{y}_{ij}]^{Y_{ij}}\\times\\dots,\\qquad \\red{Y_{ij}\\in\\{0,1\\}:=X_i\\text{\u662f\u4e0d\u662f\u5c5e\u4e8e}j\u7c7b}\\)</p> \\[L(Y_i|X_i)=\\prod \\limits_{j=1}^{\\text{\\#category}}[\\hat{y}_{ij}]^{Y_{ij}}=[\\hat{y}_{i1}]^{Y_{i1}}\\times[\\hat{y}_{i2}]^{Y_{i2}}\\times\\dots\\times [\\hat{y}_{ij}]^{Y_{ij}}\\times\\dots\\] <p>Log Likelihood Function. \\(l(Y_i|X_i)=\\log(L(\\cdot))=\\sum\\limits_{j=1}^{\\text{\\#category}}Y_{ij}\\times\\log[\\hat{y_{ij}}]\\\\\\qquad =Y_{i1}\\log[\\hat{y}_{i1}]+Y_{i2}\\log[\\hat{y}_{i2}]+\\dots+Y_{ij}\\log[\\hat{y}_{ij}]+\\dots\\)</p>"},{"location":"AI/loss/#cross-entropy","title":"Cross Entropy","text":"<p>Cross Entropy Loss. \\(\\text{CELoss}_i =-\\sum\\limits_{j=1}^{\\text{\\#category}}Y_{ij}\\times \\log \\hat{y}_{ij}\\)</p> <p>Empirical Risk with Cross Entropy Loss. \\(R(f)=\\frac{1}{\\text{\\#sample}} \\sum\\limits_{i=1}^{\\text{\\#sample}}\\Big[-\\sum\\limits_{j=1}^{\\text{\\#category}}Y_{ij}\\times \\log \\hat{y_{ij}}\\Big]=\\cfrac{1}{\\red{n}} \\sum\\limits_{i=1}^{\\red{n}}\\Big[-\\sum\\limits_{j=1}^{\\text{\\red{m}}}Y_{ij}\\times \\log \\hat{y_{ij}}\\Big]\\)</p> <p>\\(\\begin{cases}n:=\\text{\\#samples},m:=\\text{\\#catrgories}\\\\Y_{ij}\\in\\{0,1\\}, \\hat{y_{ij}}\\in[0,1],\\sum\\limits_{j=1}^m\\hat{y_{ij}}=1\\end{cases}\\)</p> <p>\u9996\u5148\u5b83\u662f\u8054\u5408\u6982\u7387\u3002\u6982\u7387\u90fd\u662f1\u4ee5\u4e0b\u7684\u6570\uff0c\u6240\u4ee5\u50cf\u8054\u5408\u6982\u7387\u8fd9\u79cd\u6982\u7387\u4e58\u6cd5\u7684\u503c\u4f1a\u8d8a\u6765\u8d8a\u5c0f\u3002[\u63d2\u56fe] \u7684\u786e\u5982\u6b64\u3002\u5982\u679c\u503c\u592a\u5c0f\uff0c\u7f16\u7a0b\u65f6\u4f1a\u51fa\u73b0\u7cbe\u5ea6\u95ee\u9898\u2014\u2014 \u4e3a\u4ec0\u4e48float16\u4f1a\u635f\u5bb3\u6b63\u786e\u7387</p> <p>\u53ef\u4ee5\u8bf4\u4ea4\u53c9\u71b5\u662f\u76f4\u63a5\u8861\u91cf\u4e24\u4e2a\u5206\u5e03\uff0c\u6216\u8005\u8bf4\u4e24\u4e2amodel\u4e4b\u95f4\u7684\u5dee\u5f02\u3002\u800c\u4f3c\u7136\u51fd\u6570\u5219\u662f\u89e3\u91ca\u4ee5model\u7684\u8f93\u51fa\u4e3a\u53c2\u6570\u7684\u67d0\u5206\u5e03\u6a21\u578b\u5bf9\u6837\u672c\u96c6\u7684\u89e3\u91ca\u7a0b\u5ea6\u3002\u56e0\u6b64\uff0c\u53ef\u4ee5\u8bf4\u8fd9\u4e24\u8005\u662f\u201c\u540c\u8c8c\u4e0d\u540c\u6e90\u201d\uff0c\u4f46\u662f\u201c\u6b8a\u9014\u540c\u5f52\u201d\u5566\u3002</p>"},{"location":"AI/loss/#ref","title":"\ud83d\udcd1\u00a0ref","text":"<ul> <li>Understanding the Bias-Variance Tradeoff</li> <li>\u504f\u5dee\uff08Bias\uff09\u4e0e\u65b9\u5dee\uff08Variance\uff09</li> <li>\u3010\u6df1\u5ea6\u5b66\u4e60\u3011\u4e00\u6587\u8bfb\u61c2\u673a\u5668\u5b66\u4e60\u5e38\u7528\u635f\u5931\u51fd\u6570\uff08Loss Function\uff09</li> <li>Chapter 7 Regression</li> </ul>"},{"location":"AI/pre/","title":"\u9884\u5904\u7406","text":"<p>\"Garbage in\uff0cgarbage out\u201d \u6570\u636e\u548c\u7279\u5f81\u5f80\u5f80\u51b3\u5b9a\u4e86\u7ed3\u679c\u7684\u4e0a\u9650\uff0c\u800c\u6a21\u578b\u3001\u7b97\u6cd5\u7684\u9009\u62e9\u53ca\u4f18\u5316\u5219\u662f\u5728\u9010\u6b65\u63a5\u8fd1\u8fd9\u4e2a\u4e0a\u9650</p> \u6570\u636e \u7ed3\u6784\u5316\u6570\u636e \u975e\u7ed3\u6784\u5316\u6570\u636e \u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u4e00\u5f20\u8868\uff0c\u6bcf\u5217\u90fd\u6709\u6e05\u6670\u7684\u5b9a\u4e49 \u6ca1\u6709\u7b80\u5355\u7684\u6e05\u6670\u5b9a\u4e49 \u6570\u503c\u578b,\u7c7b\u522b\u578b \u6587\u672c\u3001\u56fe\u50cf\u3001\u97f3\u9891\u3001\u89c6\u9891\u6570\u636e \u6709\u9650\uff0c\u53ef\u5217 ? <p>\u6570\u636e\u9884\u5904\u7406\u6ca1\u6709\u6807\u51c6\u7684\u6d41\u7a0b\uff0c\u4e00\u822c\u5305\u62ec\u8fd9\u51e0\u4e2a\u6b65\u9aa4\uff1a \u53bb\u9664\u552f\u4e00\u5c5e\u6027\u2192\u5904\u7406\u7f3a\u5931\u503c\u2192\u5c5e\u6027\u7f16\u7801\u2192\u6570\u636e\u6807\u51c6\u5316\u2192\u7279\u5f81\u9009\u62e9\u2192\u4e3b\u6210\u5206\u5206\u6790\u7b49\u3002 \u7279\u5f81\u5de5\u7a0b\u4e2d\u6709\u5f88\u591a\u5904\u7406\u6570\u636e\u7684\u5c0f\u6280\u5de7\uff0c\u5982\u591a\u91cd\u5171\u7ebf\u6027\u7684\u5206\u6790\u3001\u5f02\u5e38\u503c\u7684\u68c0\u6d4b\u7b49\u3002 ML \u5165\u95e8\uff1a\u5f52\u4e00\u5316\u3001\u6807\u51c6\u5316\u548c\u6b63\u5219\u5316</p>"},{"location":"AI/pre/#duplicate-data","title":"duplicate data","text":"<p>\u5728\u5f02\u6e90, heterogeneous sources \u6bd4\u8f83\u5bb9\u6613\u51fa\u73b0\u3002\u6bd4\u5982\u8bf4\u4e00\u4e2a\u4eba\u5728\u4e0d\u540c\u7684\u7f51\u7ad9\u4f7f\u7528\u4e0d\u540c\u7684\u90ae\u7bb1 Data cleaning Process</p>"},{"location":"AI/pre/#_2","title":"\u7f3a\u5931\u503c\u5904\u7406","text":"<p>\u7f3a\u5931\u503c\u8865\u5168\u7684\u65b9\u6cd5\u6709\u5747\u503c\u63d2\u8865\u3001\u540c\u7c7b\u5747\u503c\u63d2\u8865\u3001\u5efa\u6a21\u9884\u6d4b\u3001\u9ad8\u7ef4\u6620\u5c04\u3001\u591a\u91cd\u63d2\u8865\u3001\u6781\u5927\u4f3c\u7136\u4f30\u8ba1\u3001\u538b\u7f29\u611f\u77e5\u548c\u77e9\u9635\u8865\u5168</p> <ul> <li>drop \u7f3a\u5931\u503c\u7684\u6837\u672c \u9002\u7528\u4e8e\u8bad\u7ec3\u6570\u636e\u91cf\u8f83\u5927\u5e76\u4e14\u7f3a\u5931\u6570\u636e\u5360\u603b\u6570\u636e\u6bd4\u4f8b\u4e0d\u8d85\u8fc72%\u7684\u60c5\u51b5</li> <li>\u63d2\u8865 \u6837\u672c\u5c5e\u6027\u7684\u8ddd\u79bb\u662f\u53ef\u5ea6\u91cf\u7684\u503c, \u4ed6\u7684\u5927\u5c0f\u589e\u51cf\u662f\u5177\u6709\u610f\u4e49\u7684\uff0cnumerical<ul> <li>\u6240\u6709\u6837\u672c\u7684\u4f17\u6570</li> <li>\u540c\u7c7b\u6837\u672c\u7684\u4f17\u6570</li> </ul> </li> <li>\u8ba1\u7b97<ul> <li>\u5bf9\u6bcf\u4e2a\u53ef\u80fd\u503c\u8ba1\u7b97\u6982\u7387</li> <li>\u5efa\u6a21\u9884\u6d4b \u7528\u5176\u4ed6\u975e\u7a7a\u7279\u5f81\u7684\u6570\u636e\u8bad\u7ec3\u4e00\u4e2a\u6a21\u578b\uff0c\u7528\u6a21\u578b\u9884\u6d4b\u7f3a\u5931\u503c\u7684\u7279\u5f81</li> </ul> </li> </ul>"},{"location":"AI/pre/#_3","title":"\u7ec4\u5408\u7279\u5f81","text":"<p>\u4e3a\u4e86\u63d0\u9ad8\u590d\u6742\u5173\u7cfb\u7684\u62df\u5408\u80fd\u529b\uff0c\u5728\u7279\u5f81\u5de5\u7a0b\u4e2d\u7ecf\u5e38\u4f1a\u628a\u4e00\u9636\u79bb\u6563\u7279\u5f81\u4e24\u4e24\u7ec4\u5408\uff0c\u6784\u6210\u9ad8\u9636\u7ec4\u5408\u7279\u5f81</p> <ul> <li>\u57fa\u4e8e\u51b3\u7b56\u6811\u7684\u7279\u5f81\u7ec4\u5408\u5bfb\u627e\u65b9\u6cd5</li> </ul>"},{"location":"AI/pre/#_4","title":"\u5c5e\u6027\u53d8\u91cf\u5904\u7406","text":"<p>\u3010\u5b58\u5728\u987a\u5e8f\u5173\u7cfb\u3011\u300c\u9ad8\u4e2d\u4f4e\u300d= {1, .5, 0} \u3010\u4e0d\u5b58\u5728\u987a\u5e8f\u5173\u7cfb\u3011\u300c\u7537\u5973\u300d= {1, 0}</p>"},{"location":"AI/pre/#_5","title":"\u8fde\u7eed\u53d8\u91cf\u5904\u7406","text":"<ul> <li>\u65e0\u76d1\u7763<ul> <li>\u7b49\u6df1\u5206\u7bb1\uff1a \u6bcf\u4e2a\u5206\u7bb1\u6837\u672c\u6570\u91cf\u4e00\u6837</li> <li>\u7b49\u5bbd\u5206\u7bb1\uff1a \u6bcf\u4e2a\u5206\u7bb1\u53d6\u503c\u8303\u56f4\u4e00\u6837</li> </ul> </li> <li>\u9ad8\u65af\u5206\u5e03\u6a21\u62df</li> <li>\u6709\u76d1\u7763<ul> <li>\u4e8c\u5206\u6cd5   \u5bf9\u8fde\u7eed\u53d6\u503c\u7684\u5c5e\u6027\u6309\u9009\u5b9a\u7684\u9608\u503c a \u5206\u5272\u6210 \\(x\\gt a, x\\le a\\)   \u786e\u5b9a a\uff1a\\(\\forall a\\) \u626b\u63cf\u6570\u636e\u96c6\u83b7\u5f97\u8ba1\u6570\u77e9\u9635\u5e76\u8ba1\u7b97\u57fa\u5c3c\u7cfb\u6570\u3002\u7a77\u4e3e\u590d\u6742\u5ea6 \\(O(n^2)\\)</li> <li>MDL, \u6700\u5c0f\u63cf\u8ff0\u957f\u5ea6   \u4e8c\u5206\u6cd5\u7684\u62d3\u5c55\uff0c\u591a\u4e2a\u533a\u95f4</li> </ul> </li> </ul>"},{"location":"AI/pre/#_6","title":"\u7c7b\u522b\u7f16\u7801","text":"<p>\u5e8f\u53f7\u7f16\u7801, Ordinal Encoding\u3002\u6392\u5e8f \u7c7b\u522b\u95f4\u5177\u6709\u5927\u5c0f\u5173\u7cfb\uff0c\u6709\u4f18\u52a3\u5173\u7cfb \u7f3a\u70b9: \u7a00\u758f\u5411\u91cf\uff0c\u7eac\u5ea6\u9ad8\uff0c\u5360\u7a7a\u95f4\uff0c</p> <p>\u4f18\u5316</p> <ol> <li>\u7a00\u758f\u8868\u793a\uff0c\u8282\u7701\u7a7a\u95f4</li> <li>\u7279\u5f81\u9009\u62e9\uff0c\u51cf\u5c11\u7ef4\u5ea6\uff0c\u5408\u5e76\u7279\u5f81</li> </ol> <p>\u72ec\u70ed\u7f16\u7801, One-hot Encoding\u3002\u53ea\u6709\u67d0\u4e00\u7ef4\u53d6\u503c\u4e3a1\uff0c\u5176\u4ed6\u90fd\u662f0 \u7c7b\u522b\u95f4\u4e0d\u5177\u6709\u5927\u5c0f\u5173\u7cfb\u7684\u7279\u5f81\uff0c\u65e0\u5206\u4f18\u52a3</p> <p>\u4e8c\u8fdb\u5236\u7f16\u7801,Binary Encoding\u30021.\u5e8f\u53f7\u7f16\u78012.\u8f6c\u4e3a\u7c7b\u522bID\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u7f16\u7801\u3002\u672c\u8d28\u4e0a\u662f\u5229\u7528\u4e8c\u8fdb\u5236\u5bf9ID\u8fdb\u884c\u54c8\u5e0c\u6620\u5c04\uff0c\u6700\u7ec8\u5f97\u52300/1\u7279\u5f81\u5411\u91cf\uff0c\u4e14\u7ef4\u6570\u5c11\u4e8e\u72ec\u70ed\u7f16\u7801\uff0c\u8282\u7701\u4e86\u5b58\u50a8\u7a7a\u95f4\u3002 \u65e0\u8981\u6c42</p> <p>\u8840\u578b A\uff0cB\uff0cAB\uff0cO</p> <p>One-hot Encoding A\u00a0\u00a0 (1, 0, 0, 0)\uff0c B\u00a0\u00a0 (0, 1, 0, 1) AB (0, 0, 1, 0)\uff0c O\u00a0\u00a0 (0, 0, 0, 1) Binary Encoding 0A, 1B, 2AB, 3O A\u00a000\uff1b B\u00a001\uff1bAB 10\uff1b O\u00a011</p>"},{"location":"AI/pre/#_7","title":"\u9ad8\u7ef4\u5ea6","text":"<p>\u95ee\u9898:</p> <ul> <li>KNN\uff0c\u9ad8\u7ef4\u7a7a\u95f4\u4e0b\u4e24\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\u5f88\u96be\u5f97\u5230\u6709\u6548\u7684\u8861\u91cf\uff1b</li> <li>Logistic Regression\uff0c\u53c2\u6570\u7684\u6570\u91cf\u4f1a\u968f\u7740\u7ef4\u5ea6\u7684\u589e\u9ad8\u800c\u589e\u52a0\uff0c\u5bb9\u6613\u5f15\u8d77\u8fc7\u62df\u5408\u95ee\u9898\uff1b</li> <li>\u901a\u5e38\u53ea\u6709\u90e8\u5206\u7ef4\u5ea6\u662f\u5bf9\u5206\u7c7b\u3001\u9884\u6d4b\u6709\u5e2e\u52a9</li> </ul>"},{"location":"AI/pre/#normalization","title":"\u53bb\u91cf\u7eb2 \u2192 Normalization \u6570\u636e\u6807\u51c6\u5316","text":"<p>==Normalization\uff0c \u6570\u636e\u6807\u51c6\u5316==\u662f\u5c06\u6570\u636e\u6309\u6bd4\u4f8b\u7f29\u653e\uff0c\u4f7f\u4e4b\u843d\u5165\u4e00\u4e2a\u5927\u81f4\u76f8\u540c\u6570\u503c\u533a\u95f4\u4e0a\uff0c\u4ece\u800c\u6d88\u9664\u6570\u636e\u4e4b\u95f4\u91cf\u7eb2\u7684\u5dee\u5f02\u3002\u901a\u8fc7\u6807\u51c6\u5316\u5904\u7406\uff0c\u53ef\u4ee5\u4f7f\u4e0d\u540c\u7684\u7279\u5f81\u5177\u6709\u76f8\u540c\u7684\u5c3a\u5ea6\uff08Scale\uff09</p> <p>\u4e3a\u4ec0\u4e48\u8981\u53bb\u91cf\u7eb2\uff1f</p> <ul> <li>\u6570\u91cf\u7ea7\u5927\u7684will dominate the signal \u2192\u53ef\u80fd\u6a21\u578b\u53d8\u5dee <p>\u6bd4\u5982\u6837\u672c\u4e2d\u6709\u4e24\u4e2a\u5c5e\u6027\uff08\u5e74\u9f84\u3001\u5e74\u6536\u5165\uff09\uff0c\u4e24\u4e2a\u4e2a\u4f53\u7684\u5c5e\u6027\u503c\u5206\u522b\u4e3a\uff0825\u300160000\uff09\u548c\uff0855\u300161000\uff09\uff0c\u5982\u679c\u4e0d\u8fdb\u884c\u6570\u636e\u7684\u6807\u51c6\u5316\uff0c\u76f4\u63a5\u5c06\u4e24\u4e2a\u5c5e\u6027\u7684\u5dee\u5f02\u503c\uff0830, 1000\uff09\u4f5c\u4e3a\u4e2a\u4f53\u7684\u5dee\u5f02\u7a0b\u5ea6\uff0c\u5c31\u4f1a\u5f97\u51fa\u5e74\u6536\u5165\u7684\u5dee\u5f02\u8fdc\u5927\u4e8e\u5e74\u9f84\u5dee\u5f02\u7684\u7ed3\u679c\uff0c\u800c\u5b9e\u9645\u4e0a\u5374\u660e\u663e\u662f\u5e74\u9f84\u7684\u5dee\u5f02\u8fdc\u5927\u4e8e\u5e74\u6536\u5165\u7684\u5dee\u5f02</p> </li> <li>\u6570\u91cf\u7ea7\u4e0d\u4e00\u6837\u53ef\u80fd\u4f1a\u4f7f\u6536\u655b\u66f4\u6162. \u6a21\u578b\u4f1a\u503e\u5411\u4e8e\u6570\u503c\u5dee\u522b\u6bd4\u8f83\u5927\u7684\u7279\u5f81\uff0c\u5bfc\u81f4\u5bfb\u4f18\u53d8\u6162 <p>\\(z=ax+by,x\\in[0,10],y\\in[0,3]\\) \u68af\u5ea6\u4e0b\u964d\u6cd5\uff1a\\(\\nabla w = -\\frac{\\partial f}{\\partial w}*\\alpha \\implies \\nabla a = -x*\\alpha, \\nabla b = -y*\\alpha\\) \\(\\because x&gt;&gt;y \\therefore\\nabla a&gt;\\nabla b\\), a \u53c2\u6570\u5bb9\u6613\u8df3\u8dc3    </p> </li> </ul> <p>\u6807\u51c6\u5316\u540e\u53ef\u4ee5\u66f4\u52a0\u5bb9\u6613\u5730\u5f97\u51fa\u6700\u4f18\u53c2\u6570\u4ee5\u53ca\u8ba1\u7b97\u51fa J(w,b) \u7684\u6700\u5c0f\u503c\uff0c\u4ece\u800c\u8fbe\u5230\u52a0\u901f\u6536\u655b\u7684\u6548\u679c  - \u5355\u4f4d\u4e0d\u540c\u4f1a\u5f71\u54cddistance-sensitive\u7684\u6a21\u578b\u8f83\u5927\u3002\u4f9d\u8d56\u4e8e\u6837\u672c\u8ddd\u79bb\u7684\u7b97\u6cd5\u5bf9\u4e8e\u6570\u91cf\u7ea7\u975e\u5e38\u654f\u611f\u3002</p> <p>\u901a\u8fc7\u68af\u5ea6\u4e0b\u964d\u6cd5\u6c42\u89e3\u7684\u6a21\u578b\u901a\u5e38\u662f\u9700\u8981\u5f52\u4e00\u5316\u7684\uff0c\u5305\u62ec\u7ebf\u6027\u56de\u5f52\u3001\u903b\u8f91\u56de\u5f52\u3001\u652f\u6301\u5411\u91cf\u673a\u3001\u795e\u7ecf\u7f51\u7edc\u7b49\u6a21\u578b\u3002</p> <p>\u6570\u636e\u5f52\u4e00\u5316\u5931\u6548</p> <p>\u4f46\u5bf9\u4e8e\u51b3\u7b56\u6811\u6a21\u578b\u5219\u5e76\u4e0d\u9002\u7528\uff0c\u4ee5C4.5\u4e3a\u4f8b\uff0c\u51b3\u7b56\u6811\u5728\u8fdb\u884c\u8282\u70b9\u5206\u88c2\u65f6\u4e3b\u8981\u4f9d\u636e\u6570\u636e\u96c6D\u5173\u4e8e\u7279\u5f81x\u7684\u4fe1\u606f\u589e\u76ca\u6bd4\uff0c\u800c\u4fe1\u606f\u589e\u76ca\u6bd4\u8ddf\u7279\u5f81\u662f\u5426\u7ecf\u8fc7\u5f52\u4e00\u5316\u662f\u65e0\u5173\u7684\uff0c\u56e0\u4e3a\u5f52\u4e00\u5316\u5e76\u4e0d\u4f1a\u6539\u53d8\u6837\u672c\u5728\u7279\u5f81x\u4e0a\u7684\u4fe1\u606f\u589e\u76ca</p> <p>\u7ebf\u6027\u51fd\u6570\u5f52\u4e00\u5316, Min-Max Scaling. \u5bf9\u539f\u59cb\u6570\u636e\u8fdb\u884c\u7ebf\u6027\u53d8\u6362\uff0c\u4f7f\u7ed3\u679c\u6620\u5c04\u5230[0, 1]. \\(x_i'=\\cfrac{x_i-\\min(A)}{\\max(A)-\\min(A)}\\)</p> <ol> <li>\u65b0\u6570\u636e\u53ef\u80fd\u4f1a\u5bfc\u81f4 max \u548c min \u7684\u503c\u53d1\u751f\u53d8\u5316\uff0c\u9700\u8981\u91cd\u65b0\u5b9a\u4e49\u3002</li> <li>\u5bf9\u79bb\u7fa4\u70b9\u654f\u611f\uff0c\u56e0\u4e3a\u79bb\u7fa4\u70b9\u4f1a\u5bfc\u81f4\u6700\u5927\u503c\u6216\u6700\u5c0f\u503c\u53d1\u751f\u5f88\u5927\u7684\u53d8\u5316\uff0c\u4ece\u800c\u6539\u53d8\u6837\u672c\u6570\u636e\u7684\u7edf\u8ba1\u5206\u5e03\u89c4\u5f8b</li> </ol> <p>z-score. \u4f1a\u5c06\u539f\u59cb\u6570\u636e\u6620\u5c04\u5230 \\(N(0,1)\\).\\(x_i'=\\cfrac{x_i-\\mu}{\\sigma},\\begin{cases}\\hat\\mu=\\cfrac{1}{n}\\sum\\limits_{i=1}^nx_i\\\\\\hat\\sigma=\\sqrt{\\cfrac{\\sum\\limits_{i=1}^n(x_i-\\hat\\mu)^2}{\\red{n-1}}}\\end{cases}\\)</p> <p>\u8981\u6c42\u6837\u672c\u5c5e\u6027\u503c\u6570\u636e\u670d\u4ece\u6b63\u6001\u5206\u5e03\uff0c\u8fd9\u5c31\u8981\u6c42\u6837\u672c\u6570\u91cf\u8db3\u591f\u591a\uff0c\u6837\u672c\u6570\u91cf\u592a\u5c11\u65f6\u65e0\u6cd5\u4fdd\u8bc1\u80fd\u8fbe\u5230\u6b64\u8981\u6c42\uff0c\u56e0\u6b64\u4e0d\u9002\u5408\u4f7f\u7528Z-score\u6807\u51c6\u5316\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u91cc\u9664\u4ee5 n-1 \u800c\u4e0d\u662f n\uff0c\u662f\u56e0\u4e3a\u4f7f\u7528\u6837\u672c\u5bf9\u65b9\u5dee\u8fdb\u884c\u4f30\u8ba1\u662f\u6709\u504f\u4f30\u8ba1\uff0c\u9664\u4ee5n-1 \u662f\u5bf9\u8fd9\u4e2a\u504f\u5dee\u7684\u4fee\u6b63</p> <p>Z-score Normalization \uff08a. origin; b. after extracting mean; c. after z-score Normalization\uff09</p>"},{"location":"AI/DL/","title":"DL","text":"<p>Deep learning\u00a0is part of a broader family of\u00a0machine learning\u00a0methods based on\u00a0artificial neural networks\u00a0with\u00a0representation learning (\u8868\u5f81\u5b66\u4e60).</p> <p>properties of NN\uff1a</p> <ol> <li>Neural networks are composited functions.</li> <li>Neural networks can approximate other functions. Any\u00a0continuous functions\u00a0defined on a compact set can be approximated\u00a0arbitrarily well\u00a0by a\u00a0shallow neural network\u00a0if the shallow neural network is\u00a0arbitrarily wide. \u5982\u679c\u6d45\u795e\u7ecf\u7f51\u7edc\u4efb\u610f\u5bbd\uff0c\u5219\u5728\u7d27\u96c6\u4e0a\u5b9a\u4e49\u7684\u4efb\u4f55\u8fde\u7eed\u51fd\u6570\u90fd\u53ef\u4ee5\u88ab\u6d45\u795e\u7ecf\u7f51\u7edc\u4efb\u610f\u8fd1\u4f3c\u3002</li> <li>Neural networks can be expressive. \u795e\u7ecf\u7f51\u7edc\u53ef\u4ee5\u5bcc\u6709\u8868\u73b0\u529b\u3002</li> </ol>"},{"location":"AI/DL/#info","title":"info","text":""},{"location":"AI/DL/#global-features-local-features","title":"global features \u5168\u5c40\u7279\u5f81 \ud83c\udd9a local features","text":"<p>==\u5168\u5c40\u7279\u5f81==\u662f\u6307 \u4fe1\u606f\u7531\u6574\u5757 input \u4ea7\u751f \u6bd4\u5982\u8bf4 MLP\uff0c\u7b2c\u4e00\u5c42\u7684\u6bcf\u4e00\u4e2a input \u90fd\u662f\u5168\u8fde\u63a5\u7684\uff0c\u5c31\u662f\u6bcf\u4e00\u4e2a out put \u90fd\u662f\u5168\u4f53 input \u7684\u8fd0\u7b97\uff0c\u6536\u83b7\u7684\u4e5f\u662f\u5168\u4f53 input \u7684\u4fe1\u606f</p> <p>==\u5c40\u90e8\u7279\u5f81==\u662f\u6307 \u4fe1\u606f\u7531\u90e8\u5206 input \u4ea7\u751f\u3002 \u6bd4\u5982\u8bf4CNN\uff0cCNN\u662f\u7528\u5377\u79ef\u6838\u548c\u611f\u53d7\u91ce\u505a\u8fd0\u7b97\uff0c\u6bcf\u4e00\u4e2a\u65b0\u4ea7\u751f\u7279\u5f81\u6570\uff0c\u4e5f\u5c31\u662f output \u7684\u4e00\u4e2a\u5c0f\u5c0f\u7684\u6570\u5b57\uff0c\u56ca\u62ec\u7684\u4e5f\u53ea\u662f\u4e00\u4e2a\u5c0f\u5c0f\u7684\u611f\u53d7\u91ce\u7684\u4fe1\u606f\u3002\u5bf9\u4e00\u4e2akernel \u6765\u8bf4\uff0c\u867d\u7136 output \u662f\u7531\u6240\u6709\u7684\u611f\u53d7\u91ce of input \u5377\u79ef\u4e4b\u540e\u5806\u53e0\u800c\u6210\u7684\u4e00\u4e2a [L, W]\u77e9\u9635\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e00\u4e2a kernel \u548c\u6240\u6709\u7684\u611f\u53d7\u91ce\u505a\u8fd0\u7b97\u7684\u7ed3\u679c\u5806\u53e0\u800c\u6210\u3002\u4f46\u662f \u7b80\u5355\u5c40\u90e8\u7279\u5f81\u5806\u53e0\u4e0d\u7b49\u4e8e\u5168\u5c40\u7279\u5f81\u3002 \u8fd9\u4e5f\u662fCNN\u7a00\u758f\u94fe\u63a5\u7684\u7279\u70b9\u3002 \u6240\u4ee5\u6211\u4eec\u5e38\u8bf4CNN\u5bf9\u4e8e\u90a3\u79cd\u957f\u5e8f\u5217 long sequence input \u4e0d\u592a\u53cb\u597d\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u4e24\u4e2a\u95f4\u9694\u6bd4\u8f83\u8fdc\u7684 pixels \u6765\u8bf4\uff0c\u8981\u662f\u60f3\u83b7\u5f97\u4ed6\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb\u7279\u5f81\uff0c\u5c31\u9700\u8981\u5806\u53e0\u5f88\u591a\u4e2a\u5377\u79ef\u5c42\uff0c\u624d\u80fd\u83b7\u5f97\u4ed6\u4eec\u7684\u5173\u7cfb\u7279\u5f81\u3002</p> <p></p>"},{"location":"AI/DL/#categories-of-neural-networks","title":"categories of Neural Networks","text":"Deep Neural Networks DNN Learning\u00a0Algorithms\uff08learning task Multi-Layer Perceptron MLP \u591a\u5c42\u611f\u77e5\u5668 Regression ^ classification Convolutional Neural networks CNN \u5377\u79ef\u795e\u7ecf\u7f51\u7edc Classification ^ Generative Learning \u751f\u6210\u5f0f\u5b66\u4e60 Recurrent Neural Networks RNN \u9012\u5f52\u795e\u7ecf\u7f51\u7edc Natural Language Processing (NLP) <p>\u751f\u6210\u5b66\u4e60</p> <ul> <li> <p>\u5173\u4e8e\u5c42\u4e0e\u5c42\u795e\u7ecf\u5143\u7684\u8fde\u63a5   \u4ece\u7ed3\u6784\u6765\u8bf4\uff0c\u6392\u9664 dropout \u5f71\u54cd. global features  \ud83c\udd9a local features</p> <ul> <li>fully connected NN (FCNN) \u201c\u5b8c\u5168\u8fde\u63a5\u201d\u6216\u6709\u65f6\u79f0\u4e3a\u201c\u7d27\u5bc6\u8fde\u63a5\u201d\u3002\u6240\u6709\u53ef\u80fd\u7684\u8fde\u63a5\u5c42\u90fd\u5b58\u5728\u5230\u56fe\u5c42\uff0c\u8fd9\u610f\u5473\u7740\u8f93\u5165\u5411\u91cf\u7684\u6bcf\u4e2a\u8f93\u5165\u90fd\u4f1a\u5f71\u54cd\u8f93\u51fa\u5411\u91cf\u7684\u6bcf\u4e2a\u8f93\u51fa\u3002</li> <li>convolutional NN (CNNs) \u5e76\u975e\u6240\u6709\u8f93\u5165\u8282\u70b9\u90fd\u4f1a\u5f71\u54cd\u6240\u6709\u8f93\u51fa\u8282\u70b9\u3002\u8fd9\u4f7f\u5377\u79ef\u5c42\u5728\u5b66\u4e60\u4e2d\u5177\u6709\u66f4\u5927\u7684\u7075\u6d3b\u6027\u3002\u6b64\u5916\uff0c\u6bcf\u5c42\u7684\u6743\u91cd\u6570\u91cf\u8981\u5c0f\u5f97\u591a\uff0c\u8fd9\u5bf9\u56fe\u50cf\u6570\u636e\u7b49\u9ad8\u7ef4\u8f93\u5165\u6709\u5f88\u5927\u5e2e\u52a9\u3002</li> <li>Randomly wired NN \u968f\u673a\u5e03\u7ebf\u7684\u795e\u7ecf\u7f51\u7edc also works</li> </ul> </li> <li> <p>\u5173\u4e8e\u6df1\u5ea6\u548c\u5e7f\u5ea6</p> <ul> <li>Shallow Neural Network (better)</li> <li>Deep Neural Networks</li> </ul> <p>For example, we have five nerouns. If you have two layers like 2*3=6 &gt; 5 larger space \u5230\u5e95\u54ea\u4e2a\u66f4better</p> <ul> <li>\u5927\u5c0f Larger Neural Networks perform better on larger data \u589e\u52a0\u9690\u85cf\u5c42\u3002\u9690\u85cf\u5c42\u662f\u8f93\u5165\u5c42\u4e0e\u8f93\u51fa\u5c42\u4e2d\u95f4\u7684\u7f51\u7edc\u5c42\uff0c\u5e76\u4e14\u53ef\u4ee5\u6709\u591a\u4e2a\u9690\u85cf\u5c42\u3002\u8fd9\u589e\u52a0\u4e86\u7f51\u7edc\u7684\u6df1\u5ea6\uff0c\u4e30\u5bcc\u4e86\u7f51\u7edc\u7684\u8868\u8fbe\u80fd\u529b\u3002</li> </ul> </li> <li> <p>Ref   A Deep Learning Tutorial: From Perceptrons to Deep Networks What is a Neural Network? Backpropagation for Dummies</p> </li> </ul> <p>\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6\u6307\u660e\u4e86\u8bbe\u8ba1\u65b9\u5411\uff1a\u4ee5\u8ba1\u7b97\u56fe\u4e3a\u6838\u5fc3\uff0c\u91c7\u7528GPU\u8bbe\u5907\u52a0\u901f\u3002</p>"},{"location":"AI/DL/#_1","title":"\u79d1\u5b66\u8ba1\u7b97","text":"<ul> <li>\u4e3a\u4ec0\u4e48\u4f7f\u7528\u591a\u7ef4\u6570\u7ec4\uff0c \u4e3a\u4ec0\u4e48 batch \u4e00\u822c\u662f64\u3001128\u6216256\uff1f \u73b0\u4ee3\u8ba1\u7b97\u673a\u90fd\u662f\u591a\u6838\u591a\u5904\u7406\u5668\u7684\uff0c\u652f\u6301\u591a\u7ebf\u7a0b\u548c\u591a\u8fdb\u7a0b\uff0c\u975e\u5e38\u9002\u5408\u77e9\u9635\u7684\u5e76\u884c\u8ba1\u7b97\u3002\u79d1\u5b66\u8ba1\u7b97\u5f80\u5f80\u90fd\u662f\u57fa\u4e8e\u77e9\u9635\u7684\u8ba1\u7b97\uff0c\u5e76\u4e14\u4f1a\u6307\u5b9a\u4e00\u4e2a\u9002\u5f53\u7684Batch\u3002\u4f8b\u5982\uff0cPyTorch\u89c6\u89c9\u5904\u7406\u4e2d\u901a\u5e38\u5c06Batch\u6307\u5b9a\u4e3a64\u3001128\u6216256\uff0c\u8fd9\u4e5f\u662f\u4e3a\u4e86\u5145\u5206\u5229\u7528\u8ba1\u7b97\u673a\u8d44\u6e90\u800c\u8003\u8651\u7684</li> </ul>"},{"location":"AI/DL/#parameter-tuning","title":"parameter tuning","text":"\\[ f(x;\\theta)=\\argmin\\limits_{\\theta}\\sum\\limits_{i=1}^n(Y_i-f(X_i))^2,X_i\\in\\R^p,Y_i\\in\\R\\\\\\\\\\mathcal F=\\{f:f(x;\\theta)\\text{ is a neural network parameterized by }\\theta\\in \\R^S\\}\\\\ \\] <p>\u7528 \\(\\mathcal F=\\{f:f(x;\\theta) \\}\\) \u53bb approximate \\(f(x;\\theta)\\)\uff0c\u4f46\u662f\u5b83\u662f closed-form \u7684\uff0c\u6240\u4ee5\u6211\u4eec\u6ca1\u6cd5\u50cf LSE of Linear regression \u4e00\u6837 \\(\\hat\\beta_{LSE}=\\argmin\\limits_{\\beta}\\Vert \\mathbb Y-\\mathbb X\\beta\\Vert_2^2=(\\mathbb X^T\\mathbb X)^{-1}\\mathbb X\\mathbb Y\\) \u76f4\u63a5\u6c42\u89e3\uff0c\u6240\u4ee5\u9700\u8981 search for \u03b8 using optimization algorithms.</p>"},{"location":"AI/DL/cnn/","title":"CNN","text":"<p>To maintain spatial struture.</p> <p>summary</p> <p>Conv - Accept a volume of size \\(W_1\\times H_1\\times D_1\\) - Requires 4 hyperparameters   - Number of filters \\(K\\)   - Filter' size \\(F\\)   - Stride \\(S\\)   - Zero padding \\(P\\) - Number of weights \\((F\\times F\\times D_1)\\times K + K\\text{(shared bias)}\\) - Produce a volume of size \\((\\frac{W_1-F+2P}{S}+1)\\times(\\frac{H_1-F+2P}{S}+1)\\times K\\) - In the output volume, the \\(d^{th}\\) of \\(W_2\\times H_2\\) is the result of performing a valid convolution of the \\(d^{th}\\) filter over the input volume with a stride \\(S\\), and the offser by \\(d^{th}\\) bias.</p> <p>Pool - Accept a volume of size \\(W_2\\times H_2\\times K\\) - Requires 2 hyperparameters   - pooling kernel' size \\(F\\)   - Stride \\(S\\) - Number of weights \\(0\\) - Produce a volume of size \\((\\frac{W_2-F}{S}+1)\\times(\\frac{H_2-F}{S}+1)\\) - It is not common to use zero padding for pooling layer.</p> <p>common setting</p> <p>\\(K\\) 2 \u7684\u5e42 F3S1P1, F5S1P2, F5S2P(whatever fits),F1S1P0</p>"},{"location":"AI/DL/cnn/#introduction","title":"Introduction","text":"<p>In\uff1a Vision Task\uff0c\u5c31\u662f\u9488\u5bf9\u56fe\u50cf\u8fd9\u4e00\u7279\u6b8a\u7ed3\u6784\uff0c\u5305\u62ec\u56fe\u7247\u5206\u7c7b, Object Detection \u76ee\u6807\u68c0\u6d4b\uff0c\u8fb9\u7f18\u68c0\u6d4b, Object Segmentation \u76ee\u6807\u63d0\u53d6\uff0c\u56fe\u7247\u98ce\u683c\u8fc1\u79fb\uff0c Image Captioning \u770b\u56fe\u8bf4\u8bdd, Retrieval \u6062\u590d\u56fe\u7247\u2026</p> <p>\u5173\u4e8e\u5904\u7406\u7684\u56fe\u7247\u5bf9\u8c61\uff0c\u6709\u5355\u7eaf\u57fa\u4e8e \u9ed1\u767d\u7167\u7247\u7070\u5ea6\u56fe\u50cf(width\u2716\ufe0fheight) \u7684\u5377\u79ef\uff0c\u4e5f\u6709\u57fa\u4e8e \u5f69\u8272\u7167\u7247\u7acb\u4f53RGB(wideth\u2716\ufe0fheight\u2716\ufe0fdepth\\channel) \u7684\u5377\u79ef</p> <p>CNN\u00a0is a sequence of\u00a0Convolution Layers, interspersed with activation functions.  <p>CNN is proposed to\u00a0reduce\u00a0the number of parameters, preserve\u00a0the image layout information, and make the network\u00a0deeper </p> </p> <p>\u548c\u5168\u8fde\u63a5\u76f8\u6bd4\u8f83\uff0c\u5168\u8fde\u63a5\u7684\u53c2\u6570\u6570\u91cf\u8f83\u591a\uff08\u4e24\u5c42\u4e4b\u95f4\u7684\u795e\u7ecf\u5143\u9700\u8981\u4e24\u4e24\u76f8\u8fde\uff09\uff0c\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\u7684\u53c2\u6570\u8f83\u5c11\uff0c\u4e3b\u8981\u662f\u7531\u4e8e\u6743\u503c\u5171\u4eab\u548c\u7a00\u758f\u8fde\u63a5\u3002</p> <p> </p> <ol> <li>The input of image data into the convolution neural network is processed with the help of pixel values of the image in the convolution layer.</li> <li>Filters are generated that perform convolutions over the entire image and train the network to identify and learn features from images, which are converted to matrices.</li> <li>Batch normalization of input vectors is performed at each layer, so as to ensure all input vectors are normalized and hence regularization in the network is attained.</li> <li>The convolutions are performed until better accuracy has been attained and maximum feature extraction is done.</li> <li>Convolutions result in the sub-sampling of images and the dimensions of input get changed according to padding and stride chosen.</li> <li>Each convolution follows the activation layer(ReLU) and pooling layer, which brings in non-linearity and helps in sub-sampling respectively.</li> <li>After the final convolution, the input matrix is converted to feature vectors. This feature vector is the flattened layer.</li> <li>Feature vector serves as input to the next layer(fully connected layer), where all features are collectively transferred into this network. Dropout of random nodes occurs during training to reduce overfitting in this layer.</li> <li>Finally, the raw values which are predicted output by the network are converted to probabilistic values with the use of softmax function.</li> </ol>"},{"location":"AI/DL/cnn/#keywords","title":"Keywords","text":"<p>\u5171\u4eab\u6743\u91cd, \u5c40\u90e8\u611f\u77e5\u57df &amp; \u7a00\u758f\u8fde\u63a5,Spatial Information</p>"},{"location":"AI/DL/cnn/#shared-weights","title":"Shared Weights\uff0c\u5171\u4eab\u6743\u91cd","text":"<p>\u540c\u4e00\u4e2afilter\u5728\u8f93\u5165\u77e9\u9635\u4e2d\u8fdb\u884c\u626b\u63cf</p> <p>\u4e00\u4e2a\u9690\u85cf\u5c42\u4e2d\u7684\u6240\u6709\u795e\u7ecf\u5143\u90fd\u68c0\u6d4b\u5728\u56fe\u50cf\u7684\u4e0d\u540c\u4f4d\u7f6e\u5904\u7684\u540c\u4e00\u4e2a\u7279\u5f81\u3002\u6743\u91cd\u5171\u4eab\uff0c\u5219\u68c0\u6d4b\u7279\u5f81\u76f8\u540c\u3002 \u56e0\u6b64\u4e5f\u5c06\u4ece\u8f93\u5165\u5c42\u5230\u9690\u85cf\u5c42\u7684\u8fd9\u79cd\u6620\u5c04\u79f0\u4e3a\u7279\u5f81\u6620\u5c04\uff0cfilters, kernels\u3002\u8be5\u7279\u5f81\u6620\u5c04\u7684\u6743\u91cd\u79f0\u4e3a\u5171\u4eab\u6743\u91cd\uff0c\u5176\u504f\u7f6e\u79f0\u4e3a\u5171\u4eab\u504f\u7f6e\u3002</p>"},{"location":"AI/DL/cnn/#local-receptive-fields-sparse-connectivity","title":"Local Receptive Fields &amp; Sparse Connectivity, \u5c40\u90e8\u611f\u77e5\u57df &amp; \u7a00\u758f\u8fde\u63a5","text":"<p>For convolution with kernel size\u00a0\\(K\\), each element in the output depends on a\u00a0\\(K\\times K\\)\u00a0receptive field in the input. Each successive convolution contains multiple regions from the previous one. \u8f93\u51fa\u77e9\u9635\u4e2d\u7684\u6bcf\u4e00\u4e2a\u6570\u503c\u53ea\u7531\u8f93\u5165\u6570\u636e\u7684\u4e00\u90e8\u5206\u8ba1\u7b97\u5f97\u6765\u3002\u4e0e\u5e38\u89c4\u795e\u7ecf\u7f51\u7edc\u4e00\u6837\uff0c\u8f93\u5165\u5c42\u7684\u795e\u7ecf\u5143\u9700\u8981\u548c\u9690\u85cf\u5c42\u7684\u795e\u7ecf\u5143\u8fde\u63a5\u3002\u4f46\u8fd9\u91cc\u4e0d\u662f\u5c06\u6bcf\u4e00\u4e2a\u8f93\u5165\u795e\u7ecf\u5143\u90fd\u4e0e\u6bcf\u4e00\u4e2a\u9690\u85cf\u795e\u7ecf\u5143\u8fde\u63a5\uff0c\u800c\u662f\u4ec5\u4ec5\u5728\u4e00\u4e2a\u56fe\u50cf\u7684\u5c40\u90e8\u533a\u57df\u521b\u5efa\u8fde\u63a5</p> <p> </p>"},{"location":"AI/DL/cnn/#spatial-information","title":"Spatial Information","text":"<p>\u8f93\u5165\u5c42\uff1a\u4e8c\u7ef4\u77e9\u9635\u6392\u5217\u7684\u795e\u7ecf\u5143\u3002</p>"},{"location":"AI/DL/cnn/#structure","title":"Structure","text":""},{"location":"AI/DL/cnn/#input-layer","title":"Input Layer","text":"<p>\u4e8c\u7ef4\u77e9\u9635\u6392\u5217\u7684\u795e\u7ecf\u5143\u3002</p>"},{"location":"AI/DL/cnn/#convolution-layers-conv","title":"Convolution Layers, Conv","text":"<p>Convolve the filter with the image \\(\\Rightarrow\\) slide over the image spatially, computing dot products</p> <p>\u5b8c\u6210\u56fe\u50cf\u548cfilter \u7684\u5377\u79ef\u5c31\u662f</p> <ol> <li>\u7528\u4e00\u4e2a\u5c0f\u5c0f\u7684 \\(F\\times F\\times D\\) shared filter \u5728\\(N\\times N\\times D\\) \u56fe\u50cf\u4e0a slide spatially, \u7a7a\u95f4\u610f\u4e49\u4e0a\u5730\u6ed1\u52a8\u3002</li> <li> <p>\u6ed1\u52a8\u7684\u65f6\u5019\uff0c\u6bcf\u4e00\u6b21\u6846\u5b9a\u7684\u5c0f\u5c0f\u5bf9\u5e94\u5c3a\u5bf8 \\(F\\times F\\times D\\) \u5757 chunk of the image, Local Receptive Fields\uff0c\u548c \\(F\\times F\\times D\\) shared filter \u505a dot product element-wise multiplication\uff0c.</p> <p>D\u4e2a channel\uff0c\u90fd\u8981\u5206\u522b\u548c\u8f93\u5165\u7684D\u4e2achannel \u505a\u5377\u79ef\uff0c\u5f97\u5230D\u4e2a\u7279\u5f81\u56fe\uff0c\u7136\u540e\u901a\u9053\u878d\u5408, sum all the (weights x inputs) of D channels</p> <ol> <li>\u5c06\u6240\u6709\u6ed1\u52a8\u7684\u5230\u7684\u7ed3\u679c\u6309\u7a7a\u95f4\u987a\u5e8f\u91cd\u65b0\u62fc\u6210: \\((N-F+1)\\times(N-F+1)\\times \\red{1}\\) tensor</li> <li>\u518d\u52a0\u4e0a \\((N-F+1)\\times(N-F+1)\\times \\red{1}\\) shared bias \u504f\u7f6e</li> </ol> </li> </ol> <p>\u4ee5\u4e0a\u662f\u505a\u4e00\u4e2afilter\u7684\u8fc7\u7a0b\u3002\\(w^Tx+b\\)\u3002 \u56e0\u4e3a input image \u548c filter \u7684\u4e58\u6cd5\u662f element-wise multiplication\uff0c\u5c31\u548c\u5411\u91cf\u70b9\u79ef\u4e00\u6837\uff0c\u6240\u4ee5\u53ef\u4ee5\u60f3\u8c61\u4e3a\u591a\u7ef4\u7684 chunk \u548c filter \u548c bias \u5c55\u5e73\u6210\u5411\u91cf\uff0c\\(\\R^{F\\times F\\times D}\\xrightarrow{\\text{Flatten}}\\R^{F^2D\\times 1}\\xrightarrow{\\text{dot product}}\\R\\)</p> <p>\\(K\\) \u4e2a filters \u5c31\u6709 \\(K\\) \u4e2a tensor\uff0c\u6700\u540e stack \u5806\u53e0 these up to get a new \u201cimage tensor\u201dactivation map of size as the input of the next layer. \u7acb\u4f53\u5377\u79ef\u7684\u8f93\u51fa\u7ed3\u679c\u7684\u7ef4\u5ea6\uff0c\u957f\u548c\u5bbd\u548c\u4e4b\u524d\u7070\u5ea6\u56fe\u50cf\u7684\u8ba1\u7b97\u4e00\u6837\uff0c\u800c\u7ed3\u679c\u7684\u901a\u9053\u6570\u5219\u7531\u8fc7\u6ee4\u5668\u7684\u4e2a\u6570\u51b3\u5b9a \\(\\((N-F+1)\\times(N-F+1)\\times \\red{K}\\)\\)</p> <p>\u5e73\u9762\u7684\uff0ce.g.\uff1a\u9ed1\u767d\u7167\u7247\u7070\u5ea6\u56fe\u50cf</p> <p>\u7acb\u4f53\u7684\uff0ce.g\uff1a\u5f69\u8272\u7167\u7247\u7acb\u4f53RGB\u56fe\u50cf</p> <ul> <li>\u7acb\u4f53\u7684\uff0ce.g\uff1a\u5f69\u8272\u7167\u7247\u7acb\u4f53RGB\u56fe\u50cf \u8fc7\u6ee4\u5668\u662f\u4e00\u4e2a\u7acb\u65b9\u4f53\uff0c\u5728\u8f93\u5165\u6570\u636e\u4e0a\u626b\u63cf\uff0c\u6bcf\u4e00\u4e2a\u901a\u9053\u7684\u6743\u91cd\u5206\u522b\u4e0e\u8f93\u5165\u56fe\u7247\u7684\u6bcf\u4e00\u4e2a\u901a\u9053\u626b\u63cf\u5230\u7684\u503c\u76f8\u4e58\u518d\u52a0\u548c\u5f97\u5230\u8f93\u51fa\u77e9\u9635\u4e0a\u7684\u4e00\u4e2a\u8f93\u51fa\u503c</li> </ul> <p>\u7acb\u4f53\u7684\uff0ce.g\uff1a\u5f69\u8272\u7167\u7247\u7acb\u4f53RGB\u56fe\u50cf</p> <p>\u7acb\u4f53\u7684\uff0ce.g\uff1a\u5f69\u8272\u7167\u7247\u7acb\u4f53RGB\u56fe\u50cf</p>"},{"location":"AI/DL/cnn/#filters-kernels","title":"Filters, Kernels","text":"<p>Input Image\u00a0x\u00a0\u00a0Feature Detector\u00a0=\u00a0Feature Map</p>"},{"location":"AI/DL/cnn/#about-size","title":"about Size","text":"<ol> <li> <p>always extend the full depth of the input volume\uff0c \u4e00\u4e2a filter \u7684\u6df1\u5ea6(\u901a\u9053\u6570)\u8981\u548c input \u7684\u6df1\u5ea6(\u901a\u9053\u6570)\u4e00\u6837\uff0c\u4f46\u662f\u8f93\u51fa\u4ecd\u53ea\u6709\u4e00\u4e2a\u901a\u9053\u6570\u3002     \\(\\(18=\\cfrac{32-5}{1}+1, 30=\\cfrac{32-3}{1}+1\\)\\)</p> <pre><code>graph LR\nA[Input&lt;br&gt;32\u2716\ufe0f32\u2716\ufe0f&lt;FONT COLOR=\"#ff0000\"&gt;3&lt;/FONT&gt;]\nB{Filter&lt;br&gt;5\u2716\ufe0f5\u2716\ufe0f&lt;FONT COLOR=\"#ff0000\"&gt;3&lt;/FONT&gt;}\nC{Filter&lt;br&gt;3\u2716\ufe0f3\u2716\ufe0f&lt;FONT COLOR=\"#ff0000\"&gt;3&lt;/FONT&gt;}\nA --&gt; B\nA --&gt; C\nD{Stride&lt;br&gt;1}\nB --- D\nC --- D\nE[Output&lt;br&gt;18\u2716\ufe0f18\u2716\ufe0f&lt;FONT COLOR=\"#ff0000\"&gt;1&lt;/FONT&gt;]\nF[Output&lt;br&gt;30\u2716\ufe0f30\u2716\ufe0f&lt;FONT COLOR=\"#ff0000\"&gt;1&lt;/FONT&gt;]\nD --&gt; E\nD --&gt; F</code></pre> <p></p> </li> <li> <p>dim of filter \u4e00\u822c\u4e3a\u5947\u6570\uff0c\u82e5\u4e3a\u5076\u6570\uff0c\u5219\u4f1a\u4ea7\u751f\u4e0d\u5bf9\u79f0\u586b\u5145</p> </li> <li>1\u2716\ufe0f1 Convolution is meaningful! It computes the dot product over the channels.</li> </ol> <p>1\u2716\ufe0f1 Convolution</p> <p>advantages\uff1a</p> <ul> <li> <p>Shrinking too volumes spatially</p> <p>Shrinking too fast is not good,</p> </li> </ul> <p>\u6bd4\u5982\u8bf4CNN\uff0cCNN\u662f\u7528\u5377\u79ef\u6838\u548c\u611f\u53d7\u91ce\u505a\u8fd0\u7b97\uff0c\u6bcf\u4e00\u4e2a\u65b0\u4ea7\u751f\u7279\u5f81\u6570\uff0c\u4e5f\u5c31\u662f output \u7684\u4e00\u4e2a\u5c0f\u5c0f\u7684\u6570\u5b57\uff0c\u56ca\u62ec\u7684\u4e5f\u53ea\u662f\u4e00\u4e2a\u5c0f\u5c0f\u7684\u611f\u53d7\u91ce\u7684\u4fe1\u606f\u3002\u5bf9\u4e00\u4e2akernel \u6765\u8bf4\uff0c\u867d\u7136 output \u662f\u7531\u6240\u6709\u7684\u611f\u53d7\u91ce of input \u5377\u79ef\u4e4b\u540e\u5806\u53e0\u800c\u6210\u7684\u4e00\u4e2a [L, W]\u77e9\u9635\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e00\u4e2a kernel \u548c\u6240\u6709\u7684\u611f\u53d7\u91ce\u505a\u8fd0\u7b97\u7684\u7ed3\u679c\u5806\u53e0\u800c\u6210\u3002\u4f46\u662f \u7b80\u5355\u5c40\u90e8\u7279\u5f81\u5806\u53e0\u4e0d\u7b49\u4e8e\u5168\u5c40\u7279\u5f81\u3002 \u8fd9\u4e5f\u662fCNN\u7a00\u758f\u94fe\u63a5\u7684\u7279\u70b9\u3002</p> <p>\u6240\u4ee5\u6211\u4eec\u5e38\u8bf4CNN\u5bf9\u4e8e\u90a3\u79cd\u957f\u5e8f\u5217 long sequence input \u4e0d\u592a\u53cb\u597d\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u4e24\u4e2a\u95f4\u9694\u6bd4\u8f83\u8fdc\u7684 pixels \u6765\u8bf4\uff0c\u8981\u662f\u60f3\u83b7\u5f97\u4ed6\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb\u7279\u5f81\uff0c\u5c31\u9700\u8981\u5806\u53e0\u5f88\u591a\u4e2a\u5377\u79ef\u5c42\uff0c\u624d\u80fd\u83b7\u5f97\u4ed6\u4eec\u7684\u5173\u7cfb\u7279\u5f81\u3002</p> <p></p>"},{"location":"AI/DL/cnn/#about-stride-s","title":"about Stride s\uff1a\u79fb\u52a8\u7684\u65b9\u683c","text":"<ol> <li>s = 1 \uff08default\uff09</li> <li>do not want to capture all the data or information available so we skip some.</li> <li> <p>\u8bbe\u7f6e\u7684 stride \u8981\u88ab\u521a\u597d\u8bbe\u7f6e\u7684filter\u5377\u79ef\u5230$$\\red{\\text{Output Size }(\\cfrac{N-F}{s}+1)\\times(\\cfrac{N-F}{s}+1) }, \\quad\\cfrac{N-F}{\\text{stride}}\\in Z $$</p> <p></p> </li> </ol> <p>drawbacks\uff1a</p> <ul> <li>lose data over borders \u5bb9\u6613\u4e22\u5931\u8fb9\u7f18\u6216\u8005\u662f\u89d2\u843d\u4e0a\u7684\u50cf\u7d20\u4fe1\u606f\uff0c\u8b6c\u5982\u6240\u5f53 stride=1 \u7684\u65f6\u5019\uff0c\u8fb9\u8fb9\u5c31\u51fa\u73b0\u4e00\u904d\uff0c\u4e2d\u95f4\u7684\u90e8\u5206\u4f1a\u5728\u6ed1\u52a8\u7684\u65f6\u5019overlap \u5230\uff0c\u51fa\u73b0\u6b21\u6570\u5c31\u4f1a\u91cd\u590d\uff0c\u8fd9\u4e5f\u4f53\u73b0\u4e86\u4e00\u79cd\u8bbe\u5b9a\uff1a\u56fe\u50cf\u4e2d\u95f4\u603b\u662f\u6bd4\u8f83\u91cd\u8981\uff0c\u627f\u8f7d\u66f4\u591a\u4fe1\u606f</li> </ul> <p>advantages\uff1a</p> <ol> <li>\u8f93\u51fa\u7684\u56fe\u7247\u4f1a\u7f29\u5c0f</li> </ol>"},{"location":"AI/DL/cnn/#about-padding","title":"about Padding","text":"<ul> <li>\u4e3a\u4ec0\u4e48\u8981pad\uff1f \u4e3a\u4e86\u89e3\u51b3\u5bb9\u6613\u4e22\u5931\u8fb9\u7f18\u6216\u8005\u662f\u89d2\u843d\u4e0a\u7684\u50cf\u7d20\u4fe1\u606f\u3002pad\u4e4b\u540e\u672c\u6765\u8fb9\u7f18\u7684\u90e8\u5206\u5c31\u4e0d\u4f1a\u53ea\u51fa\u73b0\u4e00\u6b21\u3002 \\(\\impliedby\\)convolved \u4e4b\u524d pad. Due to padding, information on the borders of images is also preserved similarly to at the centre of images.</li> <li>\u5728\u54ea\u91ccpad\uff1f pad \u7684\u8303\u56f4\u591a\u5927<ul> <li>To \u89e3\u51b3\u8fb9\u7f18\u5bb9\u6613\u4e22\u5931 \\(\\implies\\) on the boundary, image \u7684\u56db\u5468\u90fd\u8981 pad. \u8303\u56f4\u81ea\u5b9a\u4e49, pad with p-pixel border</li> <li>To \u5377\u79ef\u524d\u540e\u5927\u5c0f\u4e0d\u53d8\uff0c\\(p=\\cfrac{F-1}{2}\\:\\text{when s=1}\\) \\(p=\\cfrac{N(s-1)+F-s}{2}\\)</li> </ul> </li> </ul> <p>\u4fdd\u8bc1\u5377\u79ef\u524d\u540e\u7684\u7ef4\u5ea6\u4e0d\u53d8\uff0c</p> <ul> <li> <p>proof of  formula of p \u6b64\u5904stride=1\uff08default\uff09</p> <p>\\(N= N+2p-F+1\\implies p=\\cfrac{F-1}{2}\\) - pad \u4ec0\u4e48\uff1f pad 0 on the boundary\uff0c\u56e0\u4e3a\u505a\u7684\u662f dot product\uff0c\u4e0d\u4f1a\u5f71\u54cd\u7ed3\u679c</p> </li> </ul> \\[\\begin{align*} \\text{Output Size without padding}&amp;=(\\cfrac{N-F}{s}+1)\\times(\\cfrac{N-F}{s}+1)\\\\   \\text{Output Size with padding}&amp;=(\\cfrac{N+2p-F}{s}+1)\\times(\\cfrac{N+2p-F}{s}+1) \\end{align*}\\] <p></p>"},{"location":"AI/DL/cnn/#about-meaning","title":"about Meaning","text":"<ol> <li>\u540c\u4e00\u5f20\u7279\u5f81\u56fe\uff0c\u540c\u4e00\u4e2a\u901a\u9053\uff0c\u4e0a\u7684\u6240\u6709\u5143\u7d20 (\u795e\u7ecf\u5143) \u90fd\u662f\u5bf9\u56fe\u50cf\u7684\u4e0d\u540c\u4f4d\u7f6e\u7684\u540c\u4e00\u4e2a\u7279\u5f81\u7684\u68c0\u6d4b\uff0c\u901a\u9053\u4e2d\u67d0\u4e00\u5904 (\u7279\u5f81\u56fe\u4e0a\u67d0\u4e00\u4e2a\u795e\u7ecf\u5143) \u6570\u503c\u7684\u5927\u5c0f\u5c31\u662f\u5f53\u524d\u4f4d\u7f6e\u5bf9\u5f53\u524d\u7279\u5f81\u5f3a\u5f31\u7684\u53cd\u5e94\u3002</li> <li>\u4e00\u4e2a filter \u5c31\u662f\u4e00\u4e2a\u7279\u5f81\uff0c\u6bcf\u4e2a filter \u4f53\u73b0\u7684\u7279\u8d28\u90fd\u4e0d\u4e00\u6837\u3002 \u4e3a\u4e86\u4f7f\u5f97\u6a21\u578b\u5c06\u6ce8\u610f\u529b\u96c6\u4e2d\u4e8e\u56fe\u7247\u7684\u67d0\u4e9b\u4f4d\u7f6e\uff0c\u800c\u5728\u6df1\u5ea6\u5b66\u4e60\u4e2d\uff0c\u66f4\u597d\u7684\u65b9\u6cd5\u662f\u5c06\u8fc7\u6ee4\u5668\u91cc\u9762\u7684\u503c\u8bbe\u7f6e\u6210\u53c2\u6570\uff0c\u8ba9\u6a21\u578b\u901a\u8fc7\u53cd\u5411\u4f20\u64ad\u53bb\u5b66\u4e60\u5230\u8fc7\u6ee4\u5668\u4e2d\u7684\u6743\u91cd\u503c\uff0c\u4ee3\u66ff\u4eba\u4e3a\u7684\u8bbe\u5b9a\u3002</li> </ol> <p>yellow</p> <p>roll</p> <ol> <li>\u7acb\u4f53\u7684 filter\uff0c\u6bcf\u4e00\u4e2a\u901a\u9053\u7684\u6743\u91cd\u5206\u522b\u5bf9\u5e94\u8f93\u5165\u56fe\u7247\u7684\u6bcf\u4e00\u4e2a\u901a\u9053\u3002\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u8fc7\u6ee4\u5668\u4e0d\u540c\u901a\u9053\u7684\u6743\u503c\u6765\u5173\u6ce8\u4e8e\u539f\u59cb\u56fe\u7247\u4e0d\u540c\u901a\u9053\u7684\u5185\u5bb9</li> </ol>"},{"location":"AI/DL/cnn/#batch-normalization","title":"Batch Normalization","text":"<p>Batch normalization is generally done in between convolution and activation(ReLU) layers. It normalizes the inputs at each layer, reduces internal co-variate shift(change in the distribution of network activations) and is a method to regularize a convolutional network.</p> <p>Batch normalizing allows higher learning rates that can reduce training time and gives better performance. It allows learning at each layer by itself without being more dependent on other layers. Dropout which is also a regularizing technique, is less effective to regularize convolution layers.</p>"},{"location":"AI/DL/cnn/#activation-function","title":"Activation function","text":"<p>\u5377\u79ef\u64cd\u4f5c\u53ea\u662f\u52a0\u6743\u6c42\u548c\u7684\u7ebf\u6027\u64cd\u4f5c\uff0c\u82e5\u795e\u7ecf\u7f51\u7edc\u53ea\u7528\u5377\u79ef\u5c42\uff0c\u90a3\u4e48\u65e0\u8bba\u6709\u591a\u5c11\u5c42\uff0c\u8f93\u51fa\u90fd\u662f\u8f93\u5165\u7684\u7ebf\u6027\u7ec4\u5408\uff0c\u7f51\u7edc\u7684\u8868\u8fbe\u80fd\u529b\u6709\u9650\uff0c\u65e0\u6cd5\u5b66\u4e60\u5230\u975e\u7ebf\u6027\u51fd\u6570\u3002\u56e0\u6b64 CNN \u5f15\u5165\u6fc0\u52b1\u51fd\u6570\uff0c\u6fc0\u6d3b\u51fd\u6570\u662f\u4e2a\u975e\u7ebf\u6027\u51fd\u6570\uff0c\u5e38\u4f5c\u7528\u4e8e\u5377\u79ef\u5c42\u548c\u5168\u8fde\u63a5\u5c42\u8f93\u51fa\u7684\u6bcf\u4e2a\u795e\u7ecf\u5143\uff08\u5206\u91cf/\u5143\u7d20\uff09\uff0c\u7ed9\u795e\u7ecf\u5143\u5f15\u5165\u4e86\u975e\u7ebf\u6027\u56e0\u7d20\uff0c\u4f7f\u7f51\u7edc\u7684\u8868\u8fbe\u80fd\u529b\u66f4\u5f3a\uff0c\u51e0\u4e4e\u53ef\u903c\u8fd1\u4efb\u610f\u51fd\u6570\uff0c\u8fd9\u6837\u795e\u7ecf\u7f51\u7edc\u5c31\u53ef\u5e94\u7528\u5230\u4f17\u591a\u7684\u975e\u7ebf\u6027\u6a21\u578b\u4e2d\u3002</p>"},{"location":"AI/DL/cnn/#pooling-layer","title":"Pooling Layer, \u6c60\u5316\u5c42","text":"<p>a down-sampling strategy 1. Construct better translationally invariant features. \u5c40\u90e8\u5e73\u79fb\u4e0d\u53d8\u6027\uff0c\u5f53\u8f93\u5165\u6709\u4e00\u5b9a\u7684\u5e73\u79fb\u65f6\uff0c\u7ecf\u6c60\u5316\u540e\u8f93\u51fa\u4e0d\u4f1a\u53d1\u751f\u6539\u53d8\u3002\u4f7f\u5f97\u5176\u7279\u5f81\u63d0\u53d6\u4e0d\u4f1a\u56e0\u4e3a\u76ee\u6807\u4f4d\u7f6e\u7684\u53d8\u5316\u800c\u53d7\u5230\u8f83\u5927\u7684\u5f71\u54cd 2. Learn more compact features. \u5c06\u67d0\u4e2a\u5143\u7d20\u90bb\u57df\u7684\u603b\u4f53\u7edf\u8ba1\u7279\u5f81\u4f5c\u4e3a\u7f51\u7edc\u5728\u8be5\u4f4d\u7f6e\u7684\u8f93\u51fa we are taking a summarized value over all the values present !!! controls overfitting 3. \u7f29\u51cf\u6a21\u578b\u7684\u5927\u5c0f\uff0c\u7b80\u5316\u5377\u79ef\u5c42\u7684\u8f93\u51fa 4. \u63d0\u9ad8\u8ba1\u7b97\u901f\u5ea6\u4ee5\u53ca\u63d0\u9ad8\u6a21\u578b\u7684\u9c81\u68d2\u6027\u7b49\u3002 5. \u6ca1\u6709\u9700\u8981\u5b66\u4e60\u7684\u53c2\u6570\uff0c\u53ea\u9700\u8981\u5b9a\u4e49\u8fc7\u6ee4\u5668\u7684\u5927\u5c0f\u4ee5\u53ca\u6b65\u957f\u5373\u53ef</p> <p>The Dimension After Pooling</p> <p>Given a\u00a0\\(M\\times N\\times D\\)\u00a0tensor, if we apply the pooling operator with size\u00a0\\(K\\times K\\)\u00a0and Stride\u00a0\\(p\\) , what are the dimensions of the output? - depth has no change - \u5728width\u548cheight\u90a3\u91cc\u5c31\u50cf\u5377\u79ef\u4e00\u6837 \\(\\text{without padding}=(\\frac{N-F}{s}+1)\\times(\\frac{N-F}{s}+1)\\) - \\(\\implies (\\cfrac{M-K}{p}+1)\\times (\\cfrac{N-K}{p}+1)\\times D\\)</p> Pooling stategies Max Pooling \uff08\u8f83\u5e38\u7528\uff09is robust to small perturbations.\u76f4\u89c2\u7406\u89e3\u662f\u80fd\u591f\u63d0\u53d6\u51fa\u8f93\u5165\u56fe\u7247\u4e2d\u6bd4\u8f83\u663e\u8457\u7684\u7279\u5f81 Average Pooling idk <p>yellow</p>"},{"location":"AI/DL/cnn/#flatten-layer-tensor-reshape","title":"Flatten Layer \u2014 Tensor Reshape","text":"<p>the output feature map(matrix) will be converted into vector \u5c06\u524d\u9762\u5377\u79ef\u5c42\u6216\u6c60\u5316\u5c42\u8f93\u51fa\u7684\u6240\u6709\u4e8c\u7ef4\u7279\u5f81\u56fe\u4e00\u8d77\u6620\u5c04\u62101\u4e2a\u4e00\u7ef4\u7684\u7279\u5f81\u5411\u91cf</p>"},{"location":"AI/DL/cnn/#fully-connected-layer-fc","title":"Fully- Connected Layer, FC","text":"<p>\u5149\u5377\u79ef\u662f\u4e0d\u80fd\u5b8c\u6210\u5206\u7c7b\u4efb\u52a1\u7684\uff0c\u6240\u4ee5\u5c31\u662f\u8981\u540e\u9762\u8fde\u00a0FC\u5c42\uff0c\u8d77\u5230\u201c\u5206\u7c7b\u5668\u201d\u7684\u4f5c\u7528 \u4e2d\u95f4\u53ef\u80fd\u6709\u591a\u4e2aFC\u5c42\uff0c\u6700\u540e\u6a21\u578b\u8f93\u51fa\u4e00\u4e2a\u7ef4\u5ea6\u7b49\u4e8e\u7c7b\u522b\u6570\uff08\u8f93\u51fa\u7684\u795e\u7ecf\u5143\u4e2a\u6570\uff09\u7684\u5411\u91cf</p>"},{"location":"AI/DL/cnn/#softmax","title":"softmax","text":"<p>softmax\u5f52\u4e00\u5316\uff0c\u8868\u793a\u6bcf\u4e00\u7c7b\u7684\u6982\u7387\uff0c\u7136\u540e\u5c06\u5f97\u5206\u6700\u9ad8\u7684\u7c7b\u522b\u5224\u4e3a\u8f93\u5165\u7684\u7c7b\u522b The softmax function is used to map the non-normalized output of a network to a probability distribution. \u8f6f\u6700\u5927\u51fd\u6570\u7528\u4e8e\u5c06\u7f51\u7edc\u7684\u975e\u89c4\u8303\u5316\u8f93\u51fa\u6620\u5c04\u5230\u6982\u7387\u5206\u5e03\u3002</p>"},{"location":"AI/DL/cnn/#famous-cnn-architectures","title":"Famous CNN Architectures","text":""},{"location":"AI/DL/cnn/#deeper-or-wider","title":"Deeper or Wider?","text":"<p>Deep CNN\uff1aDeeply stacked  Convolution Neural Network</p> LeNet-5 AlexNet VGG Net ResNet GoogLeNet Key \u7279\u5f81\u7a00\u758f\u94fe\u63a5 Relu activation smaller filters ^ Activation Sigmoid ReLU ^ ^ Advantages basic architecture \u5960\u5b9a\u57fa\u7840 GPU ^ ^ Drawbacks \u7b97\u529b\u4e0d\u591f ^ \u8bbe\u8ba1\u7528\u9014 \u624b\u5199\u6570\u5b57\u8bc6\u522b ImageNet classification with deep convolutional neural networks \u2013 NIPS 2012 Very Deep Convolutional Networks for Large-Scale Image Recognition \u2013 ICLR 2015 Deep Residual Learning for Image Recognition \u2013 CVPR 2016 Going deeper with convolutions \u2013 CVPR 2015 deep CNN \u2611\ufe0f \u2611\ufe0f \u2611\ufe0f <p>The Skip-connection was first proposed in ResNet</p>"},{"location":"AI/DL/cnn/#lenet-5","title":"LeNet-5","text":"<p>7 Layers\u00a0(input layer not counted)</p> <p>3 Convolution Layers\u00a0(C1; C3; C5)</p> <p>2 Pooling Layers\u00a0(S2; S4) \u2014 Mean</p> <p>2 Fully Connected Layers\u00a0(F6; Output)</p> <p>Sigmoid Activation!</p> <p>Details\uff1a</p> <ol> <li>subsampling \u4e2d\u4f1a\u5728\u7ed3\u679c\u4e0a\u591a\u52a0\u4e00\u4e2a\u504f\u7f6e\u9879</li> <li>S2-C3 sparse connected \u751f\u6210\u768416@feature map\u5206\u522b\u6309\u76f8\u90bb3\u4e2a\uff0c\u76f8\u90bb4\u4e2a\uff0c\u975e\u76f8\u90bb4\u4e2a\u548c\u5168\u90e86\u4e2a\u7279\u5f81\u56fe\u8fdb\u884cfeature mapping\u3010\u56e0\u4e3a\u7b97\u529b\u4e0d\u8db3\uff0c\u9650\u5236\u4e86\u8fde\u63a5\u6570\uff0c\u51cf\u5c11\u8ba1\u7b97\u5f00\u9500\uff1b\u8fd9\u6837\u4e0d\u540c\u7279\u5f81\u56fe\u7684\u7ec4\u5408\u53ef\u4ee5\u4f7f\u65b0\u751f\u6210\u7684feature map \u5b66\u5230\u4e0d\u540c\u7684\u7279\u5f81\u6a21\u5f0f \u3011</li> <li>MLP\u4f5c\u4e3a\u5206\u7c7b\u5668</li> <li>\u8fd9\u91cc\u7684 faltten \u662f\u7528CNN</li> </ol>"},{"location":"AI/DL/cnn/#alexnet","title":"AlexNet","text":"<p>ReLU, max pooling, stride Data augmentation Optimizer parameters</p>"},{"location":"AI/DL/cnn/#vgg-net","title":"VGG Net","text":"<p>152 layers\u00a0for ImageNet.</p> <p>\ud83d\udca1 Key Idea of VGG: Replace the large convolution filter by stacking some smaller convolution filters.</p> <ol> <li>More concise and generalizable.</li> <li> <p>Smaller filters can achieve better performance than larger filters. smaller filters \u5806\u79ef\u53ef\u4ee5\u6bd4 larger\u66f4\u9ad8</p> </li> <li> <p>Demonstrate that increase depth can boost performance. \u6df1\u5ea6\u53ef\u63d0\u9ad8\u8868\u73b0</p> </li> </ol> <p>5x5 conv = two 3x3 conv 7x7 conv = three 3x3 conv</p>"},{"location":"AI/DL/cnn/#residual-net-resnet","title":"Residual Net, ResNet","text":"<p>keep origin information</p> <p>Skip-connection Batch-normalization Bottleneck block</p>"},{"location":"AI/DL/cnn/#dense-net","title":"Dense Net","text":""},{"location":"AI/DL/cnn/#googlenet","title":"GoogleNet","text":"<p>There are some parallel polar level. Okay? Blocks in in a certain layer that means You will send. You will send I input. Okay, into different convolutions. Okay. And let's go through different architectures. And then we merged guys okay, into a final okay output. Okay, So this is a key idea. Okay, significant difference. Okay, of Google, net with different, other, different neural networks. Okay. But yeah you can try this. Okay. But we will not Talk about the details of this neural networks, Okay</p>"},{"location":"AI/DL/cnn/#light-weight-networks","title":"Light-weight networks","text":"<p>Performance on computation limits</p> <p> </p> <p>a depthwise convolution involves applying a separate 3x3 filter to each input channel.</p> <p>For a depthwise 3x3 convolution, the number of  input channels and output channels are both 32, how many parameters does this convolution layer have \uff1f</p> <p>\\(3*3*32\\)</p> <p>Group convolution:</p>"},{"location":"AI/DL/cnn/#practical-exercise","title":"Practical Exercise","text":""},{"location":"AI/DL/cnn/#parameters-initialization","title":"Parameters Initialization","text":"<p>\u5feb\u901f shrikage to point</p>"},{"location":"AI/DL/cnn/#bach-normalization","title":"Bach Normalization","text":""},{"location":"AI/DL/cnn/#application","title":"Application","text":""},{"location":"AI/DL/cnn/#edge-detection","title":"Edge Detection","text":"<p>\u5982\u4e0a\u56fe\u6240\u793a\uff1a\u8f93\u5165\u662f\u4e00\u4e2a66\u7684\u77e9\u9635\uff0c\u8f93\u5165\u662f\u4e00\u4e2a\u5de6\u767d\u53f3\u7070\u7684\u56fe\u7247\uff08\u767d\u8272\u90e8\u5206\u5bf9\u5e94\u7684\u77e9\u9635\u503c\u5927\u4e8e0\uff0c\u7070\u8272\u90e8\u5206\u7684\u503c\u4e3a0\uff09\uff0c\u4e2d\u95f4\u6709\u4e00\u9053\u7ad6\u7ebf\u5206\u5272\uff1b\u4e2d\u95f4\u7684\u5782\u76f4\u8fc7\u6ee4\u5668\u662f\u4e00\u4e2a33\u7684\u77e9\u9635\uff0c\u7531\u767d\u7070\u9ed1\u4e09\u4e2a\u90e8\u5206\u7ec4\u6210\uff0c\u77e9\u9635\u4e09\u5217\u7684\u503c\u5206\u522b\u5927\u4e8e0\uff0c\u7b49\u4e8e0\u548c\u5c0f\u4e8e0\uff1b\u8f93\u51fa\u7684\u7ed3\u679c\u77e9\u9635\u4e2d\uff0c\u4e2d\u95f4\u7684\u4e24\u5217\u5927\u4e8e0\uff0c\u5373\u8f93\u51fa\u7684\u56fe\u7247\u4e2d\u95f4\u90e8\u5206\u4e3a\u767d\u8272\uff0c\u4e5f\u5c31\u662f\u8bf4\u7ecf\u8fc7\u5377\u79ef\u4e4b\u540e\uff0c\u6210\u529f\u7684\u68c0\u6d4b\u51fa\u4e86\u539f\u59cb\u56fe\u7247\u4e2d\u95f4\u5b58\u5728\u7684\u5782\u76f4\u7ad6\u7ebf\u3002</p>"},{"location":"AI/DL/cnn/#exercise","title":"Exercise","text":"<p>(in L5 in AMA564), input \\(\\in\\R^{5\\times5}\\),kernel \\(\\in\\R^{3\\times3}\\),bias=-500, activation function is ReLU</p>"},{"location":"AI/DL/cnn/#code","title":"code","text":""},{"location":"AI/DL/generative_model/","title":"Generative models","text":"<p>A generative model is a type of machine learning model that learns the probability distribution of a dataset and generates new samples that are similar to the original data by modelling the underlying structure and patterns of the training data and can be used for tasks such as image generation, text generation, and speech synthesis.</p> <p>\u751f\u6210\u5b66\u4e60</p> Generator Discriminator learns the probability distribution of a dataset and generates new samples that are similar to the original data learn the decision boundary between different classes. takes in random noise and returns generated a fake image takes in both real and fake images and returns probabilities with 1 representing authenticity and 0 fake"},{"location":"AI/DL/generative_model/#categories","title":"categories","text":"<p>\u751f\u6210\u5b66\u4e60</p> <p>the reconstruction loss is the distance of the original data &amp; the reconstructed data. Target: the reconstruct the data = the Decoded latent features. So this laser feature comes from the encoding of the original data.</p>"},{"location":"AI/DL/generative_model/#generative-adversarial-networks-gan","title":"Generative Adversarial Networks, GAN, \u751f\u6210\u5bf9\u6297\u7f51\u7edc","text":"<p>Nash Equilibrium \u7eb3\u4ec0\u5747\u8861\u601d\u60f3</p> <p>\u76f8\u4e92\u5bf9\u6297\uff0c\u65e0\u4eba\u80dc\u51fa jointly train a strong discriminator and a generator</p> <p>minmax\u95ee\u9898 \u2705 maxmin\u95ee\u9898 \u274c</p> <p>GAN\u7684\u7406\u60f3\u8bad\u7ec3\u6a21\u5f0f\u662f\u8fd9\u6837\u7684\uff1a\u56fa\u5b9a\u751f\u6210\u5668G\uff0c\u8fed\u4ee3k\u6b21\u8bad\u7ec3\u5224\u522b\u5668D\uff1b\u7136\u540e\u56fa\u5b9a\u5224\u522b\u5668D\uff0c\u8bad\u7ec3\u751f\u6210\u5668G\uff0c\u4e24\u8005\u4f9d\u6b21\u4ea4\u66ff\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u6cd5\u8fdb\u884c\u66f4\u65b0\u3002 \u800c\u4e14\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\uff1a\\(\\min\\limits_G\\max\\limits_D V\uff08G, D\uff09 \\neq\\max\\limits_D\\min\\limits_G V\uff08G, D\uff09\\) - maxmin \u5148G\u540eD: GAN\u7684\u8bad\u7ec3\u8fc7\u7a0b\u4f1a\u4ea7\u751fmode collapse\u95ee\u9898\uff0c\u5c31\u662f\u6307\u751f\u6210\u5668\u751f\u6210\u7684\u6837\u672c\u6709\u5927\u91cf\u7684\u91cd\u590d\uff0c\u591a\u6837\u6027\u975e\u5e38\u5dee\uff08\u5728\u5b9e\u8df5\u4e2d\u7ecf\u5e38\u51fa\u73b0\uff09\u4e00\u5f00\u59cb\u5148\u8fed\u4ee3\u8bad\u7ec3G\u7684\u8bdd\uff0cG\u5b66\u4e0d\u4e86\u4ec0\u4e48\u4e1c\u897f\u3002\u56e0\u4e3a\u544a\u8bc9\u4ed6\u7684\u90a3\u4e2aD\u8fd8\u4ec0\u4e48\u90fd\u4e0d\u4f1a\uff0c\u6240\u4ee5\u6839\u672c\u4e0d\u77e5\u9053\u5bf9\u8fd8\u662f\u9519\uff0c\u5c31\u53ea\u80fd\u80e1\u4e71\u751f\u6210</p>"},{"location":"AI/DL/generative_model/#main-idea","title":"Main idea","text":"<p>GAN \u7531\u751f\u6210\u5668 Generator \u548c\u5224\u65b7\u5668 Discriminator \u5169\u500b\u795e\u7d93\u7db2\u7d61\u6240\u7d44\u6210. Discriminator D and Generator G play an adversarial minimax game to reach a Nash equilibrium. \u56e0\u70ba\u4e4b\u9593\u7684\u5c0d\u6297\u95dc\u4fc2\uff0c\u6240\u4ee5\u7a31\u70ba\u751f\u6210\u5c0d\u6297\u7db2\u7d61.</p> <ul> <li>Generator\u00a0takes in random noise and returns a fake image.</li> <li>Discriminator\u00a0takes in both real and fake images and returns probabilities with 1 representing authenticity and 0 fake</li> </ul> <p>\u5f88\u5e38\u807d\u5230\u7684\u5f62\u5bb9\u662f\uff0c<code>Generator</code>\u662f\u8ca0\u8cac\u505a\u5047\u9214\u7684\u4eba\uff0c<code>Discriminator</code> \u662f\u8b66\u5bdf\u6aa2\u9a57\u662f\u5426\u70ba\u5047\u9214\u3002</p> <p> </p> <ul> <li>Model doesn\u2019t converge G,D parameters may oscillate Uneven progress between G, D</li> <li>Mode collapse (the Helvetica scenario) G will only generate samples from a single mode\u3002\u5f53 generator \u5728\u751f\u4ea7 \u67d0\u4e00\u79cd\u7c7b\u578b \u5c31\u5f88\u5389\u5bb3\u5230\u8db3\u4ee5\u9a97\u5230 discriminator\uff0c\u4ed6\u5c31\u53ef\u80fd\u5149\u751f\u4ea7\u8fd9\u4e00\u7c7b\u53bb\u4e86\u6240\u4ee5\u5bfc\u81f4\u5f88\u4e0d\u5e73\u8861\u3002</li> <li>Samples lack global structure E.g., Some generated faces will have 3 eyes</li> </ul> <p>(a) \u5149\u5b66\u4e60\u4e00\u79cd\u53bb\u4e86. (b) \u7f3a\u5c11\u6574\u4f53\u7684\u7ed3\u6784</p>"},{"location":"AI/DL/generative_model/#minimax-optimization","title":"MiniMax Optimization","text":"<p>\\(x\uff5e\\text{data}(x):=\\)  real x sampled form data \\(z\uff5eZ(z) :=\\) noise z, \\(G(z):=\\) fake generated by Generator</p>"},{"location":"AI/DL/generative_model/#update-d-to-max-vd-g-when-fixing-g","title":"Update\u00a0D\u00a0to\u00a0MAX\u00a0V(D, G)\u00a0when fixing\u00a0G","text":"<p>Cross-Entrophy \\(\\max\\limits_DV(D, G)=\\mathbb {E}_{x\uff5eP_{data}(x)}\\log D(x) + \\underline{\\mathbb E_{x\uff5eP_{Z(z)}}\\log (1-D(G(z))) }\\\\ \\xrightarrow{\\text{forcing}}\\begin{cases}D(x)\\rightarrow1\\\\D(G(x))\\rightarrow0\\end{cases}\\)</p>"},{"location":"AI/DL/generative_model/#update-g-to-min-vd-g-when-fixing-d","title":"Update\u00a0G\u00a0to\u00a0MIN\u00a0V(D, G)\u00a0\u00a0when fixing\u00a0D","text":"<p>the proportion of fake  defined as real \\(\\min\\limits_GV(D, G)=\\underline{\\mathbb E_{x\uff5eP_{Z(z)}}\\log (1-D(G(z)))}\\\\ \\xrightarrow{\\text{forcing}}D(G(x))\\rightarrow1\\)</p>"},{"location":"AI/DL/generative_model/#deep-convolutional-generative-adversarial-networks-dcgan","title":"Deep Convolutional Generative Adversarial Networks, DCGAN","text":"<p>When reducing dimensionality, we want to keep the main structure there exists among the data.</p>"},{"location":"AI/DL/generative_model/#auto-encoder","title":"Auto-encoder","text":"<p>Autoen-coding is a data compression algorithm. The compression and decompression functions are</p> <ol> <li>data-specific,</li> <li>lossy \\(l = \\Vert x-\\hat{x}\\Vert^2=\\Vert x-d(z)\\Vert^2=\\Vert x-d(e(x))\\Vert^2\\)</li> <li>learned automatically from examples\u00a0rather than engineered by a human</li> </ol>"},{"location":"AI/DL/generative_model/#loss-vs-information","title":"Loss v.s. Information","text":"\\[l = \\Vert x-\\hat{x}\\Vert^2=\\Vert x-d(z)\\Vert^2=\\Vert x-d(e(x))\\Vert^2\\] <ul> <li>The more complex the architecture is, the more the auto-encoder can proceed to a high dimensionality reduction while keeping reconstruction loss low. \u67b6\u6784\u8d8a\u590d\u6742\uff0c\u81ea\u52a8\u7f16\u7801\u5668\u5c31\u8d8a\u80fd\u8fdb\u884c\u9ad8\u7ef4\u5ea6\u964d\u4f4e\uff0c\u540c\u65f6\u4fdd\u6301\u8f83\u4f4e\u7684\u91cd\u5efa\u635f\u5931\u3002</li> <li>An encoder with\u201cinfinite power\u201d could theoretically takes our N initial data points and encodes them as 1, 2, 3, ... up to N (or more generally, as an N integer on the real axis) and the associated decoder could make the reverse transformation, with no loss during the process.</li> <li>The lack of interpretable and exploitable structures in the latent space (lack of regularity)  \u6ca1\u6709\u91cd\u5efa\u635f\u5931\u7684\u91cd\u8981\u7ef4\u5ea6\u51cf\u5c11\u5f80\u5f80\u662f\u6709\u4ee3\u4ef7\u7684\uff1a\u6f5c\u5728\u7a7a\u95f4\u4e2d\u7f3a\u4e4f\u53ef\u89e3\u91ca\u548c\u53ef\u5229\u7528\u7684\u7ed3\u6784\uff08\u7f3a\u4e4f\u89c4\u5f8b\u6027\uff09</li> </ul>"},{"location":"AI/DL/generative_model/#loss-function","title":"loss function","text":"<p>When reducing dimensionality, we want to keep the main structure there exists among the data.</p> <ul> <li>Irregular latent space prevents us from using autoencoder for new content generation.</li> <li>The quality and relevance of generated data depend on the regularity of the latent space.</li> </ul>"},{"location":"AI/DL/generative_model/#variational-auto-encoder-vae","title":"Variational Auto-Encoder, VAE, \u53d8\u4f53\u81ea\u52a8\u7f16\u7801\u5668","text":"<p>Variational autoencoders, VAEs, \u81ea\u52a8\u7f16\u7801\u5668\u3002\u662f\u4e00\u4e2a\u795e\u7ecf\u7f51\u7edc\uff0c\u65e8\u5728\u4ee5\u65e0\u76d1\u7763\u7684\u65b9\u5f0f\u5b66\u4e60\u8eab\u4efd\u51fd\u6570\uff0c\u4ee5\u91cd\u5efa\u539f\u59cb\u8f93\u5165\uff0c\u540c\u65f6\u5728\u6b64\u8fc7\u7a0b\u4e2d\u538b\u7f29\u6570\u636e\uff0c\u4ece\u800c\u53d1\u73b0\u66f4\u6709\u6548\u548c\u538b\u7f29\u7684\u8868\u793a\u3002are autoencoders that tackle the problem of the latent space irregularity. VAE makes the encoder return a distribution over the latent space instead of a single point. VAE loss function includes a regularisation term over the returned distribution in order to ensure a better organisation of the latent space.</p> <p>(a) \u5149\u5b66\u4e60\u4e00\u79cd\u53bb\u4e86. (b) \u7f3a\u5c11\u6574\u4f53\u7684\u7ed3\u6784</p>"},{"location":"AI/DL/generative_model/#conditional-variational-autoencoder-cvae","title":"Conditional variational autoencoder (CVAE)","text":""},{"location":"AI/DL/mlp/","title":"MLP","text":"<ul> <li> <p>Deep Non-parametric Regression\u3002\u4e4b\u524d\u90fd\u662f function-assumed \u51fa\u6765\u7684\u7ed3\u679c\u662fclosed-formed\uff0c \u4f46\u662f\u73b0\u5728\u5c31\u662f Nonparametric regression \u4e0d\u5728\u4e4e\u5b83\u662f\u4ec0\u4e48 the shape of\u00a0the functional relationships is not predetermined \uff0c\u5c31\u662f\u7528 deep learning \u53bb approximate \u5b83\u3002</p> <ul> <li>\u4e3a\u4ec0\u4e48\u80fd approximate\uff1f Non-linearity is introduced by activation functions. Any\u00a0continuous functions\u00a0defined on a compact set can be approximated\u00a0arbitrarily well\u00a0by a\u00a0shallow neural network\u00a0if the shallow neural network is\u00a0arbitrarily wide. \u5982\u679c\u6d45\u795e\u7ecf\u7f51\u7edc\u662f\u4efb\u610f\u5bbd\u7684\uff0c\u90a3\u4e48\u5728\u7d27\u96c6\u4e0a\u5b9a\u4e49\u7684\u4efb\u4f55\u8fde\u7eed\u51fd\u6570\u90fd\u53ef\u4ee5\u88ab\u6d45\u795e\u7ecf\u7f51\u7edc\u4efb\u610f\u8fd1\u4f3c\u3002(\u6709\u7406\u8bba\u8bc1\u660e) \u795e\u7ecf\u7f51\u7edc\u56e0\u4e3a\u6d89\u53ca\u5230\u66f4\u6df1\u5c42\u5c31\u662f2*3\u4e2a\u53c2\u6570\uff0c\u4f46\u662f\u4e00\u822c\u5c31\u662f2+3\u4e2a\u53c2\u6570\uff0c\u6240\u4ee5\u795e\u7ecf\u7f51\u7edc\u4f1a\u66f4\u5f3a\uff0c\u5728\u4e00\u4e9b\u786e\u5b9e\u590d\u6742\u7684\u6570\u636e\u5206\u5e03\u4e0a\u3002</li> </ul> </li> </ul>"},{"location":"AI/DL/mlp/#architecture","title":"architecture","text":"<p>Feedforward Neural Networks FNN \u524d\u5411\u56de\u9988 Layers in MLP are fully connected</p>"},{"location":"AI/DL/mlp/#perceptron","title":"Perceptron, \u611f\u77e5\u673a","text":"<p>Perceptron, \u611f\u77e5\u673a\u662f\u63a5\u53d7\u591a\u4e2a\u8f93\u5165\u540e\u5c06\u6bcf\u4e2a\u503c\u4e0e\u5404\u81ea\u7684\u6743\u91cd\u76f8\u4e58\uff0c\u6700\u540e\u8f93\u51fa\u603b\u548c\u7684\u6a21\u578b</p>"},{"location":"AI/DL/mlp/#mathematical-definition","title":"Mathematical Definition","text":"<p>The architecture of an MLP is expressed as a\u00a0composition of a series of functions</p> \\[ \\begin{align*}f_\\theta(x)=&amp;\\mathcal{A_L\\circ\\sigma \\circ A_{L-1}\\circ\\sigma \\circ\\cdots\\circ \\sigma \\circ A_1(x) }\\\\&amp;\\mathcal{A_i}(x)=W_ix+b_i\\\\&amp;\\theta=(W_1,b_1,...\\dots,W_L,b_L)\\end{align*} \\] <p></p> Neural Network Input x \\(\\large x\\in\\R^{d_0}\\) at 0-th layer Output at L-th layer layers L hidden layer \\(h_i(x)=\\mathcal{A_i \\circ A_{i-1}\\circ\\sigma \\circ\\cdots\\circ \\sigma \\circ A_1(x) },i=1...L-1\\) \\(\\theta\\) \\((W_1,b_1,...\\dots,W_L,b_L)\\) the depth of network L-1 (number of hidden layers. the\u00a0width of  network \\(\\max\\{d_1 , ... , d_{L-1}\\}.\\) the\u00a0size of  network \\(\\text{num}( \\theta)\\) the i-th Layer linear transformation \\(\\mathcal{A_i}(x)=W_ix+b_i\\) Input x \\(\\large x\\in\\R^{d_{i-1}}\\) weigth matrix $ W_i\\in\\large \\R^{d_i\\times d_{i-1}}$ bias vector \\(b_i\\in\\large\\R^{d_i}\\) activation function \\(\\sigma\\) The\u00a0width\u00a0of the i-th layer \\(d_i\\)"},{"location":"AI/DL/mlp/#back-propagation","title":"Back Propagation","text":"<p>Loop over instances:</p> <ol> <li>The forward steps Given the input, make predictions layer-by-layer, starting from the first layer)</li> <li>The backward steps Calculate the error in the output Update the weights layer-by-layer, starting from the final layer</li> </ol> <p>The neuron is modelled by a unit connected by weighted links \\(w_i\\) to other units \ud835\udc56. Suppose\u00a0\\(W=(w_0,w_1,w_2,w_3)=(-0.4336,0.8622,0.3188,-1.0377),\\: z(w)=w_0+\\sum\\limits_{i=1}^nw_ix_i,\\:o(w)=\\text{sigmoid}(z(w)),\\: L(w)=\\cfrac{1}{2}(o(w)-y)^2.\\) Now we have a sample (x,y) with \\(x = (x_1,x_2,x_3)^T = (0.5377,1.8339,-2.2588)^T, y = 0\\). </p>"},{"location":"AI/DL/mlp/#in-classification-problem","title":"in classification problem","text":"<p>\\(\\begin{cases}\\text{Data: }(X_i,Y_i),i=1,\\dots,n,X_i\\in\\R^p,Y_i \\text{ is categorical }\\\\\\text{classifier: }\\mathcal F=\\{f:f(\\cdot)\\text{ is categorical }\\}\\end{cases}\\)</p> <p>\u96be\u70b9\uff1a</p> <ol> <li>\u5206\u7c7b\u662flabel\u7c7b\u578b\uff0c\u8f93\u51fa\u7684\u662flabel\uff0c \u800c output of NN is a continuous value</li> <li>\u600e\u4e48\u5e94\u7528 multi-classification\uff0c how to represent Y   \\(\\rightarrow\\) Matrix</li> </ol> <p>How to represent Y and \\(\\hat{Y}\\)</p> <p>\u4ece\u4e00\u7ef4\u76841\uff0c2\uff0c3\uff0c4\uff0c\u2026\uff0c\u5230\u4e8c\u7ef4\u7684 0-1 bool \u77e9\u9635</p> <ul> <li>Example<ol> <li>#category = 2: \\(Y_i\\in\\{+1,-1\\}, Y_i\\begin{cases}+1\\rightarrow (1,0)\\\\-1\\rightarrow (0,1)\\end{cases}\\)</li> <li>#category = 4: \\(Y_i\\in\\{1,2,3,4\\}, Y_i\\begin{cases}1\\rightarrow (1,0,0,0)\\\\2\\rightarrow (0,1,0,0)\\\\3\\rightarrow (0,0,1,0)\\\\4\\rightarrow (0,0,0,1)\\end{cases}\\)</li> </ol> </li> </ul> <p>\u4e00\u822c\u6700\u540e\u8f93\u51fa\u5c42\uff0c\u795e\u7ecf\u5143\u7684\u6570\u91cf\u5c31\u521a\u597d\u662f category \u7684\u6570\u91cf\uff0c\u5e76\u4e14\u662f\u6bcf\u4e00\u4e2a\u795e\u7ecf\u5143 model class probabilities. SO</p> <ol> <li>\\(z_i=h(X_i,\\theta)\\in[0,1]\\) \\(\\rightarrow\\) h = Sigmoid</li> <li>\\(\\sum\\limits_{i=1}^{\\#category}\\hat{y}_i=\\sum\\limits_{i=1}^{\\#category}g(z_i)=1\\rightarrow\\)  g = Softmax</li> </ol>"},{"location":"AI/DL/rnn/","title":"Recurrent Neural Networks","text":""},{"location":"AI/DL/rnn/#standard-rnn","title":"standard RNN","text":"<p>Variable-length Sequene Sequential-Dependent Time-Dependent</p> <p>recurrent: revisit or reuse past states as inputs to predict the next or future states.</p> <p>Memory \u62e5\u6709\u524d\u4e00\u4e2a\u9636\u6bb5\u7684\u8f93\u51fa\u4f5c\u4e3a\u672a\u6765\u8f93\u51fa\u7684\u7075\u611f\u7684\u4e00\u90e8\u5206\u3002</p> <p>The biggest difference between RNN and traditional neural networks is that each time the previous output is taken to the next hidden layer and trained together.</p> <p>\u6700\u540e\u53ea\u8981 o5 \u8fdb\u884c\u89e3\u7801</p> <p>x1 \u8fdb\u53bb\u4ea7\u751f h1\uff0ch1 \u540c\u65f6\u5b58\u5230 m1, \u6b64\u65f6 o1 \u5b8c\u5168\u662f h1 \u7684\u89e3\u7801 \u4e3a\u4e86\u7edf\u4e00\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e2a m0 \u540c\u6837\u548c x1 \u8fdb\u53bb\u4ea7\u751f h1</p> <p>x2 &amp; m1 \u8fdb\u53bb\u4ea7\u751f h2, h2 \u540c\u65f6\u88ab\u5b58\u5230 m12\uff0c \u6b64\u65f6 o2 \u5b8c\u5168\u662f h2 \u7684\u89e3\u7801</p> <p>x3 &amp; m12 \u8fdb\u53bb\u4ea7\u751f h3, h3 \u540c\u65f6\u88ab\u5b58\u5230 m123\uff0c \u6b64\u65f6 o3 \u5b8c\u5168\u662f h3 \u7684\u89e3\u7801 </p> <p>memory (m1,m12,...) \u5e76\u4e0d\u662f\u76f4\u63a5raw input \u8fdb\u53bb\u4ea7\u751f\u65b0\u4e00\u8f6e\u7684 hidden state (h2,h3,...), \u800c\u662f\u91c7\u7528\u4e00\u4e2a\u6743\u503c\u77e9\u9635 W \u53c2\u6570\u5316\u8bb0\u5fc6\u5355\u5143</p> \\[s_t=\\text{tanh}(Ux_t+Ws_{t-1})\\]"},{"location":"AI/DL/rnn/#shortcoming","title":"shortcoming","text":"<p>RNN \u6bd4\u8f83\u64c5\u957f\u89e3\u51b3 \u60f3\u8981\u7684\u4fe1\u606f &amp; \u76f8\u5173\u7684\u4fe1\u606f \u8ddd\u79bb\u8f83\u8fd1\u3002</p> <p>Good</p> <p>Bad</p> <p>short-term memory has a large impact (such as the orange region), but long-term memory effects are small (such as black and green regions), which is the short-term memory problem of RNN.</p> <p>\u5982\u679c\u5e8f\u5217\u8db3\u5920\u9577\uff0c\u5b83\u5011\u5c07\u5f88\u96e3\u5c07\u8cc7\u8a0a\u5f9e\u8f03\u65e9\u7684\u6642\u9593\u6b65\u9a5f\u50b3\u905e\u5230\u8f03\u665a\u7684\u6642\u9593\u6b65\u9a5f\u3002\u56e0\u6b64\uff0c\u5982\u679c\u60a8\u5617\u8a66\u8655\u7406\u4e00\u6bb5\u6587\u5b57\u4f86\u9032\u884c\u9810\u6e2c\uff0cRNN \u53ef\u80fd\u6703\u5f9e\u4e00\u958b\u59cb\u5c31\u907a\u6f0f\u91cd\u8981\u8cc7\u8a0a\u3002 1. RNN has short-term memory problems and cannot handle very long input sequences 2. Training RNN requires significant cost</p> <p></p> <ul> <li>unfold</li> <li>\u6570\u636e\u662f\u6309\u7167\u987a\u5e8f\u8fdb\u5165\uff0c\u6211\u4eec\u5728\u5904\u7406\u5e8f\u5217\u5316\u7684\u6570\u636e\u65f6\uff0c\u5f80\u5f80\u4f1a\u5728\u7528\u6ed1\u52a8\u7a97\u53e3\u7684\u529e\u6cd5\u6765\u8c03\u6574\u4e0d\u540c\u7684\u7ed3\u6784\u3002</li> <li>m0 \u7684\u8bbe\u7f6e\uff1a\u8fd9\u4e2a\u521d\u59cb\u503c\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u4e2a\u53c2\u6570\u8fdb\u884c\u53cd\u5411\u4f20\u64ad\uff0c\u4e5f\u53ef\u4ee5\u5c06\u5176\u7b80\u5355\u7684\u8bbe\u7f6e\u4e3a\u96f6\uff0c\u8868\u793a\u524d\u9762\u6ca1\u6709\u4efb\u4f55\u4fe1\u606f\u3002</li> </ul> <p>\u5728\u540c\u4e00\u5c42\u7684\u9690\u85cf\u5355\u5143\u4e2d\u8fdb\u884c\u4f20\u64ad\u7684 \u6743\u503c\u77e9\u9635W &amp; \u8f93\u5165\u5230\u9690\u5c42\u7684\u6743\u503c\u77e9\u9635U &amp; \u9690\u5c42\u5230\u8f93\u51fa\u7684\u6743\u503c\u77e9\u9635V\uff0c\u4e3a\u4ec0\u4e48\u662f\u76f8\u540c\u7684?</p> <p>\u5c31\u50cf\u662f CNN \u7528\u53c2\u6570\u5171\u4eab\u7684\u5377\u79ef\u6838\u6765\u63d0\u53d6\u76f8\u540c\u7684\u7279\u5f81\uff0c\u5728RNN\u4e2d\uff0c\u4f7f\u7528\u53c2\u6570\u5171\u4eab\u7684 U,V \u6765\u786e\u4fdd\u76f8\u540c\u7684\u8f93\u5165\u4ea7\u751f\u7684\u8f93\u51fa\u662f\u4e00\u6837\u3002\u53c2\u6570\u5171\u4eab\u7684\u77e9\u9635W \u786e\u4fdd\u4e86\u5bf9\u4e8e\u76f8\u540c\u7684\u4e0a\u6587\uff0c\u4ea7\u751f\u76f8\u540c\u7684\u4e0b\u6587\u3002</p> <p>\u4e00\u6bb5\u6587\u672c\u4e2d\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u5927\u91cf\u7684\u201c\u5c0f\u72d7\u201d\u3002\u65e0\u8bba\u5c0f\u72d7\u51fa\u73b0\u5728\u54ea\u4e2a\u4f4d\u7f6e\uff08x?\uff09\uff0c\u53c2\u6570\u5171\u4eab\u4f7f\u5f97\u795e\u7ecf\u7f51\u7edc\u5728\u8f93\u5165\u201c\u5c0f\u72d7\u201d\u7684\u65f6\u5019\uff0c\u5728\u4e0d\u8003\u8651\u4e0a\u4e0b\u6587\u7684 memory\uff0c\\(x\\xrightarrow{\u5b8c\u5168\u7f16\u7801}h\\) \u7684\u7ed3\u679c\u662f\u4e00\u6837\u3002\u7c7b\u4f3c\u5730\uff0c\u5728\u4e0d\u8003\u8651\u5f53\u524d\u8f93\u5165 x\uff0c\\(m\\xrightarrow{\u5b8c\u5168\u7f16\u7801}h\\) \u7684\u7ed3\u679c\u662f\u4e00\u6837\u3002</p>"},{"location":"AI/DL/rnn/#lstm-long-short-term-memory-network","title":"LSTM Long Short-Term Memory Network","text":"<p>motivation</p> <p>To solve short-term memory of RNN, LSTM can retain \"important information\" in longer sequence data, ignoring less important information. LSTMs were designed to combat vanishing gradients through a gating mechanism.</p> <p></p> <p>All recurrent neural networks have chain repeating modules of neural networks. standard RNN: repeating module has a very simple structure, such as only a single tanh layer.LSTM: Not a single neural network layer, but four, and interacting in a very special way.</p> <p>pre-knowledge\uff1a</p> <ul> <li><code>tanh</code>   tanh activation \u7528\u65bc\u5e6b\u52a9\u8abf\u7bc0\u6d41\u7d93\u7db2\u7d61\u7684\u503c\u3002 tanh \u51fd\u6578\u5c07\u503c\u58d3\u7e2e\u70ba\u59cb\u7d42\u5728 -1 \u548c 1 \u4e4b\u9593\u3002</li> <li><code>Sigmoid</code> \\(\\sigma\\)</li> </ul> <p>\u5706\u5f62\uff1aNeuial Network layer\uff0c\u4e00\u5c42\u795e\u7ecf\u7f51\u7edc\uff0c\u4e5f\u5c31\u662f$w^Tx*b$\u7684\u64cd\u4f5c\u3002\u533a\u522b\u5728\u4e8e\u4f7f\u7528\u7684\u6fc0\u6d3b\u51fd\u6570\u4e0d\u540c\u8fd9\u91cc\u5b58\u5728 sigmoid\uff08$\\sigma(w^Tx*b)$\uff09 &amp; tanh\uff08$\\text{tanh}(w^Tx*b)$\uff09 \u4e24\u79cd\u6fc0\u6d3b\u51fd\u6570\u65b9\u5757\uff1aMatrix operation \u77e9\u9635\u64cd\u4f5c\uff0c\u5e76\u4e14\u662f pointwise \u9010\u5143\u7d20\u64cd\u4f5c verctor concatenation: \u77e9\u9635\u62fc\u63a5\uff0c\u53d8\u6210 $(H_1+H_2)*W$ </p> <p>hidden state \\(h_t\\) &amp; cell state \\(c_t\\)</p> <p>\u76f8\u6bd4\u4e8e\u539f\u59cb\u7684 RNN \u7684 hidden state\uff0c LSTM \u589e\u52a0\u4e86\u4e00\u4e2a\u7ec6\u80de\u72b6\u6001 cell state\u3002 \u5c3d\u7ba1 LSTM \u4e2d\u7684 cell state &amp; hidden output \u90fd\u5305\u542b\u6709\u5173 LSTM \u6a21\u578b\u7684\u4fe1\u606f\uff0c\u4f46\u5b83\u4eec\u7684\u89d2\u8272\u4e0d\u540c hidden state \u53ef\u4ee5\u88ab\u770b\u4f5c\u662f\u5f53\u524d\u65f6\u523b\u7684 LSTM \u7684\u201c\u7406\u89e3\u201d\u6216\u201c\u7f16\u7801\u201d\u4fe1\u606f\uff0c\u53ef\u4ee5\u88ab\u4f20\u9012\u5230\u4e0b\u4e00\u5c42\u7684 LSTM \u6216\u8005\u7528\u4e8e\u9884\u6d4b\u4efb\u52a1. cell state \u662f\u7528\u4e8e\u5b58\u50a8\u5148\u524d\u7684\u4fe1\u606f\u548c\u8ba1\u7b97\u65b0\u7684\u4fe1\u606f\uff0c\u4e00\u76f4\u5728\u4e0a\u9762\u4f20\u9012, internal memory</p> <p>\u4e3a\u4ec0\u4e48 LSTM \u80fd\u643a\u5e26 long-term memory\uff1f\u53c8\u662f\u5982\u4f55\u53ea\u8bb0\u4f4f\u91cd\u70b9\u7684 memory\uff1f</p> <p>\u80fd\u643a\u5e26 long-term memory \u56e0\u4e3a\u591a\u4e86\u4e00\u4e2a cell state \u7d30\u80de\u72c0\u614b\u6709\u9ede\u50cf\u50b3\u9001\u5e36\u3002 \u5b83\u76f4\u63a5\u6cbf\u8457\u6574\u500b\u93c8\u689d\u57f7\u884c\uff0c\u53ea\u6709\u4e00\u4e9b\u8f15\u5fae\u7684\u7dda\u6027\u76f8\u4e92\u4f5c\u7528\u3002 \u8cc7\u8a0a\u5f88\u5bb9\u6613\u4e0d\u8b8a\u5730\u6cbf\u8457\u5b83\u6d41\u52d5\uff0c\u643a\u5e26\u6574\u4e2a\u6587\u672c\u7684\u4fe1\u606f \u5982\u4f55\u8bb0\u4f4f\u91cd\u70b9\uff0c\u5219\u662f\u4e0e \u95e8 gate \u606f\u606f\u76f8\u5173\u3002 - \u5982\u4f55 \u5fd8\u8bb0\u4e0d\u91cd\u8981\u7684 &amp; \u8bb0\u4f4f\u91cd\u8981\u7684\u3002     \\(f_t=\\sigma(\\cdot)\\in[0,1]\\), \u4efb\u4f55\u503c\u2716\ufe0f0 \u90fd\u662f0\uff0c\u4efb\u4f55\u503c\u2716\ufe0f1\u90fd\u662f\u5b83\u672c\u8eab\uff0c\u6240\u4ee5\u5f53\u4fe1\u606f\u88ab\u4e58\u4ee50\uff0c\u90a3\u4e48\u5c31\u4f1a\u88ab\u5fd8\u8bb0\uff0c\u5982\u679c\u4e58\u4ee51\uff0c\u5c31\u4f1a\u8bb0\u4f4f\u3002\\(f_t\\) \u7684\u6570\u503c\u5176\u5b9e\u5c31\u662f\u9057\u5fd8\u7a0b\u5ea6\u3002</p> <p>at time t</p> <p>Input:-- $C_{t-1}$ cell state at t-1-- $h_{t-1}$ hidden state at t-1-- $x_t$ \u8f93\u5165\u7684\u5411\u91cf at t Output:-- $C_{t}$-- $h_{t}$\u7ec6\u80de\u72b6\u6001 $c_{t-1}$ \u4e00\u76f4\u5728\u4e0a\u9762\u7684\u7ebf\u4f20\u9012\uff0c$h_t &amp; x_{t}$ \u4f1a\u5bf9 $c$ \u8fdb\u884c\u4fee\u6539\uff0c\u8f93\u51fa $c_t$ $c_t$ \u4f1a\u53c2\u4e0e $h_t$ \u7684\u8ba1\u7b97\u3002 \u5176\u4e2d\u7684\u8ba1\u7b97\u8fc7\u7a0b\u900f\u8fc7 \u95e8 gate \u6765\u5b9e\u73b0\u3002</p> <p>4</p> <p>size of vector</p> <p>dim(c) = dim(h) shape of cell state = shape of hidden state</p> <p>\u4ee5 \u9057\u5fd8\u95e8 \u4e3e\u4f8b\uff1a \\(f_t^{d1\\times d2}:=\\sigma(W_f^{d1\\times(d1+d3)}[h_{t-1}, x_t]^{(d1+d3)\\times d2}+b_f)\\) \\(c_{t-1}^{d1\\times d2}\\underline{\\text{pointwise multiplfy}}f_t^{d1\\times d2}\\)</p> <p></p> <p>forget gate  \u51b3\u5b9a\uff1a\u7528\u5f53\u524d\u7684\u5224\u65ad \\(f\\)\uff1a\u8981\u8bb0\u5f97\u591a\u5c11\u8fc7\u53bb\u7684\u4fe1\u606f \\(c_{t-1}\\) input gate \u51b3\u5b9a\uff1a\u7528\u5f53\u524d\u7684\u5224\u65ad \\(i\\)\uff1a\u8981\u52a0\u5165\u591a\u5c11\u5f53\u524d\u7684\u4fe1\u606f \\(\\tilde{c}_{t}\\) output gate \u51b3\u5b9a\uff1a\u7528\u8fc4\u4eca\u4e3a\u6b62\u7684\u5224\u65ad \\(o\\)\uff1a\u8981\u5411\u5916\u9762\u6216\u8005\u672a\u6765\u66b4\u9732\u591a\u5c11\u4fe1\u606f \\(c_t\\) \u3002defines how much of the internal state you want to expose to the external network (higher layers and the next time step).</p>"},{"location":"AI/DL/rnn/#forget-gate","title":"forget gate \u9057\u5fd8\u95e8","text":"<p>\u5f53\u524d\u7684\u4fe1\u606f \\([h_{t-1}, x_t]\\)  \u51b3\u5b9a \u8fc7\u53bb\u7684\u4fe1\u606f \\(c_{t-1}\\) \u8981\u5fd8\u8bb0\u591a\u5c11</p> \\[f_t=\\sigma(W_f[h_{t-1}, x_t]+b_f)\\] <p></p>"},{"location":"AI/DL/rnn/#input-gate","title":"input gate \u8f93\u5165\u95e8","text":"<p>\u5c06\u5f53\u524d\u7684\u4fe1\u606f \\([h_{t-1}, x_t]\\) \u66f4\u65b0\u5230\u8fc7\u53bb\u7684\u4fe1\u606f \\(c\\) \u91cc\uff1a\u4e0d\u4ec5\u8981\u5904\u7406\u8981\u6d41\u5165\u7684\u503c\uff0c\u8fd8\u8981\u51b3\u5b9a\u54ea\u4e9b\u503c\u662f\u91cd\u8981\u7684\uff0c\u6240\u4ee5 \\([h_{t-1}, x_t]\\) \u540c\u65f6\u7ecf\u8fc7 Sigmoid &amp; tanh\u3002The sigmoid output will decide which information is important to keep from the tanh output.</p> \\[i_t = \\sigma(W_i[h_{t-1}, x_t]+b_i)\\\\\\tilde{c}_t=\\text{tanh}(W_c[h_{t-1}, x_t]+b_c)\\] <p></p> <p>\u7136\u540e\u8fdb\u884c cell state \u7684 update\uff1a\u6628\u65e5\u7684\u4fe1\u606f $ f_t * c_{t-1}$ \u6709\u9700\u8981\u9057\u5fd8\u7684\uff0c\u4eca\u5929\u7684\u4fe1\u606f $i_t * \\tilde{c}_t $ \u4e5f\u540c\u6837\u6709\u9700\u8981\u9057\u5fd8\u7684</p> \\[c_t=f_t*c_{t-1}+i_t* \\tilde{c}_t\\] <p></p>"},{"location":"AI/DL/rnn/#output-gate","title":"output gate \u8f93\u51fa\u95e8","text":"<p>cell state \\(c_t\\) \u5df2\u66f4\u65b0\uff0c\u8981\u8fc7\u4e00\u904d tanh \u4f20\u9012\u7ed9\u4e0b\u4e00\u8f6e\u7684 hidden state &amp; output for prediction\uff0c\u540c\u65f6 \u5f53\u524d\u4fe1\u606f \\([h_{t-1}, x_t]\\) \u8981\u8fc7 sigmoid \u51b3\u5b9a\u65b0\u7684 \\(c_t\\) \u91cc\u6709\u54ea\u4e9b\u662f\u9700\u8981\u9057\u5fd8\u7684\u3002</p> \\[o_t=\\sigma(W_o[h_{t-1}, x_t]+b_o)\\\\h_t=o_t*\\text{tanh}(c_t)\\] <p></p> <p></p> <p>t \u65f6\u523b\u7684 hidden state \\(h_t\\) \u65e2\u4f5c\u4e3a hidden state \u7ee7\u7eed\u5411\u524d\u6d41\u52a8\uff0c\u53c8\u4f5c\u4e3a t\u65f6\u523b\u7684\u8f93\u51fa\uff0c\u6765\u8fdb\u884c\u89e3\u7801\u548c\u5b8c\u6210\u4efb\u52a1\u3002</p>"},{"location":"AI/DL/rnn/#gnu-gated-recurrent-unit-gru","title":"GNU Gated Recurrent Unit-GRU","text":"<p>a variant of LSTM. He retains the characteristics of LSTM to focus and forget unimportant information, and it will not be lost during long-term propagation.</p> <p>GRU \u5c06 LSTM \u7684 forget gate &amp; input gate \u6574\u5408\u5230\u4e00\u4e2a\u5355\u72ec\u7684 update gate\uff0c \u8fd8\u628a cell state \u548c hidden state \u5408\u5e76\u6210\u4e00\u4e2a hidden state\uff0c\u8fd8\u6709\u5176\u4ed6\u7684\u4e00\u4e9b\u5c0f changes\u3002</p> <p></p> GRU \u53ea\u7528 hidden state &amp; input\uff0c\u800c\u4e14 only 2 gates: reset gate &amp; update gate <p>\u66f4\u5c11\u7684 tensor operation \u66f4\u5feb\u7684\u8bad\u7ec3\u901f\u5ea6\u3002</p> <p>\u4f46\u6027\u80fd\u4e0a\u8c01\u66f4\u597d\uff0c\u4e0d\u786e\u5b9a\uff0c\u8fd8\u662f\u8981\u771f\u6b63 train \u4e4b\u540e\u624d\u77e5\u9053\u3002</p> <p></p> <p></p> <p>reset gate determines how to combine the new input with the previous memory update gate defines how much of the previous memory to keep around.</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u628a reset \u7684\u53c2\u6570\u90fd\u53d8\u6210 1\uff0c update \u7684\u53c2\u6570 \u90fd\u53d8\u62100\uff0c\u5c31\u662f standard RNN\u3002</p>"},{"location":"AI/DL/rnn/#reset-gate","title":"Reset Gate","text":"<p>\u51b3\u5b9a\u5fd8\u8bb0\u54ea\u4e9b\u8fc7\u53bb\u4fe1\u606f</p>"},{"location":"AI/DL/rnn/#update-gate","title":"Update Gate","text":"<p>\u628a LSTM \u7684 forget gate &amp; input gate \u878d\u4e86\u8fdb\u6765\u3002 what information to throw away and what new information to add.</p>"},{"location":"AI/DL/rnn/#ref","title":"Ref","text":"<ul> <li>\u5982\u4f55\u7406\u89e3RNN\uff1f\uff08\u7406\u8bba\u7bc7\uff09</li> <li>Long short-term memory network-Long short-term memory | LSTM</li> <li>Illustrated Guide to LSTM\u2019s and GRU\u2019s: A step by step explanation</li> <li>\u5927\u540d\u9f0e\u9f0e\u7684LSTM\u8be6\u89e3</li> <li>\u56fe\u89e3LSTM\u5b9e\u73b0cell state \u548chidden state\u548coutput</li> <li>Understanding LSTM Networks</li> <li>Recurrent Neural Network Tutorial, Part 4 \u2013 Implementing a GRU and LSTM RNN with Python and Theano</li> </ul>"},{"location":"AI/DL/transferlearning/","title":"Transfer learning","text":"<p>Transfer learning is a machine learning technique where knowledge gained from training a model on one task is applied to a different but related task. In transfer learning, a pre-trained model that has been trained on a large dataset is used as a starting point for a new task instead of training a model from scratch. The idea behind transfer learning is that the features learned by a model on one task can be valuable for solving a different task. Instead of randomly initializing the model's parameters, the pre-trained model's weights are used as a starting point. These pre-trained models are typically trained on large-scale datasets, such as ImageNet for image classification or Word2Vec for natural language processing, and have learned to extract meaningful and generalizable features.</p> <p>If we have enough training data on a specific task, transfer learning can also be used to improve the performance of our DNN model. \u274c</p> <p> </p> <ul> <li>Pre-training Stage<ul> <li>Feature extractor layers, backbone encode useful information of original data.</li> <li>Remove original final layers for the original image recognition purpose.</li> </ul> </li> <li>Fine-tuning Stage<ul> <li>Add task-specific final layers.</li> <li>Train this new model with task-specific data.</li> </ul> </li> </ul> <p>standard steps:</p> <ul> <li>Pre-training stage</li> <li>Prepare large-scale training data \\(\\leftrightarrow\\) Publicly available  dataset.</li> <li>Select and train  a deep model with training data \\(\\implies\\) backbone</li> <li>Fine-tuning</li> <li>Modify the  model for the target task</li> <li>Fine-tune the  target dataset</li> </ul> <p>$\\xrightarrow{\\text{on ImageNet-1K }} $ ResNet-50 $\\xrightarrow{\\text{Object detector}} $ MS-COCO detection</p>"},{"location":"AI/DL/transferlearning/#backbone","title":"Backbone \uff08\u9aa8\u5e72\u7f51\u7edc\uff09","text":"<p>\u901a\u5e38\u6307\u7684\u662f\u5728\u4efb\u52a1\u4e2d\u7528\u4e8e \u63d0\u53d6\u7279\u5f81 \u7684\u4e3b\u5e72\u7f51\u7edc\u67b6\u6784\u3002\u7528\u4e8e\u4ece\u8f93\u5165\u4e2d\u63d0\u53d6\u9ad8\u7ea7\u7279\u5f81\u8868\u793a\u3002\u8fd9\u4e9b\u7279\u5f81\u8868\u793a\u53ef\u4ee5\u7528\u4e8e\u540e\u7eed\u4efb\u52a1\u3002\u5171\u540c\u76ee\u6807\u662f\u901a\u8fc7\u5c42\u6b21\u5316\u7684\u7279\u5f81\u63d0\u53d6\u6765\u63d0\u9ad8\u4efb\u52a1\u8868\u73b0\u3002</p> <p></p> <p>Strong backbone \u2192 Better performance on the new task!</p> <ul> <li>How to get strong backbone<ul> <li>Bigger pre-training datasets</li> <li>Better backbone architecture</li> <li>Better training strategy</li> </ul> </li> </ul>"},{"location":"AI/DL/transferlearning/#for-cv","title":"for CV","text":"<p>some useful CNN backbones in computer vision.</p> <ul> <li>AlexNet</li> </ul>"},{"location":"AI/DL/transformer/","title":"Transformer","text":""},{"location":"AI/DL/transformer/#bert-related","title":"BERT related","text":"<p>BERT\uff0c Bidirectional Encoder Representation from Transformer</p>"},{"location":"AI/DL/transformer/#original","title":"original","text":"<p>Transformer SA + Bidirectional \u5b8c\u5f62\u586b\u7a7a MLM |BERT|v.s.| |--|--| |MLM\uff0c|gpt\uff0cL2R |Transformer|RNN</p> <ul> <li>advangtages</li> </ul> <p>BERT is designed to pretrain deep bidirectional representations from unlabeled text by jointly conditioning on both left and right context in all layers.</p> <p>BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding</p>"},{"location":"AI/DL/tricks/","title":"\u90e8\u4ef6","text":""},{"location":"AI/DL/tricks/#activation-function","title":"activation function","text":"<p>Non-linearity is introduced by activation functions but non-polynomial !!</p> <p>\u6df1\u5ea6\u5b66\u4e60\u4e2dsaturation\u662f\u4ec0\u4e48\u610f\u601d\uff1f</p> <p>saturated \u9971\u548c\u7684. \u9971\u548c\u7684\u6fc0\u6d3b\u51fd\u6570\u7684\u503c\u63a5\u8fd1\u5176\u8fb9\u754c(\u4e0a\u4e0b\u8fb9\u754c)\u7684\u65f6\u5019\uff0c\u63a5\u8fd1\u4e34\u754c\u503c\u53d8\u5316\u4e0d\u5927\uff0c\u4f1a\u5bfc\u81f4\u7b97\u6cd5\u5728\u53cd\u5411\u4f20\u64ad\u65f6\u68af\u5ea6\u6d88\u5931\u3002</p> <p>\\(\\sigma\\) is non-saturated \u4e0d\u9971\u548c\u7684. \\(\\lim\\limits_{x\\rightarrow\\infin}=\\infin\\)</p> Saturated Nonlinearity Non-saturated Nonlinearity Sigmoid Rectified Linear Unit (ReLU) \u7ebf\u6027\u6574\u6d41\u51fd\u6570 Tanh Leaky ReLU \u4fee\u6b63\u7ebf\u6027\u5355\u5143 <p>ReLU\u00a0is a good default choice for most problems.</p> <p></p>"},{"location":"AI/DL/tricks/#regularization","title":"Regularization","text":"<p>\u7b97\u6cd5\u7684\u6027\u80fd\uff0c\u4e00\u662f\u5141\u8bb8\u4f7f\u7528\u7684\u51fd\u6570\u79cd\u7c7b\uff0c\u4e8c\u662f\u8fd9\u4e9b\u51fd\u6570\u7684\u6570\u91cf\u3002\u5728\u5047\u8bbe\u7a7a\u95f4\u4e2d\uff0c\u76f8\u6bd4\u4e8e\u67d0\u4e00\u4e2a\u5b66\u4e60\u7b97\u6cd5\uff0c\u6211\u4eec\u53ef\u80fd\u66f4\u504f\u597d\u53e6\u4e00\u4e2a\u5b66\u4e60\u7b97\u6cd5\u3002\u8fd9\u610f\u5473\u7740\u4e24\u4e2a\u51fd\u6570\u90fd\u662f\u7b26\u5408\u6761\u4ef6\u7684\uff0c\u4f46\u662f\u6211\u4eec\u66f4\u504f\u597d\u5176\u4e2d\u4e00\u4e2a\u3002\u53ea\u6709\u975e\u504f\u597d\u51fd\u6570\u6bd4\u504f\u597d\u51fd\u6570\u5728\u8bad\u7ec3\u6570\u636e\u96c6\u4e0a\u6548\u679c\u660e\u663e\u597d\u5f88\u591a\u65f6\uff0c\u6211\u4eec\u624d\u4f1a\u8003\u8651\u975e\u504f\u597d\u51fd\u6570\u3002</p> <p>\u4f8b\u5982\uff0c\u53ef\u4ee5\u52a0\u5165\u6743\u91cd\u8870\u51cf(weight decay)\u6765\u4fee\u6539\u7ebf\u6027\u56de\u5f52\u7684\u8bad\u7ec3\u6807\u51c6\u3002\u5e26\u6743\u91cd\u8870\u51cf\u7684\u7ebf\u6027\u56de\u5f52\u6700\u5c0f\u5316\u8bad\u7ec3\u96c6\u4e0a\u7684\u5747\u65b9\u8bef\u5dee\u548c\u6b63\u5219\u9879\u7684\u548c \u53ef\u4ee5\u770b\u4f5c\u62df\u5408\u8bad\u7ec3\u6570\u636e\u548c\u504f\u597d\u5c0f\u6743\u91cd\u8303\u6570\u4e4b\u95f4\u7684\u6743\u8861\u3002\u8fd9\u4f1a\u4f7f\u5f97\u89e3\u51b3\u65b9\u6848\u7684\u659c\u7387\u6700\u5c0f\uff0c\u6216\u662f\u5c06\u6743\u91cd\u653e\u5728\u8f83\u5c11\u7684\u7279\u5f81\u4e0a\u3002\u6211\u4eec\u53ef\u4ee5\u8bad\u7ec3\u5177\u6709\u4e0d\u540c \u03bb\u503c\u7684\u9ad8\u6b21\u591a\u9879\u5f0f\u56de\u5f52\u6a21\u578b\u3002</p> <p>\u66f4\u4e00\u822c\u5730\uff0c\u6b63\u5219\u5316\u4e00\u4e2a\u5b66\u4e60\u51fd\u6570\u7684\u6a21\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u4ee3\u4ef7\u51fd\u6570\u6dfb\u52a0\u88ab\u79f0\u4e3a \u6b63\u5219\u5316\u9879 regularizer \u7684\u60e9\u7f5a\u3002\u5728\u6743\u91cd\u8870\u51cf\u7684\u4f8b\u5b50\u4e2d\uff0c\u6b63\u5219\u5316\u9879\u662f\u3002\u8868\u793a\u5bf9\u51fd\u6570\u7684\u504f\u597d\u662f\u6bd4\u589e\u51cf\u5047\u8bbe\u7a7a\u95f4\u7684\u6210\u5458\u51fd\u6570\u66f4\u4e00\u822c\u5730\u63a7\u5236\u6a21\u578b\u5bb9\u91cf\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u53bb\u6389\u5047\u8bbe\u7a7a\u95f4\u4e2d\u7684\u67d0\u4e2a\u51fd\u6570\u770b\u4f5c\u5bf9\u4e0d\u8d5e\u6210\u8fd9\u4e2a\u51fd\u6570\u7684\u65e0\u9650\u504f\u597d\u3002\u5728\u6743\u91cd\u8870\u51cf\u7684\u793a\u4f8b\u4e2d\uff0c\u901a\u8fc7\u5728\u6700\u5c0f\u5316\u7684\u7a7a\u95f4\u4e2d\u989d\u5916\u589e\u52a0\u4e00\u9879\uff0c\u6211\u4eec\u660e\u786e\u5730\u8868\u793a\u4e86\u504f\u597d\u6743\u91cd\u8f83\u5c0f\u7684\u7ebf\u6027\u51fd\u6570\u3002</p> <p>\u673a\u5668\u5b66\u4e60\u4e2d\u7684\u4e00\u4e2a\u6838\u5fc3\u95ee\u9898\u662f\u8bbe\u8ba1\u4e0d\u4ec5\u5728\u8bad\u7ec3\u6570\u636e\u4e0a\u8868\u73b0\u597d\uff0c\u800c\u4e14\u80fd\u5728\u65b0\u8f93\u5165\u4e0a\u6cdb\u5316\u7684\u7b97\u6cd5\u3002\u5728\u673a\u5668\u5b66\u4e60\u4e2d\uff0c\u8bb8\u591a\u7b56\u7565\u88ab\u663e\u793a\u5730\u8bbe\u8ba1\u6765\u51cf\u5c11\u6d4b\u8bd5\u8bef\u5dee(\u53ef\u80fd\u4f1a\u589e\u52a0\u8bad\u7ec3\u8bef\u5dee\u4e3a\u4ee3\u4ef7)\u3002\u8fd9\u4e9b\u7b56\u7565\u88ab\u7edf\u79f0\u4e3a==\u6b63\u5219\u5316==\u3002\u5728\u5b9e\u8df5\u4e2d\uff0c\u8fc7\u4e8e\u590d\u6742\u7684\u6a21\u578b\u65cf\u4e0d\u4e00\u5b9a\u5305\u62ec\u76ee\u6807\u51fd\u6570\u6216\u771f\u5b9e\u6570\u636e\u751f\u6210\u7684\u8fc7\u7a0b\uff0c\u751a\u81f3\u4e5f\u4e0d\u5305\u62ec\u8fd1\u4f3c\u8fc7\u7a0b\u3002\u6211\u4eec\u51e0\u4e4e\u4ece\u672a\u77e5\u6653\u771f\u5b9e\u6570\u636e\u7684\u751f\u6210\u8fc7\u7a0b\uff0c\u6240\u4ee5\u6211\u4eec\u6c38\u8fdc\u4e0d\u77e5\u9053\u88ab\u4f30\u8ba1\u7684\u6a21\u578b\u65cf\u662f\u5426\u5305\u542b\u751f\u6210\u8fc7\u7a0b\u3002\u7136\u800c\uff0c\u6df1\u5ea6\u5b66\u4e60\u7b97\u6cd5\u7684\u5927\u591a\u6570\u5e94\u7528\u90fd\u662f\u9488\u5bf9\u8fd9\u6837\u7684\u60c5\u51b5\uff0c\u5176\u4e2d\u771f\u5b9e\u6570\u636e\u7684\u751f\u6210\u8fc7\u7a0b\u51e0\u4e4e\u80af\u5b9a\u5728\u6a21\u578b\u65cf\u4e4b\u5916\u3002\u6df1\u5ea6\u5b66\u4e60\u7b97\u6cd5\u901a\u5e38\u5e94\u7528\u4e8e\u8bb0\u4e3a\u590d\u6742\u7684\u9886\u57df\uff0c\u5982\u56fe\u50cf\u3001\u97f3\u9891\u5e8f\u5217\u548c\u6587\u672c\uff0c\u672c\u8d28\u4e0a\u8fd9\u4e9b\u9886\u57df\u7684\u771f\u5b9e\u751f\u6210\u8fc7\u7a0b\u6d89\u53ca\u6a21\u62df\u6574\u4e2a\u5b87\u5b99\u3002\u4ece\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u6765\u8bf4\uff0c\u6211\u4eec\u603b\u662f\u6301\u65b9\u6798(\u6570\u636e\u751f\u6210\u8fc7\u7a0b)\u800c\u6b32\u5185\u5706\u51ff(\u6a21\u578b\u65cf)\u3002</p> <p>\u8fd9\u610f\u5473\u7740\u63a7\u5236\u6a21\u578b\u7684\u590d\u6742\u5ea6\u4e0d\u662f\u627e\u5230\u5408\u9002\u89c4\u6a21\u7684\u6a21\u578b(\u5e26\u6709\u6b63\u5219\u7684\u53c2\u6570\u4e2a\u6570)\u8fd9\u6837\u4e00\u4e2a\u7b80\u5355\u7684\u4e8b\u60c5\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u53d1\u73b0\uff0c\u6216\u8005\u8bf4\u5728\u5b9e\u9645\u7684\u6df1\u5ea6\u5b66\u4e60\u573a\u666f\u4e2d\u6211\u4eec\u51e0\u4e4e\u603b\u662f\u4f1a\u53d1\u73b0\uff0c\u6700\u597d\u7684\u62df\u5408\u6a21\u578b(\u4ece\u6700\u5c0f\u6cdb\u5316\u8bef\u5dee\u7684\u610f\u4e49\u4e0a)\u662f\u4e00\u4e2a\u9002\u5f53\u6b63\u5219\u5316\u7684\u5927\u578b\u6a21\u578b</p> <p>\u539f\u59cb\u76ee\u6807\u51fd\u6570 \\(\\mathcal{J}(\\theta;X,y)\\)</p> <p>\u53c2\u6570\u503c\u7684\u504f\u597d</p> <p>\u66f4\u4e00\u822c\u5730\uff0c\u53ef\u4ee5\u5c06\u53c2\u6570\u6b63\u5219\u5316\u4e3a \u53c2\u6570\u7a7a\u95f4\u4efb\u610f\u7684\u7279\u5b9a\u70b9\uff0c\u800c\u8fd9\u4e2a\u504f\u597d\u7684\u7279\u5b9a\u70b9\u8d8a\u63a5\u8fd1\u771f\u5b9e\u503c\u8d8a\u597d\u3002 \u800c\u5f53\u6211\u4eec\u5e76\u4e0d\u77e5\u9053\u6b63\u786e\u7684\u503c\u662f\u6b63\u8fd8\u662f\u8d1f\u65f6\uff0c0 \u662f\u6709\u610f\u4e49\u7684\u9ed8\u8ba4\u503c\u3002 \u820d\u5f03\u6570\u503c\u6bd4\u62df\u5408\u4e00\u4e2a\u6570\u503c\u66f4\u7b80\u5355\u3002\uff08\u7c7b\u566a\u58f0\uff09</p>"},{"location":"AI/DL/tricks/#_2","title":"\u53c2\u6570\u8303\u6570\u60e9\u7f5a","text":"\\[\\tilde{\\mathcal{J}}(\\theta;X,y)=\\mathcal{J}(\\theta;X,y)+C\\Omega(\\theta)\\\\[1em]\\min\\tilde{\\mathcal{J}}\\] <p>\\(\\Omega(\\theta):=\\) \u8303\u6570\u60e9\u7f5a\u9879\u3002\u9009\u62e9\u4e0d\u540c\u53c2\u6570\u8303\u6570\u9879 \\(\\Omega(\\theta)\\) \u4f1a\u504f\u597d\u4e0d\u540c\u7684\u89e3\u3002 \\(C:=\\) \u6743\u8861\u8303\u6570\u60e9\u7f5a</p> <p>\u4e0d\u5bf9\u504f\u7f6e\u505a\u6b63\u5219\u60e9\u7f5a</p> <p>\u5728\u795e\u7ecf\u7f51\u7edc\u4e2d\uff0c\u53c2\u6570 \\(\\theta\\) \u5305\u62ec\u6bcf\u4e00\u5c42\u653e\u5c04\u53d8\u6362\u7684\u6743\u91cd \\(w\\) \u548c\u504f\u7f6e \\(b\\)\uff0c\u901a\u5e38\u53ea\u5bf9 \\(w\\) \u505a\u60e9\u7f5a\u800c\u4e0d\u5bf9 \\(b\\) \u505a\u6b63\u5219\u60e9\u7f5a\u3002 \u539f\u56e0\uff1a - \u7cbe\u786e\u62df\u5408 \\(b\\) \u6240\u9700\u7684\u6570\u636e\u901a\u5e38\u6bd4\u62df\u5408 \\(w\\) \u5c11\u5f97\u591a\u3002\\(w\\) \u901a\u5e38\u548c\u4e24\u4e2a\u53d8\u91cf\u76f8\u5173\uff0c\u6bcf\u4e2a \\(b\\) \u4ec5\u63a7\u5236\u4e00\u4e2a\u5355\u53d8\u91cf\u3002\\(\\implies\\) \u4e0d\u5bf9 \\(b\\) \u8fdb\u884c\u6b63\u5219\u5316\u4e5f\u4e0d\u4f1a\u5bfc\u81f4\u592a\u5927\u7684\u65b9\u5dee\u3002     &gt; in LR: \\(w=\\cfrac{\\partial y}{\\partial x}; b\\propto y\\) - \u6b63\u5219\u5316\u504f\u7f6e\u53c2\u6570\u53ef\u80fd\u4f1a\u5bfc\u81f4\u660e\u663e\u7684\u6b20\u62df\u5408\u3002</p>"},{"location":"AI/DL/tricks/#l2","title":"L2 \u53c2\u6570\u6b63\u5219\u5316","text":"<p>weight decay \u6743\u91cd\u9012\u51cf \u5cad\u56de\u5f52 Tikhonov \u6b63\u5219\u5316</p> \\[\\Omega(w)=\\frac{1}{2}\\Vert w\\Vert_2^2\\\\[1em]\\tilde{\\mathcal{J}}(w;X,y)=\\mathcal{J}(w;X,y)+\\cfrac{C}{2}w^Tw\\\\[1em]\\min\\tilde{\\mathcal{J}}\\] <ul> <li>\u4f7f\u6743\u91cd\u66f4\u52a0\u63a5\u8fd1\u539f\u70b9</li> </ul> <p>\u4e0e\u4e4b\u5bf9\u5e94\u7684\u68af\u5ea6\u4e3a \\(\\nabla_w\\tilde{\\mathcal{J}}=\\nabla_w\\mathcal{J}+C w\\) \u4f7f\u7528\u5355\u6b65\u68af\u5ea6\u4e0b\u964d\u66f4\u65b0\u6743\u91cd\uff0c\u5373\u6267\u884c\u4ee5\u4e0b\u66f4\u65b0\uff1a\\(w\\leftarrow w-\\alpha(\\nabla_w\\mathcal{J}+C w)=(1-\\alpha C)w-\\alpha\\nabla_w\\mathcal{J}\\)\uff08\\(\\alpha:=\\) \u6b65\u957f\uff09\uff1a\u52a0\u5165\u6743\u91cd\u8870\u51cf\u540e\u4f1a\u5f15\u8d77\u5b66\u4e60\u89c4\u5219\u7684\u4fee\u6539\uff0c\u5373\u5728\u6bcf\u90e8\u6267\u884c\u901a\u5e38\u7684\u68af\u5ea6\u66f4\u65b0\u4e4b\u524d\u5148\u6536\u7f29\u6743\u91cd\u5411\u91cf(\u5c06\u6743\u91cd\u5411\u91cf\u4e58\u4ee5\u4e00\u4e2a\u5e38\u6570\u56e0\u5b50)\u3002</p> <ul> <li>\u4e3a\u4ec0\u4e48\u6709\u6548\uff1a \u4e0d\u542b\u6b63\u5219\u5316\u7684\u76ee\u6807\u51fd\u6570: \u4ee4 \\(w^*:=\\min\\limits_{w}\\red{\\mathcal{J}}\\) \u5e76\u5728 \\(w^*\\) \u7684\u90bb\u57df\u5bf9 \\(\\mathcal{J}\\) \u505a\u4e8c\u6b21\u8fd1\u4f3c\uff1a\\(\\hat{\\mathcal{J}}(w)=\\mathcal{J}(w^*)+\\nabla\\mathcal{J}(w^*)(w-w^*)+\\frac{1}{2}(w-w^*)H(w-w^*)\\) \uff08\\(H:=\\nabla^2\\mathcal{J}(w^*)\\) Hessian \u77e9\u9635=\u4e8c\u9636\u5bfc\u6570, \\(\\nabla\\mathcal{J}(w)=H(w-w^*)\\)\uff09\uff08\u5982\u679c\u76ee\u6807\u51fd\u6570\u786e\u5b9e\u662f\u4e8c\u6b21\u7684(\u5982\u4ee5\u5747\u65b9\u8bef\u5dee\u62df\u5408\u7ebf\u6027\u56de\u5f52\u6a21\u578b\u7684\u60c5\u51b5)\uff0c\u5219\u8be5\u8fd1\u4f3c\u662f\u5b8c\u7f8e\u7684\u3002\uff09 \\(w^*:=\\min\\limits_{w}\\red{\\mathcal{J}}\\implies\\begin{cases}\\nabla\\mathcal{J}(w^*)=0\\\\H\\succeq0 \\end{cases}\\) \u542b\u6b63\u5219\u5316\u7684\u76ee\u6807\u51fd\u6570: \u4ee4 \\(\\tilde{w}:=\\min\\limits_{w}\\red{\\tilde{\\mathcal{J}}}\\) \\(\\nabla\\tilde{\\mathcal{J}}(\\tilde{w})=\\nabla\\mathcal{J}(\\tilde{w})+C\\tilde{w}=H(\\tilde{w}-w^*)+C\\tilde{w}=0\\) \\(\\rightarrow (H+CI)\\tilde{w}=Hw^*\\implies \\tilde{w}=(H+CI)^{-1}Hw^*\\)\uff1a<ul> <li>\u5f53 \\(C\\rightarrow0, \\tilde{w}\\rightarrow w^*\\)\uff1b</li> <li>\u5f53 $C\\uparrow, H\\xlongequal{\u53ef\u5206\u89e3\u4e3a}Q\\Lambda Q^T\\implies $</li> </ul> </li> </ul> \\[\\begin{align*} \\tilde{w}&amp;=(H+CI)^{-1}Hw^*\\\\&amp;=(Q\\Lambda Q^T+CI)^{-1}Q\\Lambda Q^Tw^*\\\\&amp;=[Q(\\Lambda+CI)Q^T]^{-1}Q\\Lambda Q^Tw^*\\\\&amp;=Q(\\Lambda+CI)^{-1}\\Lambda Q^Tw^*\\end{align*}\\]"},{"location":"AI/DL/tricks/#dropout","title":"Dropout","text":"<p>A\u00a0dropout layer\u00a0randomly sets input elements to zero with a given probability.</p> <p>AlexNet uses dropout layers with a probability of 0.5.</p> <p>Dropout is an approach used for regularization in neural networks. It is a technique where randomly chosen nodes are ignored in network during training phase at each stage.</p> <p>This dropout rate is usually 0.5 and dropout can be tuned to produce best results and also improves training speed. This method of regularization reduces node-to-node interactions in the network which leads to learning of important features and also helps in generalizing new data better</p>"},{"location":"AI/DL/tricks/#parameters-initialization","title":"Parameters Initialization","text":"<p>Assumption:</p> <ol> <li>\u540c\u4e00\u5c42\u7684 X\u3001W\u3001b \u76f8\u540c\u72ec\u7acb\uff1b</li> <li>\u4e0d\u540c\u5c42\u7684\u6743\u91cd X, W, b \u5404\u81ea\u72ec\u7acb\u540c\u5206\u5e03</li> <li>\\(\\mathbb EW = \\mathbb EX=0\\)</li> <li> <p>\\(Var(b) =0\\)</p> \\[ \\begin{align*}Var(WX+b)&amp;=Var(WX) + Var(b)\\\\&amp;=\\mathbb E(X)^2Var(W)+\\mathbb E(W)^2Var(X) + Var(W)Var(X)+Var(b)\\\\&amp;=Var(W)Var(X)+Var(b)\\end{align*} \\] </li> </ol> <p>Requirements: Xavier Glorot \u8ba4\u4e3a\uff1a\u4f18\u79c0\u7684\u521d\u59cb\u5316\u5e94\u8be5\u4f7f\u5f97\u5404\u5c42\u7684\u6fc0\u6d3b\u503c\u548c\u72b6\u6001\u68af\u5ea6\u5728\u4f20\u64ad\u8fc7\u7a0b\u4e2d\u7684\u65b9\u5dee\u4fdd\u6301\u4e00\u81f4\u3002\u5373==\u65b9\u5dee\u4e00\u81f4\u6027==\u3002\u9700\u8981\u540c\u65f6\u8003\u8651\u6b63\u5411\u4f20\u64ad\u548c\u53cd\u5411\u4f20\u64ad\u7684\u8f93\u5165\u8f93\u51fa\u7684\u65b9\u5dee\u76f8\u540c\u3002</p> <ul> <li>\u968f\u673a\u521d\u59cb\u5316 \u6709\u4e0d\u987e\u68af\u5ea6\u6b7b\u6d3b\u7684\u5b8c\u5168 random \u4e5f\u6709\u5c06\u53c2\u6570\u89c6\u4e3a\u968f\u673a\u53d8\u91cf\uff0c\u7ed9\u5b9a\u4e00\u5b9a\u5206\u5e03\u7684\u62bd\u6837</li> <li>\u56fa\u5b9a\u503c\u521d\u59cb\u5316 \u662f\u6307\u5c06\u6a21\u578b\u53c2\u6570\u521d\u59cb\u5316\u4e3a\u4e00\u4e2a\u56fa\u5b9a\u7684\u5e38\u6570\uff0c\u8fd9\u610f\u5473\u7740\u6240\u6709\u5355\u5143\u5177\u6709\u76f8\u540c\u7684\u521d\u59cb\u5316\u72b6\u6001\uff0c\u6240\u6709\u7684\u795e\u7ecf\u5143\u90fd\u5177\u6709\u76f8\u540c\u7684\u8f93\u51fa\u548c\u66f4\u65b0\u68af\u5ea6\uff0c\u5e76\u8fdb\u884c\u5b8c\u5168\u76f8\u540c\u7684\u66f4\u65b0\uff0c\u8fd9\u79cd\u521d\u59cb\u5316\u65b9\u6cd5\u4f7f\u5f97\u795e\u7ecf\u5143\u95f4\u4e0d\u5b58\u5728\u975e\u5bf9\u79f0\u6027\uff0c\u4ece\u800c\u4f7f\u5f97\u6a21\u578b\u6548\u679c\u5927\u6253\u6298\u6263</li> <li>\u9884\u8bad\u7ec3\u521d\u59cb\u5316 \u6bd4\u8f83\u65e9\u671f\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 greedy layerwise auto-encoder \u505a\u65e0\u76d1\u7763\u5b66\u4e60\u7684\u9884\u8bad\u7ec3\uff0c\u7ecf\u5178\u4ee3\u8868\u4e3a Deep Belief Network\uff1b \u800c\u73b0\u5728\u66f4\u4e3a\u5e38\u89c1\u7684\u662f\u6709\u76d1\u7763\u7684\u9884\u8bad\u7ec3+\u6a21\u578b\u5fae\u8c03\u3002 |</li> </ul> <p>\u3010DL\u3011\u521d\u59cb\u5316\uff1a\u4f60\u771f\u7684\u4e86\u89e3\u6211\u5417\uff1f</p>"},{"location":"AI/DL/tricks/#naive-initialization","title":"Naive Initialization","text":""},{"location":"AI/DL/tricks/#random","title":"\u5b8c\u5168random","text":""},{"location":"AI/DL/tricks/#guss-distribution","title":"Guss Distribution","text":""},{"location":"AI/DL/tricks/#normal-distribution","title":"normal distribution","text":"<p>\\(W\uff5eN(\u03bc,\u03c3^2)\\)</p> <p>Consider a 10-layer DNN with tanh activation function. If we initialize all the weights with normal distribution N(0, 0.01).</p>"},{"location":"AI/DL/tricks/#uniform-distribution","title":"Uniform Distribution","text":"<p>\\(W\uff5eU(a,b), n:=\\) #input neurons of layer i</p> \\[ W_i\uff5eU(-\\cfrac{1}{n},\\cfrac{1}{n}) \\] <p>output i \\(h_i=\\sum\\limits_{j=1}^n(w_jx_j+b_j)\\)</p> <p>\\(Var(W) = \\mathbb E\\{(W-\\mathbb E W)^2\\}=\\cfrac{1}{3n^2}\\)</p> <p>\\(Var(h) = \\sum\\limits_{j=1}^n \\{Var(w_j)Var(x_j)+Var(b_j)\\}\\)</p> <p>Assume: \u8f93\u5165\u5747\u503c\u4e3a 0\uff0c\u65b9\u5dee\u4e3a 1 \\(\\mathbb EX = 0, Var(X)=1\\)</p> <p>\\(Var(h) = \\cfrac{1}{3n}+\\cfrac{1}{3}\\rightarrow\\lim\\limits_{n\\rightarrow\\infin}Var(h)=\\cfrac{1}{3}\\rightarrow std(h)=\\cfrac{1}{\\sqrt{3}}\\approx 0.5733&lt;1\\)</p> <p>\u901a\u8fc7\u4e0a\u5f0f\u8fdb\u884c\u8ba1\u7b97\uff0c\u6bcf\u4e00\u5c42\u795e\u7ecf\u5143\u7684\u6807\u51c6\u5dee\u90fd\u5c06\u4f1a\u662f\u524d\u4e00\u5c42\u795e\u7ecf\u5143\u7684\\(\\cfrac{1}{\\sqrt{3}}\\approx 0.5733 &lt;1\\) \u500d</p> <p>\u5f53\u5c42\u6570\u5230\u8fbe\u4e00\u5b9a\u7a0b\u5ea6\uff0c\u6807\u51c6\u5dee\u4e5f\u5c06\u4f1a\u662f0</p> <pre><code>class MLP(nn.Module):\n    def __init__(self, neurals, layers):\n        super(MLP, self).__init__()\n        self.linears = nn.ModuleList(\n            [nn.Linear(neurals, neurals, bias=False) for i in range(layers)])\n        self.neurals = neurals\n\n    def forward(self, x):\n        for (i, linear) in enumerate(self.linears):\n            x = linear(x)\n            print(\"layer:{}, std:{}\".format(i+1, x.std()))\n            if torch.isnan(x.std()):\n                break\n        return x\n\n    def initialize(self):\n        a = np.sqrt(1/self.neurals)\n        for m in self.modules():\n            if isinstance(m, nn.Linear):\n                nn.init.uniform_(m.weight.data, -a, a)\n</code></pre>"},{"location":"AI/DL/tricks/#xavier-initialization","title":"Xavier Initialization","text":"<p>Forward propagation</p> <p>\\(\\text{layer k:  } h^k=\\sum\\limits_{i=1}^{n_{k-1}}(w_i^{k-1}h_i^{k-1}+b_i^{k-1})\\)</p> <p>\\(Var(h^k)=n_{k-1}\\cdot Var(w^{k-1})\\cdot Var(h^{k-1})\\xlongequal{SET}Var(h^{k-1})\\)</p> <p>\\(Var(w^{k-1})=\\cfrac{1}{n_{k-1}},\\qquad n_{k-1}:=\\# \\text{input neurons}\\)</p> <p>Backwards propagation</p> <p>\\(\\cfrac{\\partial \\text{ cost }}{\\partial h^{k}}=\\sum\\limits_{i=1}^{n_{k+1}}w_i^{k+1}\\cfrac{\\partial \\text{ cost }}{\\partial h_i^{k+1}}\\)</p> <p>\\(Var(h^{k})=n_{k+1}\\cdot Var(w^{k+1})\\cdot Var(h^{k+1})\\xlongequal{SET} Var(h^{k+1})\\)</p> <p>\\(Var(w^k)=\\cfrac{1}{n_{k+1}},\\qquad n_{k+1}:= \\#\\text{output neurons}\\)</p> <p>\u901a\u5e38\u4e0d\u76f8\u7b49\uff0c\u6240\u4ee5\u8fd9\u4e24\u4e2a\u65b9\u5dee\u65e0\u6cd5\u540c\u65f6\u6ee1\u8db3\uff0c\u4f5c\u4e3a\u4e00\u79cd\u6298\u4e2d\u7684\u65b9\u6848 Take an average</p> <p>\\(Var(w^k)=\\cfrac{2}{n_{k-1}+n_{k+1}}\\)</p> <p>\u636e\u5747\u5300\u5206\u5e03\u7684\u65b9\u5dee\uff0c\u53cd\u63a8\u51faW\u7684\u5747\u5300\u5206\u5e03\u7531\u4e8e [-b,b] \u533a\u95f4\u7684\u5747\u5300\u5206\u5e03\u7684\u65b9\u5dee\u4e3a\uff1a</p> <p>\\(\\cfrac{b^2}{3}\\xlongequal{SET} \\cfrac{2}{n_{k-1}+n_{k+1}}\\implies b = \\cfrac{\\sqrt 6}{\\sqrt{n_{k-1}+{n_k+1}}}\\)</p> <p>\\(W\uff5eU[-\\cfrac{\\sqrt 6}{\\sqrt{n_{k-1}+{n_k+1}}}, \\cfrac{\\sqrt 6}{\\sqrt{n_{k-1}+{n_k+1}}}]\\)</p> <p>xavier\u6743\u91cd\u521d\u59cb\u5316\u7684\u4f5c\u7528\uff0c\u4f7f\u5f97\u4fe1\u53f7\u5728\u7ecf\u8fc7\u591a\u5c42\u795e\u7ecf\u5143\u540e\u4fdd\u6301\u5728\u5408\u7406\u7684\u8303\u56f4\uff08\u4e0d\u81f3\u4e8e\u592a\u5c0f\u6216\u592a\u5927\uff09\u3002</p>"},{"location":"AI/DL/tricks/#data-augmentation","title":"Data Augmentation","text":"<p>\u76f8\u5173\u7684\u6570\u636e</p> <ol> <li>generate some Gaussian noise and add the Gaussian noise to the image</li> <li>\u7528 generative models to generate similar data</li> </ol>"},{"location":"AI/DL/tricks/#for-image","title":"for image","text":"<p>\u6df1\u5ea6\u5b66\u4e60\u8bad\u7ec3\u4e2d\u4e3a\u4ec0\u4e48\u8981\u5c06\u56fe\u7247\u968f\u673a\u526a\u88c1\uff08random crop\uff09_\u968f\u673a\u88c1\u526a__pinnacle_\u7684\u535a\u5ba2-CSDN\u535a\u5ba2 1\ufe0f\u20e3</p> <p>\u4ee5\u4e0b\u6765\u81ea2012 paper \u56e0\u4e3a\u8fd9\u662f\u4e00\u4e2a\u5927\u578b\u7684\u56fe\u50cf\u5206\u7c7b\u6570\u636e\u96c6\uff0c\u91cc\u9762\u56fe\u50cf\u5e76\u4e0d\u662f\u56fa\u5b9a\u5927\u5c0f\uff0c\u4f46\u662f\u7b97\u6cd5\u9700\u8981\u4e00\u4e2a constant input, \u6240\u4ee5\u4f5c\u8005\u8fdb\u884c\u4e86data resize\uff0c\u8bbe\u5b9aimput image \\(3@254\\times254\\)\u3002\u5bf9\u4e8e\u4e0d\u6ee1\u8db3\u8981\u6c42\u7684\u56fe\u5f62</p> <ol> <li>\u7b49\u6bd4\u7f29\u5c0f\uff0c\u4f7f\u5176\u6700\u77ed\u8fb9\u7b49\u4e8e254</li> <li>\u5176\u4ed6\u8fd8\u662f\u5927\u4e8e254\u7684\u8fb9\u5c31\u8fdb\u884ccrop \u526a\u88c1\uff08\u7ec6\u8282\u4e0d\u77e5\u9053\uff09</li> </ol> <p>2\ufe0f\u20e3</p> <p>\u4ee5\u4e0b\u6765\u81eappt \u4f5c\u8005\u8fdb\u884c\u4e86\u4e00\u4e2adata  augmentation. \u8bbe\u5b9a imput image \\(3@257\\times257\\) \u8fd8\u662f\u4e0a\u9762\u7684\u65b9\u6cd5\uff0c\u4f46\u662f\u8fd9\u91cc\u52a0\u5165\u4e86 random crop\uff0c\u518d\u52a0\u4e00\u70b9 mirror image \u548c rotation</p>"},{"location":"AI/DL/tricks/#gradient-disappears","title":"gradient disappears","text":"<p>Resnet</p> <p>\u8d8a\u6df1\u4e0d\u4e00\u5b9a\u8d8a\u597d</p>"},{"location":"AI/DL/utils/","title":"utils","text":""},{"location":"AI/DL/utils/#gpu","title":"GPU","text":"<p>\u67d0\u67d0\u795e\u7ecf\u7f51\u7edc\u53c2\u6570\u91cf\u6709\u591a\u5c11\uff0c\u5927\u6982\u5360\u7528\u591a\u5927\u7684\u663e\u5b58</p> <p>Estimating neural network memory consumption \u25cf Mini-batch sizes and gradient splitting trick \u25cf Estimating neural network computation (FLOP/s) \u25cf Calculating effective aperture sizes</p> <p> </p>"},{"location":"AI/DL/utils/#model-size","title":"Model size","text":"<p>CNN</p> <p>per sample</p> <p></p> <p>\u4e00\u4e2a filter \u7684\u6df1\u5ea6(\u901a\u9053\u6570)\u8981\u548c input \u7684\u6df1\u5ea6(\u901a\u9053\u6570)\u4e00\u6837</p> <p>model size \u4ece\u4e0b\u5f80\u4e0a\uff1a Conv1: 32 \u4e2a filters * ((3 * 3 weight * 1 depth)  + 1 bias)  per filter = 320 Conv2: 32 \u4e2a filters * ((3 * 3 weight * 32 depth) + 1 bias) per filter = 9248 Fnn1: ((14 * 14) * 32 weight * + 1 bias) per layer * 128 layers = 802944 Fnn2: (128 weights + 1 bias) per layer* 10 layers = 1290 Total = 320 + 9248 + 802944 + 1290 = 813804 If use 32-bit float : \\(813804\\times4 \\text{(bytes/float32)} \\div1024\\div1024\\approx3.10M\\) intermedia output(parse layer) Input: 28W * 28H * 1D =  after Conv1: 28W * 28H * 32D = 25088 after Conv2: 28W * 28H * 32D = 25088 after Maxpool\uff1a 14W * 14H * 32D = 6272 after Fnn1: 128 after Fnn2: 10 = output</p>"},{"location":"AI/DL/utils/#optimization","title":"optimization","text":"<p>In practice, we want to do mini-batch SGD: \u25cf More stable gradient estimates \u25cf Faster training on modern hardware Size of batch is limited by model architecture, model size, and hardware memory. May need to reduce batch size for training larger models. This may affect convergence if gradients are too noisy.</p> <p></p> <p>GPU momory size:</p> <ul> <li>GTX 980: 4GB</li> <li>Tesla K40: 12GB</li> <li>Tesla K20: 5GB</li> </ul> <p>Estimating computational complexity:</p> <p>FLOPS | flop/s, Floating point operations per second \u8861\u91cf\u8fd0\u7b97\u65f6\u8ba1\u7b97\u6027\u80fd\uff0c\u5728\u4f7f\u7528\u6d6e\u70b9\u6570\u79d1\u5b66\u8fd0\u7b97\u65f6\u5f88\u6709\u7528\u3002</p> <p>\u5728 deep NN \u91cc\u7684\u8ba1\u7b97\u90fd\u88ab FC &amp; conv layers \u91cc\u7684\u52a0\u4e58 multiply-adds \u4e3b\u5bb0\uff0c\u6240\u4ee5\u6211\u4eec\u5728\u4f30\u7b97\u8ba1\u7b97\u590d\u6742\u5ea6\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u76f4\u63a5 estimate the number of FLOPs (multiply-adds) in the forward pass\u3002\u800c\u5ffd\u7565\u6389 \u975e\u7ebf\u6027\u7684\u64cd\u4f5c\u3001dropout\u3001normalization layers...</p> <p></p> <p></p> <p>Refernce:</p> <ul> <li>Memory usage and computational considerations</li> <li>CNN \u6a21\u578b\u6240\u9700\u7684\u8ba1\u7b97\u529bflops\u662f\u4ec0\u4e48\uff1f\u600e\u4e48\u8ba1\u7b97\uff1f</li> </ul>"},{"location":"AI/DL/utils/#tensorboard","title":"tensorboard","text":"<p>pytorch\uff1a\u672c\u5730\u4f7f\u7528tensorboard\u53ef\u89c6\u5316</p>"},{"location":"AI/ML/association_analysis/","title":"Association Analysis","text":"<p>Itemset\u3002A collection of one or more items. k-itemset: An itemset that contains k items. Support count \u03c3\u3002 Frequency of occurrence of an itemset. Support s\u3002Fraction of transactions that contain an itemset. Frequent itemset\u3002An itemset whose support is greater than or equal to a \u201cminsup\u201d threshold. Confidence c\u3002Measures how often items in Y appear in records that contain X.</p> <p>Rules originating from the same itemset have identical support but can have different confidence.</p> <p>\u6240\u4ee5\u53ef\u4ee5\u5206\u5f00\u7b97\u3002\u5148\u7b97 support \u540e\u7b97 confidence\u3002</p> <p>Association Rule\u3002An implication expression of form X to Y where X and Y are itemsets. Association Rule Mining Task\u3002Given a set of transactions T, the goal of association rule mining is to find all rules having</p> <ul> <li>support \u2265 minsup threshold;</li> <li>confidence \u2265 minconf threshold.</li> </ul> <p></p> <p>Compute the support and confidence of the association rule {Milk, Diaper} \u2192 {Beer}.</p> <p>N = 5 = the total number of transactions \u03c3({Milk, Bread, Diaper}) = 2. Support s({Milk, Bread, Diaper}) = \\(\\frac{\\sigma}{N}=\\frac{2}{5}\\) Association Rule = {Milk, Diaper} -&gt; {Beer} Confidence c=\\(\\cfrac{\\sigma(MDB)}{\\sigma(MD)}=\\frac{2}{3}\\)</p>"},{"location":"AI/ML/association_analysis/#approach","title":"approach","text":"<ul> <li>Frequent Itemset Generation: Generate all itemsets whose support \u2265 minsup. Given \\(d\\) items, there are \\(2^d \u2212 1\\) possible candidate itemsets.</li> </ul> <ul> <li>Rule Generation: Generate high confidence rules from each frequent itemset.</li> </ul> <p>Brute-force approach \u66b4\u529b\u89e3\u3002\u5217\u51fa\u5e76\u6c42\u51fa\u5168\u90e8\u3002Computationally prohibitive! Each frequent itemset of size \\(n\\) leads to \\(2^n\u22122\\) association rules X \u2192 Y. \u6bcf\u4e2aitem\u90fd\u6709\u6210\u4e3aX\u548cY\u4e24\u79cd\u53ef\u80fd\uff0c\u7136\u540e\u51cf\u6389X\u6216Y\u4e3a\u7a7a\u7684\u4e24\u79cd\u60c5\u51b5\u3002</p> <p>Apriori principle</p> <ul> <li>{A} Non-frequenct, \\(\\implies\\) {AB}, {AC} \u66f4\u4e25\u82db\u7684\u8981\u6c42\u4e00\u5b9a\u662f Non-frequent.\u3010itemset\u3011\u3010support\u3011</li> </ul> <p></p> <ul> <li>If a rule \\(\\{X\\} \u2192 \\{Y\u2212X\\}\\) does not satisfy the confidence threshold, then any rule \\(\\{X\u2032\\} \u2192\\{Y\u2212X\u2032\\}\\) where \\(\\{X\u2032\\}\\sub\\{X\\}\\). must not satisfy the confidence threshold as well.\u3010rule\u3011\u3010confidence\u3011</li> </ul> <p>Frequent Pattern (FP)-growth algorithm Using the data structure FP-tree to extract frequent itemsets directly. An FP-tree is a compressed representation of the input. \u5c06\u76f8\u540c\u70b9\u8fde\u63a5\uff0c\u9006\u5411\u627e\u5bfb</p> <p></p> <p>search A: A=7 search AB: \u627eB\u518d\u770b\u6709\u6ca1\u6709A =5 search AE\uff1a\u5148\u627eE\u518d\u770b\u770b\u6709\u6ca1\u6709A=1+1=2</p>"},{"location":"AI/ML/association_analysis/#da","title":"Da","text":"Association Rule Antecedent \u524d\u56e0 Consequent proximity \u8fd1\u8ddd\u79bb Itemset Lattice <p>comp9318 Association Rule Mining</p>"},{"location":"AI/ML/association_analysis/#association-rule","title":"Association Rule \u5173\u8054\u89c4\u5219","text":"<p>An association rule is an implication of the form\u00a0\ud835\udc34 \u21d2 \ud835\udc35, where\u00a0\ud835\udc34\u00a0is the Antecedent,\u00a0\ud835\udc35\u00a0is the Consequent.</p> <p>\u5546\u54c1\u653e\u5728\u4e00\u8d77\u53ef\u4ee5\u4fc3\u9500\uff0c\u653e\u5728\u4e24\u7aef\u53ef\u4ee5\u8bf1\u60d1\u4eba\u4eec\u6cbf\u9014\u8d2d\u4e70</p>"},{"location":"AI/ML/association_analysis/#support-confidence-framework","title":"Support-Confidence Framework","text":"<p>\ud83d\udca1 support(itemset) \u652f\u6301\u5ea6 AB\u6709\u5173 confidence(associate rule)\u7f6e\u4fe1\u5ea6 A\u63a8B \u800c\u4e0d\u662fB\u63a8A</p> <p><code>min_sup</code> : a minimum support threshold \\(\\implies\\) whether a frequent itemset \\(L_k\\)</p>"},{"location":"AI/ML/association_analysis/#how-to-develop","title":"How to develop","text":"<ol> <li>\u8bbe\u5b9a\u4e00\u4e2aminimum support threshold\uff0c\u627e\u5230 frequent itemset \\(L_k\\)</li> <li> <p>Generate\u00a0Strong\u00a0Association Rules from the Frequent Itemsets</p> </li> <li> <p>Example</p> <p>support_count({I1,I2})\\(=\\#T(I1\\cup I2)=4\\)</p> <p>(T100\uff0cT200\uff0cT400\uff0cT800</p> <p>support({I1,I2})=\\(\\frac{\\text{support\\_count}(\\{ I1,I2\\})}{\\# T}=\\frac{4}{9}\\) \\(\\#T=9\\) Given min_sup\\(=\\frac{2}{9}\\), support({I1,I2})&gt;\\(\\frac{2}{9}\\implies\\) {I1,I2} is a frequent itemset confidence({I1,I2}\u21d2{I3})\\(=\\frac{\\text{support}(\\{I1,I2,I3\\})}{\\text{support}(\\{I1,I2\\})}=\\frac{2/9}{4/9}=\\frac{1}{2}\\)</p> </li> </ol>"},{"location":"AI/ML/clustering/","title":"\u805a\u7c7b, Clustering","text":"<p>upsupervised, distance sensitive</p> <p>Clustering is the process of dividing the entire data into clusters based on the patterns in the data.</p> <ol> <li>all the data points in a cluster should be similar to each other.</li> <li>the data points from different clusters should be as different as possible.</li> </ol> <p></p> <p>application: \u6839\u636e\u4ed8\u6b3e\u5386\u53f2\u7684\u65f6\u95f4\u5e8f\u5217\u5bf9\u73b0\u6709\u5ba2\u6237\u8fdb\u884c\u5206\u7ec4/\u805a\u7c7b\uff0c\u4f7f\u7c7b\u4f3c\u7684\u5ba2\u6237\u5904\u4e8e\u540c\u4e00\u805a\u7c7b\u4e2d\u3002</p> <p>Maximize Inter-cluster distance Minimize Intra-cluster distance Centroid. \u4e2d\u5fc3\u70b9</p>"},{"location":"AI/ML/clustering/#similarities-and-distances","title":"similarities and distances","text":""},{"location":"AI/ML/clustering/#point-level","title":"point level","text":"<p>\\(d(X_i,X_j),\\quad X\\in\\R^{p},i,j=1,\\dots,n\\)</p> <p>requirements and properties:</p> <ol> <li>Symmetry\u00a0\\(d(X_i,X_j)=d(X_j,X_i)\\).</li> <li>Positivity\u00a0\\(d(X_i,X_j) &gt; 0, X_i\u2260X_j\\).</li> <li>Identity\u00a0\\(d(X_i,\u00a0X_i) = 0\\).</li> <li>Triangle inequality\u00a0\\(d(X_i , X_j ) \u2264 d(X_i,X_k ) + d(X_k,X_j ).\\)</li> </ol> <p>Euclidean Distance. \\(\\sqrt{\\sum\\limits_{k=1}^p(X_{ik}-X_{jk})^2}\\)</p> <p>Canberra Metric. \\(\\sum\\limits_{k=1}^p\\cfrac{|X_{ik}-X_{jk}|}{X_{ik}+X_{jk}}\\)</p> <p>Minkowski Distance. \\(\\Big[\\sum\\limits_{k=1}^p|X_{ik}-X_{jk}|^m\\Big]^{1/m}\\)</p> <p>Czekanowski Coefficient: signal-to-noise.\\(1-\\cfrac{\\sum\\limits_{k=1}^p\\min(X_{ik},X_{jk})}{\\sum\\limits_{k=1}^p(X_{ik}+X_{jk})}\\)</p>"},{"location":"AI/ML/clustering/#class-level","title":"class level","text":"\u7c7b\u7c07 similarity notes \u5355\u94fe\u63a5 single-linkage \\(\\min\\limits_{x\\in C_1, z\\in C_2}\\text{dis}(x,z)\\) \u53ef\u4ee5\u5904\u7406\u975e\u692d\u5706\u5f62\u5bf9\u566a\u58f0\u548c\u5b64\u7acb\u70b9\u654f\u611f \u5168\u94fe\u63a5 complete-linkage \\(\\max\\limits_{x\\in C_1, z\\in C_2}\\text{dis}(x,z)\\) \u4e0d\u6613\u6536\u5230\u566a\u58f0\u548c\u5b64\u7acb\u70b9\u5f71\u54cd\u8d8b\u5411\u5206\u88c2\u4e3a\u66f4\u5927\u5c3a\u5bf8\u7684\u7c7b\u504f\u5411\u7403\u5f62\u7c7b \u7ec4\u5e73\u5747 average-linkage \\(\\cfrac{1}{C_1C_2}\\sum\\limits_{x\\in C_1}\\sum\\limits_{ z\\in C_2}\\text{dis}(x,z)\\) ^ <p>\u53ef\u4e0d\u53ef\u4ee5\u5728\u76d1\u7763\u6027\u5b66\u4e60\u4f7f\u7528\u805a\u7c7b\uff1f</p> <p>\u2705\u3002\u53ef\u4ee5\u521b\u5efa\u805a\u7c7b\uff0c\u5728\u4e0d\u540c\u96c6\u7fa4\u4e0a\u6784\u5efa\u5355\u72ec\u7684\u673a\u5668\u5b66\u4e60\u6a21\u578b</p>"},{"location":"AI/ML/clustering/#methods","title":"methods","text":"Non-hierarchical methods K-means Hierarchical methods Divisive hierarchical algorithms (start with a single cluster). ^ Agglomerative hierarchical algorithms (start with n clusters) Gaussian mixture."},{"location":"AI/ML/clustering/#em","title":"EM","text":"<p>EM\u4e0d\u4f1a\u9677\u4e8e\u5c40\u90e8\u6781\u5c0f\u503c \u274c</p>"},{"location":"AI/ML/clustering/#hierarchical-methods","title":"Hierarchical methods","text":""},{"location":"AI/ML/clustering/#agglomerative-hierarchical-algorithms-start-with-n-clusters","title":"Agglomerative hierarchical algorithms (start with n clusters)","text":"<ol> <li>Compute the proximity matrix ! Let each data point be a cluster. Repeat:</li> <li>Merge the two closest clusters ! Update the proximity matrix which defines the distances between each point</li> <li>Until: only one single cluster remains.</li> </ol> <p>Consider the following hypothetical distances matrix with group order (1); (2); (3); (4); (5), \\(D = (d_{ij}) = \\begin{bmatrix}0\\\\9&amp;0\\\\3&amp;7&amp;0\\\\6&amp;5&amp;9&amp;0\\\\11&amp;10&amp;2&amp;8&amp;0\\end{bmatrix}\\)</p>"},{"location":"AI/ML/clustering/#k-means","title":"K-means","text":"<p>centroid-based, distance-based, a blind guess k clusters</p> <p></p> <p>\u80fd\u5426\u4fdd\u8bc1\u627e\u5230\u6700\u4f18\u89e3\uff1f</p> <p>\u274c\u3002\u56e0\u4e3a Kmeans\u672c\u8eab\u662f\u4e00\u4e2aNP\u95ee\u9898\uff0c\u800c\u4e14\u662f\u975e\u51f8\u7684\uff0c\u5bb9\u6613\u9677\u5165\u5c40\u90e8\u6700\u4f18\u3002\u6240\u4ee5\u9700\u8981\u591a\u6b21\u968f\u673a\u521d\u59cb\u5316\u4e2d\u5fc3\u70b9\uff0c\u7136\u540e\u9009\u6548\u679c\u6700\u597d\u7684\uff0c</p> <p>Target: minimize the distance between the points within a cluster. minimize the sum of distances between the points and their respective cluster centroid.</p> <p>drawback:</p> <ol> <li>\u8ba1\u7b97\u91cf\u9ad8\uff0c\u53ea\u80fd\u6c42\u5230 local minimizer\uff0c\u4e0d\u786e\u5b9a\u662f\u4e0d\u662f global</li> <li>\u6839\u636e\u539f\u59cb\u968f\u673a\u7684 centoid, different initials generate different solutions because the local minimizer will be found for K-Means, some initials may converge at the same point, but some may converge in different local minimizers</li> <li>May get bad results when points are distributed on manifold yet ambient distance is used.</li> </ol> <p></p>"},{"location":"AI/ML/clustering/#evaluating-the-choice-of-k","title":"Evaluating the choice of K","text":"<p>Within Cluster Sum of Squares, WCSS \\(\\(WCSS = \\sum_{i=1}^k\\sum_{x_i\\in C_i}\\text{dist}(\\text{Centoid}_i, x_i)^2\\)\\) Then the Elbow Method is then used to choose the best K value based on WCSS</p> <p></p>"},{"location":"AI/ML/clustering/#mathematical","title":"Mathematical","text":"<p>\\(\\Vert A \\Vert_{F}=\\sqrt{Tr(AA^T)}=\\sqrt{\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^n\\vert a_{ij}\\vert^2}\\)</p> <p>\\(M_{n,q}=\\{M\\in\\R^{n\\times p} : M \\text{ has q distinct rows}\\}\\) n: #observation rows; p: #dimension; q: #clusters</p> <p>\\((c_1,\\dots,c_n)^T=\\min\\limits_{M\\in M_{n,p}}\\Vert X_{n,p}-M\\Vert_F^2\\xleftarrow{\u5927\u6982}\\begin{bmatrix}X_{n,p}\\\\x_1\\in(1)\\\\x_2\\in(2)\\\\\\vdots\\\\x_n\\in(1)\\\\\\end{bmatrix}-\\begin{bmatrix}M_{n,p}\\\\c(1)\\\\c(2)\\\\\\vdots\\\\c(1)\\\\\\end{bmatrix},(i):=\\text{cluster i}\\)</p> <p>Each row of\u00a0Xn,p\u00a0(i.e., each observation) can be viewed as a noisy version of some centroid\u00a0ci. Final results rely on</p> <p>1) how far away are the centroids from each other, and 2) how noisy are the observations from the centroid.</p> <p>\u5199\u8d77\u6765\u6570\u5b66\u516c\u5f0f\u5f88\u7b80\u5355\uff0c\u4f46\u662f\u6211\u4eec\u5e76\u4e0d\u77e5\u9053\u54ea\u4e2a\u662f\u5c5e\u4e8e\u54ea\u4e2acluster\u7684\uff0c\u5982\u679c\u6709 k \u4e2acluster\u7684\u8bdd\uff0c\u6bcf\u4e2a observation \u6709 k \u4e2a\u9009\u62e9\uff0c\u90a3\u4e48\u5c31\u4f1a\u6709 \\(k^n\\) \u79cd\u53ef\u80fd\uff0c\u5728\u8ba1\u7b97\u4e0a\u662f\u5c5e\u4e8e high computational cost\uff0c\u8fd9\u5c31\u662f\u5b83\u7684 drawback\u3002\u6240\u4ee5\u6211\u4eec\u5c31\u4e0d\u4f1a\u904d\u5386\u6240\u6709\u7684\u53ef\u80fd\uff0c\u6211\u4eec\u5f80\u5f80\u5c31\u5728 initial \u7684\u65f6 random \u9009\u62e9\uff0c\u8fd9\u5c31\u5bfc\u81f4\u6211\u4eec\u6781\u6709\u53ef\u80fd\u8d70\u8fdb local minimizer</p>"},{"location":"AI/ML/clustering/#steps","title":"Steps","text":"<ol> <li>Pre-specifies the number of clusters K</li> <li> <p>Select k points as the initial centroids</p> </li> <li> <p>random partitioning. random nature will avoid bias. \u5bf9\u6574\u4e2ak-\u5747\u503c\u7b97\u6cd5\u8fdb\u884c\u51e0\u6b21\u521d\u59cb\u5316\uff0c\u5e76\u4eceSSE\u6700\u4f4e\u7684\u521d\u59cb\u5316\u4e2d\u9009\u62e9\u96c6\u7fa4\u5206\u914d\u3002</p> </li> <li>start with an additional set of starting points |</li> <li>Re-assign and Re-calculate Scan through the list of n items, assigning each item to the cluster whose centroid (mean) is closest. Each time the n items are reassigned we will recalculate the cluster mean or centroid for the clusters.</li> <li>Repeat 2 until convergence.</li> </ol> <p></p> <p>Stopping Criteria:</p> <ol> <li>Centroids of newly formed clusters do not change\uff08\u7406\u60f3\uff0c\u4e0d\u4ec5\u5206\u597d\u4e86\u7c7b\uff0c\u8fd8\u627e\u5230\u4e2d\u5fc3</li> <li>Points remain in the same cluster\uff08\u5b8c\u6210\u4efb\u52a1\uff0c\u5206\u597d\u7c7b\u624d\u662f\u6211\u7684\u6838\u5fc3\u4efb\u52a1</li> <li>The maximum number of iterations is reached\uff08\u6ca1\u529e\u6cd5\uff0c\u5df2\u7ecf\u5c3d\u4eba\u4e8b\u4e86</li> </ol> <p></p>"},{"location":"AI/ML/clustering/#programming","title":"Programming","text":"<p><code>kmeanModel.inertia_</code> Sum of squared distances of samples to their closest cluster centre, weighted by the sample weights if provided. \u6837\u672c\u5230\u5176\u6700\u8fd1\u7684\u805a\u7c7b\u4e2d\u5fc3\u7684\u5e73\u65b9\u8ddd\u79bb\u4e4b\u548c\uff0c\u5982\u679c\u63d0\u4f9b\u7684\u8bdd\uff0c\u7528\u6837\u672c\u6743\u91cd\u8fdb\u884c\u52a0\u6743\u3002</p> <p><code>KMeans(n_clusters=k, random_state=r)</code></p> <p><code>KMeans.fit(X).labels_</code> = <code>KMeans.fit_predict(X)</code></p> <pre><code>#@title \u7eafK-means\nfrom sklearn.cluster import KMeans\n\nkmeans_model = KMeans(n_clusters=k, random_state=)\nkmeans_model = kmeans_model.fit(X)\ny = kmeans_model.labels_\nnew_y = kmeans_model.predict(new_x)\ncen = means.cluster_centers_\n</code></pre> <pre><code>#@title elbow to determine which k \u8098\u90e8\u6cd5\n\n# Collecting the distortions into list\ndistortions = []\nK = range(1,10)\nfor k in K:\n    kmeanModel = KMeans(n_clusters=k)\n    kmeanModel.fit(x)\n    distortions.append(kmeanModel.inertia_)\n# Plotting the distortions\nplt.figure(figsize=(16,8))\nplt.plot(K, distortions, 'bx-')\nplt.xlabel('k')\nplt.ylabel('Distortion')\nplt.title('The Elbow Method showing the optimal clusters')\nplt.show()\n</code></pre> <pre><code>#@title scatter plot 2D\n# Visualising the clusters\nplt.scatter(x[kmeans_predict == 0, 0], x[kmeans_predict == 0, 1], s = 100, c = 'red', label = 'Setosa')\nplt.scatter(x[kmeans_predict == 1, 0], x[kmeans_predict == 1, 1], s = 100, c = 'blue', label = 'Versicolour')\nplt.scatter(x[kmeans_predict == 2, 0], x[kmeans_predict == 2, 1], s = 100, c = 'green', label = 'Virginica')\n# plt.scatter(x[kmeans_predict == 3, 0], x[kmeans_predict == 3, 1], s = 100, c = 'black', label = 'Another species')\n# print(kmeans_model.cluster_centers_)\n\n# Plotting the centroids of the clusters\nplt.scatter(kmeans_model.cluster_centers_[:, 0], kmeans_model.cluster_centers_[:,1], s = 100, c = 'yellow', label = 'Centroids')\n\nplt.legend()\nplt.show()\n</code></pre> <pre><code>#@title scatter plot 3D\n# Visualising the clusters\nfig = plt.figure()\nax = Axes3D(fig)\nax.scatter(x[kmeans_predict == 0, 0], x[kmeans_predict == 0, 1], x[kmeans_predict == 0, 2], s = 10, c = 'red', label = 'Setosa')\nax.scatter(x[kmeans_predict == 1, 0], x[kmeans_predict == 1, 1], x[kmeans_predict == 1, 2], s = 10, c = 'blue', label = 'Versicolour')\nax.scatter(x[kmeans_predict == 2, 0], x[kmeans_predict == 2, 1], x[kmeans_predict == 2, 2], s = 10, c = 'green', label = 'Virginica')\n# ax.scatter(x[kmeans_predict == 3, 0], x[kmeans_predict == 3, 1], x[kmeans_predict == 3, 2], s = 10, c = 'black', label = 'Another species')\n\nprint(kmeans_model.cluster_centers_)\n\n# Plotting the centroids of the clusters\nax.scatter(kmeans_model.cluster_centers_[:, 0], kmeans_model.cluster_centers_[:,1], kmeans_model.cluster_centers_[:,2], s = 100, c = 'yellow', label = 'Centroids')\n\nplt.legend()\nplt.show()\n</code></pre>"},{"location":"AI/ML/clustering/#ref","title":"ref","text":"<ul> <li>K-Means Clustering in Python: A Practical Guide \u2013 Real Python</li> <li>sklearn.cluster.KMeans</li> <li>The Ultimate Guide to K-Means Clustering: Definition, Methods and Applications</li> </ul>"},{"location":"AI/ML/dt/","title":"\u51b3\u7b56\u6811","text":"<p>A decision tree allows a classification of an object by testing its values for certain properties.</p> <p>\u7b56\u7565\uff1a\u81ea\u9876\u800c\u4e0b\uff0c\u5206\u800c\u6cbb\u4e4b\uff0c\u9012\u5f52</p> <p>\u51b3\u7b56\u6811\u6ca1\u6709 \u5b66\u4e60\u7387</p> <p>\u5df2\u77e5\u8bad\u7ec3\u96c6 \\(D=\\{(x_1,y_1),\\dots,(x_n,y_n)\\}\\) \u5c5e\u6027\u96c6 \\(A=\\{a_1,\\dots,a_d\\}\\), \u5c5e\u6027\u503c\u96c6 \\(a_i^v=\\{a_i^1,\\dots,a_i^v\\}\\) <pre><code>def TreeGenerate(D, A):\n    \u751f\u6210\u7ed3\u70b9 node\n    if ALL node.D \u5c5e\u4e8e \u4e00\u4e2a\u7c7b\u522b C:\n        node = C \u7c7b\u53f6\u7ed3\u70b9  # \u5206\u7c7b\u6210\u529f\n        return\n    if node.A == NULL or node.D \u7684\u6837\u672c\u7684\u5c5e\u6027\u503c\u90fd\u4e00\u6837:\n        node = node.D \u4e2d\u591a\u6570\u7c7b \u53f6\u7ed3\u70b9  # \u4e0d\u80fd\u518d\u5206\n        return\n    \u4ece node.A \u4e2d\u9009\u62e9\u6700\u4f18\u5212\u5206\u5c5e\u6027 a_best\n    for v in a_best:\n        \u5728 node \u5e95\u4e0b\u751f\u6210\u5206\u652f node_by_v\n        if node_by_v == NULL:  # \u8bad\u7ec3\u96c6\u91cc\u6ca1\u6709\uff0c\u4f46\u4e3a\u4e86\u6cdb\u5316\u6027\u80fd\n            node_by_v = node.D \u4e2d\u591a\u6570\u7c7b \u53f6\u7ed3\u70b9\n            return\n        TreeGenerate(D, A\\{a_best})\n</code></pre> 1. \u53f6\u5b50\u7ed3\u70b9\u662f\u6837\u672c\u6240\u5c5e\u7684\u7c7b\u522b 2. \u9012\u5f52\u7ed3\u675f\uff1a\u6807\u8bb0\u53f6\u7ed3\u70b9 - \u5982\u4f55\u5224\u5b9a\uff1a\u53f6\u5b50\u7ed3\u70b9    1. \u7ed3\u70b9\u5305\u542b\u5206\u7c7b\u5168\u5c5e\u4e00\u7c7b\uff1a \u5206\u7c7b\u6210\u529f\uff0c\u8d4b\u7c7b\u503c    2. \u7ed3\u70b9\u7684\u5c5e\u6027\u96c6A\u4e3a\u7a7a\uff0c\u7ed3\u70b9\u5305\u542b\u7684\u6240\u6709\u6837\u672c\u5728\u8be5\u7ed3\u70b9\u7684\u6240\u6709\u5c5e\u6027\u503c\u53d6\u503c\u76f8\u540c\uff1a\u65e0\u6cd5\u5212\u5206\uff0c\u8d4b\u8be5\u7ed3\u70b9\u591a\u6570\u7c7b\u7684\u7c7b\u503c\uff0c\u5f53\u524d\u7ed3\u70b9\u7684\u540e\u9a8c\u5206\u5e03\u3002    3. \u7ed3\u70b9\u7684\u6837\u672c\u96c6D\u4e3a\u7a7a\uff1a\u4e0d\u80fd\u5212\u5206\uff0c\u8d4b\u8be5\u7236\u7ed3\u70b9\u591a\u6570\u7c7b\u7684\u7c7b\u503c\uff0c\u628a\u7236\u7ed3\u70b9\u7684\u6837\u672c\u5206\u5e03\u5f53\u4f5c\u5f53\u524d\u7ed3\u70b9\u7684\u5148\u9a8c\u5206\u5e03</p> <p>\u4f18\u70b9\uff1a</p> <ul> <li>\u975e\u53c2\u6570\u65b9\u6cd5\uff0c\u4e0d\u8981\u6c42\u4efb\u4f55\u5148\u9a8c\u5047\u8bbe\uff0c\u4e0d\u5047\u5b9a\u7c7b\u548c\u5c5e\u6027\u670d\u4ece\u4e00\u5b9a\u6982\u7387\u5206\u5e03</li> <li>\u5bf9\u566a\u58f0\u6570\u636e\u9c81\u68d2\u6027\u5f3a</li> <li>\u80fd\u8868\u793a\u4e3a\u591a\u6761 if-then \u7684\u51b3\u7b56\u89c4\u5219\uff0c\u53ef\u89e3\u91ca\u6027\u5f3a</li> <li>\u5206\u7c7b\u901f\u5ea6\u5feb\uff0c\u6700\u574f\u60c5\u51b5\u4e0b\u662f O(depth)</li> </ul> <p>\u7f3a\u70b9\uff1a</p> <ul> <li>\u53f6\u7ed3\u70b9\u5b9e\u4f8b\u6570\u76ee\u592a\u5c0f</li> <li>\u5bf9\u79bb\u6563\u503c\u8f83\u597d\uff0c\u4f46\u8fde\u7eed\u503c\u7684\u6a21\u62df\u8868\u8fbe\u4e0d\u591f</li> <li>\u51b3\u7b56\u6811\u6709\u91cd\u590d\u591a\u6b21\u7684\u5b50\u6811\uff0c\u56e0\u4e3a\u7eaf\u9760\u5355\u4e2a\u5c5e\u6027\u6765\u5206\uff0c\u5728\u5c5e\u6027\u7a7a\u95f4\u7684\u4e0d\u540c\u90e8\u5206\u591a\u6b21\u4f7f\u7528\u540c\u4e00\u4e2a\u5c5e\u6027\u6765\u5212\u5206</li> </ul> <p>\u5982\u4f55\u5904\u7406\uff1a\u7f3a\u5931\u503c\uff0c\u8fde\u7eed\u53d8\u91cf</p> <p></p>"},{"location":"AI/ML/dt/#_2","title":"\u5982\u4f55\u5ea6\u91cf\uff1a\u6700\u4f73\u5212\u5206","text":"<p>impurity, \u4e0d\u7eaf\u5ea6\uff0c\u5206\u652f\u7ed3\u70b9\u6240\u5305\u542b\u6837\u672c\u7684\u5f52\u5c5e\u7684\u5ea6\u91cf\u6307\u6807\u3002impurity \u2b07\ufe0f\uff0c\u7c7b\u5206\u5e03\u8d8a\u503e\u659c\u3002 Information Gain. \u4e0d\u7eaf\u5ea6\u7684\u964d\u4f4e\u7a0b\u5ea6\uff1a\u786e\u5b9a\u5212\u5206\u6548\u679c\u7684\u5ea6\u91cf\u6807\u51c6\uff1a\u6700\u5927\u5316\u589e\u76ca\\(\\Delta\\) \\(\\(\\max_{I}\\Delta_{I}=I(\\text{parent})-\\sum_{i=1}^k\\cfrac{N(j)}{N}I(j)\\\\ \\Leftrightarrow \\min_I\\sum_{i=1}^k\\cfrac{N(j)}{N}I(j)\\)\\) \\(k\\): \u8be5\u5c5e\u6027\u4e0d\u540c\u53d6\u503c\u7684\u79cd\u7c7b\u6570 \\(I(\\text{parent})\\): \u7236\u7ed3\u70b9\u7684\u4e0d\u7eaf\u5ea6, \\(N\\) \u7236\u7ed3\u70b9\u7684\u6837\u672c\u6570 \\(I(j)\\): \u7b2c j \u4e2a\u5b50\u7ed3\u70b9\u7684\u4e0d\u7eaf\u5ea6, \\(N(j)\\) \u7b2c j \u4e2a\u5b50\u7ed3\u70b9\u7684\u6837\u672c\u6570</p>"},{"location":"AI/ML/dt/#impurity","title":"impurity","text":"Impurity DT \u71b5 Entropy \\(p(i)\\log_2p(i)\\) ID3 ^ \u5f15\u5165\u5206\u88c2\u4fe1\u606f C4.5 Gini \\(p(j)^2\\) CART \u8bef\u5206\u7c7b\u7387 \\(\\max_ip(i\\|t)\\) <p>\u4e0d\u540c\u7684\u51c6\u5219\u53ef\u80fd\u5bfc\u81f4\u4e0d\u540c\u7684\u7b54\u6848</p>"},{"location":"AI/ML/dt/#entropy-id3-c45","title":"\u71b5 Entropy = ID3 \u27a1\ufe0f  C4.5","text":"<p>\\(\\(\\text{Ent}(t)=-\\sum_{i=1}^cp(i)\\log_2p(i)\\)\\) - \\(0\\log_20=0\\) - \\(\\max=0.5 \\text{ \u5747\u5300\u5206\u5e03\uff0c}\\min=0 \\text{\u4ec5\u5c5e\u4e8e\u4e00\u4e2a\u7c7b}\\)</p> <p>attri|\u201cHigh Entropy\u201d|\u201cLow Entropy\u201d |--|--|--| Variable distribution | uniform-like |many peaks and valleys histogram| Flat | many lows and highs information|less predictable Less information | more predictable More information</p> <p>\u7f3a\u70b9\uff1a\u504f\u597d\u9009\u62e9\u5177\u6709\u8f83\u591a\u5c5e\u6027\u503c\u7684\u5c5e\u6027 \u9ad8\u71b5\u5206\u88c2\uff0c\u5927\u91cf\u5c0f\u90e8\u5206</p> <p>\ud83d\udca1\u8bc1\u660e\u5c06\u7ed3\u70b9\u5212\u5206\u4e3a\u66f4\u5c0f\u7684\u540e\u7eed\u7ed3\u70b9\uff0c\u7ed3\u70b9\u71b5\u4e00\u5b9a\u4f1a\u51cf\u5c11\u6216\u8005\u7ef4\u6301\u4e0d\u53d8\u3002 \u6839\u636e\u5b9a\u4e49\u53ef\u77e5\uff0c\u71b5\u8d8a\u5927\uff0c\u7c7b\u5206\u5e03\u8d8a\u5747\u5300\uff1b\u71b5\u8d8a\u5c0f\uff0c\u7c7b\u5206\u5e03\u7ea6\u503e\u659c\u3002\u5047\u8bbe\u539f\u7ed3\u70b9\u5c5e\u4e8e\u5404\u4e2a\u7c7b\u7684\u6982\u7387\u76f8\u540c(\u771f\u5b9e\u5206\u5e03)\uff0c\u71b5=1\uff0c\u5219\u5206\u51fa\u6765\u7684\u540e\u7eed\u7ed3\u70b9\u5728\u5404\u4e2a\u7c7b\u4e0a\u5747\u5300\u5206\u5e03\uff0c\u5404\u4e2a\u540e\u7eed\u7ed3\u70b9\u7684\u71b5=1\uff0c\u52a0\u6743\u540e\u71b5 \ud83d\udff0\u3002\u5047\u8bbe\u539f\u7ed3\u70b9\u5c5e\u4e8e\u5404\u4e2a\u7c7b\u7684\u6982\u7387\u4e0d\u4e00\u6837\uff0c\u5206\u51fa\u6765\u7684\u540e\u7eed\u7ed3\u70b9\u4e0d\u5747\u5300\u5730\u5206\u5e03\u5728\u5404\u4e2a\u7c7b\u4e0a\uff0c\u5219\u6b64\u65f6\u7684\u5206\u7c7b\u6bd4\u539f\u6709\u7684\u5206\u7c7b\u66f4\u4e0d\u5747\u5300\uff0c\u6240\u4ee5\u71b5 \u2b07\ufe0f</p>"},{"location":"AI/ML/dt/#c45","title":"C4.5","text":"<p>\u4e3a\u4e86\u60e9\u7f5a\u9ad8\u71b5\u5206\u88c2\u7684\u5c5e\u6027\uff0c\u5f15\u5165 \u5206\u88c2\u4fe1\u606f split information \u7684\u9879 \\(-\\sum\\limits_{j=1}^kp(j)\\log_2p(j)\\) \u4f5c\u4e3a\u5206\u6bcd\uff0c\u963b\u788d\u9009\u62e9\u5c5e\u6027\u503c\u5747\u5300\u5206\u5e03\u7684\u5c5e\u6027\u3002\\(p(j)\\):\u5f53\u524d\u7ed3\u70b9\u4e2d\u5212\u5206\u5c5e\u6027\u7b2cj\u4e2a\u5c5e\u6027\u503c\u6240\u5360\u6709\u6837\u672c\u7684\u6bd4\u4f8b\u3002</p> \\[\\begin{align*} \\text{GainRatio}(t)&amp;=\\cfrac{\\Delta_I}{-\\sum\\limits_{j=1}^kp(j)\\log_2^p(j)}\\\\ &amp;=\\cfrac{\\sum\\limits_{i=1}^cp_p(i)\\log_2p_p(i)-\\sum\\limits_{j=1}^c\\cfrac{N(j)}{N}\\cdot\\sum\\limits_{i=1}^cp_j(i)\\log_2p_j(i)}{-\\sum\\limits_{j=1}^kp_p(j)\\log_2p_p(j)}\\end{align*}\\] <ul> <li>Q: \u5f53\u5212\u5206\u5c5e\u6027\u5728\u5f53\u524d\u7ed3\u70b9\u4e2d\u51e0\u4e4e\u76f8\u540c\u7684\u5c5e\u6027\u503c\u65f6\uff0c\u4f1a\u5bfc\u81f4\u589e\u76ca\u65e0\u5b9a\u4e49\u6216\u8005\u975e\u5e38\u5927(\u5206\u6bcd\u975e\u5e38\u5c0f\u751a\u81f3\u4e3a0)\u3002\u504f\u597d\u9009\u62e9\u5177\u6709\u8f83\u5c11\u5c5e\u6027\u503c\u7684\u5c5e\u6027\u3002     A\uff1a\u542f\u53d1\u5f0f\u65b9\u6cd5\u3002\u5148\u8ba1\u7b97\u6bcf\u4e2a\u5c5e\u6027\u7684\u4fe1\u606f\u589e\u76ca\u53ca\u5e73\u5747\u503c\uff0c\u7136\u540e\u4ec5\u5bf9\u4fe1\u606f\u589e\u76ca\u9ad8\u4e8e\u5e73\u5747\u503c\u7684\u5c5e\u6027\u5e94\u7528\u589e\u76ca\u7387\u5ea6\u91cf\u3002</li> </ul>"},{"location":"AI/ML/dt/#gini","title":"Gini \u57fa\u5c3c\u7cfb\u6570","text":"\\[\\text{Gini}(t)=1-\\sum_{j=1}^kp(j)^2\\] <p>proof: \u5e73\u5747\u5206\u914d 1/2 worst \u5047\u8bbe\u6709\u4e24\u7c7b \\(\\text{Gini}(t)=1-x^2-(1-x)^2=2x-2x^2\\) \\(\\frac{b}{2a}=\\frac{1}{2}\\) \u5f00\u53e3\u5411\u4e0b\uff0c\u6b64\u65f6\u662f\u6700\u9ad8\u70b9\u3002</p>"},{"location":"AI/ML/dt/#_3","title":"\u8bef\u5206\u7c7b\u7387","text":"<p>\\(\\(\\text{Error}(t)=1-\\max_ip(i|t)\\)\\) - \\(\\max=1-\\frac{1}{c} \\text{ \u5747\u5300\u5206\u5e03\uff0c}\\min=0 \\text{\u4ec5\u5c5e\u4e8e\u4e00\u4e2a\u7c7b}\\)</p> <p>node: +:5; -:1</p> <p>\\(\\text{Gini}(t)=1-\\frac{1}{6}^2-\\frac{5}{6}^2=0.278\\) \\(\\text{Ent}(t)=-\\frac{1}{6}\\log_2\\frac{1}{6}-\\frac{5}{6}\\log_2\\frac{5}{6}=1.650\\) \\(\\text{Error}(t)=1-\\frac{5}{6}=0.167\\)</p> <p>node: +:3, -:3</p> <p>\\(\\text{Gini}(t)=1-\\frac{1}{2}^2-\\frac{1}{2}^2=0.5\\) \\(\\text{Ent}(t)=-\\frac{1}{2}\\log_2\\frac{1}{2}-\\frac{1}{2}\\log_2\\frac{1}{2}=1\\) \\(\\text{Error}(t)=1-\\frac{1}{2}=0.5\\)</p> <p>Exercise. Consider the following data set for a binary class problem. (a). Calculate the entropy gain when splitting on A and B. Which attribute would the decision tree induction algorithm choose? (b). Calculate the gain in the Gini index when splitting on A and B. Which attribute would the decision tree induction algorithm choose? A F T T F T F F F T F B T T T T T F F F T T L + + + \u2212 + \u2212 \u2212 \u2212 \u2212 \u2212 I 1 2 3 4 5 6 7 8 9 10</p> <p>A T:7(+:4;-:3) F:3(+:0;-:3) B T:4(+:3;-:1) F:6(+:1;-:5) Entropy \\(\\text{Ent}(A)=\\frac{7}{10}(-\\frac{4}{7}\\log_2\\frac{4}{7}-\\frac{3}{7}\\log_2\\frac{3}{7})+\\frac{3}{10}\\times0=0.6897\\) (smaller \\(\\implies A\\)) \\(\\text{Ent}(B)=\\frac{2}{5}(-\\frac{3}{4}\\log_2\\frac{3}{4}-\\frac{1}{4}\\log_2\\frac{1}{4})+\\frac{3}{5}(-\\frac{1}{6}\\log_2\\frac{1}{6}-\\frac{5}{6}\\log_2\\frac{5}{6})=0.7145\\) Gini \\(\\text{Gini}(A)=\\frac{7}{10}(1-\\frac{4}{7}^2-\\frac{3}{7}^2)+\\frac{3}{10}\\times0=\\frac{12}{35}\\) \\(\\text{Gini}(B)=\\frac{2}{5}(1-\\frac{3}{4}^2-\\frac{1}{4}^2)+\\frac{3}{5}(1-\\frac{1}{6}^2-\\frac{5}{6}^2)=\\frac{19}{60}\\) (smaller \\(\\implies B\\))</p>"},{"location":"AI/ML/dt/#performance","title":"performance","text":"<p>Not too small: need to handle important but possibly subtle distinctions in  data Not too big: Computational efficiency (avoid redundant, spurious attributes),Avoid over-fitting training examples Occam\u2019s Razor: find the simplest hypothesis (smallest tree) that fits the  observations.  The best decision tree is the smallest one that correctly classifies all given examples.</p>"},{"location":"AI/ML/dt/#_4","title":"\u8fc7\u62df\u5408","text":"<p>over-fitting due to</p> <ul> <li>presence of noise</li> <li>lack of representative samples</li> </ul> \u7b56\u7565 \u5b9a\u4e49 \u526a\u679d pre-pruning \u5728\u7b97\u6cd5\u5b8c\u7f8e\u5212\u5206\u8bad\u7ec3\u6570\u636e\u524d\u5c31\u505c\u6b62\u6811\u7684\u751f\u957f\uff08\u57fa\u4e8e\u6027\u80fd\uff0c\u6bd4\u8f83\u8f6f\u6027 ^ post-pruning \u5141\u8bb8\u6811\u8fc7\u5ea6\u62df\u5408\u8bad\u7ec3\u6570\u636e\uff0c\u7136\u540e\u5bf9\u6811\u8fdb\u884c\u540e\u4fee\u526a\u3002\u66f4\u6210\u529f \u628a\u590d\u6742\u5ea6\u52a0\u5165\u8003\u91cf \u4f7f\u7528\u4e00\u4e2a\u660e\u786e\u7684\u6807\u51c6\u6765\u8861\u91cf\u51b3\u7b56\u6811\u7684\u590d\u6742\u5ea6\uff08\u51b3\u7b56\u6811\u7684\u6df1\u5ea6\uff0c\u6bd4\u8f83\u786c\u6027 <ul> <li>\u540e\u526a\u679d\u901a\u5e38\u6bd4\u9884\u526a\u679d\u4fdd\u7559\u66f4\u591a\u7684\u5206\u652f\u6570\u3002</li> <li>\u540e\u526a\u679d\u7684\u6b20\u62df\u5408\u98ce\u9669\u66f4\u5c0f\uff0c\u6cdb\u5316\u6027\u80fd\u901a\u5e38\u4f18\u4e8e\u9884\u526a\u679d\u3002</li> <li>\u540e\u526a\u679d\u662f\u5728\u751f\u6210\u5b8c\u5168\u51b3\u7b56\u6811\u4e4b\u540e\u8fdb\u884c\uff0c\u5e76\u4e14\u8981\u81ea\u5e95\u5411\u4e0a\u5730\u5bf9\u6811\u4e2d\u6240\u6709\u975e\u53f6\u7ed3\u70b9\u8fdb\u884c\u9010\u4e00\u8003\u5bdf\uff0c\u8bad\u7ec3\u65f6\u95f4\u8fdc\u5927\u4e8e\u9884\u526a\u679d\u3002</li> </ul>"},{"location":"AI/ML/dt/#pre-pruning","title":"\u9884\u526a\u679d, pre-pruning","text":"<ul> <li>\u7ed3\u70b9\u5b9e\u4f8b\u6570\u76ee\u5c0f\u4e8e\u9884\u5b9a\u4e49\u7684\u9608\u503c</li> <li>\u5b9e\u4f8b\u7c7b\u5206\u5e03\u4e0e\u5c5e\u6027\u503c\u76f8\u4e92\u72ec\u7acb \\(\\leftarrow\\Chi^2\\)\u68c0\u9a8c</li> <li>\u5f53\u524d\u7ed3\u70b9\u7684\u6269\u5c55\u4e0d\u80fd\u51cf\u5c0f\u4e0d\u7eaf\u5ea6</li> </ul>"},{"location":"AI/ML/dt/#post-pruning","title":"\u540e\u526a\u679d, post-pruning","text":"<ul> <li>\u81ea\u4e0a\u800c\u4e0b\u4fee\u526a</li> <li>\u82e5\u526a\u679d\u6539\u5584\u6cdb\u5316\u8bef\u5dee\uff0c\u5219\u6539\u7ed3\u70b9\u4ee3\u66ff\u5b50\u6811</li> <li>\u5b50\u6811\u7684\u53f6\u5b9e\u4f8b\u7684\u4e3b\u8981\u7c7b\u786e\u5b9a\u8282\u70b9\u7684\u7c7b\u6807\u7b7e</li> <li>\u5728\u540e\u526a\u679d\u4f7f\u7528 MDL\uff0c\u6700\u5c0f\u63cf\u8ff0\u957f\u5ea6</li> </ul>"},{"location":"AI/ML/dt/#multivariate-decision-tree","title":"\u591a\u53d8\u91cf\u51b3\u7b56\u6811 multivariate decision tree","text":"<p>\u82e5\u6211\u4eec\u628a\u6bcf\u4e2a\u5c5e\u6027\u662f\u4e3a\u5750\u6807\u7a7a\u95f4\u7684\u4e00\u4e2a\u5750\u6807\u8f74\uff0c\u5219d\u4e2a\u5c5e\u6027\u503c\u63cf\u8ff0\u7684\u6837\u672c\u5bf9\u5e94\u4e86d\u7ef4\u7a7a\u95f4\u7684\u4e00\u4e2a\u5177\u4f53\u7684\u6570\u636e\u70b9\uff0c\u5bf9\u6837\u672c\u7684\u5206\u7c7b \u5176\u5b9e\u662f\u5728\u8fd9\u4e2a\u6837\u672c\u7a7a\u95f4\u4e2d\u5bfb\u627e\u4e0d\u540c\u7c7b\u6837\u672c\u4e4b\u95f4\u7684\u5206\u7c7b\u8fb9\u754c\u3002</p> <p></p> \u5355\u53d8\u91cf DT \u591a\u53d8\u91cf DT \u5206\u7c7b\u8fb9\u754c \u8f74\u5e73\u884c \u5206\u7c7b\u8fb9\u754c\u7531\u82e5\u5e72\u4e2a\u3010\u4e0e\u5750\u6807\u8f74\u5e73\u884c\u7684\u5206\u6bb5\u3011\u7ec4\u6210 \u659c\u7684\uff0c\u66f2\u7ebf \u5206\u7c7b\u6307\u6807\uff1a \u5355\u4e2a\u5c5e\u6027 \u5c5e\u6027\u7684\u7ebf\u6027\u7ec4\u5408 ^ \u4e3a\u6bcf\u4e2a\u975e\u53f6\u7ed3\u70b9\u627e\u4e00\u4e2a\u6700\u4f18\u5212\u5206\u5c5e\u6027 \\(\\sum\\limits_{i=1}^dw_ia_i\\) \u8868\u73b0 \u5728\u771f\u5b9e\u5206\u7c7b\u8fb9\u754c\u8f83\u4e3a\u590d\u6742\u7684\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u5927\u91cf\u7684\u5c5e\u6027\u6d4b\u8bd5\u548c\u5f88\u6df1\u7684\u51b3\u7b56\u6811\u624d\u80fd\u83b7\u5f97\u8f83\u597d\u7684\u8fd1\u4f3c \u6a21\u578b\u7b80\u5355\uff0c\u4f46\u8f83\u96be\u89e3\u91ca"},{"location":"AI/ML/ensemble_learning/","title":"\u96c6\u6210\u5b66\u4e60","text":"<p>\u5c06\u591a\u4e2a\u5206\u7c7b\u5668\u7684\u7ed3\u679c\u7edf\u4e00\u6210\u4e00\u4e2a\u6700\u7ec8\u7684\u51b3\u7b56\u3002\u5176\u4e2d\u7684\u6bcf\u4e2a\u5355\u72ec\u7684\u5206\u7c7b\u5668\u79f0\u4e3a \u57fa\u5206\u7c7b\u5668\uff0c \u6709\u65f6\u53c8\u88ab\u79f0\u4e3a \u5f31\u5206\u7c7b\u5668\uff0c\u56e0\u4e3a\u57fa\u5206\u7c7b\u5668\u7684\u9519\u8bef\u7387\u8981\u5927\u4e8e\u96c6\u6210\u5206\u7c7b\u5668</p>"},{"location":"AI/ML/ensemble_learning/#content","title":"Content","text":"<p>\u6b65\u9aa4\uff1a</p> <ol> <li>\u627e\u5230\u8bef\u5dee\u4e92\u76f8\u72ec\u7acb\u7684\u57fa\u5206\u7c7b\u5668 \u4efb\u4f55\u5206\u7c7b\u6a21\u578b\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u57fa\u5206\u7c7b\u5668\uff0c\u4f46\u6811\u5f62\u6a21\u578b\u7531\u4e8e\u7ed3\u6784\u7b80\u5355\u4e14\u8f83\u6613\u4ea7\u751f\u968f\u673a\u6027\u6240\u4ee5\u6bd4\u8f83\u5e38\u7528</li> <li>\u8bad\u7ec3\u57fa\u5206\u7c7b\u5668</li> <li>\u5408\u5e76\u57fa\u5206\u7c7b\u5668\u7684\u7ed3\u679c</li> </ol>"},{"location":"AI/ML/ensemble_learning/#stacking-voting","title":"stacking &amp; voting","text":"<p>voting,\u6295\u7968</p> \u786c\u6295\u7968\u5206\u7c7b\u5668 \u8f6f\u6295\u7968\u5206\u7c7b\u5668 \u5404\u4e2a\u5f31\u5206\u7c7b\u5668\u7ed3\u679c \u6700\u7ec8\u9009\u62e9\u7684\u7c7b\u522b \u6bcf\u4e2a\u7c7b\u522b\u7684\u4f30\u7b97\u6982\u7387 \u6700\u540e\u7ed3\u679c \u5f97\u7968\u6700\u591a\u7684 \u5e73\u5747\u4f30\u7b97\u6982\u7387\u6700\u5927\u7684 <p>stacking,\u4e32\u884c</p> <p>\u628a\u524d\u4e00\u4e2a\u57fa\u5206\u7c7b\u5668\u7684\u7ed3\u679c\u8f93\u51fa\u5230\u4e0b\u4e00\u4e2a\u5206\u7c7b\u5668\u6700\u7ec8\u7684\u8f93\u51fa \u5c06\u6240\u6709\u57fa\u5206\u7c7b\u5668\u7684\u8f93\u51fa\u7ed3\u679c\u76f8\u52a0\uff08\u6216\u7528\u66f4\u590d\u6742\u7684\u7b97\u6cd5\u878d\u5408\uff0c\u6bd4\u5982\u628a\u5404\u57fa\u5206\u7c7b\u5668\u7684\u8f93\u51fa\u4f5c\u4e3a\u7279\u5f81\uff0c\u4f7f\u7528\u903b\u8f91\u56de\u5f52\u4f5c\u4e3a\u878d\u5408\u6a21\u578b\u8fdb\u884c\u6700\u540e\u7684\u7ed3\u679c\u9884\u6d4b\uff09</p>"},{"location":"AI/ML/ensemble_learning/#bagging-boosting","title":"Bagging &amp; Boosting","text":"Bagging Boosting ramdom forest Gradient Boosting Tree \u5355\u72ec\u5b66\u4e60\uff0c\u5355\u72ec\u5224\u65ad\uff0c\u6295\u7968\u51b3\u7b56 \u8fed\u4ee3\u601d\u60f3\uff0c\u6837\u672c\u6743\u91cd\uff0c\u52a0\u5f3a\u5b66\u4e60 \u6837\u672c\u9009\u62e9 \u8bad\u7ec3\u96c6\u662f\u5728\u539f\u59cb\u96c6\u91cc\u6709\u653e\u56de\u9009\u53d6\uff0c\u968f\u673a\u76f8\u4e92\u72ec\u7acb \u8bad\u7ec3\u96c6\u4e0d\u53d8\u6bcf\u4e2a\u6837\u672c\u7684\u6743\u91cd\u6839\u636e\u4e0a\u4e00\u8f6e\u7684\u5206\u7c7b\u7ed3\u679c\u8fdb\u884c\u8c03\u6574 \u6837\u672c\u6743\u91cd \u5747\u5300\u91c7\u6837\uff0c\u6743\u91cd\u76f8\u7b49 \u6839\u636e\u9519\u8bef\u7387\u6765\u8c03\u6574\uff0c\u9519\u8bef\u7387\u8d8a\u591a\u7684\u6837\u672c\u6743\u91cd\u8d8a\u5927 \u6bcf\u4e2a\u5f31\u5206\u7c7b\u5668 \u6743\u91cd\u76f8\u7b49=1 \u5206\u7c7b\u8bef\u5dee\u5c0f\u7684\u4f1a\u6709\u66f4\u5927\u7684\u6743\u91cd \u8bad\u7ec3\u65b9\u5f0f \u5e76\u884c\u8ba1\u7b97 \u4e32\u884c\u8bad\u7ec3 \u53ea\u80fd\u987a\u5e8f\u751f\u6210\u6bcf\u4e2a\u5f31\u5206\u7c7b\u5668\uff0c\u56e0\u4e3a\u540e\u4e00\u4e2a\u7684\u53c2\u6570\u9700\u8981\u524d\u4e00\u8f6e\u7684\u7ed3\u679c \u6d88\u9664\u57fa\u5206\u7c7b\u5668\u7684\u504f\u5dee\u548c\u65b9\u5dee\u7684\u89d2\u5ea6\u6765\u7406 \u591a\u6b21\u91c7\u6837\u5e76\u5206\u522b\u8bad\u7ec3\u51fa\u591a\u4e2a\u4e0d\u540c\u6a21\u578b\u51cf\u5c0f\u65b9\u5dee\u3002 \u63d0\u9ad8\u5206\u7c7b\u5668\u7684\u8868\u8fbe\u80fd\u529b\u51cf\u5c0f\u504f\u5dee <p>Boosting \u7684\u4e00\u4e2a\u4f18\u70b9\u662f\u4e0d\u4f1a\u8fc7\u62df\u5408 \u274c  boosting &amp; bagging \u90fd\u662f\u7ec4\u5408\u591a\u4e2a\u5206\u7c7b\u5668\u6295\u7968\u7684\u65b9\u6cd5\uff0c\u4e24\u8005\u90fd\u662f\u6839\u636e\u5355\u4e2a\u5206\u7c7b\u5668\u7684\u6b63\u786e\u7387\u786e\u5b9a\u5176\u6743\u91cd \u274c</p>"},{"location":"AI/ML/ensemble_learning/#bagging","title":"Bagging","text":"<p>\u8bad\u7ec3\u96c6\u5206\u4e3a\u82e5\u5e72\u5b50\u96c6\uff0c\u6bcf\u4e2a\u57fa\u5206\u7c7b\u5668\u5355\u72ec\u5b66\u4e60\uff0c\u5355\u72ec\u5224\u65ad\uff0c\u6295\u7968\u96c6\u4f53\u51b3\u7b56 \u5f53\u8bad\u7ec3\u6837\u672c\u6570\u91cf\u8f83\u5c11\u65f6\uff0c\u5b50\u96c6\u4e4b\u95f4\u53ef\u80fd\u6709\u4ea4\u53e0.\u5b66\u7684\u5185\u5bb9\u53ef\u4ee5\u91cd\u53e0</p>"},{"location":"AI/ML/ensemble_learning/#rf","title":"RF","text":"<p>Random forest is a classification algorithm consisting of many decisions trees. It creates an uncorrelated forest of trees whose prediction by committee is more accurate than that of any individual tree. bagging &amp; feature randomness</p> <p></p>"},{"location":"AI/ML/ensemble_learning/#boosting","title":"Boosting","text":"<p>\u57fa\u5206\u7c7b\u5668\u5c42\u5c42\u53e0\u52a0\uff0c\u6bcf\u5c42\u8bad\u7ec3\u5bf9\u524d\u4e00\u5c42\u7684\u5206\u9519\u7684\u6837\u672c\u7ed9\u4e88\u66f4\u9ad8\u6743\u91cd\uff0c\u6839\u636e\u5404\u5c42\u5206\u7c7b\u5668\u7684\u7ed3\u679c\u7684\u52a0\u6743\u5f97\u5230\u6700\u7ec8\u7ed3\u679c\u3002</p> <ul> <li>\u5bf9\u5206\u7c7b\u6b63\u786e\u7684\u6837\u672c\u964d\u4f4e\u6743\u91cd</li> <li>\u5bf9\u5206\u7c7b\u9519\u8bef\u7684\u6837\u672c\u5347\u9ad8\u6216\u8005\u4fdd\u6301\u6743\u91cd\u4e0d\u53d8\u3002</li> <li>\u6a21\u578b\u878d\u5408\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e5f\u6839\u636e\u9519\u8bef\u7387\u5bf9\u57fa\u5206\u7c7b\u5668\u8fdb\u884c==\u52a0\u6743\u878d\u5408==\u3002\u9519\u8bef\u7387\u4f4e\u7684\u5206\u7c7b\u5668\u62e5\u6709\u66f4\u5927\u7684\u201c\u8bdd\u8bed\u6743\u201d\u3002</li> </ul>"},{"location":"AI/ML/ensemble_learning/#adaboost","title":"Adaboost","text":"<p>ID3\u51b3\u7b56\u6811\u4f5c\u4e3a\u57fa\u5206\u7c7b\u5668</p> <p>\u6240\u6709\u9519\u5206\u7684\u6837\u672c\u7684\u6743\u91cd\u66f4\u65b0\u6bd4\u4f8b\u76f8\u540c</p> <p>\u6b20\u62df\u5408</p> <ul> <li>\u63d0\u9ad8\u4f30\u7b97\u5668\u7684\u6570\u91cf</li> <li>\u964d\u4f4e\u4f30\u7b97\u5668\u7684\u6b63\u5219\u5316\u8d85\u53c2\u6570</li> <li>\u5c1d\u8bd5\u7a0d\u5fae\u63d0\u9ad8\u5b66\u4e60\u7387</li> </ul> <p>\u8003\u8651\u5982\u4e0b\u56fe\u7684\u8bad\u7ec3\u6837\u672c\uff0c\u7528 Adaboost \u8fdb\u884c\u5206\u7c7b\uff0c\u8fdb\u884c\u4e24\u8f6e\u8fed\u4ee3\u3002\u5728 Boosting \u7684\u6bcf\u6b21\u8fed\u4ee3\u4e2d\uff0c\u9009\u62e9\u52a0\u6743\u9519\u8bef\u7387\u6700\u5c0f\u7684\u5f31\u5206\u7c7b\u5668\u3002\u5047\u8bbe\u91c7\u7528\u7684\u5f31\u5206\u7c7b\u5668\u662f\u4e3a\u5e73\u884c\u4e24\u4e2a\u5750\u6807\u8f74\u7684\u7ebf\u6027\u5206\u7c7b\u5668\u3002 1. \u6807\u51fa\u7b2c\u4e00\u6b21\u8fed\u4ee3\u9009\u62e9\u7684\u5f31\u5206\u7c7b\u5668\uff0c\u7528\u5706\u5708\u6807\u51fa\u5728\u7b2c\u4e00\u6b21\u8fed\u4ee3\u540e\u6743\u91cd\u6700\u5927\u7684\u6837\u672c\uff0c\u6c42\u51fa\u5b83\u7684\u6743\u91cd\u3002 2. \u7b2c\u4e00\u6b21\u8fed\u4ee3\u540e\u6743\u91cd\u6700\u5927\u7684\u6837\u672c\u5728\u7b2c\u4e8c\u6b21\u8fed\u4ee3\u540e\u6743\u91cd\u53d8\u4e3a\u591a\u5c11\uff1f 3. \u5f3a\u5206\u7c7b\u5668\u4e3a\u5f31\u5206\u7c7b\u5668\u7684\u52a0\u6743\u7ec4\u5408\uff0c\u5219\u5728\u8fd9\u4e9b\u70b9\u4e2d\uff0c\u5b58\u5728\u88ab\u7ecf\u8fc7\u7b2c\u4e8c\u6b21\u8fed\u4ee3\u540e\u7684\u5f3a\u5206\u7c7b\u5668\u9519\u5206\u7c7b\u7684\u6837\u672c\u5417\uff1f\u7ed9\u51fa\u7b80\u77ed\u7406\u7531\u3002 \u7ed9\u5b9a\u5982\u56fe\u6240\u793a\u7684\u8bad\u7ec3\u6570\u636e\u5047\u8bbe\u5f31\u5206\u7c7b\u5668\u7531 \\(x&lt;v,x&gt;v\\) \u4ea7\u751f\uff0c\u5176\u9608\u503c \\(v\\) \u4f7f\u8be5\u5206\u7c7b\u5668\u5728\u8bad\u7ec3\u96c6\u4e0a\u5206\u7c7b\u8bef\u5dee\u7387\u6700\u4f4e\u3002\u8bd5\u7528 Adaboost \u5b66\u4e60\u4e00\u4e2a\u5f3a\u5206\u7c7b\u5668\u3002</p>"},{"location":"AI/ML/ensemble_learning/#gbdt-gradient-boosted","title":"GBDT\uff0c Gradient Boosted\uff0c\u68af\u5ea6\u63d0\u5347\u51b3\u7b56\u6811","text":"<p>\u6838\u5fc3\u601d\u60f3:\u6bcf\u4e00\u68f5\u6811\u5b66\u7684\u662f\u4e4b\u524d\u6240\u6709\u6811==\u7ed3\u8bba\u548c\u7684\u6b8b\u5dee==\uff0c\u8fd9\u4e2a\u6b8b\u5dee\u5c31\u662f\u4e00\u4e2a\u52a0\u9884\u6d4b\u503c\u540e\u80fd\u5f97\u771f\u5b9e\u503c\u7684\u7d2f\u52a0\u91cf\u3002</p> <p>\u4f7f\u7528\u6b8b\u5dee\u7ee7\u7eed\u5b66\u4e60\uff0c\u5c31\u662fGBDT\u4e2dGradient Boosted\u6240\u8868\u8fbe\u7684\u610f\u601d\u3002</p> <p>GBDT target: \u9884\u6d4b\u89c6\u9891\u7f51\u7ad9\u7528\u6237\u5e74\u9f84\u6765\u8fdb\u884c\u5e74\u9f84\u6bb5\u63a8\u9001 \u7279\u5f81\uff1a\u7528\u6237\u7684\u8bbf\u95ee\u7684\u65f6\u957f\u3001\u65f6\u6bb5\u3001\u89c2\u770b\u7684\u89c6\u9891\u7684\u7c7b\u578b\u7b49\u3002 \u7528\u6237A\u771f\u5b9e\u662f 25\u3002</p> <p>Tree1 gt = 25, pred = 22, residual = 25-22 = 3 Tree2 gt = 3, pred = 5, residual = 3-5 = -2 Tree3 gt = -2, pred = -2, residual = 0 Succeed, 22 + 5 + (-2) = 25. \u5c06\u6240\u6709\u57fa\u5206\u7c7b\u5668\u7684\u8f93\u51fa\u7ed3\u679c\u76f8\u52a0</p>"},{"location":"AI/ML/knn/","title":"KNN, K\u8fd1\u90bb","text":"<p>lazy, nearest, non-parametric supervised \u4ec0\u4e48\u662f k \u6700\u8fd1\u90bb\u7b97\u6cd5\uff1f | IBM</p> <p>k-NN is a type of\u00a0classification\u00a0where the function is only approximated locally and all computation is deferred until function evaluation.</p> <p></p> <p>P</p> <ol> <li>\u76f4\u63a5\u8bb0\u4f4f\u6574\u4e2a\u8bad\u7ec3\u96c6\uff0c\u5360\u7528\u4e86\u66f4\u591a\u7684\u5185\u5b58\u548c\u6570\u636e\u5b58\u50a8\u3002</li> <li>\u4e0d\u9700\u8981\u8bad\u7ec3\u6a21\u578b\uff0c\u4f46\u662f\u5728\u6d4b\u8bd5\u65f6time-consuming</li> <li>focus on real data,</li> <li>\u5c40\u90e8\u903c\u8fd1</li> </ol>"},{"location":"AI/ML/knn/#-similarity-dhatxx_i","title":"\u8ddd\u79bb - similarity \\(d(\\hat{x},x_i)\\)","text":"\u5173\u7cfb\u578b\u6570\u636e \u6587\u672c\u6570\u636e \u6b27\u6c0f\u8ddd\u79bb \u4f59\u5f26\u76f8\u4f3c\u5ea6(cosine similaritv) L1 Manhanttan \\(d_{L1}(a, b)=\\sum\\limits_{i=1}^n\\vert a_i-b_i\\vert\\) L2, Euclidian \\(d_{L2}(a, b)=\\sqrt{\\sum\\limits_{i=1}^n(a_i-b_i)^2}\\) Minkowski \\(d_{Lp}(a, b)=\\sqrt{\\sum\\limits_{i=1}^n(a_i-b_i)^2}\\) inf-dis \\(\\max\\|a_i-b_i\\|\\) <p>Hamming Distance</p> <p></p> <p>edit distance</p> <p></p>"},{"location":"AI/ML/knn/#_1","title":"\u591a\u6570\u8868\u51b3","text":"<p>\u4f18\u70b9\uff1abuild any decision boundary\uff0c\u66f4\u7075\u6d3b</p>"},{"location":"AI/ML/knn/#origin-depend-on-k","title":"Origin - Depend on k","text":"\\[y^*=\\max\\limits_u\\sum\\limits_{(x_i,y_i)\\in D(\\hat{x},\\hat{y})}I(\\hat{y}=y_i)\\] <p>\\(D(\\hat{x},\\hat{y}):=\\) the list of k nearest neighbors of \\((\\hat{x},\\hat{y})\\) \\(I(\\hat{y}=y_i):=\\) the indicator of \\(\\{\\hat{y}\\}=y_i\\)</p>"},{"location":"AI/ML/knn/#weighted-considering-the-distance","title":"Weighted -  Considering the distance","text":"<p>\\(\\(y^*=\\max_u\\sum\\limits_{(x_i,y_i)\\in D(\\hat{x},\\hat{y})}w_i\\cdot I(\\hat{y}=y_i)\\)\\) \\(w_i:=\\) considering the importance of distance</p> <ol> <li>\u80fd\u6d88\u9664\u5b64\u7acb\u566a\u58f0\u70b9</li> </ol>"},{"location":"AI/ML/knn/#choices-of-w","title":"choices of w","text":"<p>\\(w= \\cfrac{1}{d(\\hat{x},x_i)}\\), \u8d8a\u8fdc\u5c31\u8d8a\u4e0d\u76f8\u4f3c\uff0c\u4ed6\u7684\u7c7b\u522b\u5c31\u4e0d\u91cd\u8981</p>"},{"location":"AI/ML/knn/#list-of-k","title":"list of K","text":"<p>k \u5f88\u91cd\u8981</p> too small too large \u566a\u58f0\u654f\u611f  allergic to noises the distance may be ignored so that the opposite points are included <ol> <li>\u5982\u679c\u662fodd</li> <li>\u5982\u679c\u662feven\uff0c\u76f8\u5f53\u7684\u65f6\u5019random</li> </ol> <p>k\u7684\u9009\u62e9\u662f\u901a\u8fc7\u4e00\u4e2a\u9a8c\u8bc1\u96c6\u5408 ,\u6216\u8005\u662f\u5728\u8bad\u7ec3\u96c6\u4e0a\u4ea4\u53c9\u68c0\u9a8c\u3002\u5373\u5174\u8bd5\u4e00\u6b64\u4e0d\u540ck\u9009\u62e9\u90a3\u4e2a\u5728\u9a8c\u8bc1\u96c6(\u6216\u4ea4\u53c9\u68c0\u9a8c)\u4e0a\u6700\u51c6\u786e\u7684k\u4f5c\u4e3a\u6700\u540e\u7684\u7ed3\u679c\u3002</p>"},{"location":"AI/ML/knn/#parameter-tuningk","title":"Parameter tuning\uff1ak","text":""},{"location":"AI/ML/knn/#_2","title":"\u5b9e\u73b0","text":"<pre><code>import numpy as np\n\nclass NearestNeighbour():\n\n    def __init__():\n        self.objs = None\n        self.labels = None\n\n    def train(self, objs: List[obj], labels: List[str]):\n        self.objs = objs\n        self.labels = labels\n\n    def predict(self, obj):\n        distances = abs(self.)\n</code></pre>"},{"location":"AI/ML/logr/","title":"Logistics Regression","text":"<p>Logistic (Linear Regression)</p> <p>Sigmoid Function (S\u578b\u51fd\u6570\uff0c\u5728\u673a\u5668\u5b66\u4e60\u7279\u6307 Logstic Function) <pre><code>graph LR\nA[Linear R&lt;br&gt;regression]--Sigmoid+threshold--&gt; B[Logistics R&lt;br&gt;classification]</code></pre> </p> <ul> <li>\ud83d\udcd1\u00a0ref<ul> <li>\u6d45\u6790\u673a\u5668\u5b66\u4e60\uff1a\u7ebf\u6027\u56de\u5f52 &amp; \u903b\u8f91\u56de\u5f52</li> <li>Link Functions and Errors in Logistic Regression - The Analysis Factor</li> </ul> </li> </ul>"},{"location":"AI/ML/logr/#background","title":"Background","text":"<p>\u5728\u4e8c\u5206\u7c7b 0-1 \u95ee\u9898. Y \u968f\u673a\u670d\u4ece the binomial distribution.</p> \\[ Y \u223cB(p(X,\\tilde \u03b2)),\\quad\\begin{cases}P(Y =1|X)=p(X,\\tilde \u03b2)\\\\  P(Y =0|X)=1\u2212p(X,\\tilde\u03b2)\\end{cases}\\\\ \\begin{align*} E(Y|X)&amp;=1*P(Y=1|X)+0*P(Y=0|X)\\\\ &amp;=p(X,\\tilde\\beta) = P(Y=1|X)   \\end{align*} \\] <p>How to build \\(p(X, \\tilde \\beta)\\)? \u65e2\u7136 Y \u670d\u4ece\u8fd9\u4e48\u4e00\u4e2a\u4e8c\u9879\u5206\u5e03\uff0c\u90a3\u4e48 \\(p(X,\\tilde\\beta)\\) \u662f\u4ec0\u4e48\uff1f\u5f88\u663e\u7136\u5b83\u662f\u5173\u4e8e\u4e00\u4e2a X \u7684\u51fd\u6570\uff0c\u540c\u65f6it is characterized by a custom \\(\\beta\\). So roughly speaking, it's like we have a set of X, but the event happens with a certain probability and this probability can be captured by a function of X and the function of X is also characterized by sudden beta.</p> <p>\ud83d\udca1 : \u6700\u7b80\u5355\u7684 linear regression\uff0c\u4f46</p> linear regression \\(p(X,\\tilde\\beta)\\)\u8981\u6c42 Logistic Regression 1\ufe0f\u20e3 \u53d6\u503c\u8303\u56f4 infinity to infinity \\(\\in[0,1]\\) Sigmoid 2\ufe0f\u20e3 output continuous categorical Threshold\u3010based on LSM\u3011"},{"location":"AI/ML/logr/#lr","title":"LR \u7684\u89d2\u5ea6","text":""},{"location":"AI/ML/logr/#sigmoid","title":"Sigmoid","text":"<p>Logistic Function(Sigmoid)\u3002 \\(y=\\cfrac{1}{1+e^{-x}}\\begin{cases}\\lim\\limits_{x\\rightarrow-\\infin}=0\\\\\\lim\\limits_{x\\rightarrow+\\infin}=1\\end{cases}\\)</p> <p>\\(\\log\\cfrac{p}{1-p}=a+X^T\\beta\\\\\\implies p(X,\\tilde\\beta) =\\cfrac{\\exp(a+X^T\\beta)}{1+\\exp(a+X^T\\beta)},\\tilde\\beta=(a,\\beta)\\)</p> <ul> <li>why Sigmoid?   \u6211\u4eec\u60f3 map the continuous output space into a new \u79bb\u6563\u7684 categorical \u7684 output space\u3002   \u6211\u4eec\u81ea\u7136\u60f3\u5230\u4e86 unit-step Function \u5355\u4f4d\u8dc3\u8fc1\u51fd\u6570\u3002\u4f46\u662f\u5355\u4f4d\u8dc3\u8fc1\u51fd\u6570\u4e0d\u8fde\u7eed\u4e0d\u53ef\u5fae\u3002\u6240\u4ee5\u6211\u4eec\u53c8\u5f80\u524d\u8d70\u4e86\u8d70\uff0c\u60f3\u5230 Sigmoid Function (S\u578b\u51fd\u6570\uff0c\u5728\u673a\u5668\u5b66\u4e60\u7279\u6307 Logstic Function)\u3002   \u81f3\u4e8e\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528 Sigmoid \u51fd\u6570\u4e2d\u7684\u5bf9\u6570\u51e0\u7387\u51fd\u6570\uff0c\u8fd9\u6d89\u53ca\u5230\u4f2f\u52aa\u5229\u5206\u5e03\u7684\u6307\u6570\u65cf\u5f62\u5f0f\uff0c\u6700\u5927\u71b5\u7406\u8bba\u7b49</li> </ul> ![](./pics/LogR_1.png)<p> add sigmoid</p> <p>\u6240\u4ee5 A regularized Regression\uff1a Linear Regression + LSM -\u300b Logistic Regression + 0.5</p>"},{"location":"AI/ML/logr/#threshold","title":"threshold \u03b1","text":"<p>Based on LSM.</p> <p>Least Minimum Method\u3002\\(\\mathcal{L}_i=\\Vert Y_i-f(X_i,\\theta)\\Vert^2,\\) with target : condition Mean \\(E\\{Y|X\\}\\)</p> <p>in classification : \\(\\small E\\{Y|X\\}=P\\{Y=1|X\\}\\)</p> <p>\u5c31\u662f\u8bf4\u8fd9\u4e2a estimation \u7684\u751f\u6210\u7684 estimator \u5176\u5b9e\u5c31\u662fE{Y|X}\uff0c\u5728\u540c\u7b49\u6982\u7387\u768401\u4e8c\u5206\u7c7b\u91cc\u7684 meaning \u662f label=1 \u7684\u6982\u7387\uff0c\u6240\u4ee5\u6211\u4eec\u5c06 threshold \u5b9a\u4f4d0.5\u3002\u4f46\u662f\u5f53\u4e0d\u662f\u4e24\u8005\u4e0d\u662f\u540c\u7b49\u6982\u7387\uff0c\u5c31\u9700\u8981\u4f7f\u7528 ==MLE==\u8fdb\u884c\u4f30\u8ba1</p> \\[\\hat{y}=\\begin{cases}0&amp;P\\{Y=1|X\\}&lt;0.5\\\\1&amp;P\\{Y=1|X\\}&gt;0.5\\end{cases}\\]"},{"location":"AI/ML/logr/#content","title":"Content","text":"<p>Logistic Regression. \\(\\(P(Y=1|X)=p(X,\\tilde\\beta) =\\cfrac{\\exp(a+X^T\\beta)}{1+\\exp(a+X^T\\beta)},\\tilde\\beta=(a,\\beta)\\)\\)</p>"},{"location":"AI/ML/logr/#_1","title":"\u6781\u5927\u4f3c\u7136\u89d2\u5ea6\u53bb\u4f30\u8ba1","text":"<p>\\(\\begin{cases}P(Y = 1|X = X_i) = p(X_i,\\tilde\u03b2),\\\\ P (Y = 0 | X = X_i ) = 1\u2212p( X_i , \\tilde\u03b2 )\\end{cases}\\xrightarrow{\\text{unified as}}\\) \\(\\(P(Y=Y_i|X=X_i)=\\{p(X_i,\\tilde\\beta)\\}^{Y_i}\\{1-p(X_i,\\tilde\\beta)\\}^{1-Y_i}\\)\\)</p> <p>\u5f53\u6837\u672c\u72ec\u7acb + \\(\\tilde\\beta=(1 ,\\beta_1,\\dots,\\beta_p)\\)</p> <p>the likelihood function \\(L(\\tilde \u03b2) = \\prod\\limits_{i=1}^n p(X_i,\\tilde \u03b2)^{Y_i}\\{1\u2212p(X_i,\\tilde \u03b2)\\}^{1\u2212Y_i}\\)</p> <p>log-likelihood function \\(l(\\tilde \u03b2)=\\log L(\\tilde \u03b2) = \\sum\\limits_{i=1}^n \\{Y_i\\tilde\\beta^T\\tilde X_i-\\log(1+\\exp(\\tilde\\beta^T\\tilde X_i))\\}\\)</p> <p>Using MLE, \\(\\hat\\beta = \\max\\limits_{\\tilde\\beta} \\mathcal{L}(\\tilde\\beta) = \\min\\limits_{\\tilde\\beta} -l(\\tilde\\beta)\\)</p>"},{"location":"AI/ML/logr/#compared-with-linear-r","title":"compared with Linear R","text":"<p>Linear R\\(. Y=X^T\\beta+\\red\\epsilon=\\beta_0+\\beta_1X_1+\\dots+\\beta_pX_p+\\red\\epsilon\\) Logistic. \\(\\mathbb E(Y|X)=X^T\\beta=\\beta_0+\\beta_1X_1+\\dots+\\beta_pX_p\\) Logistic regression does not have error \u03b5, but Linear regression. Logistic \u4e0d\u662f\u7528\u9884\u6d4b\u5747\u503c\u52a0\u4e00\u4e2a\u8bef\u5dee\u9879\u5bf9Y\u7684\u6bcf\u4e2a\u503c\u8fdb\u884c\u5efa\u6a21\uff0c\u800c\u662f\u7b80\u5355\u5730\u5bf9\u9884\u6d4b\u5747\u503c\u8fdb\u884c\u5efa\u6a21\uff0c\u6362\u8a00\u4e4b\u662f\u5728\u7ed9\u5b9a\u503cX\u5904\u7684\u5747\u503c\u3002\u8fd9\u662f\u56de\u5f52\u7ebf\u4e0a\u7684\u503c\u3002</p> \u6bd4\u8f83 Linear R\\(y=X^T\\beta+\\epsilon\\) Logistic R Q \u56de\u5f52 \u5206\u7c7b \u5efa\u6a21\u7684\u89d2\u5ea6 \u6d4bY\u7684\u6bcf\u4e2a\u5355\u72ec\u503c \u53ea\u9884\u6d4b\u5e73\u5747\u503c \\(P(Y=1\\|X)\\) \u4ece\u8ba1\u7b97\u7684\u89d2\u5ea6\u8bf4 \\(\\mathbb{E}\\epsilon = 0\\) \\(p(X,\\tilde\\beta)=P(Y=1\\|X)=\\mathbb{E}(Y\\|X)\\) \u53c2\u6570\u4f30\u8ba1\u65b9\u6cd5 \u6700\u5c0f\u4e8c\u4e58\u6cd5MSE \u6781\u5927\u4f3c\u7136\u6cd5MLE <ul> <li>\u7ebf\u6027\u56de\u5f52\u548c\u903b\u8f91\u56de\u5f52\u90fd\u662f\u5e7f\u4e49\u7ebf\u6027\u56de\u5f52\u6a21\u578b\u7684\u7279\u4f8b</li> <li>\u7ebf\u6027\u56de\u5f52\u65e0\u8054\u7cfb\u51fd\u6570\u6216\u4e0d\u8d77\u4f5c\u7528\uff0c\u903b\u8f91\u56de\u5f52\u7684\u8054\u7cfb\u51fd\u6570\u662f\u5bf9\u6570\u51e0\u7387\u51fd\u6570\uff0c\u5c5e\u4e8eSigmoid \u51fd\u6570</li> </ul>"},{"location":"AI/ML/lr/","title":"LRs","text":"<p>\u591a\u91cd\u56de\u5f52.\u5305\u542b\u4e86\u591a\u4e2a\u53d8\u91cf\u7684\u56de\u5f52</p>"},{"location":"AI/ML/lr/#problem-setting","title":"Problem Setting","text":"\\[y =\u03b2_0 +\u03b2_1x_1 +...+\u03b2_px_p +\u03b5=\\red{\\beta^Tx}+\\epsilon\\\\\\quad\\begin{cases}x_1,\\dots,x_p:&amp;\\text{Predictors, }\\red{\\text{independent}}\\text{ variable, covariates}\\\\Y:&amp;\\text{Response, dependent variable }\\\\\\epsilon:&amp;\\text{noises, error}\\end{cases}\\] \\[\\begin{cases}Y_1=\\beta_0+\\beta_1x_{1,1}+\\dots+\\beta_{p}x_{1,p}+\\epsilon_1\\\\Y_2=\\beta_0+\\beta_1x_{2,1}+\\dots+\\beta_{p}x_{2,p}+\\epsilon_2\\\\\\vdots\\\\Y_n=\\beta_0+\\beta_1x_{n,1}+\\dots+\\beta_{p}x_{n,p}+\\epsilon_n\\end{cases}\\\\\\iff\\begin{bmatrix}Y_1\\\\\\vdots\\\\Y_n\\end{bmatrix}=\\begin{bmatrix}1&amp;x_{1,1}&amp;\\dots&amp;x_{1,p}\\\\\\vdots\\\\1&amp;x_{n,1}&amp;\\dots&amp;x_{n,p}\\end{bmatrix}\\begin{bmatrix}\\beta_0\\\\\\beta_1\\\\\\vdots\\\\\\beta_p\\end{bmatrix}+\\begin{bmatrix}\\epsilon_1\\\\\\vdots\\\\\\epsilon_n\\end{bmatrix}\\\\=\\begin{bmatrix}x_1^T&amp;\\dots&amp; x_n^T\\\\\\end{bmatrix}\\beta+\\Xi,x_i=\\begin{bmatrix}1\\\\x_{i1}\\\\\\vdots\\\\x_{ip}\\end{bmatrix},\\beta=\\begin{bmatrix}\\beta_0\\\\\\beta_1\\\\\\vdots\\\\\\beta_p\\end{bmatrix},\\Xi=\\begin{bmatrix}\\epsilon_1\\\\\\vdots\\\\\\epsilon_n\\end{bmatrix}\\] \\[\\iff Y=\\red{X\\beta}+\\Xi,Y\\in\\R^n,X\\in\\R^{n\\times(p+1)},\\beta\\in\\R^{p+1},\\Xi\\in\\R^n\\] <p>Assumptions (for statistical inference)</p> <ul> <li>predictor\u00a0\\(x_i\\)\u00a0is usually assumed to be non-random. \u5df2\u7ecf\u88ab\u89c2\u5bdf\u5230\u4e86\uff0c\u6240\u4ee5\u662f\u4e00\u4e2a\u503c\uff0c\"the independent variable is an observed value (so its value is known)\"\uff0c\u6211\u4eec\u7814\u7a76\u7684\u662f\u5bf9\u4e00\u4e2a\u5df2\u77e5\u7684x\uff0cy\u7684\u6761\u4ef6\u5206\u5e03 Y\uff5cX</li> <li> <p>\u5173\u4e8e\u8bef\u5dee\u7684 assumption\uff1a</p> <ul> <li>\\(\\red{\u03b5_1,\\dots,\\epsilon_n}\\) are independent</li> <li>\\(\\red{E\u03b5_1 =E\u03b5_2 =...=E\u03b5_n =0\\iff E\\Xi\\in\\R^n=0}\\)<ul> <li>the model has to be identifiable. \u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u5047\u8bbe\uff0c\u90a3\u4e48\u4e0d\u540c\u7684\u6a21\u578b\u4e4b\u95f4\u53ea\u662f\u5b58\u5728\u4e00\u4e2a\u5e38\u6570 C \u7ea7\u522b\u4e0a\u7684\u4e0d\u540c\uff0c\u5e76\u6ca1\u6709\u672c\u8d28\u533a\u522b\uff0c\u4f46\u662f\u5728\u5728\u8ba8\u8bba\u7684\u65f6\u5019\u5c31\u5bb9\u6613\u5b58\u5728\u5dee\u5f02\uff0c\u611f\u89c9\u6709\u70b9\u50cf\u662f\u89c4\u5b9a\u4e86\u89c4\u5b9a\uff0c\u624d\u80fd\u66f4\u597d\u7684\u57fa\u4e8e\u7edf\u4e00\u80cc\u666f\u4e0b\u8ba8\u8bba\u3002</li> </ul> </li> <li>\\(\\red{Var(\u03b5_1)=...=Var(\u03b5_n)=\u03c3^2\\iff Var(\\Xi)=\\sigma^2I\\in\\R^n}\\) \u8fd9\u4e2a\u662f\u4e0d\u4e00\u5b9a\u7684\uff0c\u5728heterogeneous\u6570\u636e\u91cc\uff0c\u8fd9\u4e2a\u6ca1\u600e\u4e48\u542c\u61c2</li> </ul> <p>\u671f\u671b\u548c\u65b9\u5dee\u505a assumption \u4e0d\u7b49\u540c\u4e8e \u6307\u5b9a\u5206\u5e03 \\(\\mathbb{E}(\\epsilon)=0 + Var(\\epsilon)=\\sigma^2\\neq\\epsilon ~\u039d(0,\\sigma)\\)</p> <p>\u6709\u4e9b\u4e66\u662fassume \\(\u03b5_1,\u03b5_2,..\u03b5_n\\in~N(0, \u03c3), i.i.d\\),\u662f\u5426\u6307\u5b9a\u5206\u5e03\u53d6\u51b3\u4e8e\u6211\u4eec\u60f3\u5e72\u4ec0\u4e48 \u7ebf\u6027\u56de\u5f52\u6b8b\u5dee\u6ee1\u8db3\u6b63\u6001\u5206\u5e03\u53ea\u662f\u4e00\u79cd\u5047\u8bbe\uff0c\u76ee\u7684\u662f\u4f7f\u5f97\u540e\u7eed\u5bf9\u4f30\u8ba1\u91cf\u7684\u63a8\u65ad inference \u80fd\u591f\u5229\u7528\u6b63\u6001\u5206\u5e03\u7684\u6027\u8d28\u3002\uff1f\u56e0\u4e3a\u5728\u6ee1\u8db3\u6b63\u6001\u5047\u8bbe\u7684\u524d\u63d0\u4e0b\uff0chypothesis testing &amp;confidential interval \u6bd4\u8f83\u5bb9\u6613 \u505aOLS\u5e76\u5f97\u51fa\u56de\u5f52\u7cfb\u6570\u7684\u65e0\u504f\u4f30\u8ba1\u8fd9\u4e00\u8fc7\u7a0b\u672c\u8eab\u800c\u8a00\uff0c\u5e76\u4e0d\u9700\u8981\u5206\u5e03\u5047\u8bbe\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5373\u4f7fY\u7684\u53d6\u503c\u4e3a 0\u30011\uff08binary\uff09\uff0c\u6211\u4eec\u4ecd\u7136\u53ef\u4ee5\u505aOLS\u7ebf\u6027\u56de\u5f52\uff0c\u5f97\u51fa\u56de\u5f52\u7cfb\u6570\u7684\u65e0\u504f\u4f30\u8ba1\uff0c\u4f46\u6b64\u65f6\uff0c\u6b8b\u5dee\u663e\u7136\u4e0d\u670d\u4ece\u6b63\u6001\u5206\u5e03\uff0c\u56e0\u6b64\u4e5f\u5c31\u4e0d\u80fd\u5bf9\u56de\u5f52\u7cfb\u6570\u505a wald test\u3002</p> <ul> <li>\\(\\red{\\text{centered X}\\in\\R^{n\\times(p+1)}, \\mathbb{E}x=0,Var(X)=\\Sigma\\in\\R^{(p+1)\\times (p+1)}}\\)</li> <li>\\(\\red{\\mathbb{E}Y =0}\\)</li> </ul> </li> </ul> \\[\u03b2^\u2217 =\\min_\\beta \\frac{1}{2}\\red{\\mathbb{E}}(Y \u2212 x^T\u03b2)^2, \\colorbox{aqua}{\\text{(Convex in \u03b2)}}\\] <p>\u5e38\u89c4\u601d\u8def\uff1a \\(\\cfrac{\\partial}{\\partial\\beta}f(\\beta)=\\mathbb{E}\\big(x(Y-x^T\\beta)\\big)\\xlongequal{SET}0\\\\[1em]\\implies \\beta^*=\\mathbb{E}(x^Tx)^{-1}\\mathbb{E}(xY)=\\Sigma^{-1}Cov(x,Y)=Var(x)^{-1}Cov(x,Y)\\)</p>"},{"location":"AI/ML/lr/#linear-regression","title":"Linear Regression","text":"\\[y = w^Tx+b\\] <p>estimate parameter using Least Squares Estimation, LSE</p> \\[ \\begin{align*}\\hat{\\beta}_{LSE}&amp;=\\min\\limits_{\\beta}\\sum\\limits_{i=1}^n(Y_i-\\hat{Y_i})^2\\\\&amp;=\\min\\limits_\\beta\\sum\\limits_{i=1}^n\\{Y_i-(\\beta_0+\\beta_1x_{i1}+\\dots+\\beta_px_{ip})\\}^2\\\\ &amp;\\xlongequal{X(\\text{population level})}\\min\\limits_\\beta\\sum\\limits_{i=1}^n\\{Y_i-X_i^T\\beta\\}^2\\\\ &amp;\\xlongequal{\\mathbb X(\\text{empirical level})}\\min\\limits_\\beta(Y-\\mathbb X\\beta)^T(Y-\\mathbb X\\beta)\\end{align*}\\\\Y\\in\\R^n,\\mathbb X\\in\\R^{n\\times(p+1)},\\beta\\in\\R^{p+1} \\] \\[ \\cfrac{\\partial}{\\partial\\beta}(Y-\\mathbb X\\beta)^T(Y-\\mathbb X\\beta)=\\mathbb X^T(Y-\\mathbb X\\beta)\\xlongequal{SET}0\\\\[1em]\\hat{\\beta}_{LSE}=(\\mathbb X^T\\mathbb X)^{-1}\\mathbb X^TY \\] <p>\u5982\u679c \\(\\mathbb X\\) \u6709\u88ab centered\uff0c\u90a3\u4e48\u7528 LSE \u5bf9\u53c2\u6570\u8fdb\u884c\u4f30\u8ba1\uff0c\u672c\u8d28\u4e0a\u5176\u5b9e\u4e5f\u662f\u5bf9\u6837\u672c\u65b9\u5dee variance \u548c correlation between features and response \u7684\u4f30\u8ba1\uff0c\u8fd9\u53c8\u56de\u5f52\u5230\u5728\u9ad8\u7ef4\u7a7a\u95f4\u91cc\u53bb. estimate is difficult</p> \\[\\hat{\\beta}_{LSE}=(\\mathbb X^T\\mathbb X)^{-1}\\mathbb X^TY=(\\cfrac{\\mathbb X^T\\mathbb X}{n})^{-1}\\cdot \\cfrac{\\mathbb X^T Y}{n}=Var(\\mathbb X)\\cdot Cov(\\mathbb X, Y)\\] <p>requirements:</p> <ul> <li>X\u5fc5\u987b\u5217\u6ee1\u79e9\uff0c\\(r(X)=p+1,n\u2265p+1\\) \\(r(\\mathbb X)=r(\\mathbb X^T\\mathbb X)=p+1 \\iff (\\mathbb X^T\\mathbb X)^{-1} \\text{exists}\\)</li> </ul> <p>properties:</p> <ul> <li>\\(\\hat{\\beta}_{LSE}\\) is unbiased \\(\\mathbb E(\\hat\\beta_{LSE})=\\beta\\)</li> <li>\\(Var(\\hat\\beta_{LSE})=\\sigma^2(\\mathbb X^T\\mathbb X)^{-1}\\)</li> <li>\\(\\hat{Y}\\)  is a linear function of\u00a0Y.  \\(\\iff \\hat{Y}_{LSE}=X\\hat{\\beta}_{LSE}=X(X^TX)^{-1}X^TY\\). \u4ece\u8fd9\u89d2\u5ea6\u6765\u5361\uff0cLR \u5c31\u662f\u4f7f\u7528\u4e86\u6240\u6709\u7684observations</li> <li>residual sum of squares, RSS \\(=\\sum\\limits_{i=1}^n\\{Y_i-\\hat{Y}_i\\}^2\\) RSS\u8868\u793a\u62df\u5408\u6a21\u578b\u540eY\u7684\u53d8\u5316\u4ecd\u7136\u4e0d\u80fd\u88abX\u7684\u53d8\u5316\u89e3\u91ca\u7684\u90e8\u5206 \\(\\hat{\\sigma}^2=\\cfrac{RSS}{n-p-1}\\)</li> </ul>"},{"location":"AI/ML/lr/#graphical","title":"Graphical","text":"<p>Suppose \\(\\mathbb{X}^T\\mathbb{X}\\) is inverible. \\(\\hat{Y}=\\mathbb{X}\\hat{\\beta}\\implies\\) \\(\\hat{Y}\\) is an orthogonal projection image of \\(\\hat{Y}\\) on the image of \\(\\mathbb{X}\\). \\(\\hat{\\epsilon}=Y-\\hat{Y}\\)</p>"},{"location":"AI/ML/lr/#inference-of-lr-model","title":"inference of LR model","text":"<p>\u66f4\u5f3a\u7684 assumption: \\(\\Xi\uff5eN(0,\\sigma^2I)(\\text{i.e. correct model got})\\)</p> <p>\u6307\u5b9a\u4e86 \\(\\Xi\\) \u7684\u5206\u5e03\uff0c\u6211\u4eec\u624d\u80fd\u5728\u6b64\u57fa\u7840\u4e0a\u63a8 distribution of \\(\\hat\\beta_{LSE}\\) , \u624d\u80fd\u8fdb\u884c hypothesis testing. \u4ee5\u4e0b\u7531\u6b64\u8fdb\u884c\u63a8\u65ad\uff1a</p> <p>\u8fd9\u91cc\u5b58\u5728\u4e00\u70b9\u72ed\u4e49\uff1a\u8fd9\u91cc\u7684 \\(\\beta\\) \u662f\u4ece\u5305\u62ec1\uff0c\u4e5f\u5c31\u662f\\(\\beta\\in\\R^{p+1}\\), \u4e3a\u4e86\u66f4\u5bf9\u79f0\u548c\u5b8c\u6574\uff0c\u5c31\u76f4\u63a5\u7528\u5bf9\u5e94\u7684\u5206\u91cf k\u5bf9k\u6765\u770b\uff0c\u4e5f\u5c31\u662f\u8bf4 \\(\\hat\\beta_0\uff5eN(1, c_{0,0}\\sigma^2)\\), start form 0.</p> \\[ \\begin{align*}&amp;\\hat{\\beta}_{LSE}\uff5eN(\\beta,(\\mathbb X^T\\mathbb X)^{-1}\\sigma^2)&amp;\\tag{vector}\\\\&amp;\\hat\\beta_k\uff5eN(\\beta_k,c_{k,k}\\sigma^2)&amp;\\tag{\u5206\u91cf}\\\\&amp;\\hat\\beta_k-\\beta_k\uff5eN(0, c_{k,k}\\sigma^2)\\end{align*} \\] <p>\\(\\qquad\\begin{cases}c_{k, k}:=\\text{ the  (k,k) entry of } (\\mathbb X^T \\mathbb X)^{-1}\\\\\\sqrt{c_{k,k}\\hat{\\sigma}^2}:=\\text{ the standard error of }\\beta_k\\\\t_k=\\cfrac{\\hat{\\beta_k}}{\\sqrt{c_{k,k}\\hat{\\sigma}^2}}:=\\text{ the t-statistic for } \\beta_k\\\\P(|T|&gt;|t_k|):=\\text{ the p-value for }\\beta_k,T\uff5et(n-p-1)\uff08\u81ea\u7531\u5ea6\uff09\\end{cases}\\)</p> <ul> <li>\\(\\Xi\uff5eN(0,\\sigma^2I)(\\text{i.e. correct model got})\\implies \\hat{\\beta}\uff5eN(\\beta,c_{k+1,k+1}\\sigma^1)\\)</li> </ul> <p>At significant level\u00a00.05\u00a0(when\u00a0n\u00a0is large), \\(H_0=\\beta_k=0\\)</p> <p></p>"},{"location":"AI/ML/lr/#confidence-interval-for-the-regression-function","title":"Confidence interval for the regression function","text":"<p>\u3010Uncentralized\u3011 For a subject with predictor\u00a0\\(X\u00a0= (1,\u00a0x_1, ...,\u00a0x_p)^T\\)and response Y. fitted linear regression model \\(Y= \u03b2_0 +\u03b2_1x_1 +...+\u03b2_px_p+ \u03b5\\). the regression\u00a0\\(\\mathbb{E}Y=\u03b2_0 +\u03b2_1x_1 +...+\u03b2_px_p\\) is a function of\u00a0\\(X=(1,x_1,\\dots,x_p)^T\\)</p> <p>The estimator of\u00a0\\(\\mathbb{E}Y\\)\u00a0is \\(\\mathbb{E}\\hat{Y}=\\hat \u03b2_0+\\hat \u03b2_1x_1+...+\\hat \u03b2_px_p=\\mathbb X^T\\hat \u03b2\\)</p> \\[ \\mathbb{E}Y\uff5eN\\Big(\\mathbb{E}\\hat{Y},\\sigma^2\\mathbb X^T(\\mathbb X^T\\mathbb X)^{-1}\\mathbb X\\Big) \\] <p>The 95% confidence interval (CI) for\u00a0EY\u00a0is \\(\\Big[\\mathbb{E}\\hat{Y}-1.96\\sigma\\sqrt{ X^T(\\mathbb X^T\\mathbb X)^{-1} X}, \\mathbb{E}\\hat{Y}+1.96\\sigma\\sqrt{X^T(\\mathbb X^T\\mathbb X)^{-1}X}\\Big]\\) or approximately \\(\\Big[\\mathbb{E}\\hat{Y}-1.96\\hat\\sigma\\sqrt{ X^T(\\mathbb X^T\\mathbb X)^{-1}X}, \\mathbb{E}\\hat{Y}+1.96\\hat\\sigma\\sqrt{ X^T(\\mathbb X^T\\mathbb X)^{-1} X}\\Big]\\)</p> <p>\u3010Centralized\u3011 For general p \u2265 1, If x and Y are both centralized\uff0c\\(\\tilde x=x-\\overline x, \\tilde Y=Y-\\overline Y\\)</p> <ul> <li>\\(\\implies\\beta_0=0\\implies \\tilde X=(\\tilde x_1,\\dots,\\tilde x_p)\\in\\R^p\\)</li> </ul> <p>fitted linear regression model \\(\\tilde Y = \u03b2_1\\tilde x_1 +...+\u03b2_p\\tilde x_p+ \\tilde \u03b5\\)</p> <p>the regression\u00a0\\(\\mathbb{E}(\\tilde Y)=\u03b2_1\\tilde x_1 +...+\u03b2_p\\tilde x_p\\) is a function of\u00a0\\(\\tilde X=(\\tilde x_1,\\dots,\\tilde x_p)^T\\)</p> <p>The 95% confidence interval (CI) for\u00a0EY\u00a0is</p> <p>\\(\\Big[\\mathbb{E}\\hat{\\tilde{Y}}-1.96\\tilde\\sigma\\sqrt{\\tilde {X}^T(\\tilde {\\mathbb X}^T\\tilde {\\mathbb X})^{-1}\\tilde {X}}, \\mathbb{E}\\hat{\\tilde{Y}}+1.96\\tilde\\sigma\\sqrt{\\tilde X^T(\\tilde {\\mathbb X}^T\\tilde {\\mathbb X})^{-1}\\tilde { X}}\\Big]\\)</p> <p>To see the contribution of each predictor on \\(\\tilde Y\\) , we can fix all the other variables at 0. For example, the contribution of \\(\\tilde x_1\\xrightarrow{SET}\\hat{\\tilde Y}=\\beta_1\\tilde x_1+\\beta_2\\times0+\\dots+\\beta_p\\times 0\\) The 95% confidence interval (CI) for\u00a0\\(E\\tilde Y\\)\u00a0is \\(\\Big[\\widehat{E\\tilde Y}-1.96\\tilde\\sigma\\sqrt{\\tilde {\\chi}^T(\\tilde {\\mathbb X}^T\\tilde {\\mathbb X})^{-1}\\tilde {\\chi}}, \\space \\widehat{E\\tilde Y}+1.96\\tilde\\sigma\\sqrt{\\tilde \\chi^T(\\tilde {\\mathbb X}^T\\tilde {\\mathbb X})^{-1}\\tilde { \\chi}}\\Big],\\chi=(\\tilde x_1,0,\\dots,0)^T\\)</p> <p>Equivalence between hypothesis testing \\(H_0\u00a0:\u00a0\u03b2_k\u00a0= 0\u201d\\) and the band: After the data is centralized, we accept \\(H_0\\iff\\) \\(\\(0\\in\\Big[\\hat{\\beta}_k-1.96\\hat{\\sigma}\\sqrt{c_{kk}}, \\hat{\\beta}_k+1.96\\hat{\\sigma}\\sqrt{c_{kk}}\\Big]\\)\\)</p> \\[\\iff0\\in\\Big[\\widehat{E\\tilde Y}-1.96\\tilde\\sigma\\sqrt{\\tilde {\\chi}^T(\\tilde {\\mathbb X}^T\\tilde {\\mathbb X})^{-1}\\tilde {\\chi}}, \\space \\widehat{E\\tilde Y}+1.96\\tilde\\sigma\\sqrt{\\tilde \\chi^T(\\tilde {\\mathbb X}^T\\tilde {\\mathbb X})^{-1}tilde { \\chi}}\\Big]\\] <p>where \\(\\chi=(0,\\dots,1,\\dots,0)^T\\). the kth element is 1 and the others 0. This means 0 is included in the band at \\(x_k=1\\). On the other hand, (0,0) is included in the band. Therefore, \\(H_0\\) is accepted if and only if a horizontal line is included in the band.</p> <p>the confidence band</p> <p>All the predicted expectations of Y and the bounds of the CI are functions of x. We can draw these functions and get the confidence band. \u5c31\u662f\u6240\u6709\u7684\u7f6e\u4fe1\u533a\u95f4\u503c\u90fd\u753b\u51fa\u6765</p> <p>\u4e0d\u540c\u4e8e conformal prediction interval\uff08\u8fd9\u4e2a\u662f\u56ca\u62ec\u767e\u5206\u4e4b\u4e5d\u5341\u4e94\u7684\u6570\u636e\u70b9\uff09,  confidence band \u662f\u8bf4\u9884\u6d4b\u7684\u6570\u636e fitted value \u6709\u767e\u5206\u4e4b\u4e5d\u5341\u4e94\u7684\u53ef\u80fd\u88ab\u56ca\u62ec</p> <p>uncentralized\\(\\hat{EY}=\\hat\\beta_0+\\hat\\beta_1x\\)</p> <p>centralized\\(\\hat{EY}=\\hat\\beta_0+\\hat\\beta_1x\\)</p> <p></p> <p>causal inference \u56e0\u679c\u63a8\u65ad.\u662f\u5728\u4e00\u4e2a\u8f83\u5927\u7cfb\u7edf\u5185\u90e8\u786e\u5b9a\u6307\u5b9a\u73b0\u8c61\u7684\u5b9e\u9645\u3001\u72ec\u7acb\u6548\u679c\u7684\u8fc7\u7a0b\u3002\u56e0\u679c\u63a8\u65ad\u548c\u76f8\u5173\u6027\u63a8\u65ad\u7684\u4e3b\u8981\u533a\u522b\u662f\u524d\u8005\u5206\u6790\u7ed3\u679c\u53d8\u91cf\u5728\u5176\u539f\u56e0\u53d8\u91cf\u53d8\u5316\u65f6\u53d1\u751f\u7684\u56de\u5e94\u3002</p> <p>\u5e72\u6270\u56e0\u7d20 (Confounding). \u53c8\u79f0\u4e3a\u5e72\u6270\u56e0\u5b50\u3001\u5e72\u6270\u53d8\u91cf\u3001\u6df7\u6dc6\u53d8\u91cf\u3001\u5171\u53d8\u56e0\u7b49\uff0c\u5728\u7edf\u8ba1\u5b66\u548c\u56e0\u679c\u5173\u7cfb\u4e2d\u662f\u6307\u4f1a\u540c\u65f6\u5f71\u54cd\u81ea\u53d8\u91cf\u548c\u56e0\u53d8\u91cf\uff0c\u5bfc\u81f4\u51fa\u73b0\u4f2a\u5173\u7cfb\u7684\u4e00\u79cd\u53d8\u91cf\u3002\u5728\u4e0d\u4e25\u8c28\u7684\u8bed\u5883\u4e0b\uff0c\u5e72\u6270\u56e0\u5b50\u4e5f\u53ef\u4ee5\u6307\u6240\u6709\u672a\u77e5\u53d8\u91cf\uff0c\u5305\u62ec\u4e2d\u4ecb\u53d8\u56e0\u548c\u5bf9\u649e\u53d8\u56e0\u3002\u5e72\u6270\u56e0\u5b50\u4f1a\u9020\u6210\u4f2a\u5173\u7cfb\uff0c\u662f\u76f8\u5173\u4e0d\u8574\u6db5\u56e0\u679c\u7684\u539f\u56e0\u4e4b\u4e00\u3002 Implementing Causal Inference: Trying to Understand the Question of Why What does the assumption: \"The independent variable is not random.\" in OLS mean?</p> <p>Assumption: both X and Y are centralized and standardized(scaled) (\u63a5\u4e0b\u6765\u90fd\u662f\u57fa\u4e8e\u8fd9\u4e2a\u8bbe\u5b9a\u6765\u7edf\u4e00\u4e00\u4e0b)</p>"},{"location":"AI/ML/lr/#_1","title":"\u5e7f\u4e49\u7ebf\u6027\u6a21\u578b","text":"<p>generalized linear model \u5e7f\u4e49\u7ebf\u6027\u6a21\u578b\u3002\\(g(*):=\\)\u8054\u7cfb\u51fd\u6570 link function \\(\\(y=g^{-1}(w^Tx+b)\\)\\)</p> <p>\u5f53 y \u4e0d\u662f\u7ebf\u6027\u53d8\u5316\uff0c\u800c\u662f\u5728\u6307\u6570\u5c3a\u5ea6\u4e0a\u53d8\u5316 \\(\\ln y=w^Tx+b\\Leftrightarrow g(*)=\\ln(*)\\) \u5c06\u6307\u6570\u66f2\u7ebf\u6295\u5f71\u5230\u4e00\u6761\u76f4\u7ebf\u4e0a\u3002</p>"},{"location":"AI/ML/lr/#regularization","title":"\u6b63\u5219\u5316 Regularization","text":"<p>\\(L_p\\) - Norm\u3002 \\(\\Vert w\\Vert_p=(\\sum\\limits_{i=1}^dx_i^p)^{1/p}\\)</p> <p>\u9488\u5bf9\u7684\u662f row</p> <p>\u907f\u514d\u8fc7\u62df\u5408\u7684\u4ea7\u751f\u548c\u51cf\u5c11\u7f51\u7edc\u8bef\u5dee \u6b63\u5219\u5316\u7684\u4f5c\u7528\u662f\u9009\u62e9\u7ecf\u9a8c\u98ce\u9669\u4e0e\u6a21\u578b\u590d\u6742\u5ea6\u540c\u65f6\u8f83\u5c0f\u7684\u6a21\u578b\u3002</p>"},{"location":"AI/ML/lr/#ridge-regression-l2-penalty","title":"Ridge Regression  - L2 penalty","text":""},{"location":"AI/ML/lr/#background","title":"Background","text":"<p>Why we need Ridge Regression \u2194 Understanding of Ridge Regression?</p> <p>the estimator \\(\\hat{\\beta}\\) of LSE \\(\\hat\\beta_{LSE}= (\\mathbb X^T\\mathbb X)^{-1}\\mathbb X^T\\mathbb Y\\) exists only if \\((\\mathbb X^T\\mathbb X)^{-1}\\) exists. However, \\(\\hat\\beta_{LSE}\\)  does not exist \\(\\iff (\\mathbb X^T\\mathbb X)\\) is not invertible:</p> <ol> <li>\\(\\mathbb X\\in\\R^{n\\times p}, p&gt;n\\)</li> <li>the columns in \\(\\mathbb X\\) are linearly dependent.</li> </ol> <p>idea 1: guarantee the invertibility A simple way to guarantee the invertibility is to add a diagonal matrix \\(I\\in\\R^{p\\times p}\\) to\u00a0\\(\\mathbb X^T\\mathbb X\\)\u3002 (\u52a0\u5355\u4f4d\u77e9\u9635 \u03bbI \u8fd9\u4e2a\u4e0d\u6b62\u7528\u5728 linear regression) \\(\\implies\\hat\\beta_{\\text{ridge}}= (\\mathbb X^T\\mathbb X+\\lambda I)^{-1}\\mathbb X^T\\mathbb Y,\\quad \\lambda&gt;0\\) \u8fd9\u4e5f\u80fd\u907f\u514d\u4e00\u4e2a\u95ee\u9898\u5c31\u662f\u5f53 eigenvalue is too small 0.00001 \u7684\u65f6\u5019\uff0c inverse \u5c31\u4f1a\u53d8\u8d85\u5927 100000\uff0c\u5bfc\u81f4\u8bf4\u8fd9\u4e2a more in-stable\uff0c\u5728\u7c7b\u4f3c using Newton Method \u9700\u8981\u987e\u53ca variance inverse \u7684\u65f6\u5019 converge more slowly\u3002\u6211\u52a0\u4e00\u4e2a small lambda = 0.01\uff0c\u6574\u4e2a\u5c31\u4f1a around \u5728100\u5de6\u53f3</p> <p>idea 2: regularize the coefficients FOR: If the\u00a0\u03b2s are unconstrained, they can explode and are susceptible to very high variance. \u7206\u70b8\uff0c\u5bb9\u6613\u53d7\u5230\u975e\u5e38\u9ad8\u7684\u65b9\u5dee\u5f71\u54cd Thus, we need to regularize the coefficients.</p> <p>approach 1: penalize the value of beta: Using penalty approach L2- Norm. \\(\\Vert w\\Vert_2=(\\sum\\limits_{i=1}^dx_i^2)^{1/2}=\\sqrt{w^2}\\) \\(\\beta^*(\\lambda):=\\min\\limits_\\beta\\sum\\limits_{i=1}^n(Y_i-X_i^T\\beta)^2+\\lambda(\\beta_1^2+\\dots+\\beta_p^2),\\quad\\lambda&gt;0\\) \\(\\iff \\beta^*(\\lambda):=\\min\\limits_\\beta \\Vert\\mathbb Y-\\mathbb X\\beta\\Vert^2+\\lambda\\Vert\\beta\\Vert^2,\\quad\\lambda&gt;0\\) \\(\\implies\\hat\\beta_{\\text{ridge}}= (\\mathbb X^T\\mathbb X+\\lambda I)^{-1}\\mathbb X^T\\mathbb Y,\\quad \\lambda&gt;0\\)</p> <ol> <li>if\u00a0\\(\u03bb\u00a0\u2192 \u221e\u00a0\\implies\u00a0\\hat\u03b2^*(\u03bb)\u00a0\u2192\u00a00;\\)</li> <li>if\u00a0\\(\u03bb = 0\\implies\\hat \\beta^*(\u03bb) =\\hat \u03b2_{LSE} ;\\)</li> </ol> <p>approach 2: constrain the value of beta: \\(\\beta^*[t]:= \\min\\limits_{\\beta}\\sum\\limits_{i=1}^n (Y_i-X_i^T\\beta)^2,\\quad s.t.\\space\\sum\\limits_{j=1}^p\\beta_j^2\\le t \\iff \\text{ L2 norm}\\) \\(\\iff \\beta^*[t]:=\\min\\limits_\\beta \\Vert\\mathbb Y-\\mathbb X\\beta\\Vert^2,\\quad s.t.\\space\\Vert\\beta\\Vert^2\\le t\\)</p> <ol> <li>if\u00a0\\(t = 0\\implies \\hat \u03b2^*[t] = 0\\);</li> <li>if\u00a0\\(t \u2265 \\Vert\\hat \u03b2_{LSE} \\Vert^2 = t_0 \\implies\\hat\u03b2^* [t] = \\hat\u03b2_{LSE};\\)</li> </ol> <p>The Penalty approach and the Constraint approach are equivalent and t and \u03bb have a kind of inverse relationship. \\(t=\\Vert\\hat\\beta^*(\\lambda)\\Vert^2\\implies\\beta^*(\u03bb)=\\beta^*[\u03bb]\\)</p> <p>approach 3: Data augmentation approach: \\(\\beta^*(\\lambda):=\\min\\limits_\\beta\\sum\\limits_{i=1}^n(Y_i-X_i^T\\beta)^2+\\lambda(\\beta_1^2+\\dots+\\beta_p^2),\\quad\\lambda&gt;0\\) Rewrite it: \\(\\min\\limits_\\beta\\sum\\limits_{i=1}^n(Y_i-X_i^T\\beta)^2+(0-\\tilde X_{n+1}^T\\beta)^2+\\dots+(0-\\tilde X_{n+p}^T\\beta)^2=\\Vert  \\tilde{ \\mathbb Y}-\\tilde{\\mathbb X}\\beta\\Vert^2\\\\[1ex]\\qquad\\tilde X_{n+1}=(\\sqrt\\lambda,0,\\dots,0)^T,\\dots,\\tilde X_{n+p}=(0,\\dots,0,\\sqrt\\lambda)^T\\)</p> <p>\\(\\tilde{\\mathbb X}=\\begin{bmatrix}x_{1,1},&amp;x_{1,2}&amp;\\dots&amp;x_{1,p}\\\\x_{2,1},&amp;x_{2,2}&amp;\\dots&amp;x_{2,p}\\\\\\vdots\\\\x_{n,1},&amp;x_{n,2}&amp;\\dots&amp;x_{n,p}\\\\\\sqrt\\lambda&amp;0&amp;\\dots&amp;0\\\\0&amp;\\sqrt\\lambda&amp;\\dots&amp;0\\\\\\vdots&amp;&amp;\\ddots\\\\0&amp;0&amp;\\dots&amp;\\sqrt\\lambda\\end{bmatrix}_{(n+p)\\times p}=\\begin{bmatrix}\\mathbb X\\\\\\sqrt\\lambda I_p\\end{bmatrix},\\tilde{\\mathbb Y}= \\begin{bmatrix}Y_1\\\\\\vdots\\\\Y_n\\\\0\\\\\\vdots\\\\0\\end{bmatrix}_{(n+p)}= \\begin{bmatrix}\\mathbb Y\\\\0_p\\end{bmatrix}\\) \\(\\implies \\hat{\\tilde\\beta}_{LSE}=(\\tilde{\\mathbb X}^T\\tilde{\\mathbb X})^{-1}\\tilde{\\mathbb X}^T\\tilde{\\mathbb Y}\\\\[1ex]\\qquad\\qquad=(\\begin{bmatrix}\\mathbb X^T&amp;\\sqrt\\lambda I_p\\end{bmatrix}\\times\\begin{bmatrix}\\mathbb X\\\\\\sqrt\\lambda I_p\\end{bmatrix})^{-1}\\begin{bmatrix}\\mathbb X^T&amp;\\sqrt\\lambda I_p\\end{bmatrix}\\begin{bmatrix}\\mathbb Y\\\\\\sqrt\\lambda 0_p\\end{bmatrix}\\\\[1ex]\\qquad\\qquad=(\\mathbb X^T\\mathbb X+\\lambda I)^{-1}\\mathbb X^T\\mathbb Y\\)</p>"},{"location":"AI/ML/lr/#content","title":"Content","text":"<p>the estimator \\(\\hat\\beta\\) of Ridge Regression, Ridge \\(\\hat\\beta_{\\text{ridge}}= \\min\\limits_\\beta\\Vert \\mathbb Y-\\mathbb X\\beta\\Vert^2+\\red{\\lambda\\Vert\\beta\\Vert^2}=(\\mathbb X^T\\mathbb X+\\lambda I)^{-1}\\mathbb X^T\\mathbb Y,\\quad \\lambda&gt;0,\\)</p> <p>Properties of ridge regression (assuming  \\(\\mathbb X\\) is nonrandom):</p> <ol> <li>a biased estimator, \\(\\begin{cases}\\mathbb{E}\\hat\\beta_\\text{ridge}=\\beta-\\lambda(\\mathbb X^T\\mathbb X+\\lambda I)^{-1}\\beta\\\\[1ex]\\text{bias}(\\hat\\beta_\\text{ridge})=-\\lambda(\\mathbb X^T\\mathbb X+\\lambda I)^{-1}\\beta\\end{cases}\\) proof</li> </ol> \\[\\begin{align*} \\mathbb{E}\\hat{\\beta}&amp;=\\mathbb{E}\\Big\\{(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\mathbb{X}^T\\mathbb{Y}\\Big\\}\\\\ &amp;\\xlongequal{\\mathbb{Y}=\\mathbb{X}\\beta+\\epsilon}\\mathbb{E}\\Big\\{(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\mathbb{X}^T(\\mathbb{X}\\beta+\\epsilon)\\Big\\}\\\\ &amp;=\\mathbb{E}\\Big\\{(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\mathbb{X}^T\\mathbb{X}\\beta\\Big\\}+\\mathbb{E}\\Big\\{(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\mathbb{X}^T\\epsilon\\Big\\}\\\\ &amp;=(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\mathbb{X}^T\\mathbb{X}\\beta+(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\mathbb{X}^T\\mathbb{E}\\epsilon\\\\ &amp;\\xlongequal{\\mathbb{E}\\epsilon=0}(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\mathbb{X}^T\\mathbb{X}\\beta\\\\ &amp;\\xlongequal{+1-1}(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}(\\mathbb{X}^T\\mathbb{X}+\\lambda I)\\beta-(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\lambda\\beta\\\\ &amp;=\\beta-(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\lambda\\beta\\neq\\beta \\end{align*}\\] <p>\\(bias=\\red{\\beta}-\\mathbb{E}\\hat{\\beta}\\)</p> <p>\\(Var=\\mathbb{E}(\\red{\\hat{\\beta}}-\\mathbb{E}\\hat{\\beta})^2\\)</p> <ol> <li>Variance-covariance matrix \\(\\text{if }Var(\\mathcal{E})=\\sigma^2I_n\\implies Var(\\hat\\beta_\\text{ridge})=(\\mathbb X^T\\mathbb X+\\lambda I)^{-1}\\mathbb X^T\\mathbb X(\\mathbb X^T\\mathbb X+\\lambda I)^{-1}\\sigma^2\\) proof</li> </ol> \\[\\begin{align*} Var(\\hat\\beta_\\text{ridge})&amp;=\\mathbb{E}\\Big\\{(\\hat{\\beta}_\\text{ridge}-\\mathbb{E}\\hat{\\beta}_\\text{ridge})^2\\Big\\}\\\\ &amp;=\\mathbb{E}\\Big\\{\\big((X^TX+\\lambda I)^{-1}\\mathbb{X}^T\\mathbb{Y}-\\mathbb{E}(X^TX+\\lambda I)^{-1}\\mathbb{X}^T\\mathbb{Y}\\big)^2\\Big\\}\\\\ &amp;\\xlongequal[\\mathbb{Y=X}\\beta+\\epsilon]{\\mathbb{E\\epsilon=0}}\\mathbb{E}\\Big[(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\mathbb{X}^T\\epsilon\\Big]^2\\\\ &amp;=\\mathbb{E}\\Big[(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\mathbb{X}^T\\epsilon\\epsilon^T\\mathbb{X}(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\Big]\\\\ &amp;=(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\mathbb{X}^T\\mathbb{E}\\Big[\\epsilon\\epsilon^T\\Big]\\mathbb{X}(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\\\ &amp;\\xlongequal{Var(\\epsilon)=\\sigma^2I}\\sigma^2\\cdot(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1}\\mathbb{X}^T\\mathbb{X}(\\mathbb{X}^T\\mathbb{X}+\\lambda I)^{-1} \\end{align*}\\]"},{"location":"AI/ML/lr/#the-shrinkage-parameter-ridge","title":"\u03bb := the shrinkage parameter - ridge","text":"<ol> <li>controls the size of the coefficients, \u5b83\u4ec5\u4ec5\u662f\u8c03\u6574\u53c2\u6570\u7684\u5927\u5c0f\uff0c\u5e76\u6ca1\u6709\u5220\u53bb\u7279\u5f81</li> <li>controls the amount of regularization  \\(\\lambda \\rightarrow \\begin{cases}0&amp;\\hat\\beta_{ridge} =\\hat\\beta_{LSE}\\\\\\infin&amp;\\hat\\beta_\\text{ridge}=0\\end{cases}\uff0c\\qquad \u03bb\\uparrow, Bias\\uparrow,Var(\\beta_{ridge})\\downarrow\\)</li> </ol> <p>\u6bcf\u4e00\u4e2a  \u03bb \u53ef\u4ee5\u6c42\u51fa\u4e00\u4e2a \\(\\hat\\beta_{ridge} \\iff\\) the solution is indexed by the parameter \u03bb\u3002 \u5bf9\u6bcf\u4e00\u4e2a lambda \u6211\u4eec\u90fd\u80fd \u753b\u51fa\u5b83\u7684 solution path.  \u03bbs trace out a path of solutions</p> <p>coefficients paths</p> <p>\u53f3\u56fe\u662f\u6839\u636e\u8bfe\u4e0a centralized and standardized diabetes data \u753b\u51fa\u6765\u7684\\(y=\\beta_1x_1+\\dots+\\beta_{10}x_{10}+\\epsilon\\)\u4e00\u5171\u670910\u4e2a \\(\u03b2_i\\), \u6bcf\u4e00\u6761\u7ebf\u5bf9\u5e94\u7684\u662f\u4e00\u4e2a \\(\u03b2_i\\) \u968f\u7740 \u03bb \u589e\u5927\uff0clog\u03bb \u589e\u5927\uff0c\u6bcf\u4e00\u4e2a \u03b2 \u7684\u7edd\u5bf9\u503c\u90fd\u6709\u4e0d\u540c\u7a0b\u5ea6\u7684\u51cf\u5c11\u3002\u5f53 \u03bb \u5230\u8fbe\u4e00\u4e2a\u7edd\u5bf9\u5927\u7684\u503c\uff0c\u6240\u6709\u7684 \u03b2 \u90fd\u88ab\u6536\u7f29\u81f3 0.</p> <p>coefficients paths</p> <p>Except for t = 0, in the other cases none of the coefficient is zero</p> <p>\\(\\beta^*[t]:=\\min\\limits_\\beta \\Vert\\mathbb Y-\\mathbb X\\beta\\Vert^2,\\quad s.t.\\space\\Vert\\beta\\Vert^2\\le t\\)</p> <p>How to choose \u03bb?  How to compare the different \u03bb?</p> <p>a tuning parameter needs to be chosen. \u4f5c\u4e3a\u4eba\u4e3a\u8bbe\u5b9a\u7684\u53c2\u6570\uff0c\u5b83\u662f\u53ef\u8c03\u53c2\u7684</p> <p>via CV:</p> <p>We select a large range for possible\u00a0\\(\u03bb\\in\u00a0[0, c]\\). For each fixed\u00a0\u03bb\u00a0in\u00a0[0, c], consider the CV as follows. For each\u00a0j,</p> <p>\\(\\(\\hat\u03b2_{ridge}^j(\u03bb) = (\\sum\\limits_{i\u2260j} X_i^TX_i + \u03bbI)^{\u22121} \\sum\\limits_{i\u2260j} X_i^TY_i.\\)\\) The prediction error for\u00a0\\((X_j ,Y_j)\\)\u00a0is  \\(err^j(\\lambda)=(Y_j-X_j\\hat\\beta_{ridge}^j(\\lambda))^2\\) The CV value is then \\(CV(\\lambda)=n^{-1}\\sum\\limits_{j=1}^nerr^j(\\lambda)\\) \\(\\implies\\lambda^* = \\min\\limits_{\\lambda}CV(\\lambda)\\)</p> <p>The best\u00a0\u03bb\u00a0is the minimum point of\u00a0CV(\u03bb). </p>"},{"location":"AI/ML/lr/#lasso-l1-penalty-least-absolute-shrinkage-and-selection-operator","title":"Lasso - L1 penalty, Least Absolute Shrinkage and Selection Operator","text":"<p>\u8fd9\u6bd4\u4f30\u8ba1\u6240\u6709\u786e\u5207\u503c\u8981\u5bb9\u6613\u5f97\u591a\uff0c\u56e0\u4e3a\u4f30\u8ba1\u975e\u5e38\u5c0f\u7684\u4e1c\u897f\u9700\u8981\u4f60\u9700\u8981\u5f88\u591a\u4fe1\u606f\uff0c\u56e0\u4e3a\u4f60\u5fc5\u987b\u589e\u52a0\u6837\u672c\u91cf\u3002\u5426\u5219\uff0c\u4f60\u65e0\u6cd5\u6b63\u786e\u4f30\u8ba1\u4e00\u4e9b\u5f31\u4fe1\u53f7\uff0c\u4f46\u4e00\u65e6\u6211\u4eec\u5c063\u4e2a\u4fe1\u53f7\u5b9a\u4f4d\u4e3a\u96f6\uff0c\u5b9a\u4f4d\u5b83\u4eec\u7684\u4f4d\u7f6e\u5c31\u66f4\u5bb9\u6613\u4e86\u3002\u6211\u4eec\u786e\u5b9e\u727a\u7272\u4e86\u4e00\u4e9b\u4e1c\u897f\uff0c</p> <p>L1- Norm \\(\\Vert w\\Vert_1=(\\sum\\limits_{i=1}^d|x_i|)=|w|\\) the estimator \\(\\hat\\beta\\) of Lasso Regression, lasso \\(\\hat\\beta_{\\text{lasso}}(\\lambda):= \\min\\limits_\\beta\\sum\\limits_{i=1}^n(\\{Y_i-\\sum\\limits_{j=1}^pX_{ij}\\beta_j\\}^2+\\lambda\\red{\\sum\\limits_{j=1}^p|\\beta_j|}=\\min\\limits_\\beta\\Vert Y-X\\beta\\Vert^2+\\red{\\lambda\\Vert\\beta\\Vert_1}\\\\[1em]\\qquad\\hat\\beta_{\\text{lasso}}[\\lambda]:= \\min\\limits_\\beta\\sum\\limits_{i=1}^n(\\{Y_i-\\sum\\limits_{j=1}^pX_{ij}\\beta_j\\}^2, \\quad \\red{\\sum\\limits_{j=1}^p|\\beta_j|\\le t}\\iff \\red{\\Vert\\beta\\Vert_1\\le t}\\)</p> <p>The two approaches are also equivalent: \\(\\(\\hat\\beta_{lasso}[\\Vert\\hat\\beta_{lasso}(\\lambda)\\Vert_1]=\\hat\\beta_{lasso}(\\beta)\\)\\)</p> <p>sparsity. Because of the nature of the constraint, with letting\u00a0t sufficiently small (or\u00a0\u03bb\u00a0sufficiently large),  Lasso will cause some of the coefficients to be exactly zero. \u5bf9 Lasso \u6765\u8bf4\uff0c\u4ed6\u786e\u5b9e\u5728\u4ea7\u751f0\uff0c\u6240\u4ee5 \\(\\hat\\beta_{lasso}\\) is sparse \u7a00\u758f\u7684\uff0c\u90a3\u4e48\u8fd9\u5c31\u53ef\u4ee5\u8fdb\u884c variable selection</p> <p>\u90a3\u5982\u679c\u5728lasso\u4e4b\u540e\u628abeta\u4e3a0\u7684\u7279\u5f81\u503c\u6254\u6389\u4e4b\u540e\u518dLSE\u7684\u51c6\u786e\u7387\u4f1a\u4e00\u6837\u5417\uff1f</p>"},{"location":"AI/ML/lr/#the-shrinkage-parameter-lasso","title":"\u03bb := the shrinkage parameter -lasso","text":"<p>t</p> <ol> <li>\u5982\u679c t \u8db3\u591f\u5927\u5230 \\(\\sum\\limits_{i=1}^p|{\\hat\\beta_{LSE}}_j|=\\Vert\\hat\\beta_{LSE}\\Vert_1=t_0\\le t\\implies\\hat\\beta_{lasso}=\\hat\\beta_{LSE}\\)</li> <li>\u5982\u679c \\(t = 0\\implies \\Vert\\beta\\Vert_1=0\\implies\\hat\\beta_{lasso}=0\\implies\\)no variable is selected</li> <li>\\(s:= \\cfrac{t}{t_0}=\\cfrac{t}{\\Vert\\hat\\beta_{LSE}\\Vert_1}=\\begin{cases}0\\iff t = 0 \\implies\\text{no variables selected}\\\\1\\iff t = t_0\\implies\\hat\\beta_{lasso}=\\hat\\beta_{LSE}\\end{cases}\\)</li> <li>it also inherits the properties of ridge regression and sometimes have more efficient estimator \u2014\u2014\u2014 exactly 0</li> </ol> <p>with CV: Usually, 5-fold or 10-fold CV is used.</p> <pre><code>mycv = cv.glmnet(x, y, lambda, type.measure, nfolds)\nplot(mycv) \n# to plot the CV values against lambda\n\nmylasso = glmnet(x, y, family, alpha, nlambda = 100, lambda=NULL, \n    standardize = TRUE, intercept=TRUE, standardize.response=FALSE)\nplot(mylasso): \n# to plot the path of the estimated coefficients against t\n\nmypred = predict(mylasso, newx, type=c(\u201dlink\u201d,\u201dresponse\u201d, \u201dcoefficients\u201d,\u201dnonzero\u201d,\u201dclass\u201d))\n</code></pre> <p><code>mycv = cv.glmnet(x, y, lambda, type.measure, nfolds)</code></p> <ul> <li>input<ul> <li>x: matrix of design of n\u00d7p</li> <li>y: response y as in glmnet.</li> <li>lambda=: Optional user-supplied lambda sequence; default is NULL, and glmnet chooses its own sequence</li> <li>nfolds=: number of folds - default is 10, nfolds=n is the delete-one-observation CV.</li> </ul> </li> <li>output<ul> <li><code>mycv$cvm</code>: the mean cross-validated error - a vector of length(lambda).</li> <li><code>mycv$cvsd</code>: estimate of <code>the</code> standard error of cvm.</li> <li><code>mycv$cvup</code>: upper curve = cvm+cvsd.</li> <li><code>mycv$cvlo</code>: lower curve = cvm-cvsd.</li> <li><code>mycv$nzero</code>: number of non-zero coefficients at each lambda.</li> <li><code>mycv$lambda.min</code>: value of lambda that gives minimum cvm.</li> <li><code>mycv$lambda.1se</code>: vlargest value of lambda such that error is within 1 standard error of the minimum.</li> </ul> </li> </ul> <p><code>mylasso = glmnet(x, y, family, alpha, nlambda = 100, lambda=NULL, standardize = TRUE, intercept=TRUE, standardize.response=FALSE)</code></p> <ul> <li>input<ul> <li>x: input matrix, of dimension \\(n\\times p\\); each row is an observation vector.</li> <li>y: response variable.</li> <li><code>family</code>: Response type, different generalized linear regression model<ul> <li><code>gaussian</code> linear regression model</li> <li>binomial\u201d,\u201dpoisson\u201d, \u201dmultinomial\u201d,\u201dcox\u201d,\u201dmgaussian\u201d)</li> </ul> </li> <li><code>alpha</code>: The elasticnet mixing parameter, with\u00a00\u00a0\u2264\u00a0\u03b1\u00a0\u2264\u00a01. The penalty is defined as \\((1-\\alpha)/2\\Vert\\beta\\Vert_2+\\alpha\\Vert\\beta\\Vert_1\\rightarrow\\alpha = \\begin{cases}1&amp;\\text{ lasso(default)}\\\\0 &amp;\\text{ ridge}\\end{cases}\\)</li> <li><code>nlambda</code>: the number of lambda values - default is 100. \u7528\u6765\u751f\u6210 solution path</li> <li><code>lambda</code>: a user supplied lambda sequence.</li> <li><code>standardize</code> = TRUE( default) / FALSE. Logical flag for X variable standardization, prior to fitting the model sequence. The coefficients are always returned on the original scale.</li> <li><code>intercept</code>: Should intercept(s) be fitted (default=TRUE) or set to zero (FALSE)</li> <li><code>dfmax</code>: Limit the maximum number of variables in the model. Useful for very large p, if a partial path is desired.</li> </ul> </li> <li>output<ul> <li>mylasso$a0: Intercept sequence of length length(lambda)</li> <li>mylasso$beta: all the estimated\u00a0\u03b2\u00a0with different\u00a0\u03bbs.</li> <li>mylasso$lambda: The actual sequence of lambda values used</li> <li>mylasso$df: The number of nonzero coefficients for each value of lambda.</li> </ul> </li> </ul> <p><code>mypred = predict(mylasso, newx, type=c(\u201dlink\u201d,\u201dresponse\u201d, \u201dcoefficients\u201d,\u201dnonzero\u201d,\u201dclass\u201d))</code></p> <ul> <li>mylasso: or any other name fitted \u201dglmnet\u201d model object.</li> <li>newx: Matrix of new values for x at which predictions are to be made.</li> <li>type:<ul> <li><code>link</code><ul> <li>gives the linear predictors for \u201dbinomial\u201d, and \u201dmultinomial\u201d models;</li> <li>for \u201d Gaussian\u201d models it gives the fitted values.</li> </ul> </li> <li><code>response</code> gives the fitted probabilities for \u201dbinomial\u201d or \u201dmultinomial\u201d;</li> <li><code>class</code> applies only to \u201dbinomial\u201d or \u201dmultinomial\u201d models. for \u201dbinomial\u201d models, results are returned only for the class corresponding to the second level.</li> </ul> </li> <li>Please state the procedure of selecting the tuning parameter based on 5-fold CV.</li> </ul>"},{"location":"AI/ML/lr/#elastic-net-a-combination-of-lasso-and-ridge-regression","title":"elastic net: A combination of Lasso and Ridge regression","text":"<p>ridge. \\(\\hat\\beta_{ridge}=\\min\\limits_\\beta\\sum\\limits_{i=1}^n\\{Y_i-\\beta_1x_{i1}-\\beta_2x_{i2}\\}^2+\\lambda\\Vert\\beta\\Vert_2^2\\)</p> <p>lasso. \\(\\hat\\beta_{lasso} = \\min\\limits_\\beta\\sum\\limits_{i=1}^n\\{Y_i-\\beta_1x_{i1}-\\beta_2x_{i2}\\}^2+\\lambda\\Vert\\beta\\Vert_1\\)</p> <p>the elastic net estimator \\(\\hat\\beta_{net}:=\\min\\limits_\\beta\\sum\\limits_{i=1}^n\\{Y_i-\\beta_1x_{i1}-\\beta_2x_{i2}\\}^2+\\lambda\\{(1-\\alpha)\\Vert\\beta\\Vert_2^2+\\alpha\\Vert\\beta\\Vert_1\\},\\alpha\\in[0,1]\\)</p>"},{"location":"AI/ML/lr/#comparison","title":"Comparison","text":"LSE Ridge Lasso \\(\\mathbb{E}\\) \\(\\beta\\) \\(\\beta-\\lambda(\\mathbb X^T\\mathbb X+\\lambda I)^{-1}\\beta\\) ? Bias unbiased = 0 (smaller) biased \\(= -\\lambda(\\mathbb X^T\\mathbb X+\\lambda I)^{-1}\\beta\\) ? Variance \\((\\mathbb X^T\\mathbb X)^{-1}\\sigma^2\\) \\((\\mathbb X^T\\mathbb X+\\lambda I)^{-1}\\mathbb X^T\\mathbb X(\\mathbb X^T\\mathbb X+\\lambda I)^{-1}\\sigma^2\\) (smaller) ? <p>Obviously, \\(|\\text{bias}(\\hat\\beta_\\text{LSE})|\\le|\\text{bias}(\\hat\\beta_\\text{ridge})|\\), but \\(Var(\\hat\\beta_\\text{LSE})\\ge Var(\\hat\\beta_\\text{ridge})\\). But how do we know which is better?</p> <p>Mean Squared Error, MSE. one of evaluations of an estimator of parameter:</p> \\[\\begin{align*}MSE(\\hat\\mu)=\\mathbb E\\Vert \\hat\\mu-\\mu\\Vert^2&amp;=\\mathbb E\\{\\red{(\\hat\\mu-\\mu)^T(\\hat\\mu-\\mu)_{\\in\\R}}\\}\\\\&amp;=\\mathbb Etr\\{ \\red{(\\hat\\mu-\\mu)(\\hat\\mu-\\mu)^T_{\\in S^n}}\\}\\\\&amp;=tr\\{Var(\\hat\\mu)\\}+\\Vert Bias(\\hat\\mu)\\Vert^2\\\\&amp;=tr\\{Var(\\hat\\mu)\\}+Bias(\\hat\\mu)^TBias(\\hat\\mu)\\end{align*}\\] <p>Ridge &amp; LSE.  \\(\\exist\\lambda\\ge0,\\text{ such that }\\mathbb E \\Vert\\hat\\beta_{\\text{ridge}}- \\beta\\Vert^2\\le\\mathbb E\\Vert\\hat\\beta_{\\text{LSE}}-\\beta\\Vert^2\\) \u4e00\u4e2a\u7406\u8bba\u652f\u6491\uff1a\u662f\u5b58\u5728\u8fd9\u4e48\u4e00\u4e2a lambda\uff0c\u6240\u4ee5\u53ea\u8981\u6211\u4eec\u9009\u5bf9 lambda\uff0c ridge \u4f1a\u6bd4 LSE \u8981\u597d.(\u6307\u7684\u662fMSE\u66f4\u5c0f)</p> <ul> <li>Case 1 If X is orthonormal, then  \\(\\mathbb X^T\\mathbb X = I_p,\\) \\(\\begin{cases}\\hat\\beta_{\\text{ridge}}= (\\mathbb X^T\\mathbb X+\\lambda I)^{-1}\\mathbb X^T\\mathbb Y= (1+\\lambda)^{-1}\\mathbb X^T\\mathbb Y\\\\\\hat\\beta_{LSE}=\\mathbb X^T \\mathbb Y\\end{cases}\\implies \\hat\\beta_{ridge}=\\cfrac{1}{1+\\lambda}\\hat\\beta_{LSE}\\) The optimal choice of \u03bb minimizing \\(\\mathbb E\\Vert\\hat \u03b2_{ridge} \u2212 \u03b2\\Vert^2\\) and the expected prediction error is: \\(\\qquad\\lambda^*=\\min\\limits_{\\lambda}\\mathbb E\\Vert\\hat \u03b2_{ridge} \u2212 \u03b2\\Vert^2\\\\\\qquad\\qquad\\implies \\lambda^* = \\cfrac{p\\rho^2}{\\sum\\limits_{j=1}^p\\beta_j^2}\\) \\((\\beta_1,\\dots,\\beta_p):=\\) the true coefficient vector. At this time  \\(\\mathbb E\\Vert\\hat \u03b2_{ridge} \u2212 \u03b2\\Vert^2\\red{&lt;} \\mathbb E\\Vert\\hat \u03b2_{LSE} \u2212 \u03b2\\Vert^2\\).</li> <li>Case 2  \\(\\mathbb X^T\\mathbb X = nI_p,\\)</li> </ul> <p>crease more bias but the variance is smaller iff more confident</p>"},{"location":"AI/ML/lr/#lse-lasso-ridge","title":"LSE &amp; Lasso &amp; ridge","text":"<p>Consider a special case with 1 variable and represent the problem\u3002 \\(Y_i=\\beta x_i+\\epsilon_i,i=1,\\dots,n\\) And assume that after centralized and scaled \\(\\iff\\frac{1}{n}\\sum\\limits_{i=1}^nx_i = 0,\\frac{1}{n}\\sum\\limits_{i=1}^nx_i^2=\\mathbb X^T\\mathbb X=1\\)</p> <p>\\(\\hat\\beta_{LSE}=(\\mathbb X^T\\mathbb X)^{-1}\\mathbb X^T\\mathbb Y=\\mathbb X^T\\mathbb Y=\\sum\\limits_{i=1}^nx_iy_i\\)</p> <p>\\(\\hat\\beta_{ridge} = (\\mathbb X^T\\mathbb X+\\lambda I)\\mathbb X^T\\mathbb Y=\\cfrac{\\hat\\beta_{LSE}}{1+\\lambda}=\\cfrac{\\sum\\limits_{i=1}^nx_iy_i}{1+\\lambda}\\)</p> <p>\\(\\hat\\beta_{lasso}=\\min\\limits_{\\beta}\\{Y_i-\\beta x_i\\}^2+\\lambda |\\beta|\\xlongequal[\\tilde\\lambda=\\lambda/2]{rewrite}\\min\\limits_{\\beta}\\{Y_i-\\beta x_i\\}^2+2\\tilde\\lambda |\\beta|,\\quad\\lambda=2\\tilde\\lambda&gt;0\\)</p> <p></p> <ul> <li>Proof of Lasso.</li> </ul> \\[\\begin{align*} \\beta_\\text{lasso}&amp;:=\\min_\\beta\\Vert\\mathbb{Y}-\\mathbb{X}\\beta\\Vert^2+\\lambda\\Vert\\beta\\Vert_1\\\\ &amp;\\xlongequal{1 \\text{variable}} \\min_\\beta\\sum_{i=1}^n(y_i-\\beta x_i)^2+\\lambda\\vert\\beta\\vert\\\\ &amp;\\xlongequal[\\tilde{\\lambda}=\\lambda/2]{Rewrite}\\min_\\beta\\sum_{i=1}^n(y_i-\\beta x_i)^2+2\\tilde{\\lambda}\\vert\\beta\\vert \\end{align*}\\] <p>Take a derivate \\(\\cfrac{\\partial f}{\\partial\\beta}\\xlongequal{SET}0\\)</p> \\[\\begin{align*} \\frac{1}{2}\\cdot\\cfrac{\\partial f}{\\partial\\beta}&amp;=-\\sum_{i=1}^n(y_i-\\beta x_i)x_i+\\tilde{\\lambda}\\cfrac{\\partial\\vert\\beta\\vert}{\\partial\\beta}\\\\ &amp;=-\\sum_{i=1}^nx_iy_i+\\beta\\sum_{i=1}^nx_i^2+\\tilde{\\lambda}\\cfrac{\\partial\\vert\\beta\\vert}{\\partial\\beta}\\\\ &amp;\\xlongequal{\\sum\\limits_{i=1}^nx_i^2=1}-\\hat{\\beta}_{LSE}+\\beta+\\tilde{\\lambda}\\cfrac{\\partial\\vert\\beta\\vert}{\\partial\\beta}=0 \\end{align*}\\] <ol> <li>when \u6781\u503c\u70b9\u5b58\u5728\u4e8e \\(\\beta&gt;0\\) \\(\\implies\\hat{\\beta}_{\\text{lasso}}=\\hat{\\beta}_{LSE}-\\tilde{\\lambda}\\) exists when \\(\\hat{\\beta}_{LSE}-\\tilde{\\lambda}&gt;0\\) \\(\\frac{1}{2}\\cdot\\frac{\\partial f}{\\partial\\beta}(\\beta=0)=-\\hat{\\beta}_{LSE}&lt;0\\) \\(\\frac{1}{2}\\cdot\\frac{\\partial f}{\\partial\\beta}(\\beta&lt;0)=-\\hat{\\beta}_{LSE}+\\beta-\\tilde{\\lambda}&lt;-\\hat{\\beta}_{LSE}+0-\\tilde{\\lambda}&lt;0\\) \\(\\implies\\hat{\\beta}_{\\text{lasso}}=\\hat{\\beta}_{LSE}-\\tilde{\\lambda}\\) \u662f\u552f\u4e00\u4e00\u4e2a\u6781\u503c\u70b9\uff0c\u5f00\u53e3\u5411\u4e0a\uff0c\u6240\u662f global minimizer</li> <li>when \u6781\u503c\u70b9\u5b58\u5728\u4e8e \\(\\beta&lt;0\\) \\(\\implies\\hat{\\beta}_{\\text{lasso}}=\\hat{\\beta}_{LSE}+\\tilde{\\lambda}\\) exists when \\(\\hat{\\beta}_{LSE}+\\tilde{\\lambda}&lt;0\\) \\(\\frac{1}{2}\\cdot\\frac{\\partial f}{\\partial\\beta}(\\beta=0)=-\\hat{\\beta}_{LSE}&gt;0\\) \\(\\frac{1}{2}\\cdot\\frac{\\partial f}{\\partial\\beta}(\\beta&gt;0)=-\\hat{\\beta}_{LSE}+\\beta+\\tilde{\\lambda}&gt;-\\hat{\\beta}_{LSE}+0+\\tilde{\\lambda}&gt;0\\) \\(\\implies\\hat{\\beta}_{\\text{lasso}}=\\hat{\\beta}_{LSE}+\\tilde{\\lambda}\\) \u662f\u552f\u4e00\u4e00\u4e2a\u6781\u503c\u70b9\uff0c\u5f00\u53e3\u5411\u4e0a\uff0c\u6240\u662f global minimizer</li> <li>when \u6781\u503c\u70b9\u5b58\u5728\u4e8e \\(\\beta=0\\) \\(\\implies\\hat{\\beta}_{\\text{lasso}}=0\\) exists when \\(\\frac{1}{2}\\cdot\\frac{\\partial f}{\\partial\\beta}(\\beta&gt;0)=-\\hat{\\beta}_{LSE}+\\beta+\\tilde{\\lambda}&gt;0\\) always true when \\(\\hat{\\beta}_{LSE}&lt;\\tilde{\\beta}\\) \\(\\frac{1}{2}\\cdot\\frac{\\partial f}{\\partial\\beta}(\\beta&lt;0)=-\\hat{\\beta}_{LSE}+\\beta-\\tilde{\\lambda}&lt;0\\) always true when \\(\\hat{\\beta}_{LSE}&gt;-\\tilde{\\beta}\\) \\(\\implies\\hat{\\beta}_{\\text{lasso}}=\\hat{\\beta}_{LSE}=0\\) \u662f\u552f\u4e00\u4e00\u4e2a\u6781\u503c\u70b9\uff0c\u5f00\u53e3\u5411\u4e0a\uff0c\u6240\u662f global minimizer</li> </ol> \\[\\hat{\\beta}_\\text{lasso}=\\begin{cases}\\hat{\\beta}_\\text{LSE}-\\tilde{\\lambda}&amp;0&lt;\\tilde{\\lambda}&lt;\\hat{\\beta}_\\text{LSE}\\\\ 0&amp;-\\tilde{\\lambda}&lt;\\hat{\\beta}_{LSE}&lt;\\tilde{\\lambda}\\\\ \\hat{\\beta}_\\text{LSE}+\\tilde{\\lambda}&amp;\\hat{\\beta}_\\text{LSE}&lt;-\\tilde{\\lambda}&lt;0\\\\ \\end{cases}=\\hat{\\beta}_{LSE}+\\text{sgn}(\\hat{\\beta}_{LSE})\\tilde{\\lambda}\\] <p>shrinks big coe\ufb00icients by a constant \\(\\tilde{\\lambda}=\\frac{\\lambda}{2}\\) towards zero.truncates small coe\ufb00icients to zero exactly</p>"},{"location":"AI/ML/lr/#lasso-ridge","title":"Lasso &amp; ridge","text":"<p>\u540c\u662f shrinkage method\uff0c\uff0c\u4f46\u662f\u5728 penalty \u9879\u6709\u6240\u4e0d\u540c (subtle but important differences)\u3002</p> <p>Consider a case with 2 variables after centralized and scaled and represent the problem with a constraint format.</p> <p>\\(\\hat\\beta_{ridge}=\\min\\limits_\\beta\\sum\\limits_{i=1}^n\\{Y_i-\\beta_1x_{i1}-\\beta_2x_{i2}\\}^2,\\quad s.t. \\sum\\limits_{j=1}^2\\beta_j^2\\le t\\)</p> <p>\\(\\hat\\beta_{lasso} = \\min\\limits_\\beta\\sum\\limits_{i=1}^n\\{Y_i-\\beta_1x_{i1}-\\beta_2x_{i2}\\}^2,\\quad s.t. \\sum\\limits_{j=1}^2|\\beta_j|\\le t\\)</p> Ridge Lasso constraint/penalty \u5e73\u65b9 \u7edd\u5bf9\u503c absolute value space circle square \u7a00\u758f\u89e3\uff08\u6700\u4f18\u89e3\u5e38\u51fa\u73b0\u5728\u9876\u70b9\u4e0a\uff0c\u4e14\u9876\u70b9\u4e0a\u7684 w \u53ea\u6709\u5f88\u5c11\u7684\u5143\u7d20\u662f\u975e\u96f6\u7684\uff09 \u51f8\u51fd\u6570\uff0c\u5904\u5904\u53ef\u5fae\u5206 \u51f8\u51fd\u6570\uff0c\u4e0d\u662f\u5904\u5904\u53ef\u5fae\u5206 <p>the lasso (left) and ridge regression (right)</p> <p>The solid blue areas are the constraint regions.the red ellipses are the contours of the least squares error function</p> <p>Same: \u5f88\u660e\u663e\uff0c\u5b83\u88ab\u8feb\u9650\u5236 search in the constraint area Difference:</p> <ol> <li>\u4ed6\u4eec\u90fd\u5728 shrinkage in beta towards 0, \u4f46 lasso creates zeros \uff08\u8fd9\u4e2a property is very attractive\uff09</li> </ol>"},{"location":"AI/ML/lr/#solution-path","title":"solution path","text":"<p>Notice that the solution is indexed by the parameter \u03bb \u2013 So for each \u03bb, we have a solution</p> <p>\u5f53\u6211\u4eec\u4e0d\u6307\u5b9a coefficient lambda \u5c31\u4f1a\u7ed9\u6211\u4eec\u751f\u6210 a lot of different lambda. when Lambda is very small, whereby your estimate is close to least square. All coefficient was estimated shrink is towards 0, so the L1 norm becomes smaller and smaller and smaller And and and the solution path is something like how different lambdas affects the solution and each line is actually estimated for for the corresponding feature.</p>"},{"location":"AI/ML/nb/","title":"Naive Bayes classifier","text":"<p>In\u00a0statistics,\u00a0naive Bayes classifiers\u00a0are a family of simple \"probabilistic classifiers\" based on applying\u00a0Bayes' theorem\u00a0with strong (naive)\u00a0independence\u00a0assumptions between the features.</p>"},{"location":"AI/ML/nb/#background","title":"Background","text":"<p>Conditional probability\u3002 \\(P(A|B)=\\frac{P(AB)}{P(B)}, P(B|A)=\\frac{P(AB)}{P(A)}\\) Bayes\u2019 Theorem Suppose \\(B_1, \u00b7 \u00b7 \u00b7 , B_n\\) form a partition of the sample space \\(S\\) (mutually exclusive and collectively exhaustive), then for any \\(k = 1, \u00b7 \u00b7 \u00b7 n\\) and any event \\(A\\) \\(\\(P(B_k|A) =\\frac{P(B_kA)}{P(A)}=\\cfrac{P(A|B_k)P(B_k)}{P(A|B_1)P(B_1)+\\dots+P(A|B_k)P(B_k)}\\)\\)</p> <p>cancer diagnostic testing. C denote the event that a patient has a cancer. B denote the event that the test reports \u201cpositive\u201d for the patient Some laboratory studies show that \\(P (C) = 0.001, P (B|C)=0.99, P(B|C) = 0.01\\).</p> <p>We apply the Bayes\u2019 Theorem to give \\(P (C|B) = \\cfrac{P (C)P (B|C)}{P (C)P (B|C) + P (C)P (B|C)}=\\cfrac{0.001 \u00d7 0.99}{0.999 \u00d7 0.01 + 0.001 \u00d7 0.99}= 0.09016393\\)</p> <p>So for the rare disease, even though the test is very precise, a positive report may still have an overwhelming probability to be a mistake.</p>"},{"location":"AI/ML/nb/#content","title":"Content","text":"<p>Bayesian Classifiers, Idiot's Bayes. Choose value of \\(C\\) that maximizes \\(P (C|A_1, A_2, . . . , A_n)\\)</p> \\[\\begin{align*}C&amp;:=\\max_CP(C|A_1,...,A_n)\\\\ &amp;=\\max_C\\cfrac{P(A_1,...,A_n|C)P(C)}{P(A_1,...,A_n)}\\\\ &amp;\\propto\\max_CP(A_1,...,A_n|C)P(C) \\end{align*}\\] <p>how to estimate \\(P (A_1, . . . , An|C)\\) ?</p> <p>Assume independence among attributes \\(A_i\\) when class is given \\(P(A_1,...,A_n|C_j) =\\prod\\limits_{i=1}^nP(A_i|C_j)\\)</p> \\[\\begin{align*}C&amp;:=\\max_CP(C|A_1,...,A_n)\\\\&amp;=\\max_C\\cfrac{P(A_1,...,A_n|C)P(C)}{P(A_1,...,A_n)}\\\\&amp;\\propto\\max_CP(A_1,...,A_n|C)P(C)\\\\ &amp;\\xlongequal{\\text{Independent}}\\max_C\\prod\\limits_{i=1}^nP(A_i|C)P(C)\\end{align*}\\] <p>Wrong when lack represent data. \u5982\u679c\u5728 C \u7c7b\u6837\u672c\u4e2d\u5728 i-th \u7279\u5f81\u4e0a\u6ca1\u6709\u5b58\u5728\u7b2c k \u4e2a\u503c\u3002\u90a3\u4e48\u6309\u7167\u539f\u6765\u7684\u8ba1\u7b97\uff0c\u53ea\u8981 i-th = k\uff0c\u90a3\u4e48\u6c38\u8fdc\u4e0d\u53ef\u80fd\u662fC\uff0c\u56e0\u4e3a\u7b97\u51fa\u6765\u76f4\u63a5\u4e3a0. \\(P(A_{i:k}|C)=\\cfrac{N_{i:k,C}}{N_C}\\xlongequal{N_{k,C}=0}0\\implies\\prod\\limits_{i=1}^nP(A_i|C)P(C)=0\\)</p> <p>\u5f15\u5165==Laplace smoothing== \\(\\(P(A_i|C) = \\cfrac{N_{i,C}+\\alpha}{N_C+\\alpha\\times(\\#A_i)}\\)\\) \\(\\#A_i:=\\) the total number of classes that Ai possibly belong to \\(\\alpha\\gt0\\) is a parameter. Usually set as 1.</p> <p>New sample: Name=human; GiveBirth=yes; LayEggs=no; CanFly=no; HaveLegs=yes; Class=?  mammal=5; Non-mammal=10, \\(\\alpha=1\\) calculate \\(P(A_i|C)\\)</p> class GiveB.=Y LayE.=N CanF.=N HaveL.=Y \\(P(C)\\) Mammal \\(\\frac{5+1}{5+2}\\) \\(\\frac{5+1}{5+2}\\) \\(\\frac{4+1}{5+2}\\) \\(\\frac{3+1}{5+2}\\) \\(\\frac{5+1}{15+2}\\) Non- \\(\\frac{1+1}{10+2}\\) \\(\\frac{1+1}{10+2}\\) \\(\\frac{7+1}{10+2}\\) \\(\\frac{7+1}{10+2}\\) \\(\\frac{10+1}{15+2}\\) <p>\\(P(C=M|A_i)\\propto\\prod\\limits_{i=1}^4P(A_i|C=M)P(C=M)=\\frac{6}{17}\\times\\frac{6}{7}\\times\\frac{6}{7}\\times\\frac{5}{7}\\times\\frac{4}{7}=0.1058\\) (bigger)\\(\\implies\\) mammal</p> <p>\\(P(C=N|A_i)\\propto\\prod\\limits_{i=1}^4P(A_i|C=N)P(C=N)=\\frac{11}{17}\\times\\frac{1}{6}\\times\\frac{1}{6}\\times\\frac{2}{3}\\times\\frac{2}{3}=0.0080\\)</p>"},{"location":"AI/ML/svm/","title":"SVM","text":"<p>SVM maps training examples to points in space so as to maximise the width of the gap between the two categories. New examples are then mapped into that same space and predicted to belong to a category based on which side of the gap they fall.</p> <p>find a best hyperplane with the largest margin to separate different class samples.</p> <pre><code>graph  LR\nA[Linear SVM]\nB[soft margined ]\nC[kernel trick&lt;br&gt;\u4f4e\u7ef4\u5b8c\u6210\u8fd0\u7b97]\nD[non-linear SVM&lt;br&gt;\u6295\u5c04\u9ad8\u7ef4]\nE{\u7ebf\u6027\u53ef\u5206}\nF{\u566a\u58f0\u5b58\u5728&lt;br&gt;\u6cdb\u5316\u2b07\ufe0f}\nG[hard margined]\nZ[SVM&lt;br&gt;\u7ebf\u6027\u8d85\u5e73\u9762&lt;br&gt;\u566a\u58f0\u654f\u611f] --&gt; E --Y--&gt;A\nE --N--&gt; D --\u8ba1\u7b97\u5185\u79ef\u56f0\u96be--&gt; C\nZ --&gt; F --N--&gt; G\nF --Y--&gt; B</code></pre>"},{"location":"AI/ML/svm/#_1","title":"\u7406\u8bba","text":"<p>\u6700\u5927\u95f4\u9694\u8d85\u5e73\u9762, Maximal Margin Hyperplan, Optimal Hyperplane\uff0c\u5728\u6837\u672c\u7a7a\u95f4\u627e\u4e00\u4e2a\u8d85\u5e73\u9762\uff0c\u5c06\u4e0d\u540c\u7c7b\u522b\u7684\u6837\u672c\u5206\u5f00\u3002 \u51b3\u7b56\u8fb9\u754c\u95f4\u9694, margin, \\(\\gamma\\)\uff0c\\(B_{-1}\\) \u548c \\(B_{1}\\)\u4e4b\u95f4\u7684\u95f4\u9694 \\(=\\) \u4e24\u4e2a\u5f02\u7c7b\u51b3\u7b56\u5411\u91cf\u5230\u51b3\u7b56\u8fb9\u754c\u7684\u8ddd\u79bb\u4e4b\u548c\u3002\u5177\u6709\u8f83\u5927\u95f4\u9694\u7684\u51b3\u7b56\u4fbf\u6377\u5177\u6709\u66f4\u5927\u7684\u6cdb\u5316\u8bef\u5dee\u3002 \u652f\u6301\u5411\u91cf, support vector\uff0c\u8ddd\u79bb\u51b3\u7b56\u8fb9\u754c\u6700\u8fd1\u7684\u8bad\u7ec3\u6837\u672c \\((x_{-1},-1),(x_1, 1)\\) \u5206\u522b\u4f4d\u4e8e\u8d85\u5e73\u9762\\(B_{-1}\\) \u548c \\(B_{1}\\)\u4e0a,\u4ee4\u7b49\u5f0f\u6210\u7acb\u3002\\(\\begin{cases} B_{-1}:&amp; w^Tx_{-1}+b=-1\\\\B_1:&amp;w^Tx_{1}+b=1 \\end{cases}\\)</p> <p></p> <p>SVM \u5bf9\u566a\u58f0\u654f\u611f\u7684\u539f\u56e0 SVM \u7684\u76ee\u7684\uff1a\u6c42\u51fa\u4e0e\u652f\u6301\u5411\u91cf\u6709\u6700\u5927\u5316\u8ddd\u79bb\u7684\u76f4\u7ebf\uff0c\u4ee5\u6bcf\u4e2a\u6837\u672c\u4e3a\u5706\u5fc3\uff0c\u8be5\u8ddd\u79bb\u4e3a\u534a\u5f84\u4f5c\u5706\uff0c\u53ef\u4ee5\u8fd1\u4f3c\u4e3a\u5706\u5185\u7684\u70b9\u4e0e\u8be5\u6837\u672c\u5c5e\u4e8e\u76f8\u540c\u5206\u7c7b\u3002\u5982\u679c\u51fa\u73b0\u4e86\u566a\u58f0\uff0c\u90a3\u4e48\u8fd9\u4e2a\u566a\u58f0\u6240\u5e26\u6765\u7684\u9519\u8bef\u5206\u7c7b\u5c06\u6700\u5927\u5316\u3002</p>"},{"location":"AI/ML/svm/#linear-svm","title":"linear SVM","text":"<p>Assumption\uff1a\u6837\u672c\u7ebf\u6027\u53ef\u5206\uff0c\u6839\u636e\u7ed3\u6784\u98ce\u9669\u6700\u5c0f\u5316\u539f\u7406\uff0c\u6700\u5927\u5316\u51b3\u7b56\u8fb9\u754c\u7684\u95f4\u9694 \\(\\Leftrightarrow\\) \u6700\u574f\u60c5\u51b5\u4e0b\u6cdb\u5316\u8bef\u5dee\u6700\u5c0f\u3002</p> <p>\u5bf9\u5076\u95ee\u9898</p> <p>\\(\\min f\\xRightarrow{\u8f6c\u5316}\\max \\log f\\) - \u4f18\u70b9   - \u66f4\u5bb9\u6613\u6c42\u89e3   - \u6c42\u89e3\u51fa\u73b0\u4e86\u5411\u91cf\u5185\u79ef\u7684\u5f62\u5f0f\uff0c\u66f4\u5bb9\u6613\u5f15\u51fa\u6838\u51fd\u6570\u7684\u6982\u5ff5\u3002</p>"},{"location":"AI/ML/svm/#_2","title":"\u6700\u5927\u8fb9\u7f18\u63a8\u5bfc","text":"\\[\\begin{align*} B_{1}:&amp;w^Tx_{1}+b=-1\\\\B_2:&amp;w^Tx_2+b=1\\end{align*}\\implies w^T(x_2-x_1)=2=w^T\\overrightarrow{x_2x_1}\\\\ w^T\\overrightarrow{x_2x_1}=\\Vert w^T\\Vert*\\Vert\\overrightarrow{x_2x_1}\\Vert*\\cos&lt;w^T, \\overrightarrow{x_2x_1}&gt;=\\Vert w^T\\Vert * \\Vert\\gamma\\Vert=2\\\\ \\implies \\Vert\\gamma\\Vert=\\cfrac{2}{\\Vert w\\Vert} \\] \\[\\text{Question:} \\max \\gamma = \\max_{w^T,b}\\cfrac{2}{\\Vert w^T\\Vert}, \\text{s.t.}\\begin{cases} w^Tx_i+b\\gt1&amp;y_i=+1\\\\w^Tx_i+b\\le-1&amp;y_i=-1 \\end{cases}\\\\ \\Leftrightarrow \\min_{w^T,b}\\cfrac{1}{2}\\Vert w^T\\Vert, \\text{ s.t. }\\space y_i(w^Tx_i+b)\\ge 1,  \\forall i \\] <p>\\((x_i,y_i)\\) is a sample, which y is its actual type, \\(w^Tx+b\\) is its prediction.</p> <p>\u4e3a\u4e86\u5728\u6c42\u5bfc\u7684\u65f6\u5019\u65b9\u4fbf\u7ea6\u8c03\u7cfb\u6570 + \u4f7f\u7528 KKT \u6761\u4ef6\uff0c\\(\\min_{w^T,b}\\cfrac{1}{2}{w^T}^{\\red{2}}, \\text{ s.t. }\\space \\red{-}(y_i(w^Tx_i+b)-1)\\red{\\le} 0,  \\forall i\\)</p> <p>\u5e0c\u671b\uff1a\u627e\u5230\u4e00\u4e2a \\(f(x):=w^Tx+b\\) \u4f7f\u5f97\u6240\u6709\u5c5e\u4e8e\u7c7b\u522b 1 \u7684\u7b97\u51fa\u6765\u662f \\(\\ge 1\\)\u7684\uff0c\u6240\u6709\u5c5e\u4e8e\u7c7b\u522b -1 \u7684\u7b97\u51fa\u6765\u662f \\(\\le -1\\)\u7684\u3002\u4f46\u662f\u4e0d\u6ee1\u8db3\u4e8e\u6b64\uff0c\u8fd8\u5e0c\u671b\u627e\u5230\u5728\u6240\u6709\u7b26\u5408\u4ee5\u4e0a\u6761\u4ef6\u7684 \\(f\\)\u4e2d\uff0c\\(\\Vert w\\Vert\\) \u6700\u5c0f\u3002</p> <p>\u62c9\u683c\u6717\u65e5\u4e58\u5b50\u6cd5\uff1a\u5c06\u6761\u4ef6\u878d\u5165\u5230\u76ee\u6807\u51fd\u6570\u5f53\u4e2d</p> <p>\\(\\(\\min_{x} f(x) \\space\\text{ s.t} \\begin{cases} h(x)=0\\\\g(x)\\red{\\le}0 \\end{cases}\\Leftrightarrow \\min_{w^T,x}f+\\lambda h + \\mu g=:\\mathcal{L}(x, \\lambda, \\mu)\\)\\) To solve, \\(\\cfrac{\\partial\\mathcal{L}}{\\partial x}=\\cfrac{\\partial\\mathcal{L}}{\\partial \\lambda}=\\cfrac{\\partial\\mathcal{L}}{\\partial \\mu}\\xlongequal{SET}0\\) To achive optimal value, \\(\\begin{cases} \\frac{\\partial\\mathcal{L}}{\\partial x}=0\\\\h(x)=0\\\\\\mu g(x)=0 \\end{cases}\\)</p> \\[\\mathcal{L}(w^T,b, \\alpha):= \\cfrac{1}{2} {w^T}^2-\\sum_{i=1}^n\\alpha_i(y_i(w^Tx_i+b)-1)\\\\\\space\\\\\\min_{w^T,b}\\max_{\\alpha}\\mathcal{L}(w^T,b, \\alpha)\\] <p>\u6839\u636e\u62c9\u683c\u6717\u65e5\u7684\u5bf9\u5076\u6027\uff0c</p> <p>\\(\\(\\max_{\\alpha}\\min_{w^T, b}\\mathcal{L}(w^T,b, \\alpha)\\)\\) \u6c42 \\(\\cfrac{\\partial\\mathcal{L}}{\\partial w^T}=\\cfrac{\\partial\\mathcal{L}}{\\partial b}\\xlongequal{SET}0\\)</p> \\[\\begin{align*}\\cfrac{\\partial\\mathcal{L}}{\\partial w^T}&amp;=w^T-\\sum_{i=0}^n\\alpha_iy_ix_i&amp;=0\\\\ \\cfrac{\\partial\\mathcal{L}}{\\partial b}&amp;=-\\sum_{i=0}^n\\alpha_iy_i&amp;=0 \\end{align*}\\] <p>\u5f97\u5230 \\({w^T}^*=\\sum\\limits_{i=0}^n\\alpha_iy_ix_i\\) \u56de\u4ee3 \\(\\mathcal{L}(w^T,b, \\alpha)\\), \u6d88\u6389 \\(w^T, b\\)</p> \\[\\begin{align*} \\mathcal{L}(w^T,b, \\alpha)&amp;=\\frac{1}{2} {w^T}^2-\\sum_{i=1}^n\\alpha_i(y_i(w^Tx_i+b)-1)\\\\ &amp;=\\frac{1}{2}\\Big(\\sum_{i=0}^n\\alpha_iy_ix_i\\Big)^2 -\\sum_{i=1}^n\\alpha_iy_i\\cdot\\big(\\sum\\limits_{j=0}^n\\alpha_jy_jx_j\\big)\\cdot x_i+\\sum_{i=1}^n\\alpha_i\\\\ &amp;=-\\frac{1}{2}\\Big(\\sum_{i=0}^n\\alpha_iy_ix_i\\Big)^2+\\sum_{i=1}^n\\alpha_i\\\\ &amp;=-\\frac{1}{2}\\sum_{i=0}^n\\sum_{j=0}^n\\alpha_i\\alpha_jy_iy_jx_i^Tx_j+\\sum_{i=1}^n\\alpha_i\\end{align*}\\] \\[\\max_{\\alpha}-\\frac{1}{2}\\Big(\\sum_{i=0}^n\\alpha_iy_ix_i\\Big)^2+\\sum_{i=1}^n\\alpha_i\\] <p>\u6c42 \\(\\cfrac{\\partial\\mathcal{L}}{\\partial \\alpha}\\xlongequal{SET}0\\)</p> \\[\\cfrac{\\partial\\mathcal{L}}{\\partial \\alpha_i}=-(\\sum_{i=0}^n\\alpha_iy_ix_i)\\cdot y_ix_i+1=0\\] <p>\u89e3\u5f97</p> \\[\\begin{align*} {w^T}^*&amp;=\\sum_{i=0}^n\\alpha_iy_ix_i\\\\ b^*&amp;=\\frac{1}{2}\\Big[\\max_{i:y=1}{w^T}^*x_i+\\min_{i:y=-1}{w^T}^*x_i\\Big]\\\\ f(x)&amp;=\\Big(\\sum_{i=0}^n\\alpha_iy_ix_i\\Big)\\cdot x+b\\\\ &amp;=\\sum_{i=0}^n\\alpha_iy_i&lt;x_i, x&gt; + b \\end{align*}\\] <p>\u800c\u4ee5\u4e0a\u7684\u8fc7\u7a0b\u9700\u8981\u6ee1\u8db3 KKT \u6761\u4ef6 \\(\\begin{cases} a_i\\ge0&amp;\\text{\u53ef\u884c\u6027}\\\\y_i(w^Tx+b)-1\\ge0&amp;\\text{\u53ef\u884c\u6027}\\\\\\alpha_i\\cdot(y_i(w^Tx+b)-1)=0  &amp;\\text{\u4e92\u8865\u677e\u5f1b\u6027}   \\end{cases}\\)</p> <p>\\(\\implies \\forall (x_i,y_i), \\begin{cases} \\alpha_i=0 &amp;\\text{\u6837\u672c\u5bf9\u51fd\u6570\u65e0\u5f71\u54cd}\\\\ \\alpha_i\\neq 0, y_i(w^Tx+b)=1&amp;\\text{\u652f\u6301\u5411\u91cf\uff0c\u6837\u672c\u4f4d\u4e8e\u51b3\u7b56\u8fb9\u754c\u4e0a} \\end{cases}\\) \\(\\implies\\) \u8bad\u7ec3\u5b8c\u6210\u540e\uff0c\u5927\u90e8\u5206\u7684\u8bad\u7ec3\u6837\u672c\u90fd\u4e0d\u9700\u8981\u4fdd\u7559\uff0c\u6700\u7ec8\u6a21\u578b\u4ec5\u4e0e\u51b3\u7b56\u5411\u91cf\u6709\u5173\u3002</p> <p>\u5df2\u77e5\u4e00\u4e2a\u8bad\u7ec3\u6570\u636e\u96c6\uff0c\u6b63\u4f8b\u70b9 \\(x_1=(3,3)^T,x_2=(4,3)^T\\)\uff0c\u8d1f\u4f8b\u70b9 \\(x_3=(1,1)^T\\)\uff0c \u6c42\u6700\u5927\u95f4\u9694\u5206\u79bb\u5e73\u9762\u3002</p> <p>\\(x\\in\\R^2, f(x)=w_1x_1+w_2x_2+b\\) \\(\\(\\min\\frac{1}{2}(w_1^2+w_2^2), \\text{ s.t. }\\begin{cases}1*(3w_1+3w_2+b)\\ge1\\\\1*(4w_1+3w_2+b)\\ge1\\\\-1*(1w_1+1w_2+b)\\ge1\\end{cases}\\)\\) \u6784\u9020\u5bf9\u5076\u95ee\u9898 \\(\\(\\max\\limits_\\alpha-\\cfrac{1}{2}\\sum\\limits_{i=1}^3\\sum\\limits_{j=1}^3\\alpha_i\\alpha_jy_iy_jx_i^Tx_j+\\sum\\limits_{i=0}^3\\alpha_i\\\\\\text{s.t.}\\alpha_i\\ge0,\\sum\\limits_{i=1}^3\\alpha_iy_i=\\alpha_1+\\alpha_2-\\alpha_3=0\\)\\) \u4ee3\u5165\u6570\u636e\u5f97\uff1a \\(\\mathcal{L}(\\alpha)=\\alpha_1+\\alpha_2+\\alpha_3-\\frac{1}{2}(18\\alpha_1^2+25\\alpha_2^2+2\\alpha_3^2+2*21\\alpha_1\\alpha_2-2*7\\alpha_2\\alpha_3-2*6\\alpha_1\\alpha_3)\\\\=\\alpha_1+\\alpha_2+\\alpha_3-9\\alpha_1^2-\\frac{25}{2}\\alpha_2^2-\\alpha_3^2-21\\alpha_1\\alpha_2+7\\alpha_2\\alpha_3+6\\alpha_1\\alpha_3\\) \u4ee3\u5165 \\(\\alpha_3=\\alpha_1+\\alpha_2\\) \\(\\(\\mathcal{L}(\\alpha)=2\\alpha_1+2\\alpha_2-4\\alpha_1^2-\\frac{13}{2}\\alpha_2^2-10\\alpha_1\\alpha_2\\)\\) \u6c42\u5bfc \\(\\cfrac{\\partial\\mathcal{L}}{\\alpha_1}=\\cfrac{\\partial\\mathcal{L}}{\\alpha_2}\\xlongequal{SET}0\\) \\(\\(\\begin{cases}2-8\\alpha_1-10\\alpha_2=0\\\\2-13\\alpha_2-10\\alpha_1=0\\end{cases}\\implies\\begin{cases}\\alpha_1=1.5\\\\\\alpha_2=-1&amp;\\alpha_i\\ge0\\times \\end{cases}\\)\\) \u6781\u503c\u5728\u8fb9\u754c\u4e2d\u53d6\u5f97 \u5f53 \\(\\alpha_1=0, \\mathcal{L}(\\alpha)=2\\alpha_2-\\cfrac{13}{2}\\alpha_2^2\\) \u5728 \\((0, \\frac{2}{13})\\) \u53d6\u6700\u5927\u503c 0.1538 \u5f53 \\(\\alpha_2=0, \\mathcal{L}(\\alpha)=2\\alpha_1-4\\alpha_2^2\\) \u5728 \\((\\frac{1}{4}, 0)\\) \u53d6\u6700\u5927\u503c 0.25 \\(\\implies \\alpha_3=\\frac{1}{4}+0=\\frac{1}{4}\\) \\(\\alpha_1=\\alpha_3&gt;0\\implies x_1,x_3\\)\u662f\u652f\u6301\u5411\u91cf \u4ee3\u5165\u516c\u5f0f\uff1a \\(\\(\\begin{cases}w^*=\\sum_{i=1}^3\\alpha_iy_ix_i=\\cfrac{1}{4}\\cdot1\\cdot\\begin{bmatrix}3\\\\3\\end{bmatrix}+0+\\cfrac{1}{4}\\cdot-1\\cdot\\begin{bmatrix}1\\\\1\\end{bmatrix}=\\begin{bmatrix}1/2\\\\1/2\\end{bmatrix}\\\\b=-\\frac{1}{2}(3\\cdot\\frac{1}{2}+3\\cdot\\frac{1}{2}+1\\cdot\\frac{1}{2}+\\cdot\\frac{1}{2})=-2\\end{cases}\\)\\) \\(f(x)=\\cfrac{1}{2}x_1+\\cfrac{1}{2}x_2-2\\) \u8d85\u5e73\u9762=\\(\\cfrac{1}{2}x_1+\\cfrac{1}{2}x_2-2=0\\)</p> <p>--</p> <p>\u5df2\u77e5\u4e00\u4e2a\u8bad\u7ec3\u6570\u636e\u96c6\uff0c\u8d1f\u4f8b\u70b9 \\(x_1=(1,0)^T,x_2=(0,1)^T\\)\uff0c\u6b63\u4f8b\u70b9 \\(x_3=(2,1)^T\\)\uff0c \u6c42\u6700\u5927\u95f4\u9694\u5206\u79bb\u5e73\u9762\u3002</p> <p>\u5bf9\u5076\u95ee\u9898\u89e3\u6cd5 \\(x\\in\\R^2, f(x)=\\begin{bmatrix}w_1\\\\w_2\\end{bmatrix}^T\\begin{bmatrix}x_1\\\\x_2\\end{bmatrix}+b\\) \\(\\(\\min_{w^T,b}\\frac{1}{2}(w_1^2+w_2^2)\\text{ s.t. }\\begin{cases}-1*(w_1+b)\\ge1\\\\-1*(w_2+b)\\ge1\\\\1*(2w_1+w_2)\\ge1\\end{cases}\\)\\) \u6784\u9020\u5bf9\u5076\u95ee\u9898 \\(\\(\\max_\\alpha-\\frac{1}{2}\\sum_{i,j=1}^3\\alpha_i\\alpha_jy_iy_jx_i^Tx_j+\\sum_{i=1}^3\\alpha_i\\text{ s.t. }\\alpha_i\\ge0, \\sum_{i=0}^3\\alpha_iy_i=-\\alpha_1-\\alpha_2+\\alpha_3=0\\)\\) \\(\\mathcal{L}(\\alpha)=-\\frac{1}{2}(\\alpha_1^1+\\alpha_2^2+5\\alpha_3^2+2*2\\alpha_1\\alpha_3+2*2\\alpha_2\\alpha_3)+\\sum\\limits_{i=1}^3\\alpha_i\\) \u4ee3\u5165 \\(\\alpha_3=\\alpha_1+\\alpha_2\\) \\(\\(\\mathcal{L}(\\alpha)=2\\alpha_1+2\\alpha_2-\\alpha_1^2-2\\alpha_2^2-3\\alpha_1\\alpha_2\\)\\) \u6c42\u504f\u5bfc \\(\\frac{\\partial\\mathcal{L}(\\alpha)}{\\partial\\alpha_1}=\\frac{\\partial\\mathcal{L}(\\alpha)}{\\partial\\alpha_2}\\xlongequal{SET}0\\) \\(\\(\\begin{cases}2-2\\alpha_1-3\\alpha_2=0\\\\2-4\\alpha_2-3\\alpha_1=0\\end{cases}\\begin{cases}\\alpha_1=-2\\lt0\\times\\\\\\alpha_2=2 \\end{cases}\\)\\) \u6781\u503c\u5728\u8fb9\u754c\u53d6\u5f97 \\(\\begin{cases}\\alpha_1=0&amp;\\mathcal{L}=2\\alpha_2-2\\alpha_2^2, \\max_{(0, 1/2)}=1/2\\\\\\alpha_2=0&amp;\\mathcal{L}=2\\alpha_1-\\alpha_1^2,\\max_{(1,0)}=1\\end{cases}\\) \\((\\alpha_1,\\alpha_2,\\alpha_3)=(1,0,1), \\alpha_1=\\alpha_3&gt;0, x_1,x_3\\)\u652f\u6301\u5411\u91cf \u4ee3\u5165\u516c\u5f0f\uff1a \\(\\(\\begin{cases}w^*=1*-1*\\begin{bmatrix}1\\\\0\\end{bmatrix}+0+1*1*\\begin{bmatrix}2\\\\1\\end{bmatrix}=\\begin{bmatrix}1\\\\1\\end{bmatrix}\\\\b^*=\\frac{1}{2}(1*1+0+1*2+1*1)=-2 \\end{cases}\\)\\) \\(f(x)=\\begin{bmatrix}1\\\\1\\end{bmatrix}^T\\begin{bmatrix}x_1\\\\x_2\\end{bmatrix}-2\\) \u5206\u79bb\u8d85\u5e73\u9762 \\(\\begin{bmatrix}1&amp;1\\end{bmatrix}\\begin{bmatrix}x_1\\\\x_2\\end{bmatrix}-2=x_1+x_2-2=0\\) </p> <p>Consider the classification problem with data \\(\\{(x_i,y_i)\\}_{i=1}^m\\) , where for each i \\(x_i\\in\\R, y_i\\in\\{\u00b11\\}\\). Recall the hinge loss \\(\u03c6_h(x) = \\max\\{0, 1\u2212x\\}\\). Consider the SVM on \\(R^1\\). In particular, we set \\(\u03bb = 1, m = 2, (x_1,y_1)=(1,\u22121), (x_2,y_2)=(-2,1)\\) Find \\((c^*, b^*)\\)</p> \\[\\begin{align*}(c^*,b^*)&amp;=\\min_{c,b\\in\\R}\\Epsilon_\\lambda(c,b)\\\\\\Epsilon_\\lambda(c,b)&amp;=\\frac{1}{m}\\sum_{i=1}^m\\phi_h(y_i(cx_i+b))+\\lambda_c^2 \\end{align*}\\] <p>\\(\\max\\{0,1-x\\}=\\frac{1}{2}(1-x)+\\frac{1}{2}|1-x|\\) \\(y_i(cx_i+b)=\\begin{cases}-1(c+b)\\\\1(-2c+b)\\end{cases}\\) \\(\\Epsilon_\\lambda(c,b)=\\frac{1}{4}\\times\\frac{1}{2}\\times\\Big((1+c+b)+|1+c+b|+(1+2c-b)+|1+2c-b|\\Big)+c^2\\\\ =\\frac{1}{8}\\Big((2+3c)+|1+c+b|+|1+2c-b|\\Big)+c^2\\) \\(f(c,b):=|1+c+b|+|1+2c-b|\\) \\(\\implies b^*\\in[-1-c,1+2c], f(c,b)=|1+c+b+1+2c-b|=|2+3c|\\xlongequal{SET}0\\implies c^*=-\\frac{2}{3}\\) \\(\\Epsilon_\\lambda(c,b)=\\frac{1}{8}\\Big(2+3c+|2+3c|\\Big)+c^2\\) case 1 \\(2+3c&lt;0\\)</p> <p>\u540e\u9762\u4e0d\u592a\u77e5\u9053</p> <p>\u8003\u8651\u4f7f\u7528 linear SVM \u5bf9\u5982\u4e0b\u4e24\u7c7b\u53ef\u5206\u7684\u6570\u636e\u8fdb\u884c\u5206\u7c7b\uff1a\\(\\begin{cases}+1:&amp;(1,1)(2,2),(2,0)\\\\-1&amp;(0,0),(1,0),(0,1)\\end{cases}\\) 1.\u5728\u56fe\u4e2d\u4f5c\u51fa6\u4e2a\u6837\u672c\u70b9\uff0c\u6784\u9020\u5177\u6709\u6700\u4f18\u8d85\u5e73\u9762\u548c\u6700\u4f18\u95f4\u9694\u7684\u6743\u91cd\u5411\u91cf\u3002\u54ea\u4e9b\u662f\u652f\u6301\u5411\u91cf\uff1f2.\u901a\u8fc7\u5bfb\u627e\u62c9\u683c\u6717\u65e5\u4e58\u5b50 \\(\\alpha\\) \u6765\u6784\u9020\u5728\u5bf9\u5076\u7a7a\u95f4\u4e0a\u7684\u89e3\uff0c\u5e76\u4e0e(1)\u6c42\u7684\u7ed3\u679c\u8fdb\u884c\u6bd4\u8f83\u3002</p>"},{"location":"AI/ML/svm/#non-linear-svm-kernel-trick","title":"Non-linear SVM + kernel trick","text":"<p>\u5982\u679c\u539f\u59cb\u7a7a\u95f4\u662f\u6709\u9650\u7ef4\uff0c\u5373\u6570\u76ee\u6709\u9650\uff0c\u90a3\u4e48\u4e00\u5b9a\u5b58\u5728\u4e00\u4e2a==\u66f4\u9ad8\u7ef4==\u7684\u7279\u5f81\u7a7a\u95f4\u4f7f\u6837\u672c\u7ebf\u6027\u53ef\u5206\u3002</p> <p>\u5c06\u6837\u672c\u4ece\u539f\u59cb\u7a7a\u95f4\u6620\u5c04\u5230\u4e00\u4e2a==\u66f4\u9ad8\u7ef4==\u7684\u7279\u5f81\u7a7a\u95f4\uff0c\u4f7f\u5f97\u6837\u672c\u5728\u6620\u5c04\u7684\u9ad8\u7ef4\u7a7a\u95f4\u5185\u7ebf\u6027\u53ef\u5206\u3002 \u4f4e\u7ef4 \\(x\\in\\chi\\rightarrow \\phi(x)\\in\\mathcal{F}\\) \u9ad8\u7ef4</p> <p>\ud83d\udca1 a best hyperplane with the largest margin in transformed feature space 1. the largest margin \u662f\u5728 transformed feature space \u91cc\u7684\u8ba1\u7b97 2. \u5728 transformed : hyperplane(Linear); original: non-linear 1. \u8fd9\u4e2a transformed feature space \u53ef\u4ee5\u662f\u540c\u7ef4\u5ea6\uff0c\u4e5f\u53ef\u4ee5\u66f4\u9ad8\u7ef4</p> <p>\u8bbe \\(\\begin{cases}(x, y)\\xrightarrow{\\text{\\red{\u9ad8\u7ef4\u6620\u5c04}}}(\\phi(x), y)\\\\ f(x)\\xrightarrow{\\text{\\red{\u9ad8\u7ef4\u6620\u5c04}}}f(\\phi(x))=w^T\\phi(x)+b=\\sum\\limits_{i=1}^n\\alpha_iy_i&lt;\\phi(x_i), \\phi(x)&gt;+b \\end{cases}\\)</p> <p>\u539f\u59cb\u95ee\u9898\uff1a\\(\\min\\limits_{w^T,b}\\frac{1}{2}{w^T}^2, \\text{ s.t.}\\space y_i(w^T\\phi(x_i)+b)\\ge 1,  \\forall i\\) \u5bf9\u5076\u95ee\u9898\uff1a\\(\\max\\limits_\\alpha-\\cfrac{1}{2}\\sum\\limits_{i=0}^n\\sum\\limits_{j=0}^n\\alpha_i\\alpha_jy_iy_j\\red{&lt;\\phi(x_i)^T\\phi(x_j)&gt;}+\\sum\\limits_{i=1}^n\\alpha_i, \\text{ s.t. }\\begin{cases} \\sum\\limits_{i=1}^n\\alpha_iy_i=0\\\\\\alpha_i\\ge0 \\end{cases}\\)</p> <p> </p> <p>\\(\\red{&lt;\\phi(x_i)^T\\phi(x_j)&gt;}\\) \u662f \\(x_i, x_j\\) \u6620\u5c04\u5230\u9ad8\u7ef4\u7a7a\u95f4\u4e4b\u540e\u7684\u5185\u79ef\u3002\u7531\u4e8e\u7ef4\u5ea6\u5f88\u9ad8\u8ba1\u7b97\u56f0\u96be\uff0c\u6240\u4ee5\u63d0\u51fa \u6838\u51fd\u6570 \\(\\kappa(x_i,x_j)\\)</p>"},{"location":"AI/ML/svm/#kernel-trick","title":"\u6838\u51fd\u6570 kernel trick","text":"<p>So we need kernel tricks to complete the inner product of vectors in the low-dimensional space to reduce the computation cost. \u4e0d\u663e\u5f0f\u5730\u8bbe\u8ba1\u6620\u5c04 \\(\\phi(x)\\)\uff0c\u800c\u662f\u8bbe\u8ba1\u4e00\u4e2a\u6838\u51fd\u6570 \\(\\kappa(x_i,x_j)\\)\uff0c\u6765\u89e3\u51b3\u6620\u5c04\u5230\u9ad8\u7ef4\u5ea6\u7a7a\u95f4\u540e\u51fa\u73b0\u7684\u8ba1\u7b97\u4e0a\u7ef4\u5ea6\u7206\u70b8\u7684\u95ee\u9898\uff0c\u51cf\u5c11\u8ba1\u7b97\u4ee3\u4ef7\u3002 $$\\kappa(x_i,x_j)=&lt;\\phi(x_i),\\phi(x_j)&gt;= \\phi(x_i)^T\\phi(x_j), \\forall x\\in\\chi, \\phi(x)\\in\\mathcal{F} $$</p> <p>\\(\\kappa(x_i,x_j)\\) \u5728\u539f\u59cb\u7a7a\u95f4\u7684\u8ba1\u7b97 \\(\\Leftrightarrow x_i,x_j\\) \u5728\u9ad8\u7ef4\u7a7a\u95f4\u7684\u5185\u79ef\u3002</p> <p>\u9ad8\u7ef4\u8868\u73b0,\u4f4e\u7ef4\u8ba1\u7b97</p> <p>\u7279\u5f81\u662f==\u4ece\u4f4e\u7ef4\u8f6c\u5230\u9ad8\u7ef4==\uff01\uff01\uff01\uff01 \u6838\u6280\u5de7\u662f\u5728\u4f4e\u7ef4\u7a7a\u95f4\u5b8c\u6210\u9ad8\u7ef4\u7a7a\u95f4\u5411\u91cf\u5185\u79ef\u7684==\u8ba1\u7b97==\u3002\u53ea\u662f\u5728\u8ba1\u7b97\u4e0a\u53d6\u5de7\u4e86\u4e00\u4e0b\u3002</p> <p>\u91cd\u5199\uff1a - \u5bf9\u5076\u95ee\u9898\uff1a \\(\\max\\limits_\\alpha-\\cfrac{1}{2}\\sum\\limits_{i=0}^n\\sum\\limits_{j=0}^n\\alpha_i\\alpha_jy_iy_j\\red{\\kappa(x_i,x_j)}+\\sum\\limits_{i=1}^n\\alpha_i, \\text{ s.t. }\\begin{cases} \\sum\\limits_{i=1}^n\\alpha_iy_i=0\\\\\\alpha_i\\ge0\\end{cases}\\) - \u51fd\u6570 \\(f(x)=\\sum\\limits_{i=1}^n\\alpha_iy_i\\red{\\kappa(x_i,x)}+b\\)</p>"},{"location":"AI/ML/svm/#_3","title":"\u6838\u51fd\u6570\u8bbe\u8ba1","text":"<p>\u6ee1\u8db3\uff1a \\(\\(\\begin{bmatrix} \\kappa(x_1,x_1)&amp; \\dotsb&amp;\\kappa(x_1,x_n)\\\\ \\vdots&amp; \\ddots&amp;\\vdots\\\\ \\kappa(x_n,x_1)&amp; \\dotsb&amp;\\kappa(x_n,x_n)\\end{bmatrix}\\succeq0\\)\\) - \u5bf9\u79f0 - \u6838\u77e9\u9635\u534a\u6b63\u5b9a</p> <p>\u9519\u8bef\u7684\u6838\u51fd\u6570\uff0c \u5c06\u6837\u672c\u6620\u5c04\u5230\u4e86\u4e00\u4e2a\u4e0d\u5408\u9002\u7684\u7279\u5f81\u7a7a\u95f4\uff0c\u5bfc\u81f4\u6027\u80fd\u4e0d\u4f73\u3002</p>"},{"location":"AI/ML/svm/#_4","title":"\u5e38\u89c1\u6838\u51fd\u6570","text":"\u540d \\(\\kappa(x_i, x_j)\\) notes \u7ebf\u6027\u6838 \\(x_i^Tx_j\\) for \u7ebf\u6027\u53ef\u5206 \u591a\u9879\u5f0f\u6838 \\((x_i^Tx_j)^d\\) \\(d\\ge1\\) \u9ad8\u65af\u6838 \\(\\exp(-\\cfrac{\\Vert x_i-x_j\\Vert^2}{2\\sigma^2})\\) \\(\\sigma\\) := \u5e26\u5bbd \u62c9\u666e\u62c9\u65af\u6838 \\(\\exp(-\\cfrac{\\Vert x_i-x_j\\Vert}{\\sigma})\\) \\(\\sigma&gt;0\\) Sigmoid\u6838 \\(\\tanh(\\beta x_i^Tx_j+\\theta)\\) \\(\\beta&gt;0,\\theta&lt;0\\)"},{"location":"AI/ML/svm/#svm_1","title":"\u8f6f\u95f4\u9694 SVM","text":"<p>!!! p Q\uff1a\"\u566a\u58f0\u6570\u636e outlier\"     SVM \u8981\u6c42\u6240\u6709\u7684\u6837\u672c\u90fd\u6ee1\u8db3\u7ea6\u675f\u3002\u5f53\u6570\u636e\u4e2d\u5b58\u5728\u566a\u58f0\u6570\u636e\uff0c\u672c\u8eab\u5c31\u504f\u79bb\u4e86\u6b63\u5e38\u4f4d\u7f6e\uff0c \u5bfc\u81f4\u5212\u5206\u7684\u8d85\u5e73\u9762\u88ab\u6324\u6b6a\u4e86\uff0c\u964d\u4f4e\u4e86 SVM \u7684\u6cdb\u5316\u6027\u80fd\u3002\uff08\u751a\u81f3\u8bf4\u4f7f\u5f97\u627e\u4e0d\u5230 SVM</p> <pre><code>!!! danger \"Unfortunately, SVM is allergic to the noises so the robustness of the algorithm is not good.\" \n    we need to add the slack variables \\$\\xi_i$ to allow all training examples not satisfying the constraints strictly. Meanwhile, we set a small C to control the deviation of examples and constraints\n</code></pre> <p>\u8f6f\u95f4\u9694 SVM\uff1a 1. \u5141\u8bb8\u4e00\u4e9b\u6570\u636e\u70b9\u4e0d\u6ee1\u8db3\u7ea6\u675f \\(y_i(w^Tx_i+b)\\ge1\\)\uff0c\u5373\u53ef\u4ee5\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u504f\u79fb\u8d85\u5e73\u9762\u3002 2. \u540c\u65f6\u4f7f\u5f97\u4e0d\u6ee1\u8db3\u7ea6\u675f\u7684\u6570\u636e\u70b9\u5c3d\u53ef\u80fd\u5c11\u3002</p> \\[\\mathcal{L}(w^T,b, \\alpha):= \\frac{1}{2} {w^T}^2\\red{+C}\\sum_{i=1}^n\\red{l_{0|1}(}y_i(w^Tx_i+b)-1\\red{)}\\\\\\space\\\\\\min_{w^T,b}\\max_{\\alpha}\\mathcal{L}(w^T,b, \\alpha)\\\\ \\red{C&gt;0,l_{0|1}(z)=\\begin{cases}0&amp;\\text{otherwise}\\\\1&amp;z&lt;0 \\end{cases}}\\] <p>\\(\\red{C}\\) \u63a7\u5236\u7740\u76ee\u6807\u51fd\u6570\u4e0e\u5f15\u5165\u6b63\u5219\u9879\u4e4b\u95f4\u7684\u6743\u91cd\u3002\u5f53 \\(C\\rightarrow\\infin\\) \u4f1a\u8feb\u4f7f\u6240\u6709\u6837\u672c\u6ee1\u8db3\u7ea6\u675f\u3002 \\(\\(\\Leftrightarrow \\mathcal{L}(w^T,b, \\alpha):= \\frac{1}{2} {w^T}^2\\space\\text{s.t.} y_i(w^Tx_i+b)\\ge1\\)\\)</p> <p>\\(\\red{l_{0|1}(z)}\\) 0-1\u635f\u5931\u51fd\u6570\uff0c\u8868\u73b0\u6548\u679c\u6700\u597d\uff0c\u4f46\u662f\u975e\u51f8\u3001\u975e\u8fde\u7eed\u3001\u6570\u5b66\u6027\u8d28\u4e0d\u597d\uff0c\u4f7f\u5f97\u6c42\u89e3\u56f0\u96be\uff0c\u56e0\u6b64\u4e5f\u53ef\u4f7f\u7528\u5176\u4ed6\u51fd\u6570\u4f5c\u4e3a\u66ff\u6362\u3002</p> <p>\u7279\u70b9|\u51f8\u7684\u3001\u8fde\u7eed\u3001\u662f \\(l_{0\uff5c1}(z)\\) \u4e0a\u754c |--|--| hinge | \\(\\max(0, 1-z)\\) exponential | \\(\\exp(-z)\\) logistic | \\(\\log(1+\\exp(-z))\\)</p>"},{"location":"AI/ML/svm/#hinge","title":"hinge","text":"<p>\\(\\(\\mathcal{L}(w^T,b, \\alpha):= \\frac{1}{2} {w^T}^2\\red{+C}\\sum_{i=1}^n\\red{\\max(0, 1-}y_i(w^Tx_i+b)\\red{)}\\)\\) \u5f15\u5165\u677e\u5f1b\u53d8\u91cf \\(\\xi\\)</p> \\[\\frac{1}{2} {w^T}^2+C\\sum_{i=0}^n\\red{\\xi_i}\\\\ \\text{s.t.} y_i(w^Tx_i+b)\\ge\\red{1-\\xi_i},\\space \\xi_i\\gt0\\] <p>\\(\\red{\\xi_i}\\), \u6bcf\u4e2a\u6837\u672c\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u677e\u5f1b\u53d8\u91cf\uff0c\u6765\u8868\u793a\u8be5\u6837\u672c\u4e0d\u6ee1\u8db3\u7ea6\u675f\u7684\u7a0b\u5ea6\u3002 \u4f7f\u7528\u62c9\u683c\u6717\u65e5\u4e58\u5b50\u6cd5\uff1a</p> \\[\\mathcal{L}(w^T,b,\\xi, \\alpha,\\beta):= \\frac{1}{2} {w^T}^2+C\\sum_{i=0}^n\\red{\\xi_i}-\\sum_{i=0}^n\\alpha_i(y_i(w^Tx_i+b)-1+\\xi_i)-\\sum_{i=0}^n\\beta_i\\xi_i\\\\ \\alpha_i, \\beta_i\\ge0, \\text{\u62c9\u683c\u6717\u65e5\u4e58\u5b50}\\] <p>\u6c42 \\(\\cfrac{\\partial\\mathcal{L}(\\cdot)}{\\partial w^T}=\\cfrac{\\partial\\mathcal{L}(\\cdot)}{\\partial b}=\\cfrac{\\partial\\mathcal{L}(\\cdot)}{\\partial \\xi}\\xlongequal{SET}0\\)</p> \\[\\begin{align*} \\cfrac{\\partial\\mathcal{L}(\\cdot)}{\\partial w^T}&amp;=w^T-\\sum_{i=0}^n\\alpha_iy_ix_i&amp;=0 &amp;\\implies w^T=\\sum_{i=0}^n\\alpha_iy_ix_i \\\\ \\cfrac{\\partial\\mathcal{L}(\\cdot)}{\\partial b}&amp;=\\sum_{i=0}^n \\alpha_iy_i&amp;=0\\\\ \\cfrac{\\partial\\mathcal{L}(\\cdot)}{\\partial \\xi_i}&amp;=C-\\alpha_i-\\beta_i&amp;=0&amp;\\implies C=\\alpha_i+\\beta_i \\end{align*}\\] <p>\u552f\u4e00\u7684\u5dee\u522b\u5728\u4e8e\u5bf9\u5bf9\u5076\u53d8\u91cf\u7684\u7ea6\u675f\u4e0d\u540c</p> \u8f6f\u95f4\u9694 \u786c\u95f4\u9694 \\(0\\le\\alpha_i\\red{\\le C}\\) \\(0\\le\\alpha_i\\) <p>\u6839\u636e KKT \u5bf9\u5076\u4e92\u8865\u6761\u4ef6\uff0c\u5206\u6790\u5e26\u677e\u5f1b\u53d8\u91cf\u7684 SVM \u4f18\u5316\u95ee\u9898\u4e2d\uff0c\u56fe\u4e0a\u6240\u793a\u7684 \\(ABCDEFGHIJKL\\)\u8fd9\u51e0\u4e2a\u70b9\u7684\u677e\u5f1b\u53d8\u91cf \\(\\xi_i\\), \u62c9\u683c\u6717\u65e5\u56e0\u5b50\\((\\alpha_i,\\mu_i)\\),\u6b63\u5219\u5316\u53d8\u91cf \\(C\\)\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u6ce8\u610f\uff1a\\(0\\le\\alpha_i\\le C,\\mu_i\\ge0,\\xi_i\\ge0,\\) \u5bf9\u5076\u4e92\u8865\u6761\u4ef6\u4e3a \\(\\alpha_i(1-y_i(w^Tx_i)-\\xi_i)=0,\\mu_i\\xi_i=0\\)</p>"},{"location":"CV/","title":"Introduction","text":""},{"location":"CV/#problems","title":"Problems","text":"<ul> <li>Viewpoint variation\uff0c\u89c2\u5bdf\u89d2\u5ea6\u7684\u53d8\u5316     \u201c\u4e0d\u8bc6\u5e90\u5c71\u771f\u9762\u76ee\uff0c\u53ea\u7f18\u8eab\u5728\u6b64\u5c71\u4e2d\u201d\u3002</li> <li>Scale variation\uff0c\u5c3a\u5ea6\u53d8\u6362</li> <li>Deformation\uff0c\u53d8\u5f62     \u732b\u662f\u6db2\u4f53\u3002</li> <li>Occlusion\uff0c\u906e\u6321</li> <li>Illumination\uff0c\u5149\u7ebf</li> <li>Background Clutter\uff0c\u80cc\u666f\u5e72\u6270     \u5982\u679c\u7269\u4f53\u548c\u80cc\u666f\u6709\u5f88\u76f8\u4f3c\u7684\u989c\u8272\u548c\u7eb9\u8def\uff0c\u90a3\u4e48\u5c31\u5f88\u96be\u88ab\u8bc6\u522b\u3002</li> <li>Intra-class variation \u79cd\u95f4\u5dee\u5f02     \u540c\u4e00\u7269\u79cd\u53ef\u80fd\u4e5f\u6709\u5dee\u5f02\u5f88\u5927\u7684\u5f62\u6001 </li> </ul>"},{"location":"CV/#data","title":"Data","text":""},{"location":"CV/#image","title":"image","text":""},{"location":"CV/#image-classification","title":"Image Classification","text":""},{"location":"CV/#knn","title":"KNN","text":"<ul> <li>\u8ddd\u79bb\u662f\u4ec0\u4e48   pixel-wise \u50cf\u7d20\u7ea7\u522b   $$ d_{L1}(I1, I2)=\\sum\\limits_{p}|{I_1}_p-{I_2}_p| $$</li> </ul>"},{"location":"NLP/asr/","title":"Automatic Speech Recognition ASR","text":"<p>Traditionally, ASR systems consist of acoustic, pronunciation and language models that are optimized independently.</p>"},{"location":"NLP/asr/#code-switching","title":"Code-switching","text":"<p>\u540c\u6211\u518d check \u4e00\u4e0b\uff1f intra-sentential code-switching \u53e5\u5185\u8f6c\u6362\u3002 \u540c\u6211\u518d\u68c0\u67e5\u4e00\u4e0b\u3002 I will arrive at Friday. inter-sentential code-switching \u53e5\u5916\u8f6c\u6362\u3002</p> <p>challenges for traditional ASR based system:</p> <ul> <li>the requirement of hand-crafted components, such as a well-designed mixed phone set and the corresponding pronunciation lexicon.</li> </ul> <p>End-to-end (E2E) models directly optimize the probability of output sequences given input speech observations with a single network, thus provide an elegant solution to build a ASR system. Recent work on E2E models can be categorized into three main approaches: Connectionist Temporal Classifi- cation (CTC) [6], RNN-Transducer [7, 8] and attention-based sequence-to-sequence models [9, 10]. Besides, joint CTC- attention model [11, 12] exploits the advantages from both CTC and sequence-to-sequence models within the multi-task learn- ing framework, which leads to better performance and robust- ness. E2E ASR models have made promising progress in many areas including monolingual [13, 14], multilingual [15, 16] and multi-speaker [17] speech recognition task. It\u2019s also shown that attention-based sequence-to-sequence models are able to</p>"},{"location":"NLP/embedding/","title":"Word Representation","text":"<p>Word Stemming\uff0c\u8bcd\u5e72\u62bd\u53d6 \u5c06\u4e0d\u540c\u8bcd\u6027\u3001\u5f62\u6001\u7684\u5355\u8bcd\u7edf\u4e00\u6210\u4e3a\u540c\u4e00\u8bcd\u5e72\u7684\u5f62\u5f0f</p> <pre><code>graph LR\nA[Word Representation]\nB[BagofWords]\nC[WordEmbedding]\nD[Word2vec]\nE[CBOW]\nF[Skip-gram]\nG[N-gram]\nH[Topic Model]\n\nA -.- B\nA -.- C\nC -.- D\nD -.- E\nD -.- F\nA -.- G\nA -.- H</code></pre>"},{"location":"NLP/embedding/#tfidf","title":"TFIDF","text":"<p>\u7406\u89e3\uff1a</p> <ul> <li>TF\uff1a\u5982\u679c\u4e00\u4e2a\u8bcd\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\u51fa\u73b0\u5f88\u591a\u6b21\uff0c\u90a3\u4e48\u5b83\u53ef\u80fd\u662f\u8fd9\u7bc7\u6587\u7ae0\u7684\u5173\u952e\u8bcd</li> <li>IDF\uff1a\u5982\u679c\u4e00\u4e2a\u8bcd\u5728\u5f88\u591a\u6587\u7ae0\u4e2d\u91cc\u90fd\u51fa\u73b0\uff0c\u90a3\u4e48\u5b83\u53ef\u80fd\u662f\u4e00\u4e2a\u6bd4\u8f83\u901a\u7528\u7684\u8bcd</li> </ul>"},{"location":"NLP/embedding/#bag-of-words","title":"\u8bcd\u888b\u6a21\u578b Bag of Words","text":"<p>\u7ef4\u5ea6\u662f\u8bcd\u888b\u7684\u5927\u5c0f\uff0c\u72ec\u70ed\u7f16\u7801 \u5355\u7eaf\u7528\u8bcd\u888b\u6a21\u578b Binary vector \u662f\u884c\u4e0d\u901a\u7684\uff1a     1. \u8fc7\u4e8e\u9ad8\u7ef4\uff0c\u51e0\u5341\u4e07\u7684\u8bcd\u5c31\u5f97\u6709\u51e0\u5341\u4e07\u7684\u7ef4\u5ea6     2. \u8fc7\u4e8e\u50bb\u74dc\uff0c\u4e0d\u80fd\u901a\u8fc7 \u5411\u91cf\u7684\u6570\u503c \u4f53\u73b0\u66f4\u591a\u7684\u4fe1\u606f     3. \u8fc7\u4e8e\u4f9d\u8d56\uff0c\u672a\u51fa\u73b0\u5728\u8bcd\u888b\u7684\u8bcd\u4e0d\u80fd\u8868\u793a</p>"},{"location":"NLP/embedding/#n-gram","title":"N-gram","text":"<p>\u8fde\u7eed\u51fa\u73b0\u7684n\u4e2a\u8bcd\u7ec4\u6210\u7684\u8bcd\u7ec4 as \u4e00\u4e2a\u5355\u72ec\u7684\u7279\u5f81</p>"},{"location":"NLP/embedding/#topic-model","title":"Topic Model","text":"<p>\u6bcf\u4e2a\u4e3b\u9898\u4e0a\u9762\u8bcd\u7684\u5206\u5e03\u7279\u6027\uff09\uff0c\u5e76\u4e14\u80fd\u591f\u8ba1\u7b97\u51fa\u6bcf\u7bc7\u6587\u7ae0\u7684\u4e3b\u9898\u5206\u5e03</p>"},{"location":"NLP/embedding/#word-embedding","title":"Word Embedding","text":"<p>\u4e0e\u5168\u8fde\u63a5\u7684\u7f51\u7edc\u7ed3\u6784\u76f8\u6bd4\uff0c\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\u548c\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u4e00\u65b9\u9762\u5f88\u597d\u5730\u6293\u4f4f\u4e86\u6587\u672c\u7684\u7279\u6027\uff0c\u53e6\u4e00\u65b9\u9762\u53c8\u51cf\u5c11\u4e86\u7f51\u7edc\u4e2d\u5f85\u5b66\u4e60\u7684\u53c2\u6570\uff0c\u63d0\u9ad8\u4e86\u8bad\u7ec3\u901f\u5ea6\uff0c\u5e76\u4e14\u964d\u4f4e\u4e86\u8fc7\u62df\u5408\u7684\u98ce\u9669\u3002</p> <p>a word embedding is a representatin of a word. \u5c06\u6587\u672c\u6620\u5c04\u5230\u6570\u5b66\u7a7a\u95f4\u4e2d\uff0c\u4ee5\u5411\u91cf\u7684\u5f62\u5f0f\u53ef\u4ee5\u4fdd\u7559\u5176\u8bed\u4e49, \u65e8\u5728\u7528\u5411\u91cf\u7684\u8fd0\u7b97\u63a8\u5bfc\u51fa\u8bed\u4e49\u3002 \u5c06\u6bcf\u4e2a\u8bcd\u90fd\u6620\u5c04\u6210\u4f4e\u7ef4\u7a7a\u95f4\uff08\u901a\u5e38K=50\uff5e300\u7ef4\uff09\u4e0a\u7684\u4e00\u4e2a\u7a20\u5bc6\u5411\u91cf\u3002</p> <p>'King' - 'Man' + 'Woman' = 'Queen'</p> <p></p>"},{"location":"NLP/embedding/#background","title":"Background","text":"<p>\u4e0d\u4ec5\u662f\u672c\u4e49\u76f8\u4f3c\u8981\u5728\u4e00\u5757\uff0c\u9ad8\u5ea6\u76f8\u5173\u7684\u4e5f\u8981\u5728\u4e00\u5757</p> <p>words that are closer in the vector dpace are expected to be similar(cosine) in meaning</p> <p>Word Similarity \u76f8\u4f3c &amp; Linguistic Relationships \u76f8\u5173</p> <ul> <li>Word Similarity \uff5e Synonyms     \u8bb2\u7a76\u540c\u4e49\uff0c\u76f8\u4f3c\u610f\u4e49\uff0c\u53ef\u4ee5\u66ff\u6362\u800c\u4e0d\u5f71\u54cd\u672c\u4e49</li> <li>Linguistic Relationships     \u4fa7\u91cd\u76f8\u5173\uff0c\u4e0d\u80fd\u66ff\u6362     |relationship|example|     |--|--|     \u7236\u5b50\u7ea7 | \u6cd5\u56fd-\u5df4\u9ece     \u53cd\u4e49|\u6b63-\u8d1f</li> </ul>"},{"location":"NLP/embedding/#algorithm","title":"Algorithm","text":"<p>\u4e2a\u4eba\u7406\u89e3</p> <p>\u8fc7\u7a0b\u7c7b\u4f3c\u4e8e\uff1a\u5b66\u4e60\u4e00\u4e2a\u62bd\u8c61\u8bcd\u6bd4\u5982<code>\u9ad8\u5174</code>\uff0c\u4e00\u5f00\u59cb\u5e76\u4e0d\u786e\u5207\u77e5\u9053\u662f\u4ec0\u4e48\uff0c\u4f46\u662f\u5f53\u8bfb\u5b8c\u5f88\u591a\u7bc7\u6587\u7ae0\uff0c\u6807\u4e3a<code>\u79ef\u6781</code>\u7684\u60c5\u611f\u7684\u6587\u7ae0\u5927\u90e8\u5206\u6709\u5b83\uff0c\u6807\u4e3a<code>\u6d88\u6781</code>\u7684\u6587\u7ae0\u786e\u5f88\u5c11\u6709\u5b83\u3002\u6b64\u65f6\u5927\u6982\u80fd\u6478\u7d22\u51fa<code>\u9ad8\u5174</code>\u5c5e\u4e8e\u79ef\u6781\u7684\u4e00\u7c7b\u8bcd\uff0c\u5b83\u8bed\u4e49\u7684\u67d0\u4e00\u90e8\u5206\u7ec4\u6210\u5c31\u662f<code>\u79ef\u6781</code>\u3002 \u901a\u8fc7\u4e0b\u6e38\u4efb\u52a1\u6765\u786e\u5b9a\u8bcd\u4e49 \\(\\implies\\) \u4e0d\u540c\u7684\u4e0b\u6e38\u4efb\u52a1\u5c06\u51b3\u5b9a\u8bcd\u4e49\u7684\u83b7\u5f97</p> <p>word2vec \u7684\u4e0b\u6e38\u4efb\u52a1\uff0c\u5c31\u662f\u9884\u6d4b\u9644\u8fd1\u7684\u8bcd</p>"},{"location":"NLP/embedding/#word2vec","title":"Word2Vec","text":"<p>\u5b9e\u9645\u7684 word2vec \u5c31\u662f\u4e00\u4e2a==\u4e09\u5c42\u795e\u7ecf\u7f51\u7edc==</p> <p>\u7f51\u7edc\u5c42(#\u795e\u7ecf\u5143)\uff1a\u8f93\u5165\u5c42\\((V)\\xrightarrow{W\\in[V\\times N]}\\) \u9690\u85cf\u5c42\\((N)\\xrightarrow{W'\\in[N\\times V]}\\) \u8f93\u51fa\u5c42 \\((V)\\) </p> <p>\u8bad\u8fd9\u6837\u4e00\u4e2a\u5e26\u4e00\u4e2a\u9690\u85cf\u5c42\u7684NN\u662f\u4e3a\u4e86 \u8fd9\u4e2a==\u4e0b\u6e38\u4efb\u52a1prediction task==\uff0c \u4f46\u76ee\u7684\u5176\u5b9e\u662f\u8981\u5b66\u8fd9\u4e2a word embedding = \u9690\u85cf\u5c42\u7684\u6743\u91cd</p> <p>\u7406\u89e3\uff1a \u6a21\u578b\u4e2d\u7684\u6bcf\u4e2a\u9690\u5c42\u90fd\u53ef\u4ee5\u8ba4\u4e3a\u5bf9\u5e94\u7740\u4e0d\u540c\u62bd\u8c61\u5c42\u6b21\u7684\u7279\u5f81\uff0c\u62bd\u53d6\u51fa\u4e00\u4e9b\u9ad8\u5c42\u7684\u8bed\u4e49\u7279\u5f81</p> \\[ V:=\\text{\u8bcd\u888b\u5927\u5c0f vocabulary} \\\\N:=\\text{\u5d4c\u5165\u7ef4\u5ea6 embedding = \u9690\u85cf\u5c42\u795e\u7ecf\u5143\u5927\u5c0f} \\]"},{"location":"NLP/embedding/#one-word-context","title":"one-word context (\u6700\u7b80\u5355\u6765\u8bf4\u660e)","text":"<p>\u901a\u8fc7 back propagation \u4f7f\u5f97 \u540c\u5728\u4e00\u4e2a\u573a\u666f\uff08\u4e5f\u5c31\u662f\u771f\u5b9e\u6570\u636e\u96c6\u6240\u7ed9\u7684 pairs\uff09\u7684\u8bcd\u8bed\u5411\u91cf\u76f8\u4f3c\u5ea6\u4f1a\u63a5\u8fd1, similarity between word vector pairs\uff0c\\(\\lrArr N\\) \u7ef4\u7a7a\u95f4\u4e2d\uff0c\u76f8\u5173\u6027\u9ad8\u7684\u8bcd\u8bed\u4f1a\u9760\u8fd1\uff0c\u76f8\u5173\u6027\u4f4e\u4f4e\u8bcd\u8bed\u4f1a\u76f8\u4e92\u8fdc\u79bb\u3002</p> <p>\\(\\cfrac{\\partial \\text{loss}}{\\partial W'}\\implies\\nabla W'_j\\approx\\begin{cases}-h=-W_I&amp;j\\neq j^*\\\\+h=+W_I&amp;j=j^*\\end{cases}\\lrArr\\) \u4e00\u4e2a\u8f93\u5165\u5bf9\u4e0d\u540c\u8f93\u51fa(\u76f8\u5173\u6027\u9ad8\u548c\u76f8\u5173\u6027\u4f4e)\u7684\u5f71\u54cd</p> <p>\\(\\cfrac{\\partial\\text{loss}}{\\partial W_i}\\implies\\nabla W_i=\\begin{cases}0&amp;i\\neq I\\\\\\sum e_jW'_j&amp;i=I\\end{cases}\\lrArr\\) \u4e0d\u540c\u7684\u8f93\u51fa\u5bf9\u4e00\u4e2a\u8f93\u5165\u7684\u62c9\u626f</p> <p>\u540c\u65f6\uff0c\u7ecf\u8fc7\u5f88\u591a\u8f6e iterations \u4f7f\u5f97 \u4e00\u4e2a\u8bcd \u5728\u4e0d\u540c\u573a\u666f\u4e0b\u7684\u8bed\u4e49\u8fdb\u884c\u201c\u52a0\u6743\u7ec4\u6210\u201d</p> <p> </p> CBOW Skip-gram Same Word2vec,\u6d45\u5c42\u7684\u795e\u7ecf\u7f51\u7edc &lt; \u76ee\u6807 \u6839\u636e\u4e0a\u4e0b\u6587\u51fa\u73b0\u7684\u8bcd\u8bed\u9884\u6d4b\u5f53\u524d\u8bcd\u7684\u751f\u6210\u6982\u7387 \u6839\u636e\u5f53\u524d\u8bcd\u9884\u6d4b\u4e0a\u4e0b\u6587\u4e2d\u5404\u8bcd\u7684\u751f\u6210\u6982\u7387 \u7f51\u7edc\u7ed3\u6784 1-&gt;N N-&gt;1"},{"location":"NLP/embedding/#cbow-continues-bag-of-words-n1","title":"CBOW, Continues Bag of Words n\u27a1\ufe0f1","text":"<p>\u76f8\u8f83\u4e8eone-word context</p> <ul> <li>input = \u6240\u6709\u8f93\u5165\u5355\u8bcd\u7684\u5e73\u5747 \u2b05\ufe0f \u53ea\u6709\u4e00\u4e2a\u8f93\u5165\u7684\u5355\u8bcd</li> </ul>"},{"location":"NLP/embedding/#skip-gram-1n","title":"Skip-Gram 1\u27a1\ufe0fn","text":"<ul> <li> skip-gram \u7684\u8f93\u51fa\u4e2a\u6570\u56fa\u5b9a\u5417\uff1f</li> <li> \u7528\u540c\u4e00\u4e2a\\(W'\\)\u600e\u4e48\u80fd\u8f93\u51fa C multi- distribution \u7684\u7ed3\u679c\uff1f</li> </ul>"},{"location":"NLP/embedding/#qa","title":"Q&amp;A","text":"<p>\u901a\u8fc7 Q&amp;A \u518d\u6b21\u68b3\u7406\u5173\u7cfb\uff0c\u57fa\u4e8e one-word context</p> <ul> <li> \u4e3a\u4ec0\u4e48\u9690\u85cf\u5c42\u7684\u53c2\u6570\u77e9\u9635 \\(W\\) \u5c31\u662f word vector = word embedding\uff1f \u4ece input \u548c target output\u6765\u770b\uff1a<ul> <li>input \\(x\\) \u662f\u4e00\u4e2a binary vector\uff0c\u53ea\u6709 given word(\u5728\u8bcd\u888b\u7684\u7d22\u5f15\u662f\\(I\\) )\u662f 1\uff0c \u5176\u4f59\u7684\u90fd\u662f 0\u3002   \\(\\implies h=W^Tx\\), \u53ea\u6709 \\(W^T\\)\u7684\u4e00\u5217 = \\(W\\)\u7684\u4e00\u884c = \\(W_I\\) \u662f\u6709\u7528\u7684 \\(\\implies h=W_I\\) \uff0c\u4f20\u5165\u6a21\u578b\u7684 \u5c31\u53ea\u6709\u7b2c \\(I\\) \u90a3\u4e48\u4e00\u4e2a\u8bcd\uff0c\u4e5f\u5c31 \u53c2\u6570\u77e9\u9635 \\(W\\) \u7b2c \\(I\\) \u884c \\(W_I\\)\u90a3\u4e48\u4e00\u4e2a\u5411\u91cf\u3002 \u6240\u4ee5\u975e\u5e38\u81ea\u7136\u5730\uff0c \\(\\text{word}_I\\lrArr W_I\\implies \\text{words}_{in}\\lrArr W_{in}\\)</li> <li>target output \\(\\hat{y}\\) \u540c\u6837\u662f\u4e00\u4e2a binary vector\uff0c\u53ea\u6709 target word(\u5728\u8bcd\u888b\u7684\u7d22\u5f15\u662f\\(j^*\\)) \u662f 1\uff0c \u5176\u4f59\u90fd\u662f 0\u3002\uff08\u548c\u524d\u9762\u7c7b\u4f3c\uff09 \\(\\implies \\hat{y}=\\text{softmax}(W'^Th)\\rightarrow{\\text{\u7406\u60f3\u60c5\u51b5}}\\begin{cases}\\hat{y}_{j^*}=y_{j^*}=1\\lrArr W'^T_{j^*}h=1&amp;j= j^* \\\\\\hat{y}_j=y_j=0\\lrArr W'^T_jh=0&amp;j\\neq j^* \\end{cases}\\) \\(\\implies\\) \u8f93\u51fa\u6a21\u578b\u7684 \u5c31\u53ea\u6709\u7b2c \\(j^*\\) \u90a3\u4e48\u4e00\u4e2a\u8bcd\uff0c\u9664\u53bb\u4ee3\u8868\u8f93\u5165\u8bcd \u7684\\(h=W_I\\), \u4e5f\u5c31 \u53c2\u6570\u77e9\u9635 \\(W'\\)\u7b2c \\(j^*\\)\u5217 \\(W'^T_{j^*}\\)\u90a3\u4e48\u4e00\u4e2a\u5411\u91cf\u53c2\u4e0e\u5230\u8fd0\u7b97\u3002 \u6240\u4ee5\u975e\u5e38\u81ea\u7136\u5730\uff0c \\(\\text{word}_{j^*}\\lrArr W'^T_{j^*}\\implies \\text{words}_{out}\\lrArr W'^T_{out}\\)<ul> <li>\u8f93\u5165\u548c\u8f93\u51fa\u540c\u662f\u4e00\u4e2a\u8bcd\u888b\uff0c\u6240\u4ee5\u7ecf\u8fc7\u8fd9\u4e2a\u8bad\u7ec3\uff0c\u540c\u65f6==\u6709\u4e24\u79cd\u4e0d\u540c==\u7684\u5d4c\u5165</li> <li> \u4e3a\u4ec0\u4e48\u4e0d\u770b output\uff1f \u3001   \u56e0\u4e3a output \u7684\u503c\u8fd8\u8ddf\u6a21\u578b\u80fd\u529b\u6709\u5173\u3002target output \u66f4\u80fd\u4f53\u73b0\u7406\u8bba\u4e0a\u7684\u8bbe\u8ba1\u3002</li> </ul> </li> </ul> </li> <li> \u4e3a\u4ec0\u4e48 \\(W\\),\\(W'\\) \u4e0d\u4e00\u6837</li> <li>\\(h=W_I\\)\uff0c\u8f93\u5165\u5b8c\u5168\u7531 \\(W_I\\)\u7ec4\u6210\uff1b</li> <li> \u4e3a\u4ec0\u4e48\u8981\u6254\u6389 <code>contex matrix</code>\uff0c\u53ea\u8981 <code>matirx</code>\uff1f     \u5176\u5b9e\u9009\u62e9 \\(W\\)\u8fd8\u662f\\(W'\\)\u4f5c\u4e3a word embedding matrix \u90fd\u662f\u4e2a\u4eba\u9009\u62e9\u3002     \\(W\\) \u2705\uff0c \\(W'\\) \u2705\uff0c \\(\\cfrac{W+W'}{2}\\) \u2705   ...</li> <li> \u4e3a\u4ec0\u4e48</li> </ul>"},{"location":"NLP/embedding/#trciks","title":"\u4e00\u4e9btrciks","text":""},{"location":"NLP/embedding/#hierarchical-softmax","title":"Hierarchical Softmax","text":""},{"location":"NLP/embedding/#negative-sampling","title":"Negative Sampling","text":"<p>\u6570\u636e\u96c6\u4e0d\u5e94\u8be5\u53ea\u6709 \u6b63\u786e\u7684 \u2018A\\(\\rightarrow\\)B\u2019\uff0c \u2018B\\(\\rightarrow\\)C\u2019\uff0c\u5e94\u8be5\u8fd8\u6709 \u2018A\\(\\nrightarrow\\)D\u2018,\u2018A\\(\\nrightarrow\\)E\u2018</p> <p></p>"},{"location":"NLP/gpt/","title":"GPT","text":""},{"location":"NLP/gpt/#utilize-tool-in-gpt","title":"utilize tool in GPT","text":"<p>LLM \u662f\u95ee\u7b54\u5bf9\u8bdd\u3002</p> <p>\u60f3\u8981\u5728 LLM \u91cc\u4f7f\u7528\u5de5\u5177\uff0c\u8b6c\u5982\u8bf4 google search.</p> <p>\u5728\u804a\u5929\u673a\u5668\u4eba chatdoc \u4f7f\u7528 Recommendation tool\u3002</p>"},{"location":"NLP/gpt/#call-function","title":"Call Function","text":"<p>Process:</p> <ol> <li>Define tools<ol> <li>Name</li> <li>Description\uff1aWhen to call</li> <li>Parameters</li> <li>\uff08application API\uff1f\uff09</li> </ol> </li> <li>REACT prompt     \u4f7f\u7528 <code>str{}.format()</code> \u683c\u5f0f</li> </ol> <pre><code>Thought\nAction {Search}\nInput {query}\nObservation {}\nFinal Answer {}\n</code></pre> <p>\u4f1a\u4e0d\u4f1a\u51fa\u73b0 infinite loop \u81f4\u4f7f quota | local memory \u88ab\u6d88\u8017\u5b8c</p>"},{"location":"NLP/huggingface/","title":"?","text":""},{"location":"NLP/huggingface/#_2","title":"\u65b9\u6cd5\u4e0b\u8f7d","text":"<p>\u6765\u81ea\u5982\u4f55\u5feb\u901f\u4e0b\u8f7dhuggingface\u6a21\u578b\u2014\u2014\u5168\u65b9\u6cd5\u603b\u7ed3\u7684\u63a8\u8350</p> <p>Linux/Mac OS/windows \u9ed8\u8ba4\u63a8\u8350\u4f7f\u7528huggingface-cli\uff0c\u5bf9\u5916\u7f51\u8fde\u63a5\u8f83\u597d\uff08\u4e22\u5305\u5c11\uff09\u7684\u65f6\u5019\uff0c\u53ef\u5c1d\u8bd5 huggingface-cli+hf_transfer\uff08\u53ef\u9009\uff09\u3002 \u7f51\u7edc\u8fde\u63a5\u4e0d\u597d\uff0c\u63a8\u8350\u5148GIT_LFS_SKIP_SMUDGE=1 git clone\uff0c\u5176\u6b21\u518d\u5bf9\u5927\u6587\u4ef6\u7528\u7b2c\u4e09\u65b9\u3001\u6210\u719f\u7684\u591a\u7ebf\u7a0b\u4e0b\u8f7d\u5de5\u5177\uff0cLinux \u63a8\u8350hfd\u811a\u672c+aria2c\uff0cWindows \u63a8\u8350 IDM\u3002\u7528\u7b2c\u4e09\u65b9\u5de5\u5177\u7684\u597d\u5904\u662f\uff0c\u4e0b\u8f7d\u4e0a\u767eGB\u7684\u6a21\u578b\u3001\u6570\u636e\u96c6\uff0c\u4f60\u53ef\u4ee5\u653e\u4e2a\u4e00\u665a\u4e0a\uff0c\u7b2c\u4e8c\u5929\u5c31\u4e0b\u8f7d\u597d\u4e86\uff0c\u800c\u4e0d\u662f\u7b2c\u4e8c\u5929\u65e9\u6668\u53d1\u73b0\u4e0b\u8f7d\u4e8610%\u65ad\u4e86\u8fd8\u5f97\u7ee7\u7eed\u3002 \u5076\u5c14\u5c0f\u6587\u4ef6\u4e0b\u8f7d\uff0c\u76f4\u63a5\u8bbf\u95ee\u955c\u50cf\u7ad9\uff0c\u7528\u6d4f\u89c8\u5668\u4e0b\u8f7d\u3002</p> <p>\u76ee\u524d\u6ca1\u7528\u5230\u5f88\u5927\u7684\u6a21\u578b\uff0c\u6240\u4ee5\u7528snapshot_download enough</p>"},{"location":"NLP/huggingface/#from_pretrained","title":"\u76f4\u63a5 <code>from_pretrained</code>","text":"<p>\u5982\u679c\u5728\u670d\u52a1\u5668\u4e0a\u76f4\u63a5git clone\uff0c\u5c31\u4f1a\u8981\u4e0d\u65ad\u5730\u4e0b\u8f7d\u6240\u7528\u7684model\uff0c\u5bfc\u81f4\u5185\u5b58\u7684\u6d6a\u8d39\u3002\u9700\u8981\u6307\u5b9a\u4e00\u4e2a\u201c\u7edd\u5bf9\u201d\u5730\u5740\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u91cd\u7528\u4e0b\u8f7d\u7684\u6a21\u578b\u3002</p> <p>\u81ea\u52a8\u4e0b\u8f7d\u5230 root/.cache/huggingface/transformers</p> <ol> <li> <p>\u6bcf\u6b21\u90fd\u4f20\u5165\u53c2\u6570<code>cache_dir</code></p> <pre><code>from transformers impoet AutoModel\nAutoModel.from_pretrained(, cache_dir='')\n</code></pre> </li> <li> <p>\u8bbe\u7cfb\u7edf\u53d8\u91cf<code>TRANSFORMERS_CACHE</code></p> </li> </ol> <p>\u4fee\u6539huggingface transformers\u9ed8\u8ba4\u7f13\u5b58\u6587\u4ef6\u5939</p>"},{"location":"NLP/huggingface/#snapshot_download","title":"<code>snapshot_download</code> \u3010\u63a8\u8350\u3011","text":"<p>downloads an entire repository at a given revision.</p> <p>\u9ed8\u8ba4\u4e0b\u8f7d\u6700\u65b0\u7684\u7248\u672c\uff0c\u5982\u679c\u8981\u6307\u5b9a\u7248\u672c\uff0c\u4f20 <code>revision=specific_version</code></p> <p>\u53ef\u4ee5\u901a\u8fc7 <code>allow_patterns</code> | <code>ignore_patterns</code> \u6765\u6307\u5b9a\u6216\u6392\u9664\u7279\u5b9a\u6587\u4ef6\u4e0b\u8f7d</p> <p>local_dir must be a path to a folder on your system.</p> <p>\u652f\u6301\u65ad\u70b9\u7eed\u4f20\u3001\u591a\u7ebf\u7a0b\u3001\u6307\u5b9a\u8def\u5f84\u3001\u914d\u7f6e\u4ee3\u7406\u3001\u6392\u9664\u7279\u5b9a\u6587\u4ef6\u7b49\u529f\u80fd\u3002\u7136\u800c\u6709\u4e24\u4e2a\u7f3a\u70b9\uff1a</p> <ol> <li>\u8be5\u65b9\u6cd5\u4f9d\u8d56\u4e8e transformers \u5e93\uff0c\u800c\u8fd9\u4e2a\u5e93\u662f\u4e2a\u5f00\u53d1\u7528\u7684\u5e93\uff0c\u5bf9\u4e8e\u81ea\u52a8\u5316\u8fd0\u7ef4\u6709\u70b9\u91cd\uff1b</li> <li>\u8be5\u65b9\u6cd5\u8c03\u7528\u6bd4\u8f83\u590d\u6742\uff0c\u53c2\u6570\u8f83\u591a\uff0c\u4f8b\u5982\u9ed8\u8ba4\u4f1a\u68c0\u67e5\u7528\u6237\u7f13\u5b58\u76ee\u5f55\u4e0b\u662f\u5426\u5df2\u6709\u5bf9\u5e94\u6a21\u578b\uff0c\u5982\u5df2\u6709\u5219\u4f1a\u521b\u5efa\u7b26\u53f7\u94fe\u63a5\uff0c\u4e0d\u7406\u89e3\u7684\u5bb9\u6613\u5bfc\u81f4\u95ee\u9898\u3002</li> </ol> <pre><code>pip install huggingface_hub\n</code></pre> download.py<pre><code># if need login in\nimport huggingface_hub\nhuggingface_hub.login('HF_token')\n# token \u4ece https://huggingface.co/settings/tokens \u83b7\u53d6\n\nfrom huggingface_hub import snapshot_download\nsnapshot_download(  # download model\n    repo_id='google/mt5-base',  # model\u5728HF\u7684\u8def\u5f84\n    local_dir='./model/'  # \u8981\u4e0b\u8f7d\u7684\u4f4d\u7f6e\n)\n\nsnapshot_download(  # download dataset\n    repo_id='google/fleurs',  # model\u5728HF\u7684\u8def\u5f84\n    repo_type='dataset'\n    local_dir='./data/'  # \u8981\u4e0b\u8f7d\u7684\u4f4d\u7f6e\n)\n</code></pre> load.py<pre><code>local_path = './model/'\nmodel = AutoModel.from_pretrained(local_path)\n</code></pre>"},{"location":"NLP/huggingface/#_3","title":"\u6a21\u578b\u9700\u8981\u8bb8\u53ef","text":"<p>\u600e\u4e48\u770b\u6a21\u578b\u662f\u5426\u9700\u8981\u8bb8\u53ef</p> <p>\u5982\u679c\u5728\u6a21\u578b\u4e3b\u9875 Files and versions \u770b\u4e0d\u5230\u6a21\u578b\u6587\u4ef6\uff0c\u90a3\u5c31\u662f\u9700\u8981\u7533\u8bf7\u8bb8\u53ef\u901a\u8fc7\u624d\u80fd\u4e0b\u8f7d\u7684 Gated Model\u3002</p> <p>\u7533\u8bf7\u901a\u8fc7\u540e\uff0c\u5c31\u53ef\u4ee5\u5728\u6a21\u578b\u4e3b\u9875\u7684 Files and versions \u4e2d\u770b\u5230\u6a21\u578b\u6587\u4ef6\u4e86\uff0c\u6d4f\u89c8\u5668\u7684\u8bdd\u76f4\u63a5\u70b9\u51fb\u4e0b\u8f7d\u5373\u53ef\u3002\u4f46\u662f\u5982\u679c\u60f3\u8981\u7528\u5de5\u5177\u4f8b\u5982 huggingface-cli \u4e0b\u8f7d\uff0c\u5219\u9700\u8981\u83b7\u53d6 access token:</p> <p>\u8bbf\u95eehuggingface.setting.token \u7ba1\u7406\u9875\uff0c\u9009\u62e9 New \u4e00\u4e2a token\uff0c\u53ea\u9700\u8981 Read \u6743\u9650\u5373\u53ef\uff0c\u521b\u5efa\u540e\u4fbf\u53ef\u4ee5\u5728\u5de5\u5177\u4e2d\u8c03\u7528\u65f6\u4f7f\u7528\u4e86\u3002</p> <p>\u4e0b\u8f7dhuggingface-transformers\u6a21\u578b\u81f3\u672c\u5730\uff0c\u5e76\u4f7f\u7528from_pretrained\u65b9\u6cd5\u52a0\u8f7d</p>"},{"location":"NLP/kea/","title":"Keyword Extraction Algorithm","text":""},{"location":"NLP/kea/#algorithm","title":"Algorithm","text":""},{"location":"NLP/kea/#tf-idf","title":"TF-IDF","text":""},{"location":"NLP/kea/#evaluation","title":"Evaluation","text":"<p>\u662f\u5728\u7cbe\u786e\u5339\u914d\u7684\u524d\u63d0\u4e0b</p>"},{"location":"NLP/kea/#unordered-results","title":"unordered results","text":"Precision \\(P=\\cfrac{TP}{TP+FP}\\) Recall \\(R=\\cfrac{TP}{TP+FN}\\) F1-measure \\(F1=\\cfrac{2\\times P\\times R}{P+R}\\)"},{"location":"NLP/kea/#ordered-results","title":"ordered results","text":""},{"location":"NLP/kea/#mrr","title":"MRR","text":"<p>Mean Reciprocal Rank. \u3010\u7b2c\u4e00\u500b\u6b63\u78ba\u7b54\u6848\u591a\u5feb(\u591a\u65e9)\u51fa\u73fe\uff1f\u3011\\(MRR=\\cfrac{1}{|D|}\\sum\\limits_{d\\in D}\\cfrac{1}{\\text{rank}_d}\\)</p> <p>\u5bf9\u6bcf\u4e00\u4e2a doc \u8ba1\u7b97  \\(rank_d\\)\uff1a(\u5e94\u8be5\u662f\u53ef\u4ee5\u9009 top3\uff0ctop5)</p> <ul> <li>\u5bf9\u9009\u5b9a ground truth keyword \u8ba1\u7b97 \u4ed6\u5728 prediction sequence \u91cc\u9996\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\u7f16\u53f7\uff0c \u5982\u679c\u4e0d\u5b58\u5728\uff0c\u7f16\u53f7\\(\\frac{1}{rank_d}=0\\)</li> <li>\u5bf9\u4e8e\u4e00\u4e9b\u90fd\u80fd\u8e29\u4e2d\u7684\u7ed3\u679c\u6765\u8bf4:\u5982\u679c\u5728\u5019\u9009\u8bcd\u5e8f\u5217\u4e2d\uff0c\u5173\u952e\u8bcd\u7684\u6392\u540d\u8d8a\u9760\u524d\uff0c\u8be5\u5e8f\u5217\u7684MRR\u503c\u8d8a\u4f4e\uff0c\u8bc1\u660e\u8be5\u65b9\u6cd5\u66f4\u4e3a\u6709\u6548\u3002</li> </ul>"},{"location":"NLP/kea/#map","title":"MAP","text":"<p>Mean Average Precision\u3010\u6574\u7d44\u7b54\u6848\u6b63\u78ba\u7d50\u679c\u8981\u512a\u5148\u51fa\u73fe\u3011</p> <p>Suppose we have a set of 5 queries Q1, Q2, Q3, Q4, and Q5, and a ranked list of 10 search results for each query. The relevance of each search result is binary, i.e., 1 if it is relevant to the query and 0 otherwise. Here is the relevance matrix for the search results:</p> Query R1 R2 R3 R4 R5 R6 R7 R8 R9 R10 Q1 1 0 1 0 1 0 0 0 1 1 Q2 0 1 0 1 0 1 0 1 0 1 Q3 1 0 1 1 0 0 1 1 0 0 Q4 0 1 0 1 0 0 1 0 1 1 Q5 1 0 0 1 1 0 0 1 1 0 <p>To calculate MAP, we first need to calculate the Average Precision (AP) for each query. AP is calculated by taking the precision at each relevant rank position and averaging them over all relevant positions. Here is how to calculate AP For Q1: Relevant results: R1, R3, R5, R9, R10 Precision at rank 1: 1/1 = 1.0; ... at rank 2: 1/2 = 0.5; ... rank 3: 2/3 = 0.67; ... at rank 4: 2/4 = 0.5; ... at rank 5: 3/5 = 0.6 \\(AP_1:=AP(Q1)= (1.0 + 0.5 + 0.67 + 0.5 + 0.6) / 5 = 0.654\\) For Q2 Relevant results: R2, R4, R6, R8, R10 Precision at rank 1: 0/1 = 0; ... at rank 2: 1/2 = 0.5; ... rank 3: 1/3 = 0.33; ... at rank 4: 2/4 = 0.5; ... at rank 5: 2/5 = 0.4 \\(AP_2:=AP(Q2)= (0 + 0.5 + 0.33 + 0.5 + 0.4) / 5 = 0.3\\) \\(\\text{MAP} = \\cfrac{\\sum\\limits^n AP_i}{n}\\), where n is the number of queries. In this example, suppose we calculate the following APs for each query: \\(AP_1 = 0.654, AP_2 = 0.6, AP_3 = 0.733, AP_4 = 0.583, AP_5 = 0.55\\) \\(MAP = (0.654 + 0.6 + 0.733 + 0.583 + 0.55) / 5 = 0.624\\)</p>"},{"location":"NLP/kea/#normalized-discounted-cumulative-gain","title":"normalized Discounted Cumulative Gain","text":"<p>\\(DCG = \\sum\\limits_{i=1}^p\\cfrac{rel_i}{log_2(i+1)}\\\\IDCG= DCG\\text{ under ideal situation}\\\\nDCG= \\cfrac{DCG}{IDCG}\\)</p> <p>\u5bf9 p \u4e2a keyword \u8bbe rel (related score)\uff0c\u6839\u636e\u6bcf\u4e00\u4e2a\u5173\u952e\u8bcd \u7684 rel \u548c \u4f4d\u7f6e i (index) \u8ba1\u7b97 \\(\\frac{rel_i}{log_2(i+1)}\\)\uff0cIDCG\u5219\u662f\u6700\u7406\u60f3\u60c5\u51b5\u7684DCG\uff0c\u6309 rel \u4ece\u5927\u5230\u5c0f\u6392\u5e8f</p>"},{"location":"NLP/kea/#_1","title":"\u6a21\u7cca\u5339\u914d\u7684\u65b9\u6cd5","text":"<p>\u5177\u4f53\u6765\u8bf4\uff0c\u53ef\u4ee5\u4ece\u8bcd\u5f62\u76f8\u4f3c\u5ea6\u4e0e\u8bed\u4e49\u76f8\u4f3c\u5ea6\u4e24\u4e2a\u65b9\u9762\u5bf9\u5173\u952e\u8bcd\u95f4\u7684\u76f8\u4f3c\u5ea6\u8fdb\u884c\u8ba1\u7b97\uff0c\u4ece\u800c\u66f4\u6709\u6548\u5730\u8bc4\u4f30\u63d0\u53d6\u7684\u6548\u679c\u3002\u524d\u8005\u4e00\u822c\u91c7\u7528\u7f16\u8f91\u8ddd\u79bb\u7b97\u6cd5\uff3b86\uff3d\u8fdb\u884c\u8ba1\u7b97\uff0c\u540e\u8005\u7684\u8ba1\u7b97\u65b9\u5f0f\u56e0\u7814\u7a76\u800c\u5f02\uff0c\u5982Dagan\u7b49\u5229\u7528\u6982\u7387\u6a21\u578b\u8ba1\u7b97\u5355\u8bcd\u95f4\u7684\u76f8\u4f3c\u5ea6\uff3b87\uff3d\u3002\u8003\u8651\u5230\u5355\u4e00\u7684\u76f8\u4f3c\u5ea6\u65b9\u6cd5\u5b58\u5728\u5c40\u9650\uff0c\u6587\u732e\uff3b88\uff3d\u5728\u8ba1\u7b97\u65f6\u7efc\u5408\u8003\u8651\u4e86\u5173\u952e\u8bcd\u95f4\u8bed\u4e49\u76f8\u4f3c\u5ea6\u4e0e\u8bcd\u5f62\u76f8\u4f3c\u5ea6</p>"},{"location":"NLP/nmt/","title":"Machine Translation MT \u673a\u5668\u7ffb\u8bd1","text":"<p>Neural Machine Translation NMT\u3002 Statistical Machine Translation SMT\u3002rule-based &amp; statistical techniques</p>"},{"location":"NLP/nmt/#nmt","title":"NMT","text":"<p>Figure 1: Schematic view of neural machine translation\u3002The red source words are first mapped to word vectors and then fed into a recurrent neural network (RNN). Upon seeing the \u27e8eos\u27e9 symbol, the final time step initializes a target blue RNN.  At each target time step, attention is applied over the source RNN and combined with the current hidden state to produce a prediction of the next word. This prediction is then fed back into the target RNN.</p> <p>NMT takes a conditional language modeling view of translation by modeling the probability of a target sentence \\(w_{1:T}\\) given a source sentence \\(x_{1:S}\\) as \\(\\(p(w_{1:T}|x) = \\prod_{t=1}^Tp(w_t|w_{1:t\u22121}, x; \u03b8)\\)\\) This distribution is estimated using an attention-based en-decoder architecture (Bahdanau et al., 2014). A source encoder recurrent neural network (RNN) maps each source word to a word vector, and processes these to a sequence of hidden vectors \\(h_1,...,h_S\\). The target decoder combines an RNN hidden representation of previously generated words \\((w_1,...w_{t\u22121})\\) with source hidden vectors to predict scores for each possible next word. A softmax layer is then used to produce a next-word distribution \\(p(w_t|w_{1:t\u22121}, x; \u03b8)\\). The source hidden vectors influence the distribution through an attention pooling layer that weights each source word relative to its expected contribution to the target prediction. The complete model is trained end-to-end to maximize the likelihood of the training data. An unfolded network diagram is shown in Figure 1.</p> <p>improve the effectiveness of the base model:</p> <ul> <li>a gated RNN such as an LSTM (Hochreiter and Schmidhuber, 1997) or GRU (Chung et al., 2014) which help the model learn long-distance features within a text.</li> <li>relatively large, stacked RNNs, which consist of several vertical layers (2-16) of RNNs at each time step (Sutskever et al., 2014).</li> <li>Input feeding, where the previous attention vector + predicted word is fed back into the input.(Luong et al., 2015).</li> <li>Test-time decoding is done through beam search where multiple hypothesis target predictions are considered at each time step. Implementing these correctly can be difficult, which motivates their inclusion in an NMT framework.</li> </ul>"},{"location":"NLP/opennmt/","title":"OpenNMT","text":"<p>Open-Source Toolkit for Neural Machine Translation\u3002 Neural Machine Translation NMT \u795e\u7ecf\u673a\u5668\u7ffb\u8bd1</p> <p>The system is successor to seq2seq-attn developed at Harvard, and has been completely rewritten for ease of efficiency, readability, and generalizability. It includes vanilla NMT models along with support for attention, gating, stacking, input feeding, regularization, beam search and all other options necessary for state-of-the-art performance. The project is fully self-contained depending on minimal number of external Lua libraries and including also a simple language independent reversible tokenization and detokenization tools. \u5b8c\u5168\u72ec\u7acb\uff0c\u53ea\u6709\u5c11\u90e8\u5206\u4f9d\u8d56 \u6807\u8bb0 &amp; \u53bb\u6807\u8bb0 \u7684\u4e1c\u897f\u3002</p> <p>\u5b98\u65b9 paper \u3010Abstract\u3011</p> <p>We describe an open-source toolkit for neural machine translation (NMT). The toolkit prioritizes efficiency, modularity, and extensibility with the goal of supporting NMT research into model architectures, feature representations, and source modalities, while maintaining competitive performance and reasonable training requirements. The toolkit consists of modeling and translation support, as well as detailed pedagogical documentation about the underlying techniques. Open-Source Toolkit for Neural Machine Translation</p>"},{"location":"NLP/opennmt/#data-gathering-and-processing","title":"Data Gathering and Processing","text":"<ul> <li> <p>\u5305\u62ec\uff1a\u81f3\u5c114\u4e2a     \u4e24\u79cd\u8bed\u8a00\u5206\u4e3a \u2460 \u6e90 src.txt \u2461 \u76ee\u6807 tgt.txt\uff1b\u4ece\u6570\u636e\u96c6\u4e0a\uff1a\u5206\u4e3a\u8bad\u7ec3\u96c6\u548c\u9a8c\u8bc1\u96c6\u3002     \u6bcf\u884c\u4e00\u4e2asample\uff0csrc.txt \u548c tgt.txt \u76f8\u4e92\u5bf9\u5e94\u3002Each file has a sentence/segment per line, and it is matching translation in the same line in the other file. This is what the \"Moses\" file format means.</p> <p>\u591a\u6e90\u600e\u4e48\u529e\uff1f\u6709\u504f\u91cd\u600e\u4e48\u529e\uff1f</p> config.yml<pre><code>data:\n    corpus_1:\n        path_src: src1_train.txt\n        path_tgt: tgt1_train.txt\n        weight: 1\n    corpus_2:\n        path_src: src2_train.txt\n        path_tgt: tgt2_train.txt\n        weight: 6\n    valid:\n        path_src: src2_valid.txt\n        path_tgt: tgt2_valid.txt\n    ...\n</code></pre> <ul> <li>\u5185\u5bb9\u3010see ## Tokenization / Sub-wording\u3011</li> <li>token \u5f62\u5f0f\uff0c\u4ee5\u7a7a\u683c\u5206\u8bcd<ul> <li>\u672c\u8eab\u4e00\u4e2a\u5c31\u662f\u6700\u5c0ftoken\u5f62\u5f0f\u5b58\u5728\uff1a \u82f1\u3001\u6cd5\uff1a\u4e0d\u9700\u8981\u5904\u7406</li> <li>\u4e0d\u4ee5\u7279\u6b8a\u6807\u8bb0\u5206\u5272\u8bcd\u7684\uff1a\u4e2d\uff1a\u9700\u8981\u5206\u8bcd</li> </ul> </li> </ul> </li> </ul> <p>!!! P \"\u5982\u679c\u4e0d\u5148\u5206\u8bcd\u4f20\u8fdb\u53bb\uff0c\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5206\u8bcd <code>[tokenizer]</code>\"       \u800c\u4e00\u822c\u7528 Sentence Piece \u57fa\u4e8e\u8bed\u6599\u8bad\u7ec3\u4e00\u4e2a tokenizer\uff0c\u7c7b\u4f3c\u4e8e jieba\uff0c\u4f1a\u5f62\u6210\u56fa\u5b9a\u5927\u5c0f\u7684\u8bcd\u8868\u3002\u8fd9\u4f1a\u5f71\u54cd\u540e\u6765\u7684 <code>vocab_size</code></p> <pre><code>  ```yaml title=\"config.yml\"\n    data:\n        corpus_1:\n            path_src: src1_train.txt\n            path_tgt: tgt1_train.txt\n            weight: 1\n            transforms: [tokenizer] \n  ```\n</code></pre>"},{"location":"NLP/opennmt/#tokenization-sub-wording","title":"Tokenization / Sub-wording","text":"<p>However, an MT model can only learn a specific number of vocabulary tokens due to limited hardware resources. To solve this issue, sub-words are used instead of whole words. At translation time, when the model sees a new word/token that looks like a word/token it has in the vocabulary, it still can try to continue the translation instead of marking this word as \u201cunknown\u201d or \u201cunk\u201d.</p> <p>\u56e0\u4e3a\u786c\u4ef6\u8d44\u6e90\u6709\u9650\uff0cMT model \u53ea\u80fd\u5b66\u4e00\u5b9a\u91cf\u7684\u8bcd\u6c47\u3002\u4e3a\u4e86\u8ba9\u5b83\u5728\u78b0\u89c1\u65b0\u7684\u8bcd\u6c47\u80fd\u7ee7\u7eed\u7ffb\u8bd1\u800c\u4e0d\u662f\u6807\u8bb0\u6210unknown or UNK.</p> <p>\u6700\u5c0f\u5355\u5143 the small units\u662f\u4ec0\u4e48\uff1f</p> <p>English \u2581Hav ing \u2581considered \u2581the \u2581report \u2581of \u2581the \u2581Committee \u2581on \u2581Conferences \u2581for \u2581 2 0 0 6 Official \u2581Record s \u2581of \u2581the \u2581General \u2581Assembly , \u2581S ixty - first \u2581Session , \u2581Supplement \u2581No . \u2581 3 2 \u2581( A / 6 1 / 3 2 ). \u2581and \u2581the \u2581relevant \u2581reports \u2581of \u2581the \u2581Secretary - General , A / 6 1 / 1 2 9 \u2581and \u2581Add . 1 \u2581and \u2581A / 6 1 / 3 0 0 .</p>"},{"location":"NLP/opennmt/#data-splitting","title":"Data Splitting","text":"<p>tra, test, valid</p>"},{"location":"NLP/opennmt/#create-the-training-configuration-file","title":"Create the Training Configuration File","text":"<p>Create the YAML configuration file. On a regular machine, you can create it manually or with nano.</p>"},{"location":"NLP/opennmt/#example","title":"Example","text":"config.yml<pre><code>save_data: run  # Where the samples will be written\n\n# Training files\ndata:\n    corpus_1:\n        path_src: UN.en-fr.fr-filtered.fr.subword.train\n        path_tgt: UN.en-fr.en-filtered.en.subword.train\n        transforms: [filtertoolong]\n    valid:\n        path_src: UN.en-fr.fr-filtered.fr.subword.dev\n        path_tgt: UN.en-fr.en-filtered.en.subword.dev\n        transforms: [filtertoolong]\n\nsrc_vocab: run/source.vocab  # Vocabulary files, generated by onmt_build_vocab\ntgt_vocab: run/target.vocab\n\nsrc_vocab_size: 50000  # Max Vocabulary size \ntgt_vocab_size: 50000  # Max Vocabulary size\n\n# Filter out source/target longer than n if [filtertoolong] enabled\nsrc_seq_length: 150\nsrc_seq_length: 150\n\n# Tokenization options\nsrc_subword_model: source.model\ntgt_subword_model: target.model\n\n# Where to save the log file and the output models/checkpoints\nlog_file: train.log\nsave_model: models/model.fren\n\n# Checkpoint\nsave_checkpoint_steps: 1000  # Default: 5000 - Save a model checkpoint for each n\nkeep_checkpoint: 3  # To save space, limit checkpoints to last n\n\nseed: 3435\n\n# Default: 100000 - Train the model to max n steps \n# Increase to 200000 or more for large datasets\n# For fine-tuning, add up the required steps to the original steps\ntrain_steps: 3000\n\nvalid_steps: 1000 # Default: 10000 - Run validation after n steps\n\nearly_stopping: 4  # Stop training if it does not imporve after n validations\nreport_every: 100\n\n# GPU\nworld_size: 1  # Number of GPUs, and \ngpu_ranks: [0]  # IDs of GPUs\n\n# Batching\nbucket_size: 262144\nnum_workers: 0  # Default: 2, set to 0 when RAM out of memory\nbatch_type: \"tokens\"\nbatch_size: 4096   # Tokens per batch, change when CUDA out of memory\nvalid_batch_size: 2048\nmax_generator_batches: 2\naccum_count: [4]\naccum_steps: [0]\n\n# Optimization\nmodel_dtype: \"fp16\"\noptim: \"adam\"\nlearning_rate: 2\nwarmup_steps: 1000  # Default: 4000 - for large datasets, try up to 8000\ndecay_method: \"noam\"\nadam_beta2: 0.998\nmax_grad_norm: 0\nlabel_smoothing: 0.1\nparam_init: 0\nparam_init_glorot: true\nnormalization: \"tokens\"\n\n# Model\nencoder_type: transformer\ndecoder_type: transformer\nposition_encoding: true\nenc_layers: 6\ndec_layers: 6\nheads: 8\nhidden_size: 512\nword_vec_size: 512\ntransformer_ff: 2048\ndropout_steps: [0]\ndropout: [0.1]\nattention_dropout: [0.1]\n</code></pre>"},{"location":"NLP/opennmt/#content","title":"Content","text":"<ul> <li> <p><code>src_vocab_size=50k</code> &amp; <code>tgt_vocab_size=50k</code> Vocabulary size</p> <ul> <li>default 50k</li> <li>\u5982\u679c\u4f7f\u7528 Sentence Piece \u5f97\u5230\u7684tokenizer\u6765\u5206\u8bcd\uff0c\u8fd9\u4e24\u4e2a params = size_of_SentencePiece</li> <li>\u4f46\u4e8b\u5148\u5206\u597d\u8bcd\u8fdb\u53bb\uff0c\u5c31\u4f1a\u76f4\u63a5 <code>counters</code> \u7edf\u8ba1\u3002\u7edf\u8ba1\u7684\u5927\u5c0f\u770b\u8bed\u6599\u7684\u4e30\u5bcc\u7684\u7a0b\u5ea6\u3002</li> </ul> <pre><code>[2023-12-07 14:23:22,059 INFO] Counters src: 17008\n[2023-12-07 14:23:22,060 INFO] Counters tgt: 16939\n</code></pre> </li> </ul> <p>For larger datasets, consider increasing: train_steps, valid_steps, warmup_steps, save_checkpoint_steps, keep_checkpoint</p> <ul> <li><code>train_steps</code> for datasets with a few millions of sentences, consider using a value between 100000 and 200000, or more!<ul> <li><code>early_stopping: int</code> can help stop the training when there is no considerable improvement.</li> </ul> </li> <li><code>valid_steps</code> 10000 can be good if the value train_steps is big enough.</li> <li><code>warmup_steps</code> obviously, its value must be less than train_steps. Try 4000 and 8000 values.</li> </ul>"},{"location":"NLP/opennmt/#build-vocabulary","title":"Build Vocabulary","text":"<p>\u5bf9\u4e8e\u5927\u7684\u6570\u636e\u96c6\u6765\u8bf4\uff0c\u7528\u6240\u6709\u7684\u8bcd\u8fdb\u884c\u8bad\u7ec3\u662f not feasible. \u6240\u4ee5\u9700\u8981\u6784\u5efa\u5c0f\u7684\u8bcd\u5e93\u3002</p> <p>Main purpose: To extract a specific set of vocabulary(usually betweeen 32k and 100k words) from the traning set.</p> config.yml<pre><code>...\nsrc_vocab: run/src.vocab  # Vocabulary files, generated by onmt_build_vocab\ntgt_vocab: run/tgt.vocab\n\nsrc_vocab_size: 50000  # MAX Vocabulary size\ntgt_vocab_size: 50000  # MAX Vocabulary size\n\nsrc_words_min_frequency: 2 # \u55ae\u7368\u904b\u884c\u7121\u610f\u7fa9\u7684\u611f\u89ba\ntgt_words_min_frequency: 2 \n</code></pre> <p>onmt_build_vocab -config config.yaml -n_sample -1 -num_threads 2</p> <ul> <li><code>-config</code> data...&amp;\u8bcd\u5178\u5927\u5c0f\u548c\u4fdd\u5b58\u4f4d\u7f6e</li> <li><code>-n_sample</code><ul> <li><code>=-1</code> on all the segment in the training dataset</li> </ul> </li> <li><code>-num_threads</code>: change it to match the number of CPUs to run it faster</li> </ul> <pre><code>[INFO] Counter vocab from -1 samples.\n[INFO] n_sample=-1: Build vocab on **full** datasets.\n[INFO] * Transform statistics for corpus_1(50.00%):\n* FilterTooLongStats(filtered=2138)\n[INFO] * Transform statistics for corpus_1(50.00%):\n* FilterTooLongStats(filtered=2032)\n[INFO] Counters src:14705\n[INFO] Counters tgt:11884\n</code></pre>"},{"location":"NLP/opennmt/#check-gpu","title":"Check GPU","text":"<p>nvidia-smi -L Check if the GPU is active</p> <pre><code>import torch\nprint(torch.cuda.is_available())\nprint(torch.cuda.get_device_name(0))\n\ngpu_memory = torch.cuda.mem_get_info(0)\nprint(\"Free GPU memory:\", gpu_memory[0]/1024**2, \"out of:\", gpu_memory[1]/1024**2)\n# &gt;&gt;&gt; True\n# &gt;&gt;&gt; Tesla T4\n# &gt;&gt;&gt; Free GPU memory: 15007.75 out of: 15109.75\n</code></pre>"},{"location":"NLP/opennmt/#traning","title":"Traning","text":"<ol> <li>remove existed model: rm -rf drive/MyDrive/nmt/models/</li> <li> <p>Train the NMT model: onmt_train -config config.yaml</p> <ul> <li>If the traning stopped, and we want to continue it from a specific checkpoint: onmt_train -config config.yaml -train_from models/model.fren_step_3000.pt</li> </ul> <p><code>yaml title=\"config.yml\"     train_steps # &gt; train_from \u7684\u6570\u5b57</code></p> </li> <li> <p>debug mode: dmesg -T</p> </li> </ol>"},{"location":"NLP/opennmt/#applying","title":"Applying","text":"<p>Translation Options:</p> <ul> <li><code>-model</code>: model(s) used</li> <li><code>-src</code>: source file</li> <li><code>-output</code>: filename to write result</li> <li><code>-gpu</code>: GPU ID<ul> <li><code>=0</code>: 1 GPU</li> <li>: CPU</li> </ul> </li> <li><code>-min_length[optional]</code>:  to avoid empty translations</li> <li><code>-verbose[optional]</code>: if you want to print translations</li> </ul> <ol> <li>onmt_translate -model models/model.fren_step_3000.pt -src UN.en-fr.fr-filtered.fr.subword.test -output UN.en.translated -gpu 0 -min_length 1</li> <li>Check the first line of result head -n 1 UN.en.translated</li> </ol> <p> Using sub-word \u2581Recalling \u2581its \u2581relevant \u2581resolutions , \u2581including \u2581resolution \u2581 5 8 / 2 9 2 \u2581of \u2581 6 \u2581May \u2581 2 0 0 4 , \u2581as \u2581well \u2581as \u2581th ose \u2581adopted \u2581at \u2581its \u2581tenth \u2581emergency \u2581special \u2581session , Using word Recalling its relevant resolutions, including resolution 58/292 of 6 May 2004, as well as those adopted at its tenth emergency special session,</p>"},{"location":"NLP/opennmt/#evaluation","title":"Evaluation","text":""},{"location":"NLP/opennmt/#model","title":"model","text":""},{"location":"NLP/opennmt/#ensemble-decoding","title":"Ensemble Decoding","text":"<p>During translation, instead of adding one model/checkpoint to the -model argument, add multiple checkpoints. For example, try the two last checkpoints. Does it improve quality of translation? Does it affect translation seepd?</p> <ul> <li>Averaging Models python3 average_models.py -models model_step_xxx.pt model_step_yyy.pt -output model_avg.pt Average multiple models into one model using the average_models.py script, and see how this affects performance.</li> </ul>"},{"location":"NLP/opennmt/#release-model","title":"Release Model","text":"<p>see how it reduce the model size.</p> <p>onmt_release_model --model model.pt --output model_released.pt</p>"},{"location":"NLP/opennmt/#using-pre-trained-nmt-models","title":"Using pre-trained NMT models","text":"<p>For low-resource languages(up to 15m), using directly or fine-tuning mBART can give better results. For high-resource languages, training a baseline model from scratch can outperform mBART. Then, applying mixed fine-tuning (Chu et al., 2017) on this new baseline using in-house data can even achieve better gains in terms of Machine Translation quality. Check this code snippet if you would like to try mBART. You can also convert M2M-100 model to the CTranslate2 format for better efficiency as explained here.</p>"},{"location":"NLP/opennmt/#multilingual-neural-machine-translationmnmt","title":"Multilingual Neural Machine Translation\uff0cMNMT","text":"<p>Advantages\uff1a</p> <ol> <li>help a low-resource language acquire extra knowledge from other languages</li> <li>tend to generalize better due to exposure to diverse languages. This particular phenomenon is known as translation Transfer Learning or Knowledge Transfer (Dabre et al., 2020).</li> <li>Languages that do not share the same alphabet cannot achieve the same linguistic benefits from a multilingual NMT model. Still, researchers investigate approaches like transliteration to increase knowledge transfer between languages that belong to the same language family, but use different alphabets. For example, using this transliteration trick, my Indic-to-English multilingual NMT model can translate from 10 Indic languages to English.</li> </ol> <p>Notes\uff1a</p> <ol> <li>shuffle dataset</li> <li>check banlanced -&gt; over-sampling<ul> <li>giving weights to datasets     &gt; En: 10 million, zh: 2 million \\(\\implies\\) weight of En = 1, weight of zh = 5</li> </ul> </li> <li>[Optional] add a special token to the start of each sentence. In this case, you will have to add these tokens to your SentencePiece model through the option <code>--user_defined_symbols</code>. However, some researchers believe this step is optional.     &gt; En: <code>&lt;en&gt;</code>, zh: <code>&lt;zh&gt;</code></li> <li>Integrating other data augmentation approaches like Back-Translation can still be useful.</li> <li>pre-trained NMT models     For low-resource languages(up to 15m), using directly or fine-tuning mBART can give better results.     For high-resource languages, training a baseline model from scratch can outperform mBART.     Then, applying mixed fine-tuning (Chu et al., 2017) on this new baseline using in-house data can even achieve better gains in terms of Machine Translation quality.</li> </ol> <p>Notes on Multilingual Machine Translation</p> <p>You can also convert M2M-100 model to the CTranslate2 format for better efficiency as explained here.</p>"},{"location":"NLP/opennmt/#tensorboard","title":"tensorboard","text":"<p>Running TensorBoard</p>"},{"location":"NLP/opennmt/#ref","title":"Ref","text":"<p>\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\uff08NMT\uff09\u7684\u4e00\u4e9b\u91cd\u8981\u8d44\u6e90\u5206\u4eab OpenNMT-py Tutorial</p> <p></p>"},{"location":"NLP/opennmt/#temp","title":"Temp","text":"<p>How is Accuracy calculated ?</p> <p>Discrepency between training and tranlsation</p>"},{"location":"NLP/paper/","title":"Temp","text":""},{"location":"NLP/paper/#automatic-spelling-correction-with-transformer-for-ctc-based-end-to-end-speech-recognition","title":"Automatic Spelling Correction with Transformer for CTC-based End-to-End Speech Recognition","text":"<p>Connectionist Temporal Classification CTC\u3002CTC based end-to-end SR system usually need to incorporate an external language model by using WFST-based decoding in order to achieve promising results. This is more essential to Mandarin speech recognition since it owns a special phenomenon, namely homophone, which causes a lot of substitution errors.</p> <p>Quote</p> <p>Connectionist Temporal Classification CTC based end-to-end SR system usually need to incorporate an external language model by using WFST-based decoding in order to achieve promising results. This is more essential to Mandarin speech recognition since it owns a special phenomenon, namely homophone, which causes a lot of substitution errors. The linguistic information introduced by language model will help to distinguish these substitution errors. In this work, we propose a transformer-based spelling correction model to automatically correct errors especially the substitution errors made by CTC-based Mandarin speech recognition system. Specifically, we investigate using the recognition results generated by CTC-based systems as input and the ground-truth transcriptions as output to train a transformer with encoder-decoder architecture, which is much similar to machine translation.  Results in a 20,000 hours Mandarin speech recognition task show that the proposed spelling correction model can achieve a CER of 3.41%, which results in 22.9% and 53.2% relative improvement compared to the baseline CTC-based systems decoded with and without language model respectively.</p>"},{"location":"NLP/paper/#bi-encoder-transformer-network-for-mandarin-english-code-switching-speech-recognition-using-mixture-of-experts","title":"Bi-encoder Transformer Network for Mandarin-English Code-switching Speech Recognition using Mixture of Experts","text":"<p>Quote</p> <p>Code-switching speech recognition is a challenging task which has been studied in many previous work, and one main challenge for this task is the lack of code-switching data. In this paper, we study end-to-end models for Mandarin-English code-switching automatic speech recognition. External monolingual data are utilized to alleviate the data sparsity problem. More importantly, we propose a bi-encoder transformer network based Mixture of Experts (MoE) architecture to better leverage these data. We decouple Mandarin and English modeling with two separate encoders to better capture language-specific information, and a gating network is employed to explicitly handle the language identification task. For the gating network, different models and training modes are explored to learn the better MoE interpolation coefficients. Experimental results show that compared with the baseline transformer model, the proposed new MoE architecture can obtain up to 10.4% relative error reduction on the code-switching test set.</p> <p>In this work we focus on leveraging rich resources monolingual data to achieve a better code-switching ASR performance, and a new MoE structure is proposed to better handle Mandarin and English modeling.</p> <p>The new approach mainly includes three parts: bi-encoder bilingual model pretraining, mixture of experts architecture construction and a gating network for MoE interpolation coefficients. We train the transformer model with joint CTC-attention [11, 12] framework to exploit the advantages from both CTC and S2S models. For the modeling units, we combine Chinese characters and English BPE subwords [31] as final units. We also apply SpecAugment [14] for all data through out our experiments.</p> <p>Figure 1\uff1aThe proposed bi-encoder transformer network based MoE architecture: (1) pretrained bi-encoder bilingual model; (2) mixture of experts architecture for code-switching ASR; (3) gating network for MoE interpolation coefficients;</p> \\[h^{cn}=\\text{Mandarin Encoder}(x)\\\\h^{en}=\\text{English Encoder}(x)\\] \\[h_t^{mix}=\\alpha_t^{cn}h_t^{cn}+\\alpha_t^{en}h_t^{en}\\] <p>\\(\\begin{cases}\\alpha_t^{cn},\\alpha_t^{en}\\in[0,1]\\\\\\alpha_t^{cn}+\\alpha_t^{en}=1\\end{cases}\\)</p> <ol> <li> <p>Pretrain a bi-encoder bilingual model with only monolingual Mandarin and English data. \u4e24\u4e2a\u7f16\u7801\u5668\u7ed3\u6784\u53ef\u4ee5\u4e0d\u4e00\u6837\u3002 Since language identity for monolingual data can be obtained in advance, we are able to decouple Mandarin and English language with two separate encoder. As shown in the left part of Figure 1, when given acoustic features inputs, prior LID information is used to decide which encoder to use. Denote Xcn and Xen as the col- lection of all Mandarin inputs and English inputs separately, we formulate this procedure as:</p> </li> <li> <p>Gating network for MoE interpolation coefficients.     \u5904\u7406\u6210 LID classification \u4e8c\u5206\u7c7b\u95ee\u9898\u3002     output = probability of each language \u76f4\u63a5\u662f\u6743\u91cd \\(\\alpha_t^{cn},\\alpha_t^{en}\\)</p> <ol> <li>External LID method. Train a self attention network (SAN) based model input = raw features \\(x\\)</li> <li>Built-in LID method. input = the outputs of the two separate encoders $h^{cn}\\&amp; h^{en} $ \u77e5\u9053\u6240\u8c13\u7684\u4e13\u5bb6\u8f93\u51fa = \u9ad8\u7eac\u8868\u8fbe For this build-in LID method, the ASR and LID modules in this MoE architecture can be trained jointly, and the objective loss is changed to:</li> </ol> </li> </ol> <p>The LID and ASR are trained independently. To improve the performance of LID classifier, we adopt transfer learning strategy and a pretrained CTC model is used for initialization.</p>"},{"location":"NLP/paper/#experimental-setup","title":"Experimental setup","text":"<ul> <li>Dataset:\u3010CN:EN:CS=25:23:10\u3011 ASRU 2019 Mandarin-English code-switching Challenge dataset (500 hours Mandarin data and 200 hours code-switching data) &amp; a subset of 460 hours English data from Librispeech corpus DEV: Additional 20 hours code-switching data TEST: 3test sets: CN &amp; EN &amp; CS</li> <li> <p>Data Preprocess For acoustic feature, 80 dimensional log-mel filterbanks are extracted with a step size of 10ms and window size of 25ms, and utterance-level CMVN is applied on the fbank features.</p> <ul> <li>modeling unit. we combine Chinese characters and English BPE subword units [31].</li> </ul> <pre><code>graph LR\nA[Mandarin character]\nB{\u8bad\u7ec3\u96c6&lt;br&gt;&gt;25\u6b21}\nC[UNK]\nD[English data]\nE[modeling unit 4006]\nF[BPE units]\nG[SOS&amp;EOS]\nA--&gt;B--Y(3003)--&gt;E\nB--N--&gt;C--(1)--&gt;E\nD--&gt;F--(1000)--&gt;E\nG--(2)--&gt;E</code></pre> </li> <li> <p>EVA character error rate (CER) \u7eaf Mandarin word error rate (WER) \u7eaf English mix error rate (MER) \u5404\u81ea\u8bed\u8a00\u7528\u5404\u81ea\u7edf\u8ba1</p> </li> </ul>"},{"location":"NLP/paper/#new-datasets-and-controllable-iterative-data-augmentation-method-for-code-switching-asr-error-correction","title":"New Datasets and Controllable Iterative Data Augmentation Method for Code-switching ASR Error Correction","text":"<p>Quote</p> <p>With the wide use of automatic speech recognition(ASR) systems, researchers pay more attention to the ASR error correction task to improve the quality of recognition results. In particular, ASR in bilingual or multilingual settings, namely code-switching ASR, has greater challenges and research value. In this paper, we first present code-switching ASR correction datasets obtained from solid ASR systems and automatic annotators. The datasets contain Chinese-English code-switching dialogues of bilingual speakers in Singapore, Malaysia, and Hong Kong. Based on this task, we propose a controllable iterative (CI) data augmentation method for improving the performance of mainstream ASR error correction systems. With a small amount of training data, our proposed method has the ability to iteratively produce abundant pseudo parallel data from the monolingual corpus for Chinese-English code-switching ASR correction. Results of experiments show that our method achieves the best performance compared with the rulebased, back-translation-based data augmentation methods and large language model ChatGPT</p> <p>With a similar scale of augmented data, our proposed controllable iterative method achieves the best performance in both MaxMatch (M2) scorer (Dahlmeier and Ng, 2012) and MER metrics on SEAME-C and ASCEND-C datasets.</p> <p>Besides, we find that this task is challenging, and LLM method is far from achieving satisfactory results at now</p> <p>Our contributions are summarized as follows:</p> <ol> <li>We propose two datasets SEAME-C &amp; ASCEND-C for the challenging Chinese-English code-switching ASR error correction task.</li> <li>To address the problem of lacking sufficient training data, we propose the controllable iterative data augmentation method that can iteratively generate abundant code-switching ASR error correction instances from the monolingual corpus with small-scale labeled training data.</li> <li>Extensive experiments show the superiority of our proposed controllable iterative method. Moreover, combining the pseudo data produced by the rule-based and controllable iterative methods can further improve the performance of error correction models.</li> </ol> <p>data augmentation method in text error correction.</p> <p>\u5bf9\u8bdd\u7684\u5185\u5bb9\u5f62\u5f0f\uff0c\u57fa\u672c\u4e00\u4e2a\u53e5\u5b5010\u4e2a tokens \u4ee5\u4e0a</p>  - \u8ddf\u968f\u539f\u6570\u636e\u96c6\u7684\u5212\u5206 - remove bad cases\uff08\u592a\u77ed\uff0c\u5355\u8bed\uff09  [SEAME: a Mandarin-English  Code-switching Speech Corpus in South-East Asia]: https://www.researchgate.net/publication/221481268_Mandarin-English_code-switching_speech_corpus_in_South-East_Asia_SEAME  ## [SEAME: a Mandarin-English Code-switching Speech Corpus in South-East Asia]  Mandarin-English  code-switching  !!! quote Abstract     In Singapore and  Malaysia, people often  speak a  mixture of Mandarin and English within a single sentence. We call such sentences intra-sentential code-switch sentences. In this paper, we  report  on  the  development of  a Mandarin-English  code-switching spontaneous speech corpus: SEAME. The corpus is developed as part of a multilingual speech recognition project and  will  be  used  to  examine  how  Mandarin-English  code-switch  speech  occurs  in the  spoken  language in  South-East Asia.  Additionally,  it  can  provide  insights  into  the development  of  large  vocabulary  continuous  speech recognition (LVCSR) for code-switching speech. The corpus collected consists of intra-sentential code-switching utterances that  are  recorded  under  both  interview  and  conversational settings.  This  paper  describes  the  corpus  design  and  the analysis of collected corpus.  language boundary detection (LBD), language identification (LID)  As  the corpus  is  developed  for  spontaneous  code-switching  speech research,  our  recordings  consist  of  interviews  and conversations  without  scripts.  UTF-8 code  there are two speakers in each interview setup, an interviewer who asks  questions  and  an  interviewee  who  answers. Only  the interviewee\u201fs speech is recorded using a close talk microphone.  &gt; \u65e2\u8981\u591a\u6837\u6027\u56de\u7b54\uff0c\u53c8\u8981\u5f15\u5bfc\u56de\u7b54\u8005 \u53cc\u8bed\u56de\u590d\uff1ahobbies, movies, books, university life, working life,  special topics  and  others &gt; \u4f60 \u53c1\u52a0 \u4ec0\u9ebd CCA (Which co-curricular activity do you participate in?) &gt; \u8c08\u8c08 \u4f60 \u559c\u6b22 \u7684fruits (talk about your favorite fruits)  mainly informal and non-speech  sounds  often  occur,  Target speech: this category dictates that the utterance is intra-sentential  code-switching  speech,  and  it  contains  both Mandarin and English segments within one utterance.  Abbreviation and proper noun: eg. \u201eCCA\u201f, is the abbreviation for co-curricular activity and \u201eChoa Chu Kang\u201f, is the name of a road Singapore.  From  the SEAME corpus, we find that on average, the number of turns of language switch for each code-switching utterance is 2.8 for Malaysian  and  3.1  for  Singaporean  speakers.  &gt; This  example  has  3 language turn &gt; \u4f60\u4eec \u90a3\u4e9b guys\uff0c\u6bcf\u6b21 \u5531 \u7684 \u65f6\u5019\uff0csing so much louder. &gt; It is straightforward to count the  number of English word in each turn,  but it is not as easy to  do so for Chinese text. For consistency, we first segment a Chinese phrase/segment into lexical words with a forward maximal-length matching algorithm as shown in Example &gt; In general, people tend to switch to English just for one word. This accounts for 50% and 70% of the total sentences from Singapore and Malaysia respectively. This observation of speaking style in code-switching utterance coincides with what are reported in  Hong Kong and Taiwan"},{"location":"NLP/subword/","title":"Subword Segmentation","text":"<p> vocabulary size \u5b57\u5178\u7684\u5927\u5c0f step size \u53bb\u7f16\u7801\u4e00\u4e2a\u53e5\u5b50\u9700\u8981\u7684 tokens\u6570\u91cf\u3002the number of tokens required to encode the sentence\u3002 \u6302\u94a9  decoding efficiency</p>  &gt; \"\u4eca\u5929\u5403\u5565\" &amp; \"\u81f3\u4eca\u4e0d\u5403\" &gt; &gt; |size|vocabulary | step size| &gt; |--|--|--| &gt; |6|\u4eca/\u5929/\u5403/\u5565/\u81f3/\u4e0d | 4 &amp; 4| &gt; |5|\u4eca\u5929/\u5403/\u5565/\u81f3\u4eca/\u4e0d | 3 &amp; 3| &gt; |5|\u4eca\u5929/\u5403/\u5565/\u81f3\u4eca/\u4e0d\u5403 |3 &amp; 2|  <p>only with a small fixed size of vocabulary (usually 16k to 32k), the number of required symbols to encode a sentence will not significantly increase, which is an important feature for an efficient decoding.</p> <p>open vocabulary issue</p> <p>NLP \u4ee5\u524d\u662f\u4f7f\u7528 fixed word vocabularies, \u8bad\u7ec3\u548c\u63a8\u65ad\u90fd\u5f88\u4f9d\u8d56 vocabulary size. \u4f46\u662f limiting vocabulary size \u4f1a\u65b0\u589e <code>UNK</code> \u7684\u6570\u91cf\u3002\u5bfc\u81f4\u4e00\u4e9b\u573a\u666f\u4e0b\uff08an open vocabulary setting\uff09\uff08\u7ffb\u8bd1\u3001\u5177\u6709\u9ad8\u6548\u6784\u8bcd\u8fc7\u7a0b\uff09\u8868\u73b0\u4e0d\u597d\u3002 \u6bd4\u8d77\u628a\u8fd9\u4e9b\u9ad8\u590d\u5408\u8bcd\u7f16\u7801\u6210\u4e00\u4e2a\u5b9a\u957f\u5411\u91cf\uff0c\u66f4\u503e\u5411\u7f16\u7801\u6210\u4e00\u4e2a\u53ef\u5206\u5272\u7684\u4e0d\u5b9a\u957f\u7684\u5411\u91cf\u3002</p> <p>\u270f\ufe0f Break up rare words into subword units \u628a\u51fa\u73b0\u8f83\u5c11\u7684\u8bcd\u5206\u5272\u6210\u66f4\u5c0f\u7684\u5b50\u8bcd\u3002</p> <p>Neural Machine Translation with multiple subword segmentations</p> <p>NMT training with on-the-fly \u5373\u65f6 subword sampling</p> <p>Given a source sentence \\(X\\) and a target sentence \\(Y\\), let \\(x = (x_1,...,x_M), y = (y_1,...,y_N)\\) be the corresponding subword sequences segmented with an underlying subword segmenter, e.g., BPE. NMT models the translation probability \\(P (Y |X ) = P (y|x)\\) as a target language sequence model that generates target subword \\(y_n\\) conditioning on the target history \\(y_{&lt;n}\\) and source input sequence \\(x\\): \\(\\(P (\\bold{y}|\\bold{x};\u03b8) = \\prod_{i=1}^NP (y_n|\\bold{x}, y_{&lt;n}; \u03b8)\\)\\)</p> <p>A common choice to predict the subword \\(y_n\\) is to use a RNN architecture. However, note that subword regularization is not specific to this architecture and can be applicable to other NMT architectures without RNN, e.g., (Vaswani et al., 2017; Gehring et al., 2017). NMT is trained using the standard maximum likelihood estimation, i.e., maximizing the log- likelihood L(\u03b8) of a given parallel corpus D =</p> <p>Strictly speaking, wordpiece model (Schuster and Naka- jima, 2012) is different from BPE. We consider wordpiece as a variant of BPE, as it also uses an incremental vocabulary generation with a different loss function.</p> <p>Wordpiece model uses a likelihood instead of frequency.</p>"},{"location":"NLP/subword/#subword-segmentations-with-language-model","title":"Subword segmentations with language model","text":"? BPE unigram encoder dictionary encoder entropy encoder frequency probabilistic model multiple segmentations \u274c \u2705 <p>BPE &amp; unigram \u3010SAME\u3011</p> <p>the same idea that they encode a text using fewer bits with a certain data compression principle (dictionary vs. entropy).</p>"},{"location":"NLP/subword/#byte-pair-encoding-bpe","title":"Byte-Pair-Encoding BPE","text":"<p>Neural Machine Translation of Rare Words with Subword Units</p> <p>\u539f\u59cb\u662f data compression literature\u3002 BPE is a variant of dictionary (substitution) encoder that incrementally finds a set of symbols such that the total number of symbols for encoding the text is minimized.</p> <p>Steps: \u9996\u5148\u5207\u6210\u5355\u4e2a\u5b57\u7b26\uff0c\u518d\u4e0d\u65ad\u5408\u5e76\u6700\u9891\u7e41\u7684\uff0c\u5b57\u5178 size \u4e00\u76f4\u53d8\u5c11\u5230\u60f3\u8981\u7684 size\u3002</p> <ol> <li>splits the whole sentence into individual characters</li> <li>The most frequent adjacent pairs of characters are then consecutively merged until reaching a desired vocabulary size</li> </ol> <p>advantage\uff1a</p> <ul> <li>\u6709\u6548\u5e73\u8861 vocabulary size &amp; step size (the number of tokens required to encode the sentence)</li> <li>\u5408\u5e76\u7ec4\u6210\u5b50\u8bcd\u53ea\u548c\u5b50\u8bcd\u7684\u9891\u7387\u76f8\u5173 \\(\\implies\\) \u5e38\u89c1\u7684\u8bcd\u4f1a\u88ab\u4fdd\u7559\u6210\u4e00\u4e2a\u5355\u72ec\u7684 symbol = \u62e5\u6709\u81ea\u5df1\u7684 ID\u3002\u4e0d\u5e38\u89c1\u7684\u8bcd\u4f1a\u88ab\u5206\u89e3\u6210\u66f4\u5c0f\u7684\u5355\u5143\uff08\u5b50\u5b57\u7b26\u4e32\uff5c\u5b57\u7b26\uff09\u3002</li> </ul> <p>disadvantage\uff1a</p> <ul> <li>\u57fa\u4e8e\u8d2a\u5a6a\u539f\u5219\u548c\u786e\u5b9a\u7684\u7b26\u53f7\u66ff\u4ee3 deterministic symbol replacement \\(\\implies\\) \u4e0d\u80fd\u6839\u636e\u6982\u7387\u63d0\u4f9b\u591a\u91cd\u5206\u5272\u3002</li> </ul>"},{"location":"NLP/subword/#unigram-language-model","title":"Unigram language model","text":"<p>On the other hand, the unigram language model is reformulated as an entropy encoder that minimizes the total code length for the text.</p>"},{"location":"NLP/subword/#questions","title":"Questions","text":"<p>multiple segmentation candidates</p> <p>\u5373\u4f7f\u662f\u540c\u6837\u7684\u5b57\u5178\uff0c\u8fd8\u662f\u6709\u4e0d\u4e00\u6837\u7684\u5206\u5272\u8868\u793a\u65b9\u5f0f\u3002is a spurious ambiguity However, a sentence can be represented in multiple subword sequences even with the same vocabulary.</p> <p>Multiple subword sequences encoding the same sentence \u201cHello World\u201d</p> <p>Subwords( meansspaces)  Vocabulary id sequence Hell/o/ world 13586 137 255 H/ello/ world 320 7363 255 He/llo/ world 579 10115 255 /He/l/l/o/ world 7 18085 356 356 137 255 H/el/l/o/ /world 320 585 356 137 7 12295</p>"},{"location":"NLP/subword/#subword-regularization-improving-neural-network-translation-models-with-multiple-subword-candidates","title":"Subword Regularization: Improving Neural Network Translation Models with Multiple Subword Candidates","text":"<p>Abstract</p> <p>Subword units are an effective way to alleviate the open vocabulary problems in neural machine translation (NMT). While sentences are usually converted into unique subword sequences, subword segmentation is potentially ambiguous and multiple segmentations are possible even with the same vocabulary. The question addressed in this paper is whether it is possible to harness the segmentation ambiguity as a noise to improve the robustness of NMT. We present a simple regularization method, subword regularization, which trains the model with multiple subword segmentations probabilistically sampled during training. In addition, for better subword sampling, we propose a new subword segmentation algorithm based on a unigram language model. We experiment with multiple corpora and report consistent improvements especially on low resource and out-of-domain settings. \u628a\u5b50\u8bcd\u5206\u5272\u5f53\u4f5c\u566a\u58f0\u8fdb\u884c\u4f18\u5316\uff0c\u4ece\u800c\u63d0\u9ad8\u9c81\u68d2\u6027\u3002</p> <p>Subword regularization consists of the following two sub-contributions:</p> <ul> <li>A simple NMT training algorithm to integrate multiple segmentation candidates. Our approach is implemented as an on-the-fly data sampling, which is not specific to NMT architecture. Subword regularization can be applied to any NMT system without changing the model structure. \u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u79cd\u7b80\u5355\u7684 NMT \u8bad\u7ec3\u7b97\u6cd5\u6765\u96c6\u6210\u591a\u4e2a\u5206\u5272\u5019\u9009\u8005\u3002\u6211\u4eec\u7684\u65b9\u6cd5\u88ab\u5b9e\u73b0\u4e3a\u52a8\u6001\u6570\u636e\u91c7\u6837\uff0c\u8fd9\u4e0d\u662f NMT \u67b6\u6784\u6240\u7279\u6709\u7684\u3002\u5b50\u5b57\u6b63\u5219\u5316\u53ef\u4ee5\u5e94\u7528\u4e8e\u4efb\u4f55NMT\u7cfb\u7edf\uff0c\u800c\u4e0d\u6539\u53d8\u6a21\u578b\u7ed3\u6784\u3002</li> <li>A new subword segmentation algorithm based on a language model, which provides multiple segmentations with probabilities. The language model allows to emulate the noise generated during the segmentation of actual data.</li> </ul> <p>A common choice to predict the subword \\(y_n\\) is to use a RNN architecture. However, note that subword regularization is not specific to RNN and can be applicable to other NMT architectures without RNN. NMT is trained using the standard maximum likelihood estimation, i.e., maximizing the log-likelihood L(\u03b8) of a given parallel corpus D =</p> <p>In this paper, we propose a new subword segmentation algorithm based on a unigram language model, which is capable of outputing multiple sub-word segmentations with probabilities. The unigram language model makes an assumption that each subword occurs independently, and consequently, the probability of a subword sequence</p>"},{"location":"NLP/subword/#neural-machine-translation-of-rare-words-with-subword-units","title":"Neural Machine Translation of Rare Words with Subword Units","text":"<p>Abstract</p> <p>Neural machine translation (NMT) models typically operate with a fixed vocabulary, but translation is an open-vocabulary problem. Previous work addresses the translation of out-of-vocabulary words by backing off to a dictionary. In this paper, we introduce a simpler and more effective approach, making the NMT model capable of open-vocabulary translation by encoding rare and unknown words as sequences of subword units. This is based on the intuition that various word classes are translatable via smaller units than words, for instance names (via character copying or transliteration ), compounds (via compositional translation), and cognates and loanwords (via phonological and morphological transformations). \u9019\u662f\u57fa\u65bc\u9019\u6a23\u7684\u76f4\u89ba\uff1a\u5404\u7a2e\u8a5e\u985e\u90fd\u53ef\u4ee5\u900f\u904e\u6bd4\u55ae\u5b57\u66f4\u5c0f\u7684\u55ae\u4f4d\u9032\u884c\u7ffb\u8b6f\uff0c\u4f8b\u5982\u540d\u7a31\uff08\u900f\u904e\u5b57\u5143\u8907\u88fd\u6216\u97f3\u8b6f\u8f49\u5beb\uff09\u3001\u5316\u5408\u7269\uff08\u900f\u904e\u7d44\u5408\u7ffb\u8b6f\uff09\u4ee5\u53ca\u540c\u6e90\u8a5e\u548c\u5916\u4f86\u8a5e\uff08\u900f\u904e\u8a9e\u97f3\u548c\u5f62\u614b\u8f49\u63db\uff09\u3002We discuss the suitability of different word segmentation techniques, including simple character n-gram models and a segmentation based on the byte pair encoding compression algorithm, and empirically show that subword models improve over a back-off dictionary baseline for the WMT 15 translation tasks English\u2192German and English\u2192Russian by up to 1.1 and 1.3 BLEU, respectively.</p> <p>\u6211\u4eec\u7684\u4e3b\u8981\u76ee\u6807\u662f\u5728 NMT \u7f51\u7edc\u672c\u8eab\u4e2d\u5bf9\u5f00\u653e\u8bcd\u6c47\u7ffb\u8bd1\u8fdb\u884c\u5efa\u6a21\uff0c\u800c\u4e0d\u9700\u8981\u7a00\u6709\u8bcd\u7684\u56de\u9000\u6a21\u578b\uff0c\u524d\u8005\u66f4\u6709\u6548\u3002Our main goal is to model open-vocabulary translation in the NMT network itself, without requiring a back-off model for rare words.</p> <p>Byte Pair Encoding (BPE) is a simple data compression technique that iteratively replaces the most frequent pair of bytes in a sequence with a single, unused byte.</p> <p>Firstly, we initialize the symbol vocabulary with the character vocabulary, and represent each word as a sequence of characters, plus a special end-of-word symbol \u2018\u00b7\u2019, which allows us to restore the original tokenization after translation. We iteratively count all symbol pairs and replace each occurrence of the most frequent pair (\u2018A\u2019, \u2018B\u2019) with a new symbol \u2018AB\u2019.</p> <pre><code>import re, collections\n\ndef get_stats(vocab):\n    pairs = collections.defaultdict(int) \n    for word, freq in vocab.items():\n        symbols = word.split()\n        for i in range(len(symbols)-1):\n            pairs[symbols[i],symbols[i+1]] += freq\n    return pairs\n\ndef merge_vocab(pair, v_in):\n    v_out = {}\n    bigram = re.escape(' '.join(pair))\n    p = re.compile(r'(?&lt;!\\S)' + bigram + r'(?!\\S)') \n    for word in v_in:\n        w_out = p.sub(''.join(pair), word)\n        v_out[w_out] = v_in[word] \n    return v_out\n\nvocab = {'l o w &lt;/w&gt;' : 5, \n        'l o w e r &lt;/w&gt;' : 2, \n        'n e w e s t &lt;/w&gt;':6,\n        'w i d e s t &lt;/w&gt;':3}\nnum_merges = 10\nfor i in range(num_merges):\n    pairs = get_stats(vocab)\n    best = max(pairs, key=pairs.get) \n    vocab = merge_vocab(best, vocab) \n    print(best, pairs[best])\n\n# &gt;&gt;&gt; ('e', 's')\n# &gt;&gt;&gt; ('es', 't')\n# &gt;&gt;&gt; ('est', '&lt;/w&gt;')\n# &gt;&gt;&gt; ('l', 'o')\n# &gt;&gt;&gt; ('lo', 'w')\n# &gt;&gt;&gt; ('n', 'e')\n# &gt;&gt;&gt; ('ne', 'w')\n# &gt;&gt;&gt; ('new', 'est&lt;/w&gt;')\n# &gt;&gt;&gt; ('low', '&lt;/w&gt;')\n# &gt;&gt;&gt; ('w', 'i')\n# &gt;&gt;&gt; vocab = {'low&lt;/w&gt;': 5, 'low e r &lt;/w&gt;': 2, 'newest&lt;/w&gt;': 6, 'wi d est&lt;/w&gt;': 3}\n# &gt;&gt;&gt; pairs = {('low', 'e'): 2, ('e', 'r'): 2, ('r', '&lt;/w&gt;'): 2, ('w', 'i'): 3, \n# &gt;&gt;&gt; ('i', 'd'): 3, ('d', 'est&lt;/w&gt;'): 3}\n</code></pre> <p>Each merge operation pro- duces a new symbol which represents a charac- ter n-gram. Frequent character n-grams (or whole words) are eventually merged into a single sym- bol, thus BPE requires no shortlist. The final sym- bol vocabulary size is equal to the size of the initial vocabulary, plus the number of merge operations \u2013 the latter is the only hyperparameter of the algo- rithm. For efficiency, we do not consider pairs that cross word boundaries. The algorithm can thus be run on the dictionary extracted from a text, with each word being weighted by its frequency. A minimal Python implementation is shown in Al-</p>"},{"location":"NLP/subword/#neural-machine-translation-with-byte-level-subwords","title":"Neural Machine Translation with Byte-Level Subwords","text":"<p>Abstract</p> <p>Almost all existing machine translation models are built on top of character-based vocabularies: characters, subwords or words. Rare characters from noisy text or character-rich languages such as Japanese and Chinese however can unnecessarily take up vocabulary slots and limit its compactness. Representing text at the level of bytes and using the 256 byte set as vocabulary is a potential solution to this issue. High computational cost has however prevented it from being widely deployed or used in practice. In this paper, we investigate byte-level subwords, specifically byte-level BPE (BBPE), which is compacter than character vocabulary and has no out-of-vocabulary tokens, but is more efficient than using pure bytes only is. We claim that contextualizing BBPE embeddings is necessary, which can be implemented by a convolutional or recurrent layer. Our experiments show that BBPE has comparable performance to BPE while its size is only 1/8 of that for BPE. In the multilingual setting, BBPE maximizes vocabulary sharing across many languages and achieves better translation quality. Moreover, we show that BBPE enables transferring models between languages with non-overlapping character sets.</p> <ul> <li>character-level: \u7a00\u5c11\u7684\u4f1a\u5360\u7528\u8bcd\u5178\u5927\u5c0f\uff0c\u4f1a\u5bfc\u81f4OOV\uff0climit compactness</li> <li>byte-level: \u9ad8\u8ba1\u7b97\u6210\u672c</li> <li>byte-level subword\uff1a\u9700\u8981\u7528 CNN\uff5cRNN \u6765 contextualize BBPE embedding\u3002</li> </ul>"},{"location":"NLP/subword/#bbpe","title":"BBPE","text":"<p>Abstract</p> <p>Almost all existing machine translation models are built on top of character-based vocabularies: characters, subwords or words. Rare characters from noisy text or character-rich languages such as Japanese and Chinese however can unnecessarily take up vocabulary slots and limit its compactness. Representing text at the level of bytes and using the 256 byte set as vocabulary is a potential solution to this issue. High computational cost has however prevented it from being widely deployed or used in practice. In this paper, we investigate byte-level subwords, specifically byte-level BPE (BBPE), which is compacter than character vocabulary and has no out-of-vocabulary tokens, but is more efficient than using pure bytes only is. We claim that contextualizing BBPE embeddings is necessary, which can be implemented by a convolutional or recurrent layer. Our experiments show that BBPE has comparable performance to BPE while its size is only 1/8 of that for BPE. In the multilingual setting, BBPE maximizes vocabulary sharing across many languages and achieves better translation quality. Moreover, we show that BBPE enables transferring models between languages with non-overlapping character sets.</p> <p>\u6bd4 character-level \u66f4 compacter, no out-of-vocabulary \u6bd4 byte-level \u66f4 efficient, smaller \u5728 multi-lingual \u4e0a \u80fd vocabulary sharing &amp; transferring models between languages</p> <p>\u539f\u672c\uff1adata compression = \u300b byte + subword</p>"},{"location":"NLP/subword/#encoding","title":"Encoding","text":"<ul> <li>UTF-8 encoding</li> <li>learn (B)BPE vocabularies jointly on source and target sentences using SentencePiece</li> </ul> <p>UTF-8 encoding</p> <p>encodes each Unicode character into 1 to 4 bytes represent a sentence in any language as a sequence of UTF-8 bytes (248 out of 256 possible bytes).</p> <p></p> <p>The design of UTF-8 encoding ensures the uniqueness of this recovery process: for a character UTF-8 encoded with multiple bytes, its trailing bytes will not make a valid UTF-8 encoded character. </p> <p>\u641e\u641e\u5b57\u8282\uff0cbyte\u7684\u5c0f\u77e5\u8bc6</p> <p>BBPE symbols can be partial characters shared by different characters or the combination of complete and partial characters. This arbitrariness may necessitate incorporating a larger context surrounding each symbol for disambiguation and learning the character boundaries.</p> <p>Contextualized\uff08Dynamic\uff09Word Embedding</p> <p>\u5728\u5f88\u591a\u7684NLP\u5de5\u4f5c\u91cc\u9762\uff0c\u4e00\u4e2a\u5355\u8bcd\u53ef\u4ee5\u8868\u793a\u6210\u5f88\u591a\u79cd\u610f\u601d\uff08\u5373\u4e00\u8bcd\u591a\u4e49\uff09\uff0c\u5982\u4f55\u5904\u7406\u4e00\u8bcd\u591a\u4e49\u3001\u8003\u8651\u5355\u8bcd\u5728\u4e0a\u4e0b\u6587\u4e2d\u7684\u610f\u601d From Static Embedding to Contextualized Embedding</p> <p>We propose to use either a depth-wise convolutional layer or a bidirectional recurrent layer with gated recurrent units to contextualize BBPE embeddings before feeding them into the model</p> \\[ x_{ctx\\_emb}=\\text{DepthWiseConv}(X_{emb})\\\\ x_{ctx\\_emb}=\\text{BiGRU}(X_{emb}) \\]"},{"location":"NLP/subword/#decoding","title":"decoding","text":"<p>Empirically, we find that invalid outputs from trained models are very rare.</p> <p>And a common error pattern in halftrained models is redundant repeating bytes. In our system, we try to recover as many Unicode characters as possible from this error pattern efficiently in linear time.</p> <p>The design of UTF-8 encoding ensures the uniqueness of this recovery process: for a character UTF-8 encoded with multiple bytes, its trailing bytes will not make a valid UTF-8 encoded character. Then the best selection in Eq. 1 is unique and so is the final solution.</p>"},{"location":"NLP/subword/#experiment","title":"Experiment","text":"<p>learn (B)BPE vocabularies jointly on source and target sentences using SentencePiece</p> <p></p> <p>learning rate schedule set attention and ReLU dropout to 0.1 use 0.2 residual dropout for Tbase models in X-En use a kernel size of 5 and a padding of 2 on both sides for all convolutional layers.</p> <p>Inference and Evaluation</p> <p>set beam width to 4 for EnDe and 5 for the other and use the best checkpoint by validation loss to generate the predictions. We calculate casesensitive tokenized BLEU (Papineni et al. 2002) as the metrics using sacreBLEU (Post 2018).</p>"},{"location":"NLP/survey_on_synthesizing_training_data/","title":"Synthesize Training Data","text":""},{"location":"NLP/survey_on_synthesizing_training_data/#introduction","title":"Introduction","text":"<p>for TvD, Teaching via Data fine-tune lightweight student model for running system</p>"},{"location":"NLP/survey_on_synthesizing_training_data/#limitations","title":"Limitations","text":"<ol> <li>\u5bf9\u4e00\u4e9b\u50cf NER \u7684 tasks\uff08ICST, NER\uff09\uff0c\u4e0d\u80fd\u751f\u6210 token-level label (slot tags) <sup>1</sup></li> <li>before\uff1ause a separate model to do work alignment. Res: noise \u2191</li> <li> <p>scoped\uff0c\u4e0d\u80fd control \u5b83\u7684 output</p> </li> <li> <p>LLM \u90fd\u662f\u5728\u771f\u5b9e\u7684\u5927\u578b\u6570\u636e\u96c6\u4e0a\u8fdb\u884c\u8bad\u7ec3\u3002\u7531 LLM \u5408\u6210\u7684 generated data \u53d7\u5230 origin dataset \u7684\u5f71\u54cd,\u9032\u4e00\u6b65 worse performance of the fine-tune model. <sup>2</sup></p> </li> <li>limit the diversity     size of vocabulary of synthesing's &lt;&lt; size of ground truth's</li> <li>inherit systematic biases     \u8bcd\u7684 frequency \u4e24\u6781\u5206\u5316\u66f4\u4e25\u91cd     -&gt; sol:</li> </ol>"},{"location":"NLP/survey_on_synthesizing_training_data/#approaches-with-gpt","title":"Approaches with gpt","text":""},{"location":"NLP/survey_on_synthesizing_training_data/#prompt-format","title":"Prompt Format","text":""},{"location":"NLP/survey_on_synthesizing_training_data/#htmlxml-1","title":"HTML/XML <sup>1</sup>","text":"<ul> <li>target: control output</li> </ul> <p>[CLM] Sentence: example1 \\ Translation in French: ... \\ Sentenc:target \\ Translation in French:</p> <p>[CLM] Sentence: example1  Translation in French: ...  Sentenc:target  Translation in French:</p>"},{"location":"NLP/survey_on_synthesizing_training_data/#common","title":"common","text":""},{"location":"NLP/survey_on_synthesizing_training_data/#for-multi-languages","title":"for multi-languages","text":"<ul> <li> <p>Back-translate     English -&gt; French -&gt;English</p> <p>Senetence:...  Translation in English:</p> </li> <li> <p>Paraphrase</p> <p>another way to say \"...\":</p> </li> </ul>"},{"location":"NLP/survey_on_synthesizing_training_data/#for-slot-tags","title":"for slot tags","text":""},{"location":"NLP/survey_on_synthesizing_training_data/#linguist1","title":"LINGUIST<sup>1</sup>","text":"<p>Language Model Instruction Tuning to Generate Annotated Utterances for Intent Classification and Slot Tagging</p> <p>!!! p task: joint intent classification and slot tagging = IC+ST     outperforms state-of-the-art baselines like translation and paraphrasing</p> <p>introduce an output format with brackets and numbers that enables the model to produce synthetic data with the slots already tagged.</p> <p></p> <p>Summary</p> <ol> <li>XML format</li> <li>\u751f\u6210\u7684 textdata \u5305\u62ec\u4e86 <code>[label, entity]</code></li> <li>\u6700\u597d\u662f few shots\uff0c0-shot \\(\\implies\\) more noise</li> <li>wildcard instruction <code>*</code> \u81ea\u7531\u53d1\u6325\uff0cwhich did not appear in the original examples</li> <li>\u53ef\u4ee5\u6539 language</li> </ol>"},{"location":"NLP/survey_on_synthesizing_training_data/#clasp17","title":"CLASP<sup>1,7</sup>","text":"<p>Few-shot Cross-Lingual Data Augmentation for Semantic Parsing</p> <p>task: few-shot multilingual semantic parsing, SP</p> <p>machine translation</p> <p></p> <ol> <li>multi-language</li> </ol>"},{"location":"NLP/survey_on_synthesizing_training_data/#for-diversity","title":"for diversity","text":""},{"location":"NLP/survey_on_synthesizing_training_data/#attrprompt-28","title":"AttrPrompt <sup>2,8</sup>","text":"<p>AttrPrompt github</p> <ul> <li>origin SimPrompt     simple class-conditional prompt</li> </ul> <p> </p>"},{"location":"NLP/survey_on_synthesizing_training_data/#process","title":"process","text":"<p>For a given classification task</p> <ol> <li> <p>initail step     identify attribute dimensions and their corresponding attribute values in an interactive, semi-automated process facilitated by the LLM.</p> <ol> <li> <p>use <code>gpt</code> help establish both attribute dimensions and attribute values.     !!! quote \"\"         Which attribute dimensions do you consider vital in determining the topic of a news article?\u201d</p> <pre><code>!!! quote \"\" \n    \u201csubtopics, length, location, reader group, style, time\u201d\n2. adopt the human-ai collaboration scheme to interactively select the attribute dimensions of **the highest quality** that best suit the dataset. **\u4eba\u4e3a\u5730\u9009\u62e9** Best Top-N attributes.\n3. generate values corresponding to selected attributes similarly\n</code></pre> <p>List 10 diverse subtopics for {class_name} news on NYT.</p> atrrs class-depe class-indepe need value filtering remain unchanged across different classes examples subtopic length 4. Class-Dependent Attribute Value Filtering, CAF - target\uff1a avoid ambiguity and potential connections to multiple classes \u5bf9 gpt \u6839\u636e\u4efb\u52a1\u7ed9\u51fa\u7684 Top-5 \u4e2a\u76f8\u4f3c classes\uff0c\\(\\forall \\text{value}\\in \\text{class}\\)\u8fdb\u884c\u8be2\u95ee\uff1a\u662f\u5426\u548c\u522b\u7684\u7c7b\u76f8\u5173\u3002\u76f8\u5173\u5c31 remove. <p>List 5 similar classes for {class-name} news on NYT. The set of classes is listed as: {[a list of class-names]}.</p> <p>if the answer is positive which indicates a potential ambiguity, we remove that attribute value for the specific class. </p> </li> </ol> </li> <li> <p>generate diverse prompts by combining attributes randomly.</p> <p>Suppose you are a review writer. Please write a review for {product-class} product in Amazon following the requirements below:</p> <ol> <li>The review should be about the product of {subtopic};</li> <li>The brand for the product should be {brand};</li> <li>Should be in length between {length:min-words} and {length:max-words} words;</li> <li>Should describe the usage experience {usage-experience}</li> <li>The writing style of the review should be {style};</li> <li>the review must be relevant to {product-class} and irrelevant to: {similar-class}.</li> </ol> <p>Summary</p> <p>\u8bbe\u8ba1\u4e00\u79cd\u4f7f\u7528\u4e0d\u540c\u7684attributed prompt\uff08\u5e26\u6709\u7279\u5f81\u7684prompt\uff09\u751f\u6210\u8bad\u7ec3\u6570\u636e\u7684\u65b9\u6cd5\uff08\u6bd4\u5982\u9650\u5236\u957f\u5ea6\u3001\u98ce\u683c\uff09 \u5c55\u671b\uff1a -  exploring automated or semi-automated methods for identifying high-quality attribute dimensions and values - Domain Limitation \u53ea\u5728 text classification \u4e2d - \u751f\u6210\u7684\u6570\u636e\u7ee7\u627f\u4e86 LLM \u7684 hallucination \u5e7b\u89c9\u95ee\u9898(\u751f\u6210\u7684\u6587\u672c\u4e2d\u5728\u8bed\u4e49\u6216\u53e5\u6cd5\u4e0a\u770b\u4f3c\u5408\u7406\u4f46\u5b9e\u9645\u4e0a\u4e0d\u6b63\u786e\u6216\u65e0\u610f\u4e49\u7684\u9519\u8bef)</p> </li> </ol>"},{"location":"NLP/survey_on_synthesizing_training_data/#increasing-diversity-wihile-maintain-accuracy-3","title":"increasing diversity wihile maintain accuracy <sup>3</sup>","text":"<p>Write a movie review (text type) to cover all following elements Elements: positive sentiment (label) Movie review (text type): \"This is a great movie\"</p> <p></p> <pre><code>openai.Completion.create(\n    engine=\u2019davinci\u2019,\n    prompt='q: What is the capital of france?\\na:', \n    logprobs = 5,  # TopN the natural log of the probability\n    stop = '\\n', \n    temperature=0,\n    logit_bias={Token_ID:logprob} # map: {6342:-1, 1582:-10}\n    )\n\n\"\"\"\n- logit_bias:\n    Accepts a json object that\n    maps tokensto an associated bias value from -100 to 100\n    token_ID: in the GPT tokenizer\n\"\"\"\n</code></pre>"},{"location":"NLP/survey_on_synthesizing_training_data/#logit-supression9","title":"logit supression<sup>9</sup>","text":"<p>OpenAI API</p> <ul> <li> <p>Logit bias parameter</p> <p>GPT3 \u7684\u4e00\u4e2a\u5f88\u6709\u7528\u7684\u53c2\u6570\u3002\u901a\u8fc7 modify the likelihood of tokens \u63a7\u5236 token in GPT Tokenizer(convert text to token IDs) \u7684\u751f\u6210\uff0cunwanted tokens \u2193\uff0c wanted tokens \u2191.<sup>9</sup> bias \u4f1a\u76f4\u63a5\u52a0\u5230 gpt \u751f\u6210\u7684 logprob \u4e0a\u3002 \\(\\text{logprob}\\begin{cases}-1|1&amp;\\uparrow\\downarrow\\text{the likelhood of tokens}\\\\-100|100&amp;\\text{\u7981\u6b62\u6216\u8005\u76f4\u63a5\u6307\u5b9a }\\end{cases}\\) create-logit_bias in openAI Docs</p> <p>Question</p> <ul> <li>\u4e2d\u6587\uff1f\u4f1a\u6709\u5728\u90a350000 </li> <li>only 100 tokens for logit biasing</li> </ul> </li> <li> <p>how gpt generate tokens     When run, GPT-3 takes the prompt and predicts the probabilities of the token that is going to occur next. <sup>9</sup> Rather than the percentages, logprobs is used. \\(\\text{logprob}\u21920\\iff\\text{prob}\u2191\\) .<sup>9</sup></p> </li> </ul> <p>Specifically, for the logit bias weights, we multiplied the token appearance ratio (in percentage) by -7.5 while capping the minimum weight at \u20137.5.<sup>9</sup></p> <ol> <li>\u7edf\u8ba1 tokens \u7684 frequency </li> <li>logprob = \u51fa\u73b0\u7684 freq * -7.5\uff08\u4e5f\u5c31\u662f\u8bf4\u6700\u4f4e\u4e0d\u53ef\u80fd\u8d85\u8fc7 -7.5</li> </ol>"},{"location":"NLP/survey_on_synthesizing_training_data/#temperature-based-sampling56","title":"temperature-based sampling<sup>5,6</sup>","text":"<p>\u6e29\u5ea6 \u91c7\u6837\u53d7\u5230\u7edf\u8ba1\u70ed\u529b\u5b66\u7684\u542f\u53d1\uff0c\u5176\u4e2d\u9ad8\u6e29\u610f\u5473\u7740\u66f4\u6709\u53ef\u80fd\u9047\u5230\u4f4e\u80fd\u6001\u3002\u5728\u6982\u7387\u6a21\u578b\u4e2d\uff0clogits \u626e\u6f14\u7740\u80fd\u91cf\u7684\u89d2\u8272\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5c06 logits \u9664\u4ee5\u6e29\u5ea6\u6765\u5b9e\u73b0\u6e29\u5ea6\u91c7\u6837\uff0c\u7136\u540e\u5c06\u5176\u8f93\u5165\u5230 softmax \u4e2d\u5e76\u83b7\u5f97\u91c7\u6837\u6982\u7387</p> <p></p> <p></p> <p>0.3, 0.7, 0.9, and 1.3<sup>3</sup></p> <ul> <li>create-temperature in openAI Docs \\(\\text{temperature} \\in[0,2]\\begin{cases}\\uparrow\\ge0.8&amp;\\text{more random}\\\\\\downarrow\\le 0.2&amp;\\text{more focused and deterministic}\\end{cases}\\)</li> </ul> <p>Question</p> <p>The Curious Case of Neural Text Degeneration We generally recommend altering this or top_p but not both.</p> <p> </p>"},{"location":"NLP/survey_on_synthesizing_training_data/#metrics","title":"metrics","text":"<p>!!! danger the quality of synthesized training data <sup>4</sup>     - fidelity         how closely the synthetic data matches with the original data     - utility         synthetic data performs well on common tasks in data science     - privacy         protect sensitive information\uff0c\u6b64\u8655\u6c92\u7ba1     - diversity</p> <ul> <li>\u3010fidelity\u3011   </li> <li>\u3010utility\u3011Feature importance score<sup>4</sup>     \u6aa2\u67e5\u9806\u5e8f</li> <li>\u3010utility\u3011QScore\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f:   This score is used to check if a model trained on synthetic data will give the same results as a model trained on original data. It does this by running random aggregation-based queries on both datasets and comparing the results. If the results are similar, it means the synthetic data has good utility.</li> <li> <p>\u3010utility\u3011the accuracies of models <sup>3</sup></p> <p>We compared the accuracies of models trained with generated data to 1) models trained with oracle datasets (oracle model) and 2) GPT-3\u2019s few-/zero-shot classifications</p> </li> <li> <p>label accuracy<sup>3</sup>     the accuracy of the alignment between the generated texts and the specified labels</p> </li> <li> <p>\u3010diversity\u3011average mean pairwise distances<sup>3</sup></p> <ul> <li>Remote-Clique metric cox2021directed, which is the average mean pairwise distances. S</li> <li>we embedded generated data with BERT devlin2019bert, then calculated the distances</li> </ul> </li> <li> <p>\u3010utility\u3011similarity between dataset <sup>3</sup>  We also measured the similarity of the generated dataset to the oracle dataset with the average mean pairwise distances between the two. For similarity, we also used BERT to embed the generated texts. </p> </li> <li> <p>\u3010diversity\u3011vocalbulary size for lexical diversity of datasets<sup>2</sup> </p> </li> <li> <p>\u3010diversity\u3011cosine similarity for the diversity from the semantic perspective<sup>2</sup></p> <ul> <li>the cosine similarity is calculated based on the embedding of Sentence-BERT Reimers and Gurevych</li> <li>cosine similarity \u2193  diversity \u2191 </li> </ul> </li> <li> <p>\u5f00\u9500</p> <p>attributed prompt \u53ea\u9700\u8981 simple prompt 5%\u7684\u5f00\u9500\uff08\u4e3b\u8981\u7528\u4e8e query chatgpt\uff09\u5c31\u53ef\u4ee5\u8fbe\u5230\u548c\u540e\u8005\u4e00\u6837\u7684\u6548\u679c\u3002</p> </li> </ul>"},{"location":"NLP/survey_on_synthesizing_training_data/#reference","title":"Reference","text":"<ul> <li>Using large language models LLMs to synthesize training data</li> <li>Large Language Model as Attributed Training Data Generator: A Tale of Diversity and Bias</li> <li>Increasing Diversity While Maintaining Accuracy: Text Data Generation with Large Language Models and Human Interventions</li> <li>HOW TO USE LLMS IN SYNTHESIZING TRAINING DATA</li> <li>temperature-based sampling\uff08\u57fa\u4e8e\u6e29\u5ea6\u7cfb\u6570\u7684\u91c7\u6837\uff09</li> <li>How to sample from language models</li> <li>CLASP: Few-Shot Cross-Lingual Data Augmentation for Semantic Parsing</li> <li>AttrPrompt\uff1a\u4e00\u4e2a\u5173\u4e8e\u591a\u6837\u6027\u4e0e\u504f\u89c1\u7684\u6545\u4e8b</li> <li>Controlling GPT-3 with Logit Bias</li> <li>The need for sampling temperature and differences between whisper, GPT-3, and probabilistic model's temperature</li> </ul> <p>\u672a\u5b8c\u5f85\u7eed</p>"},{"location":"NLP/t5/","title":"T5s","text":""},{"location":"NLP/t5/#t5","title":"T5","text":"<p>pre-trained model, encoder-decoder</p> <p>\u628a\u6240\u6709\u7684 NLP tasks \u6620\u5c04\u6210\u4e00\u4e2a\u5e26\u6709\u4efb\u52a1\u524d\u7f00\u7684 text2text \u95ee\u9898\u3002\u5728\u6709\u76d1\u7763\u548c\u81ea\u76d1\u7763\u4efb\u52a1\u8fdb\u884c\u9884\u8bad\u7ec3\u3002</p> <p>\u6709\u5728\u4e0b\u6e38\u4efb\u52a1\u4e0a\u8fdb\u884c\u9884\u8bad\u7ec3\uff0c\u6240\u4ee5\u53ef\u4ee5\u5f00\u7bb1\u5373\u7528</p>"},{"location":"NLP/t5/#_1","title":"\u8bad\u7ec3\u8bed\u6599","text":"<p>P</p> <p>T5 \u7684\u9884\u8bad\u7ec3\u5305\u542b\u65e0\u76d1\u7763\u548c\u6709\u76d1\u7763\u4e24\u90e8\u5206\u3002\u65e0\u76d1\u7763\u90e8\u5206\u4f7f\u7528\u7684\u662f Google \u6784\u5efa\u7684\u8fd1 800G \u7684\u8bed\u6599\uff08\u8bba\u6587\u79f0\u4e4b\u4e3a C4\uff09\uff0c\u800c\u8bad\u7ec3\u76ee\u6807\u5219\u8ddf BERT \u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u6539\u6210\u4e86 Seq2Seq \u7248\u672c\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u770b\u6210\u4e00\u4e2a\u9ad8\u7ea7\u7248\u7684\u5b8c\u5f62\u586b\u7a7a\u95ee\u9898\uff1a</p> <p>[In]\uff1a\u660e\u6708\u51e0\u65f6\u6709\uff0c[M0] \u95ee\u9752\u5929\uff0c\u4e0d\u77e5 [M1]\uff0c\u4eca\u5915\u662f\u4f55\u5e74\u3002\u6211\u6b32[M2]\u5f52\u53bb\uff0c\u552f\u6050\u743c\u697c\u7389\u5b87\uff0c\u9ad8\u5904 [M3]\uff1b\u8d77\u821e [M4] \u6e05\u5f71\uff0c\u4f55\u4f3c\u5728\u4eba\u95f4\u3002 [OUT]\uff1a[M0] \u628a\u9152 [M1] \u5929\u4e0a\u5bab\u9619 [M2] \u4e58\u98ce [M3] \u4e0d\u80dc\u5bd2 [M4] \u5f04 [In]\uff1a\u8bc6\u522b\u8be5\u53e5\u5b50\u7684\u60c5\u611f\u503e\u5411\uff1a\u8fd9\u8d9f\u5317\u4eac\u4e4b\u65c5\u6211\u611f\u89c9\u5f88\u4e0d\u9519\u3002 [OUT]\uff1a\u6b63\u9762 [In]\uff1a\u4e0b\u9762\u662f\u4e00\u5219\u4ec0\u4e48\u65b0\u95fb\uff1f\u516b\u4e2a\u6708\u4e86\uff0c\u7ec8\u4e8e\u53c8\u80fd\u5728\u8d5b\u573a\u4e0a\u770b\u5230\u5973\u6392\u59d1\u5a18\u4eec\u4e86\u3002 [OUT]\uff1a\u4f53\u80b2 [In]\uff1a\u9605\u8bfb\u7406\u89e3\uff1a\u7279\u6717\u666e\u4e0e\u62dc\u767b\u5171\u540c\u7ade\u9009\u4e0b\u4e00\u4efb\u7f8e\u56fd\u603b\u7edf\u3002\u6839\u636e\u4e0a\u8ff0\u4fe1\u606f\u56de\u7b54\u95ee\u9898\uff1a\u7279\u6717\u666e\u662f\u54ea\u56fd\u4eba\uff1f [OUT]\uff1a\u7f8e\u56fd</p> <p>Paper: Exploring the Limits of Transfer Learning with a Unified Text-to-Text Transformer</p>"},{"location":"NLP/t5/#mt5-multilingual-t5","title":"mT5, Multilingual T5","text":"<p>pre-trained model, encoder-decoder, multilingual</p> <p>\u8fd8\u6ca1\u586b\u5b8c\u90a3\u4e2a\u5c60\u699c\u7684T5\u6a21\u578b\uff0c\u73b0\u5728\u53ef\u4ee5\u5728\u4e2d\u6587\u4e0a\u73a9\u73a9\u4e86</p> <p>\u5b83\u4e3b\u8981\u7684\u6539\u52a8\u6765\u81ea\u8bba\u6587 GLU Variants Improve Transformer [3]\uff0c\u4e3b\u8981\u662f\u501f\u7528\u4e86Language Modeling with Gated Convolutional Networks [4] \u7684 GLU\uff08Gated Linear Unit\uff09\u6765\u589e\u5f3a FFN \u90e8\u5206\u7684\u6548\u679c\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u539f\u6765 T5 \u7684 FFN \u4e3a\uff08T5 \u6ca1\u6709 Bias\uff09\uff1a</p> <p>mT5 \u6ca1\u6709\u50cf T5 \u5728\u4e0b\u6e38\u4efb\u52a1\u8fdb\u884c\u9884\u8bad\u7ec3\uff0c\u6240\u4ee5\u4e00\u5b9a\u8981 fine-tune</p> <p>mt5 cannot generate coherent sentences out-of-the-box because it's only be pretrained on the span-mask filling task and not on any down-stream tasks. Generating from mT5 #8704</p> <p>mT5 \u6db5\u76d6\u4e86 101 \u79cd\u8bed\u8a00\uff0c\u603b\u8bcd\u8868\u6709 25 \u4e07\uff0c\u800c\u4e14\u5b83\u91c7\u7528\u7684 T5.1.1\u7ed3\u6784\u7684 Softmax \u8fd8\u4e0d\u5171\u4eab\u53c2\u6570\uff0c\u8fd9\u5c31\u5bfc\u81f4\u4e86 Embedding \u5c42\u5360\u7528\u4e86\u76f8\u5f53\u591a\u7684\u53c2\u6570\u91cf\u3002 \u6bd4\u5982 mT5 small \u7684\u53c2\u6570\u91cf\u4e3a 3 \u4ebf\uff0c\u5176\u4e2d Embedding \u76f8\u5173\u7684\u5c31\u5360\u4e86 2.5 \u4ebf\uff0c\u5173\u952e\u662f\u91cc\u8fb9\u7684\u5927\u90e8\u5206\u53c2\u6570\u6211\u4eec\u90fd\u7528\u4e0d\u4e0a\uff0c\u7eaf\u7cb9\u662f\u4e0d\u5fc5\u8981\u7684\u6d6a\u8d39\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u4e3b\u8981\u5173\u5fc3\u4e2d\u6587\u4efb\u52a1\u7684\u6211\u4eec\u6765\u8bf4\uff0c\u6709\u5fc5\u8981\u7cbe\u7b80\u4e00\u4e0b\u8fd9\u4e2a Embedding \u5c42\u4e86\u3002</p> <p>\u8fd8\u6ca1\u7ec6\u770b \u90a3\u4e2a\u5c60\u699c\u7684T5\u6a21\u578b\uff0c\u73b0\u5728\u53ef\u4ee5\u5728\u4e2d\u6587\u4e0a\u73a9\u73a9\u4e86</p> <p>\u5bf9\u6a21\u578b\u7684\u7cbe\u7b80\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u8981\u5728\u4e24\u4e2a Embedding \u77e9\u9635\u4e2d\u5220\u9664\u4e0d\u9700\u8981\u7684\u884c\u5c31\u884c\u4e86\uff0c\u5173\u952e\u5728\u4e8e\u5982\u4f55\u51b3\u5b9a\u8981\u4fdd\u7559\u7684 token\uff0c\u4ee5\u53ca\u5982\u4f55\u5f97\u5230\u4e00\u4e2a\u7cbe\u7b80\u540e\u7684 sentencepiece \u6a21\u578b\u3002 \u51b3\u5b9a\u8981\u4fdd\u7559\u7684 token\uff0c\u7b80\u5355\u6765\u60f3\u5c31\u662f\u628a\u4e2d\u6587\u7684 token \u4fdd\u7559\u4e0b\u6765\uff0c\u4f46\u662f\u4e5f\u4e0d\u53ea\u662f\u4e2d\u6587\uff0c\u82f1\u6587\u7684\u4e5f\u8981\u4fdd\u7559\u4e00\u90e8\u5206\uff0c\u770b\u4e0a\u53bb\u4f3c\u4e4e\u53ea\u662f\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u95ee\u9898\uff0c\u5b9e\u9645\u4e0a\u6ca1\u90a3\u4e48\u7b80\u5355\uff0c\u7528\u82f1\u6587\u5b57\u6bcd\u7684\u4e5f\u4e0d\u4e00\u5b9a\u662f\u82f1\u8bed\uff0c\u7528\u4e2d\u6587\u5b57\u7684\u4e5f\u4e0d\u4e00\u5b9a\u662f\u4e2d\u6587\uff0c\u8fd9\u662f\u4e2a\u8ba9\u4eba\u7ea0\u7ed3\u7684\u4e8b\u60c5\u3002 \u4e8e\u662f\u7b14\u8005\u60f3\u4e86\u53e6\u5916\u4e00\u4e2a\u529e\u6cd5\uff1a\u7528\u8fd9\u4e2a 25 \u4e07 token \u7684 tokenizer \u5bf9\u7b14\u8005\u6536\u96c6\u7684\u51e0\u5341 G \u4e2d\u6587\u8bed\u6599\u5206\u8bcd\uff0c\u7edf\u8ba1\u5206\u8bcd\u7ed3\u679c\uff0c\u7136\u540e\u6309\u7167\u8bcd\u9891\u9009\u62e9\u524d\u9762\u7684\u90e8\u5206\uff08\u6700\u540e\u4fdd\u7559\u4e86 3 \u4e07\u591a\u4e2a token\uff09\u3002\u8fd9\u6837\u867d\u7136\u8d39\u65f6\u4e00\u4e9b\uff0c\u4f46\u662f\u6bd4\u8f83\u9760\u8c31\uff0c\u80fd\u786e\u4fdd\u628a\u6211\u4eec\u6bd4\u8f83\u9700\u8981\u7684 token \u4fdd\u7559\u4e0b\u6765\u3002\u51b3\u5b9a\u8bcd\u8868\u540e\uff0c\u5c31\u8981\u4fee\u6539\u5f97\u5230\u4e00\u4e2a\u65b0\u7684 sentencepiece \u6a21\u578b\uff0c\u8fd9\u4e5f\u6709\u70b9\u9ebb\u70e6\uff0c\u4f46\u6700\u7ec8\u7ecf\u8fc7\u641c\u7d22\u540e\u8fd8\u662f\u628a\u8fd9\u4e2a\u4e8b\u60c5\u89e3\u51b3\u4e86\uff0c\u5904\u7406\u65b9\u6cd5\u90fd\u5206\u4eab\u5728 Github \u4e0a\u3002</p> <p>Paper: mT5: A massively multilingual pre-trained text-to-text transformer</p>"},{"location":"SQL/","title":"SQL","text":"<p>mysql \u5e95\u5c42\u7684\u7d22\u5f15\u662fB+ tree</p> <p>\u96c6\u5408\u64cd\u4f5c\u63d0\u9ad8\u8fde\u8868\u6548\u7387</p> <p>\u67e5\u627e\u7537\u5973\u91cd\u540d\u7684\u540d\u5b57 <pre><code>select name, count(name)\nfrom(\n    select distinct name\n    from student\n    where sex = 'male'\n    union all\n    select distince name\n    from student\n    where sex = 'female'\n    ) as s1\ngroup by name\nhaving count(name) = 2\n</code></pre></p>"},{"location":"SQL/#datatype","title":"datatype","text":""},{"location":"SQL/#_1","title":"\u7f16\u7801","text":""},{"location":"SQL/#charset","title":"charset","text":"charset <code>utf8</code> <code>utf8_general_ci</code> <code>utf8mb4</code> <code>utf8mb4_unicode_ci</code>"},{"location":"SQL/#collate","title":"collate","text":"<p>\u5b9e\u9645\u4e0a\u7b26\u53f7\u90fd\u662f\u7f16\u7801\u50a8\u5b58\u7684\uff0c\u7f16\u7801\u4f1a\u5f71\u54cd\u8bfb\u53d6\u7684\u901f\u5ea6\u3001\u6392\u5e8f\u7684\u4f4d\u7f6e\u3001\u662f\u5426\u533a\u5206\u5927\u5c0f\u5199\u3001\u652f\u6301\u7684\u7b26\u53f7\u7b49\u7b49\u95ee\u9898\u3002</p> <p>||example|| |--|--|--|--| |<code>general</code>| <code>utf8mb4_general_ci</code> |\u5728\u6392\u5e8f\u6642\u6bd4\u8f03\u5feb\uff0c\u4f46\u5728\u67d0\u4e9b\u7279\u6b8a\u60c5\u6cc1\u6703\u6392\u932f |<code>unicode</code> \ud83d\udc4d| <code>utf8mb4_unicode_ci</code> | \u5b8c\u6574\u7684 Unicode \u6a19\u6e96\uff0c\u6703\u5b58\u4e2d\u6587\u3001\u5fb7\u6587\u3001Emoji</p> \u5927\u5c0f\u5199\u533a\u5206 \u5927\u5c0f\u5beb \u7279\u6b8a\u7b26\u53f7 <code>ci</code> default case-insensitive \u274c \u274c <code>bin</code> binary value \u2705 \u274c <code>cs</code> case-sensitive \u2705 \u2705 <ul> <li>MySQL \u7de8\u78bc\u6311\u9078\u8207\u5dee\u7570\u6bd4\u8f03</li> </ul>"},{"location":"SQL/#int","title":"int","text":"<p>!!! p int(M)     <code>int(M:max_display_width)</code> ,\u65e0\u8bba M \u662f\u591a\u5c11\uff0c\u90fd\u662f int \u7c7b\u578b\uff0c\u4e5f\u5c31\u662f\u5b58\u50a8 <code>bytes = 4</code>     - int(1)\u548cint(11)\u7684\u533a\u522b |datatype|bytes|default_M|| |--|--|--|--| tinyint|1| smallint|2| mediumint|3| int|4| bigint|8|</p>"},{"location":"SQL/#char","title":"char","text":"<p>\u6839\u636e Mysql \u5b98\u65b9\u5efa\u8bae\uff0c\u4f7f\u7528 VARCHAR \u66ff\u4ee3 CHAR</p>"},{"location":"SQL/#format","title":"format","text":"<ul> <li>\u56db\u820d\u4e94\u5165\uff0c\u4fdd\u7559n\u4f4d\u5c0f\u6570 <code>round(col, n)</code></li> <li>\u5927\u5c0f\u5199 <code>lower(col)</code>, <code>upper(col)</code></li> </ul>"},{"location":"SQL/#query","title":"query","text":"<p><code>select * from users;</code> <code>select &lt;old_col_name&gt; as &lt;new_col_name&gt; from users;</code></p> <p>\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528 <code>select *</code>, \u800c\u662f\u663e\u5f0f\u5217\u5217\u8868 <code>select col1, col2,...</code></p> <p>\u5728\u9879\u76ee\u4e2d <code>select *</code> \u4f1a\u5f71\u54cd\u5230\u6574\u4e2a\u9879\u76ee\u7684\u6027\u80fd\uff0c\u4f1a\u7ed9\u670d\u52a1\u5668\u9020\u6210\u4e00\u5b9a\u7684\u538b\u529b\u3002</p> <p><code>select 1 from table;</code> \u7684\u7528\u6cd5</p> <p>\u5f53\u6211\u4eec\u53ea\u5173\u5fc3\u6570\u636e\u8868\u6709\u591a\u5c11\u8bb0\u5f55\u884c\u800c\u4e0d\u9700\u8981\u77e5\u9053\u5177\u4f53\u7684\u5b57\u6bb5\u503c\u3002 \u901a\u5e38\u7528\u4e8e\u5b50\u67e5\u8be2\u3002 - \u7ed3\u679c     \u5bf9\u7b26\u5408\u6761\u4ef6\u7684\u8bb0\u5f55\u8fd4\u56de\u7684\u6c38\u8fdc\u53ea\u6709\u4e00\u4e2a\u503c <code>1</code>\uff0c\u5f53\u7136\uff0c\u5982\u679c\u6709\u8fd4\u56de\u503c\u7684\u8bdd\u3002 \u67e5\u8be2\u5230\u6709\u591a\u5c11\u8bb0\u5f55\u884c\u5b58\u5728\u5c31\u8f93\u51fa\u591a\u5c11\u4e2a\u201c1\u201d\uff0c\u6bcf\u4e2a\u201c1\u201d\u4ee3\u8868\u67091\u884c\u8bb0\u5f55 - \u4f18\u70b9   - <code>select 1 ...</code> &gt; <code>select constant  ...</code> &gt; <code>select col ...</code> &gt;  <code>select * ...</code>   - \u6b64\u65f6\u6570\u636e\u5e93\u5c31\u4e0d\u4f1a\u53bb\u68c0\u7d22\u6570\u636e\u8868\u91cc\u6bcf\u6761\u5177\u4f53\u7684\u8bb0\u5f55\u548c\u6bcf\u6761\u8bb0\u5f55\u91cc\u6bcf\u4e2a\u5177\u4f53\u7684\u5b57\u6bb5\u503c\u5e76\u5c06\u5b83\u4eec\u653e\u5230\u5185\u5b58\u91cc\uff0c\u53ef\u4ee5\u51cf\u5c11\u7cfb\u7edf\u5f00\u9500\uff0c\u63d0\u9ad8\u8fd0\u884c\u6548\u7387   - \u9009\u7528\u6570\u5b57<code>1</code>\u662f\u56e0\u4e3a\u5b83\u6240\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4\u6700\u5c0f\uff0c\u800c\u4e14\u5177\u6709\u7edf\u8ba1\u7528\u9014</p> <pre><code># 1. \u67e5\u770b\u5b58\u4e0d\u5b58\u5728\n$ select 1 from usrs where [conditions] limit 1\n\n# 2. \u5feb\u901f\u7edf\u8ba1\u6709\u591a\u5c11\u6761\n$ select count(1) from users where [conditions]\n\n# 3. \u5b50\u67e5\u8be2\nselect * from t1 where exists (select 1 from t2 where t1.id = t2.id)\n</code></pre> <p></p> <ul> <li>SELECT 1 FROM TABLE\u7684\u4f5c\u7528</li> <li>select 1 in SQL</li> </ul>"},{"location":"SQL/#_2","title":"\u4e00\u4e9b\u7279\u522b\u7684\u9009\u53d6","text":"<ul> <li> <p>\u6761\u4ef6</p> <ul> <li>\u4e3a\u7a7a <code>null</code></li> </ul> <pre><code>select cols\nfrom users\nwhere col is not null\n</code></pre> </li> </ul>"},{"location":"SQL/#_3","title":"\u65e5\u671f","text":"<ul> <li> <p>\u683c\u5f0f</p> <ul> <li>\u5e38\u89c1\u7684\u65e5\u671f\u6570\u636e\u683c\u5f0f<code>'yyyy-mm-dd h:m:s'</code> \u548c <code>'yyyymmdd'</code>   !!! danger \"\u8981\u52a0\u5f15\u53f7\"</li> <li>\u8f6c\u6362</li> <li>\u8f49\u63db\u683c\u5f0f <code>date_format(date, format)</code></li> </ul> format description <code>%Y</code> 4\u4f4d\uff0c2022 <code>%y</code> 2\u4f4d\uff0c22 <code>%M</code> \u6708\u540d\uff0cJune <code>%m</code> \u6708\uff0800-12\uff09\uff0c06 <code>%d</code> \u5929\uff0800-31\uff09\uff0c06 <code>%e</code> \u5929\uff080-31\uff09\uff0c6 <ul> <li>\u65f6\u95f4\u6233   !!! p  \"\u65f6\u95f4\u6233\u548c\u65e5\u671f\u683c\u5f0f\u4e4b\u95f4\"       \u5728\u5b9e\u9645\u5de5\u4f5c\u73af\u5883\u4e2d\uff0c\u5bf9\u4e8e\u7528\u6237\u884c\u4e3a\u53d1\u751f\u7684\u65f6\u95f4\u901a\u5e38\u90fd\u662f\u7528\u65f6\u95f4\u6233\u8fdb\u884c\u8bb0\u5f55\uff0c\u65f6\u95f4\u6233\u548c\u65e5\u671f\u683c\u5f0f\u4e4b\u95f4\u53ef\u4ee5\u5229\u7528<code>from_unixtime</code> \u548c <code>unix_timestamp</code> \u8fdb\u884c\u8f6c\u6362\u3002       <pre><code># 1. \u65f6\u95f4\u6233 -&gt; \u65e5\u671f\nselect from_unixtime(timestamp,'yyyy-MM-dd') as date\nFrom question_practice_detail;\n\n# 2. \u65e5\u671f -&gt; \u65f6\u95f4\u6233\nselect unix_timestamp(date,'yyyy-MM-dd') as timestamp\nFrom question_practice_detail;           \n</code></pre></li> <li>\u62ff\u5230\u4fe1\u606f\uff0cbased on \u5e38\u89c1\u65f6\u95f4\u683c\u5f0f</li> </ul> examples <code>year(date), month(date), day(date)</code> \u63d0\u53d6\u5e74\u6708\u65e5 return int <code>last_day(date)</code> \u9019\u5e74\u9019\u6708\u7684\u6700\u5f8c\u4e00\u5929\u7684date <code>last_day('20170221')</code>-&gt; 2017-02-28 - \u65e5\u671f\u5dee\u8a08\u7b97 case \u8ba1\u7b97\u65f6\u95f4\u95f4\u9694\uff1a \u5728\u8fd9\u4e4b\u524d\uff0c\u5728\u8fd9\u4e4b\u540e -- -- \u5929\u6570 <code>datediff(date_1, date_2)</code> \u81ea\u5b9a\u4e49 <code>timestampdiff(unit,date_1,date_2)</code>, unit:<code>day,month,miniute</code> <ul> <li>\u5982\u679c date_1 or date_2 is null , return null</li> <li><code>date_sub(start_date, interval n day)</code> \u8fd4\u56destart_date \u51cf\u5c11 n \u5929\u540e\u7684\u65e5\u671f\u3002</li> <li><code>date_add(start_date, interval n day)</code> \u8fd4\u56de start_date \u589e\u52a0 n \u5929\u540e\u7684\u65e5\u671f</li> </ul> </li> </ul> <pre><code># 1. \u8fd4\u56de\u6765\u7684\u5355\u4f4d\u662f\u5929\u6570\nselect datediff('2021-08\u201301', '2021-08\u201305') ... ;\nselect timestampdiff(minute,'2021-08\u201301', '2021-08\u201305') ...;\n\n# 2. \nselect date_sub('2021-08\u201301',interval 8 day) ...;\n\n# 3. \nselect date_add('2021-08\u201301',interval 8 day) ...;\n</code></pre> <p>\u8bf7\u628aexam_record\u8868\u4e2d2021\u5e749\u67081\u65e5\u4e4b\u524d\u5f00\u59cb\u4f5c\u7b54\u7684\u672a\u5b8c\u6210\u8bb0\u5f55\u5168\u90e8\u6539\u4e3a\u88ab\u52a8\u5b8c\u6210\uff0c\u5373\uff1a\u5c06\u5b8c\u6210\u65f6\u95f4\u6539\u4e3a'2099-01-01 00:00:00'\uff0c\u5206\u6570\u6539\u4e3a0</p> <pre><code>update exam_record\nset submit_time = '2099-01-01 00:00:00', score = 0\nwhere datediff(start_time, '2021-09-01') &lt; 0 and\n  submit_time is null;\n</code></pre> <p>\u8bf7\u5220\u9664exam_record\u8868\u4e2d\u4f5c\u7b54\u65f6\u95f4\u5c0f\u4e8e5\u5206\u949f\u6574\u4e14\u5206\u6570\u4e0d\u53ca\u683c\uff08\u53ca\u683c\u7ebf\u4e3a60\u5206\uff09\u7684\u8bb0\u5f55\uff1b</p> <pre><code>delete from exam_record\nwhere timestampdiff(minute, start_time, submit_time) &lt; 5 and score &lt; 60; \n</code></pre> <ul> <li>\u65e5\u671f\u51fd\u6570</li> </ul> <p>\u73b0\u5728\u8fd0\u8425\u60f3\u8981\u8ba1\u7b97\u51fa2021\u5e748\u6708\u6bcf\u5929\u7528\u6237\u7ec3\u4e60\u9898\u76ee\u7684\u6570\u91cf</p> <pre><code>select day(date) as day, count(1) as question_cnt\nfrom(\n    select date \n    from question_practice_detail\n    where year(date)=2021 and month(date)=8\n    ) as new\ngroup by day;\n</code></pre>"},{"location":"SQL/#_4","title":"\u6570\u5b57","text":"<pre><code># 1. \u533a\u95f4\u5185 [m , n]\nselect cols\nfrom users\nwhere col &gt;= m and col &lt;= n\n----------------------------\n# \u5728\u7528 between and \u7684\u65f6\u5019\u8981\u5148\u53bb\u770b\u770b\u6570\u636e\u5e93\u7684\u8fd9\u4e2a\u8bed\u6cd5\u7684\u89c4\u5b9a\n# \u5728 mysql \u91cc\u662f__\u53cc\u95ed\u533a\u95f4__\nselect cols\nfrom users\nwhere col between m and n; \n</code></pre>"},{"location":"SQL/#_5","title":"\u5b57\u7b26\u4e32\u5b57\u6bb5","text":"<pre><code># 1. \u7b49\u4e8e\nselect cols \nfrom users\nwhere col = '';\n---------------\nselect cols \nfrom users\nwhere col != '';\n\n# 2. \u533a\u95f4\nselect cols\nfrom users\nwhere col in ('val1', 'val2', ...);\n</code></pre>"},{"location":"SQL/#long-string","title":"\u957f\u5b57\u7b26\u4e32 long string","text":"<p>\u9700\u8981\u8fdb\u884c\u518d\u4e00\u6b65\u63d0\u53d6\u5904\u7406</p> <ul> <li> <p>\u627e\u4f4d\u7f6e\uff0c return \u4f4d\u7f6e\u7d22\u5f15   \u8fd4\u56de\u5b50\u4e32 <code>substr</code> \u5728\u5b57\u7b26\u4e32 <code>str</code> \u4e2d\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0cif not exist: 0\uff1b</p> <ul> <li><code>locate(substr, str)</code></li> <li><code>find_in_set(substr,str)</code></li> <li><code>str</code> \u5fc5\u987b\u4ee5\",\"\u5206\u5272\u5f00</li> <li><code>instr(str, substr)</code></li> </ul> <p>\u53c2\u6570\u4f4d\u7f6e</p> <p>locate\u3001position \u548c instr \u7684\u5dee\u5225\u53ea\u662f\u53c2\u6570\u7684\u4f4d\u7f6e\u4e0d\u540c\uff0c \u540c\u65f6locate \u591a\u4e00\u4e2a\u8bf7\u59cb\u4f4d\u7f6e\u7684\u53c2\u6570\u5916,\u53ef\u4ee5\u81ea\u5b9a\u4e49\u9009\u62e9\u7684\u8d77\u59cb\u4f4d\u7f6e</p> <ul> <li>\u66ff\u4ee3 like</li> </ul> <pre><code># 1. \u66ff\u4ee3 like\nselect cols from users \nwhere locate(substr, str) &gt; 0;\n----------------------------\nselect cols from users \nwhere position(substr in str); \n------------------------------\nselect cols from users \nwhere instr(str, substr) &gt; 0,\n-------------------------------\nselect cols from users \nwhere find_in_set(substr,str);\n</code></pre> <p><code>locate, position, instr, like</code></p> <p>\u901f\u5ea6\u4e0a\u8fd9\u4e09\u4e2a\u6bd4\u7528 like \u7a0d\u5feb\u4e86\u4e00\u9ede\u3002</p> </li> <li> <p>\u622a\u53d6</p> <ul> <li>\u5355\u7eaf\u6839\u636e \u4f4d\u7f6e\u7d22\u5f15<ul> <li><code>left(str, n)</code>, <code>right(str, n)</code></li> <li><code>substring(str, n, m)</code>\uff1astr[n:n+m] \u7b2c n \u4e2a\u5f00\u59cb\uff0cm \u4e2a</li> </ul> </li> <li>\u6839\u636e <code>substr</code><ul> <li><code>substring_index(str, substr, n)</code>\uff1a  <code>substr</code> \u5728 <code>str</code> \u4e2d\u7b2c n \u6b21\u51fa\u73b0\u4e4b\u524d\u7684\u5b57\u7b26\u4e32;     \\(\\(\\small{n\\begin{cases}&gt;0&amp;\\text{\u4ece\u5de6\u5f80\u53f3\u6570\uff0c\u7b2cn\u4e2a\u7684\u5de6\u8fb9\u7684\u6240\u6709\u5185\u5bb9}\\\\&lt;0&amp;\\text{\u4ece\u53f3\u5f80\u5de6\u6570\uff0c\u7b2cn\u4e2a\u7684\u53f3\u8fb9\u7684\u6240\u6709\u5185\u5bb9}\\end{cases}}\\)\\)</li> </ul> </li> </ul> </li> <li> <p>\u66ff\u6362</p> <ul> <li><code>replace(str, substr_a, substr_b)</code>\uff1a<code>str</code> \u4e2d\u7684 <code>substr_a</code> \u66ff\u6362\u6210 <code>substr_b</code>\uff1b</li> </ul> </li> <li> <p>\u4fe1\u606f</p> <ul> <li><code>length(str)</code></li> </ul> </li> <li> <p>MySQL\u5e38\u7528\u51fd\u6570\u2014\u2014\u5b57\u7b26\u51fd\u6570</p> </li> </ul> <p>1.\u73b0\u5728\u8fd0\u8425\u4e3e\u529e\u4e86\u4e00\u573a\u6bd4\u8d5b\uff0c\u6536\u5230\u4e86\u4e00\u4e9b\u53c2\u8d5b\u7533\u8bf7\uff0c\u8868\u6570\u636e\u8bb0\u5f55\u5f62\u5f0f\u5982\u4e0b\u6240\u793a\uff0c\u73b0\u5728\u8fd0\u8425\u60f3\u8981\u7edf\u8ba1\u6bcf\u4e2a\u6027\u522b\u7684\u7528\u6237\u5206\u522b\u6709\u591a\u5c11\u53c2\u8d5b\u8005 2.\u73b0\u5728\u8fd0\u8425\u4e3e\u529e\u4e86\u4e00\u573a\u6bd4\u8d5b\uff0c\u6536\u5230\u4e86\u4e00\u4e9b\u53c2\u8d5b\u7533\u8bf7\uff0c\u8868\u6570\u636e\u8bb0\u5f55\u5f62\u5f0f\u5982\u4e0b\u6240\u793a\uff0c\u73b0\u5728\u8fd0\u8425\u60f3\u8981\u7edf\u8ba1\u6bcf\u4e2a\u5e74\u9f84\u7684\u7528\u6237\u5206\u522b\u6709\u591a\u5c11\u53c2\u8d5b\u8005\uff0c\u8bf7\u53d6\u51fa\u76f8\u5e94\u7ed3\u679c user_submit|||result |--|--|--|--| dvice_id|profile|gender|number 2138|180cm,75kg,27,male|male|2</p> <pre><code># 1. \u6bcf\u4e2a\u6027\u522b\nselect substring_index(profile, ',', -1) as gender, count(1) as number\nfrom user_submit\ngroup by gender;\n\n# 2. \u6bcf\u4e2a\u5e74\u9f84\nselect substring_index(substring_index(profile,',',-2),',',1) as age,\n    count(1) as number\nfrom user_submit\ngroup by age;\n</code></pre> <p>\u7f16\u5199 SQL \u8bed\u53e5\uff0c\u8fd4\u56de\u987e\u5ba2 ID\uff08cust_id\uff09\u3001\u987e\u5ba2\u540d\u79f0\uff08cust_name\uff09\u548c\u767b\u5f55\u540d\uff08user_login\uff09\uff0c\u5176\u4e2d\u767b\u5f55\u540d\u5168\u90e8\u4e3a\u5927\u5199\u5b57\u6bcd\uff0c\u5e76\u7531\u987e\u5ba2\u8054\u7cfb\u4eba\u7684\u524d\u4e24\u4e2a\u5b57\u7b26\uff08cust_contact\uff09\u548c\u5176\u6240\u5728\u57ce\u5e02\u7684\u524d\u4e09\u4e2a\u5b57\u7b26\uff08cust_city\uff09\u7ec4\u6210\u3002</p> <pre><code>select cust_id, cust_name, \n    upper(concat(left(cust_name,2), left(cust_city, 3))) as user_login\nfrom Customers;\n</code></pre>"},{"location":"SQL/#_6","title":"\u6a21\u7cca\u67e5\u8be2","text":"<p>\u5c3d\u91cf\u907f\u514d\u901a\u914d\u7b26\u5728\u5f00\u5934</p> <p>\u5f53 <code>like</code> \u6a21\u5f0f\u4ee5\u901a\u914d\u7b26\uff08\u4f8b\u5982\u201c%xyz\u201d\uff09\u5f00\u5934\u65f6\uff0cMySQL\u4e0d\u80fd\u4f7f\u7528\u7d22\u5f15\uff0c\u5e76\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6267\u884c\u5b8c\u6574\u8868\u626b\u63cf\u3002 \u901a\u5e38\u4f1a\u5bfc\u81f4\u670d\u52a1\u5668\u6027\u80fd\u4e0b\u964d\u3002 - \u540e\u7f00\u641c\u7d22</p> <p>!!! p \"\u5bf9\u540e\u7f00\u641c\u7d22\u7684\u4f18\u5316\uff1a\"         \u53ef\u4ee5\u901a\u8fc7\u521b\u5efa\u65b0\u5217\u3001\u5c06\u5176\u503c\u8bbe\u7f6e\u4e3a\u4e0e\u76ee\u6807\u5217\u9006\u5e8f\u7684\u503c\u5e76\u5bf9\u5176\u5efa\u7acb\u7d22\u5f15\u6765\u6267\u884c\u9ad8\u6548\u7684\u540e\u7f00\u641c\u7d22\u3002\u4ece\u540e\u7f00\u8f6c\u4e3a\u524d\u7f00         <pre><code>select name\nfrom table\nwhere name like '%ic'; \n# ---------------------- \u540e\u7f00\u8f6c\u524d\u7f00\nwhere name_reversed like 'ic%'\n</code></pre> - \u4e2d\u7f00\u641c\u7d22</p> <pre><code>!!! danger \"`fulltext index`\"\n    \u6ca1\u6709\u6709\u6548\u7684\u65b9\u6cd5\u6765\u6267\u884c**\u4e2d\u7f00\u641c\u7d22**\uff0c\u65e0\u8bba\u662fLIKE\u5728\u7d22\u5f15\u5217\u4e0a\u8fd8\u662f\u4f7f\u7528\u5168\u6587\u7d22\u5f15\u3002\n</code></pre> <ol> <li> <p>sql \u81ea\u5e26 \u6a21\u5f0f\u5339\u914d <code>like</code> + \u901a\u914d\u7b26 <code>%_</code></p> <p>\u901a\u914d\u7b26|\u542b\u4e49 |--|--| <code>%</code> | \u4efb\u610f\u591a\u4e2a\uff0c\u5305\u62ec0 <code>_</code> | \u5355\u4e2a\uff0c\u6709\u957f\u5ea6\u9650\u5236</p> <ul> <li> <p>\u7cbe\u786e\u5339\u914d\u3002\u5982\u679c\u4e0d\u8ddf\u901a\u914d\u7b26\u5408\u7528\u5c31\u7b49\u4e8e <code>=</code>\uff1a\u7cbe\u786e\u7b49\u4e8e\u3002\u4e0d\u80fd\u8fd4\u56de\u5305\u542b\u5173\u7cfb\u7684\u884c</p> <pre><code># \u7cbe\u786e\u5339\u914d\nselect cols \nfrom users\nwhere col like 'yes'\n---------------------- # \u53ea\u6709'yes'\u80fd\u88ab\u5339\u914d\u5230\n</code></pre> </li> <li> <p>\u6ce8\u610f\u5927\u5c0f\u5199\uff0c\u56e0\u4e3asql\u81ea\u5e26\u7684\uff0c\u6240\u4ee5\u662f\u5426\u533a\u5206\u5927\u5c0f\u5199\u770b\u7528\u6237\u5bf9MySQL\u7684\u914d\u7f6e\u65b9\u5f0f</p> </li> <li> <p>\u4e0d\u80fd\u5339\u914d\u5230 <code>null</code></p> <pre><code># 1. \u4ee5 \u2018yes\u2018 \u5f00\u5934\nselect cols\nfrom users\nwhere col like 'yes%';\n\n# 2. \u4ee5 \u2018yes\u2019\u5f00\u5934\uff0c\u957f\u5ea6\u4e3a6\u7684\u5b57\u7b26\u4e32\nselect cols\nfrom user\nwhere col like 'yes___';\n</code></pre> </li> </ul> <p>\u4ece Products \u8868\u4e2d\u68c0\u7d22\u4ea7\u54c1\u540d\u79f0\uff08prod_name\uff09\u548c\u63cf\u8ff0\uff08prod_desc\uff09\uff0c\u4ec5\u8fd4\u56de\u5728\u63cf\u8ff0\u4e2d\u4ee5\u5148\u540e\u987a\u5e8f\u540c\u65f6\u51fa\u73b0 toy \u548c carrots \u7684\u4ea7\u54c1\u3002</p> <pre><code>select prod_name, prod_desc\nfrom Products\nwhere prod_desc like '%toy%carrots%';\n</code></pre> </li> <li> <p>\u6b63\u5219\u8868\u8fbe <code>regexp</code></p> <ul> <li> <p>\u6a21\u7cca\u5339\u914d\u3002\u5982\u679c\u4e0d\u8ddf\u4efb\u4f55\u7b26\u53f7\u7528\u4e5f\u80fd\u6a21\u7cca\u5339\u914d\uff0c\u80fd\u8fd4\u56de\u5305\u542b\u5173\u7cfb\u7684\u884c</p> <pre><code># \u6a21\u7cca\u5339\u914d\nselect cols\nfrom users\nwhere col regexp 'yes';\n----------------------- # \u53ea\u8981\u6709'yes'\u90fd\u80fd\u88ab\u5339\u914d\u5230\n\nselect prod_name,prod_desc\nfrom Products\nwhere prod_desc not REGEXP 'toy'\norder by prod_name;\n</code></pre> </li> </ul> </li> </ol>"},{"location":"SQL/#_7","title":"\u590d\u5408\u6761\u4ef6\u7684\u67e5\u8be2","text":"<p>\u590d\u5408\u6761\u4ef6\u7684\u67e5\u8be2 <code>or, union, union all</code></p> <ol> <li>\u662f\u5426\u53bb\u91cd     \u53ea\u8981\u6ee1\u8db3\u4e00\u4e2a\u6761\u4ef6\u5c31\u88ab\u7b5b\u9009\u51fa\u6765\uff0c\u4f46\u603b\u4f1a\u5b58\u5728\u4e00\u4e2a\u4eba\u6ee1\u8db3\u4e86\u591a\u4e2a\u6761\u4ef6\uff0c \u4f46\u8fd4\u56de\u7684\u7ed3\u679c\u662f\u591a\u5c11\u6761\u5462\uff1f     \u6bcf\u6761\u8bb0\u5f55\u53ea\u8fd4\u56de\u4e00\u6b21\u5c31\u662f\u53bb\u91cd\uff0c \u6ee1\u8db3\u591a\u5c11\u4e2a\u6761\u4ef6\u5c31\u8fd4\u56de\u591a\u5c11\u6b21\u662f\u4e0d\u53bb\u91cd</li> <li>\u600e\u4e48\u770b     \u5148\u770b\u5b8c condition1 \u518d\u770b condition2\uff0c \u6709\u5206\u754c\u7ebf\u7684\u662f \u5206\u522b         - \u5148 match <code>condition1</code> \u7136\u540e\u53c8\u518d match <code>condition2</code>\u3002\u6bcf\u4e00\u6761\u90fd\u5148\u8fc7\u5b8c\u4e00\u904d <code>condition1</code>\uff0c\u518d\u8fc7\u4e00\u904d <code>condition2</code>     \u65e0\u6240\u8c13\u533a\u5206\uff0ccondition1 \u548c condition2 \u6df7\u6742\u7684\u662f \u6309\u7d22\u5f15\u6392\u5e8f         - \u6bcf\u4e00\u6761\u90fd\u8fc7\u4e00\u904d\u6392\u67e5<code>condition1</code>\u6216\u8005<code>condition2</code>\u3002         - \u611f\u89c9\u8fd9\u4e2a\u4f1a\u5feb\u4e00\u70b9\uff0c\u56e0\u4e3a match <code>condition1</code> \u5c31\u4e0d\u7528\u518d check <code>condition2</code></li> </ol> code \u53bb\u91cd \u5206\u522b <code>or</code> \u2705 \u274c <code>union</code> \u2705 \u2705 <code>union all</code> \u274c \u2705 <p>\u73b0\u5728\u8fd0\u8425\u60f3\u8981\u5206\u522b\u67e5\u770b\u5b66\u6821\u4e3a\u5c71\u4e1c\u5927\u5b66\u6216\u8005\u6027\u522b\u4e3a\u7537\u6027\u7684\u7528\u6237\u7684device_id\u3001gender\u3001age\u548cgpa\u6570\u636e</p> <pre><code># 1. or\nselect device_id, gender, age, gpa\nfrom user_profile\nwhere university = '\u5c71\u4e1c\u5927\u5b66' or\n    gender = 'male';\n------------------------------------ # \u5c71\u4e1c\u548c\u7537\u7684\u4ea4\u7ec7\uff0c\u6ca1\u6709\u5206\u754c\u7ebf\uff0c\u8bb0\u5f55\u53bb\u91cd\n\n# 2. union\nselect device_id, gender, age, gpa\nfrom user_profile\nwhere university = '\u5c71\u4e1c\u5927\u5b66'\nunion \nselect device_id, gender, age, gpa\nfrom user_profile\nwhere gender = 'male';\n------------------------------------ # \u5148\u662f\u5c71\u4e1c\u518d\u662f\u7537\u7684\uff0c\u8bb0\u5f55\u53bb\u91cd\n\n# 3. union all\nselect device_id, gender, age, gpa\nfrom user_profile\nwhere university = '\u5c71\u4e1c\u5927\u5b66'\nunion all\nselect device_id, gender, age, gpa\nfrom user_profile\nwhere gender = 'male';\n------------------------------------ # \u5148\u662f\u5c71\u4e1c\u518d\u662f\u7537\u7684\uff0c\u8bb0\u5f55\u4e0d\u53bb\u91cd\n</code></pre> <p>!!! \"and &amp; or \u7684\u4f18\u5148\u7ea7\"     and \u7684\u4f18\u5148\u7ea7\u5927\u4e8e or\uff0c\u6240\u4ee5\u53ef\u4ee5\u8003\u91cf\u62ec\u53f7\u52a0\u7684\u60c5\u51b5</p> <p>\u591a\u500b <code>order by</code> \u548c <code>union</code> \u4e00\u8d77\u7528 </p> <p>order by\u4e0d\u80fd\u76f4\u63a5\u51fa\u73b0\u5728union\u7684\u5b50\u53e5\u4e2d\uff0c\u4f46\u662f\u53ef\u4ee5\u51fa\u73b0\u5728\u5b50\u53e5\u7684\u5b50\u53e5\u4e2d\u3002\u6240\u4ee5\u5728\u5916\u9762\u518d\u5957\u4e00\u5c42 . <pre><code>select * from (select ... order by)\nunion all\nselect * from (select ... order by)\n</code></pre></p> <p>\u8bf7\u7edf\u8ba1\u6bcf\u4e2a\u9898\u76ee\u548c\u6bcf\u4efd\u8bd5\u5377\u88ab\u4f5c\u7b54\u7684\u4eba\u6570\u548c\u6b21\u6570\uff0c\u5206\u522b\u6309\u7167\"\u8bd5\u5377\"\u548c\"\u9898\u76ee\"\u7684uv &amp; pv\u964d\u5e8f\u663e\u793a</p> <pre><code>select *\nfrom (\n    select exam_id as tid, count(distinct uid) as uv, count(1) as pv\n    from exam_record\n    group by tid\n    order by uv+pv desc\n    ) exam \nunion all\nselect *\nfrom(\n    select question_id as tid, count(distinct uid) as uv, count(1) as pv\n    from practice_record\n    group by tid\n    order by uv+pv desc\n    ) question;\n</code></pre> <ul> <li>\u53bb\u91cd</li> </ul> <p>\u8c28\u614e\u4f7f\u7528 DISTINCT &amp; UNION</p> <p>\u67e5\u8be2\u8c03\u4f18\u7684\u53e6\u4e00\u4e2a\u597d\u5efa\u8bae\u662f\u4ec5\u5728\u5fc5\u8981\u65f6\u4f7f\u7528DISTINCT\u548cUNION\u8fd0\u7b97\u7b26\uff0c\u56e0\u4e3a\u4e0e\u5b83\u4eec\u7684\u67e5\u8be2\u4f1a\u5bfc\u81f4\u670d\u52a1\u5668\u5f00\u9500\uff0c\u5e76\u901a\u5e38\u4f1a\u589e\u52a0\u54cd\u5e94\u65f6\u95f4\u3002\u8003\u8651\u7528UNION ALL\u53d6\u4ee3UNION\uff0c\u7528GROUP BY\u53d6\u4ee3DISTINCT\uff0c\u4ee5\u63d0\u9ad8\u6d41\u7a0b\u7684\u6548\u7387</p> <pre><code># 1. \nselect distinct cols\nfrom users;\n\n# 2. \n</code></pre>"},{"location":"SQL/#-with-group-by","title":"\u7edf\u8ba1- \u805a\u5408\u51fd\u6570 with <code>group by</code>","text":"<p><code>select cols from users group by col having condition</code></p> <p>\u805a\u5408\u51fd\u6570\uff08\u5217\uff09\u90fd\u662f\u5bf9\u975enull\u8fdb\u884c</p> <ul> <li><code>max(col)</code>\uff0c<code>avg(col)</code>\uff0c</li> </ul> <p>\u73b0\u5728\u8fd0\u8425\u60f3\u8981\u4e86\u89e3\u6d59\u6c5f\u5927\u5b66\u7684\u7528\u6237\u5728\u4e0d\u540c\u96be\u5ea6\u9898\u76ee\u4e0b\u7b54\u9898\u7684\u6b63\u786e\u7387\u60c5\u51b5</p> <ul> <li>user_profile,device_id,university</li> <li>question_practice_detail, device_id, question_id, result</li> <li>question_detail, question_id,difficult_level</li> </ul> <pre><code>select qd.difficult_level, \n    round(sum(case when qpd.result = 'right' then 1 else 0 end)/count(1), 4) as correct_rate\nfrom (\n    select device_id\n    from user_profile\n    where university = '\u6d59\u6c5f\u5927\u5b66'\n) up\ninner join question_practice_detail qpd\non up.device_id = qpd.device_id\nleft join question_detail qd\non qpd.question_id = qd.question_id\ngroup by qd.difficult_level\norder by correct_rate;\n</code></pre> <p>\u8fd0\u8425\u60f3\u8981\u4e86\u89e3\u6bcf\u4e2a\u5b66\u6821\u7b54\u8fc7\u9898\u7684\u7528\u6237\u5e73\u5747\u7b54\u9898\u6570\u91cf\u60c5\u51b5\u3002 user_profile\uff0c device_id\u6307\u7ec8\u7aef\u7f16\u53f7\uff08\u8ba4\u4e3a\u6bcf\u4e2a\u7528\u6237\u6709\u552f\u4e00\u7684\u4e00\u4e2a\u7ec8\u7aef\uff09\uff0cuniversity     &gt; question_practice_detail\uff0cquestion_id\u662f\u9898\u76ee\u7f16\u53f7\uff0cresult\u662f\u7b54\u9898\u7ed3\u679c     &gt; \u5b58\u5728\u5b66\u6821\u6ca1\u7b54\u8fc7\u9898\u7684\u60c5\u51b5\uff0c \u9700\u8981\u7528 inner join \u5e76\u4e14\u9700\u8981\u6307\u660e <code>device_id</code> \uff0c\u56e0\u4e3a user_profile \u91cc\u7684 id \u5728 question_practice_detail \u6ca1\u51fa\u73b0\u8fc7\uff0c\u5c31\u4f1a ambiguilous</p> <pre><code>select u.university, \n    round(count(1)/count(distinct(q.device_id)), 4) as avg_answer_cnt\nfrom user_profile u\ninner join question_practice_detail q \non u.device_id = q.device_id\ngroup by university\norder by university;\n</code></pre> <ul> <li> <p>\u9650\u5236\u8bb0\u5f55\u6570\u91cf   \u8ba1\u6570\u540c\u6837\u4ece 0 \u5f00\u59cb</p> <pre><code># 1. \u524d n \u6761 [0,n)\nselect cols\nfrom users \nlimit n;\n\n# 2. \u4e00\u4e2a\u8fde\u7eed\u7684\u533a\u95f4[m, m+n)\nselect cols\nfrom users\nlimit m, n;\n-----------\nselect cols\nfrom users\nlimit n, offset m;\n</code></pre> </li> <li> <p>\u5206\u7ec4     <code>select cols from users group by col having condition;</code></p> <p><code>HAVING</code> \u7528\u4e8e\u4e8c\u6b21\u8fc7\u6ee4; \u5728\u5206\u7ec4\u524d\u5148\u7528 <code>WHERE</code> \u8fc7\u6ee4\u4e00\u4e9b\u6570\u636e,\u5206\u7ec4\u7684\u6548\u7387\u5c31\u4f1a\u66f4\u9ad8</p> <p>\u8fd0\u8425\u60f3\u8981\u67e5\u770b\u53c2\u52a0\u4e86\u7b54\u9898\u7684\u5c71\u4e1c\u5927\u5b66\u7684\u7528\u6237\u5728\u4e0d\u540c\u96be\u5ea6\u4e0b\u7684\u5e73\u5747\u7b54\u9898\u9898\u76ee\u6570\uff0c\u8bf7\u53d6\u51fa\u76f8\u5e94\u6570\u636e - user_profile, device_id, university - question_practice_detail, device_id, question_id - question_detail, question_id, difficult_level</p> <p>WHERE\u5728\u524d\u9762\u5148\u7b5b\u4e86\u5c71\u4e1c\u5927\u5b66\uff0c\u6574\u4e2a\u6267\u884c\u8d77\u6765\u6548\u7387\u5c31\u4f1a\u9ad8\u5f88\u591a</p> <pre><code>select sdU.university, qd.difficult_level,round(count(1)/count(distinct(qpd.device_id)), 4) as avg_answer_cnt\nfrom \n    (\n        select university, device_id\n        from user_profile\n        where university = '\u5c71\u4e1c\u5927\u5b66'\n    ) as sdU\ninner join question_practice_detail qpd\non sdU.device_id = qpd.device_id\ninner join question_detail qd\non qpd.question_id = qd.question_id\ngroup by qd.difficult_level;\n</code></pre> <p>only_full_group_by</p> <p>\"Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column ... which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by\"</p> <p>\u5bf9\u4e8eGROUP BY\u805a\u5408\u64cd\u4f5c\uff0c\u5982\u679c\u5728SELECT\u4e2d\u7684\u5217\uff0c\u6ca1\u6709\u5728GROUP BY\u4e2d\u51fa\u73b0\uff0c\u90a3\u4e48\u8fd9\u4e2aSQL\u662f\u4e0d\u5408\u6cd5\u7684\uff0c\u56e0\u4e3a\u5217\u4e0d\u5728GROUP BY\u4ece\u53e5\u4e2d \u67e5\u51fa\u6765\u7684\u5217\u5fc5\u987b\u5728group by\u540e\u9762\u51fa\u73b0\u5426\u5219\u5c31\u4f1a\u62a5\u9519\uff0c\u6216\u8005\u8fd9\u4e2a\u5b57\u6bb5\u51fa\u73b0\u5728\u805a\u5408\u51fd\u6570\u91cc\u9762\u3002 Sol: \u53ea\u9700\u8981\u5728\u975egroup by\u7684\u5217\u4e0a\u52a0any_value()</p> <p>\u73b0\u5728\u8fd0\u8425\u60f3\u8981\u627e\u5230\u6bcf\u4e2a\u5b66\u6821gpa\u6700\u4f4e\u7684\u540c\u5b66\u6765\u505a\u8c03\u7814\uff0c\u8bf7\u4f60\u53d6\u51fa\u6bcf\u4e2a\u5b66\u6821\u7684\u6700\u4f4egpa \u8bf7\u4ece\u4e2d\u7edf\u8ba1\u51fa2021\u5e74\u6bcf\u4e2a\u6708\u91cc\u7528\u6237\u7684\u6708\u603b\u5237\u9898\u6570month_q_cnt \u548c\u65e5\u5747\u5237\u9898\u6570avg_day_q_cnt\uff08\u6309\u6708\u4efd\u5347\u5e8f\u6392\u5e8f\uff09\u4ee5\u53ca\u8be5\u5e74\u7684\u603b\u4f53\u60c5\u51b5</p> <pre><code>select date_format(submit_time,'%Y%m') as submit_month,\n    count(1) as month_q_cnt, \n    any_value(round(count(1) /day(last_day(submit_time)), 3)) as avg_day_q_cnt\nfrom practice_record\nwhere year(submit_time) = 2021\ngroup by submit_month\nunion all # union all\nselect '2021\u6c47\u603b' as submit_month,\n    count(1) as month_q_cnt,\n    round(count(1) /31, 3) as avg_day_q_cnt\nfrom practice_record\nwhere year(submit_time) = 2021\norder by submit_month;\n</code></pre> </li> <li> <p>\u5212\u5206</p> <pre><code>select cols,\n    (\n        case\n            WHEN SCORE = 'A' THEN '\u4f18'\n            WHEN SCORE = 'B' THEN '\u826f'\n            WHEN SCORE = 'C' THEN '\u4e2d' \n            ELSE '\u4e0d\u53ca\u683c' \n        end\n    ) as new_col;\n</code></pre> <p>\u73b0\u5728\u8fd0\u8425\u60f3\u8981\u5c06\u7528\u6237\u5212\u5206\u4e3a25\u5c81\u4ee5\u4e0b\u548c25\u5c81\u53ca\u4ee5\u4e0a\u4e24\u4e2a\u5e74\u9f84\u6bb5\uff0c\u5206\u522b\u67e5\u770b\u8fd9\u4e24\u4e2a\u5e74\u9f84\u6bb5\u7528\u6237\u6570\u91cf. \u672c\u9898\u6ce8\u610f\uff1aage\u4e3anull \u4e5f\u8bb0\u4e3a 25\u5c81\u4ee5\u4e0b</p> <pre><code>select (case \n        when age&gt;=25 then '25\u5c81\u53ca\u4ee5\u4e0a'\n        else '25\u5c81\u4ee5\u4e0b'\n        end) as age_cut, \n        count(1) as number\nfrom user_profile\ngroup by age_cut;\n</code></pre> </li> <li> <p>\u5e8f\u5217     <code>select cols from users order by col;</code> <code>select cols from users order by n;</code>\u6839\u64da\u5217\u7d22\u5f15</p> <ul> <li><code>asc</code></li> <li><code>desc</code></li> </ul> <pre><code>select quantity, item_price\nfrom OrderItems\norder by 1 desc, 2 desc;\n</code></pre> </li> </ul>"},{"location":"SQL/#_8","title":"\u8fde\u8868\u67e5\u8be2","text":"<p>\u8fde\u63a5\u591a\u5f20\u8868</p> <p>\u5c31\u4e00\u76f4\u5199\u4e00\u76f4\u5199\u5c31\u884c <pre><code>select cols  \nfrom t1\ninner join t2\non t1.col = t2.col2\ninner join t3\non t1.col = t3.col\n...;\n</code></pre></p> <p>Every derived table must have its own alias</p> <p>\u6bcf\u4e2a\u6d3e\u751f\u51fa\u6765\u7684\u8868\u90fd\u5fc5\u987b\u6709\u4e00\u4e2a\u81ea\u5df1\u7684\u522b\u540d\u3002\u4e00\u822c\u5728\u591a\u8868\u67e5\u8be2\u65f6\uff0c\u4f1a\u51fa\u73b0\u6b64\u9519\u8bef\u3002 \u56e0\u4e3a\u8fdb\u884c\u5d4c\u5957\u67e5\u8be2\u7684\u65f6\u5019\u5b50\u67e5\u8be2\u51fa\u6765\u7684\u7684\u7ed3\u679c\u662f\u4f5c\u4e3a\u4e00\u4e2a\u6d3e\u751f\u8868\u6765\u8fdb\u884c\u4e0a\u4e00\u7ea7\u7684\u67e5\u8be2\u7684\uff0c\u6240\u4ee5\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u5fc5\u987b\u8981\u6709\u4e00\u4e2a\u522b\u540d \u628aMySQL\u8bed\u53e5\u6539\u6210\uff1a<code>select * from (select * from \u2026\u2026) as \u522b\u540d;</code> mysql\u9519\u8befEvery derived table must have its own alias\u89e3\u51b3</p> <p>\u5b50\u67e5\u8be2\u548c\u8fde\u8868\u67e5\u8be2</p> <p>\u5b50\u67e5\u8be2\u5982\u679c\u80fd\u5927\u91cf\u51cf\u5c0f\u4fe1\u606f\u71b5\uff0c\u4f1a\u6bd4\u8054\u8868\u67e5\u5feb\u5f88\u591a\uff0c\u6570\u636e\u591a\u7684\u65f6\u5019\u8054\u8868\u4f1a\u8ba9\u8868\u7684\u5927\u5c0f\u6210\u6307\u6570\u7ea7\u589e\u957f\uff0c\u4e24\u8005\u770b\u5177\u4f53\u60c5\u51b5\u9009\u62e9\u3002 \u6267\u884c\u5b50\u67e5\u8be2\u65f6\uff0cMYSQL \u9700\u8981\u521b\u5efa\u4e34\u65f6\u8868\uff0c\u67e5\u8be2\u5b8c\u6bd5\u540e\u518d\u5220\u9664\u8fd9\u4e9b\u4e34\u65f6\u8868\uff0c\u6240\u4ee5\uff0c\u5b50\u67e5\u8be2\u7684\u901f\u5ea6\u4f1a\u53d7\u5230\u4e00\u5b9a\u7684\u5f71\u54cd\uff0c\u8fd9\u91cc\u591a\u4e86\u4e00\u4e2a\u521b\u5efa\u548c\u9500\u6bc1\u4e34\u65f6\u8868\u7684\u8fc7\u7a0b\u3002 https://blog.csdn.net/qiuchaoxi/article/details/81123920 https://learnku.com/articles/43105</p> <p>\u73b0\u5728\u8fd0\u8425\u60f3\u8981\u67e5\u770b\u7528\u6237\u5728\u67d0\u5929\u5237\u9898\u540e\u7b2c\u4e8c\u5929\u8fd8\u4f1a\u518d\u6765\u5237\u9898\u7684\u5e73\u5747\u6982\u7387\u3002 keys \u3010\u53bb\u91cd\u3011\uff0c\u540c\u4e00\u4e2a\u7528\u6237\u53ef\u80fd\u5728\u67d0\u5929\u5237\u4e86\u591a\u6b21\u9898\uff0c\u4e5f\u53ef\u80fd\u5728\u7b2c\u4e8c\u5929\u5237\u4e86\u591a\u6b21\u9898\u3002\u6240\u4ee5\u8981\u540c\u65f6 <code>distinct debice_id, date</code> \u3010\u5148\u7b5b\u518d\u8fde\u8868\u3011</p> <pre><code>select round(count(tmr.date) / count(1), 4) as avg_ret\nfrom(\n        select distinct device_id, date\n        from question_practice_detail\n    ) td\nleft join (\n        select distinct device_id, date_sub(date, interval 1 day) as date\n        from question_practice_detail\n    ) tmr \non td.device_id = tmr.device_id and td.date = tmr.date;\n</code></pre> <p>\u73b0\u5728\u8fd0\u8425\u60f3\u8981\u4e86\u89e3\u590d\u65e6\u5927\u5b66\u7684\u6bcf\u4e2a\u7528\u6237\u57288\u6708\u4efd\u7ec3\u4e60\u7684\u603b\u9898\u76ee\u6570\u548c\u56de\u7b54\u6b63\u786e\u7684\u9898\u76ee\u6570\u60c5\u51b5\uff0c\u8bf7\u53d6\u51fa\u76f8\u5e94\u660e\u7ec6\u6570\u636e\uff0c\u5bf9\u4e8e\u57288\u6708\u4efd\u6ca1\u6709\u7ec3\u4e60\u8fc7\u7684\u7528\u6237\uff0c\u7b54\u9898\u6570\u7ed3\u679c\u8fd4\u56de0.</p> <pre><code>select up.device_id, up.university, \n    count(result) as question_cnt,\n    sum(case when qpd.result = 'right' then 1 else 0 end) as right_question_cnt\nfrom(\n    select device_id, university from user_profile\n    where university = '\u590d\u65e6\u5927\u5b66'\n    ) as up\nleft join(\n    select device_id, result from question_practice_detail\n    where month(date) = 08\n    ) as qpd\non up.device_id = qpd.device_id\ngroup by device_id;\n</code></pre> <p>\u8bf7\u4ece\u8868\u4e2d\u7edf\u8ba1\u51fa \u201c\u5f53\u6708\u5747\u5b8c\u6210\u8bd5\u5377\u6570\u201d\u4e0d\u5c0f\u4e8e3\u7684\u7528\u6237\u4eec\u7231\u4f5c\u7b54\u7684\u7c7b\u522b\u53ca\u4f5c\u7b54\u6b21\u6570\uff0c\u6309\u6b21\u6570\u964d\u5e8f\u8f93\u51fa</p> <p>\u6ce8\u610f\u984c\u610f</p> <ol> <li>\u5148\u770b\u7528\u6236</li> <li>\u518d\u7d71\u8a08\u611b\u4f5c\u7b54\u7684\u5217\u5225</li> </ol> <pre><code>select tag, count(1) as tag_cnt\nfrom examination_info info\ninner join exam_record rec using(exam_id)\nwhere rec.uid in (\n    select distinct uid\n    from exam_record\n    group by date_format(submit_time, '%Y%m'), uid\n    having count(submit_time) &gt;= 3\n    )\ngroup by tag\norder by tag_cnt desc;\n</code></pre> <p>\u8bf7\u8ba1\u7b97\u6bcf\u5f20SQL\u7c7b\u522b\u8bd5\u5377\u53d1\u5e03\u540e\uff0c\u5f53\u59295\u7ea7\u4ee5\u4e0a\u7684\u7528\u6237\u4f5c\u7b54\u7684\u4eba\u6570uv\u548c\u5e73\u5747\u5206avg_score\uff0c\u6309\u4eba\u6570\u964d\u5e8f\uff0c\u76f8\u540c\u4eba\u6570\u7684\u6309\u5e73\u5747\u5206\u5347\u5e8f</p> <pre><code>select rec.exam_id, \n    count(distinct user_info.uid) as uv, \n    round(avg(rec.score), 1) as avg_score\nfrom exam_record rec\ninner join (\n    select exam_id, release_time\n    from examination_info\n    where tag = 'SQL'\n    ) exam_info\non (rec.exam_id, date(rec.submit_time)) = (exam_info.exam_id, date(exam_info.release_time))\ninner join (\n    select uid \n    from user_info\n    where level &gt; 5\n    ) user_info\non rec.uid = user_info.uid\ngroup by rec.exam_id\norder by uv desc, avg_score asc;\n</code></pre>"},{"location":"SQL/#_9","title":"\u62fc\u63a5","text":"Notes \u9023\u63a5\u591a\u884c <code>group_concat([distincrt] col [order by asc/desc col][separator ','])</code> \u9023\u63a5\u591a\u5217 <code>select concat(col1, ',', col2,...)...;</code> \u6709\u4ec0\u9ebd\u9023\u63a5\u4ec0\u9ebd <code>select concat_ws(',', col1, col2, ...;)</code> \u6307\u5b9a\u5206\u9694\u7b26 <p>\u8bf7\u7edf\u8ba12021\u5e74\u6bcf\u4e2a\u672a\u5b8c\u6210\u8bd5\u5377\u4f5c\u7b54\u6570\u5927\u4e8e1\u7684\u6709\u6548\u7528\u6237\u7684\u6570\u636e\uff08\u6709\u6548\u7528\u6237\u6307\u5b8c\u6210\u8bd5\u5377\u4f5c\u7b54\u6570\u81f3\u5c11\u4e3a1\u4e14\u672a\u5b8c\u6210\u6570\u5c0f\u4e8e5\uff09\uff0c\u8f93\u51fa\u7528\u6237ID\u3001\u672a\u5b8c\u6210\u8bd5\u5377\u4f5c\u7b54\u6570\u3001\u5b8c\u6210\u8bd5\u5377\u4f5c\u7b54\u6570\u3001\u4f5c\u7b54\u8fc7\u7684\u8bd5\u5377tag\u96c6\u5408\uff0c\u6309\u672a\u5b8c\u6210\u8bd5\u5377\u6570\u91cf\u7531\u591a\u5230\u5c11\u6392\u5e8f\u3002</p> <p>\u5982\u679c\u6c92\u6709 distinct</p> \u5be6\u969b expected dd2021-07-02:SQL;2021-07-05:SQL;2021-09-01:\u7b97\u6cd5;2021-09-01:\u7b97\u6cd5;2021-09-02:SQL;2021-09-05:SQL 2021-07-02:SQL 2021-07-05:SQL;2021-09-01:\u7b97\u6cd5;2021-09-02:SQL;2021-09-05:SQL <pre><code>select rec.uid, \n    any_value(sum(case when rec.submit_time is null then 1 else 0 end)) as incomplete_cnt,\n    any_value(count(rec.submit_time)) as complete_cnt,\n    any_value(group_concat( distinct\n        concat_ws(':', date(rec.start_time), info.tag)\n        order by rec.start_time separator ';'\n    )) as detail\nfrom (\n    select submit_time, start_time, exam_id, uid\n    from exam_record \n    where year(start_time) = 2021\n    ) as rec\ninner join examination_info info\non rec.exam_id = info.exam_id\ngroup by rec.uid\nhaving incomplete_cnt &lt; 5 and complete_cnt &gt;= 1 and incomplete_cnt &gt; 1\norder by incomplete_cnt desc\n</code></pre>"},{"location":"SQL/#_10","title":"\u5206\u7ec4","text":"<p>\u5728\u65e5\u5e38\u5de5\u4f5c\u4e2d\uff0c\u7ecf\u5e38\u4f1a\u9047\u5230\u9700\u8981\u5728\u6bcf\u7ec4\u5185\u6392\u540d\uff0c\u6bd4\u5982\u4e0b\u9762\u7684\u4e1a\u52a1\u9700\u6c42\uff1a</p> <ul> <li>\u6392\u540d\u95ee\u9898\uff1a\u6bcf\u4e2a\u90e8\u95e8\u6309\u4e1a\u7ee9\u6765\u6392\u540d</li> <li>topN \u95ee\u9898\uff1a\u627e\u51fa\u6bcf\u4e2a\u90e8\u95e8\u6392\u540d\u524dN\u7684\u5458\u5de5\u8fdb\u884c\u5956\u52b1</li> </ul> <p>\u975e\u5168\u5c40\u6392\u5e8f\uff0c\u9700\u8981\u5728\u67d0\u4e2a\u7ef4\u5ea6\u4e0b\u8fdb\u884c\u6392\u5e8f</p>"},{"location":"SQL/#_11","title":"\u7a97\u53e3\u51fd\u6570","text":"<p>\u7a97\u53e3\u51fd\u6570, OLAP, Online Anallytical Processing\uff0c\u8054\u673a\u5206\u6790\u5904\u7406\uff0c\u53ef\u4ee5\u5bf9\u6570\u636e\u5e93\u6570\u636e\u8fdb\u884c\u5b9e\u65f6\u5206\u6790\u5904\u7406\u3002</p> <ul> <li>\u540c\u65f6\u5177\u6709\u5206\u7ec4\u548c\u6392\u5e8f\u7684\u529f\u80fd</li> <li>\u4e0d\u51cf\u5c11\u539f\u8868\u7684\u884c\u6570</li> </ul> <p><code>&lt;\u7a97\u53e3\u51fd\u6570&gt; over (partition by &lt;\u7528\u4e8e\u5206\u7ec4\u7684\u5217\u540d&gt; order by &lt;\u7528\u4e8e\u6392\u5e8f\u7684\u5217\u540d&gt;)</code></p> <ul> <li> <p><code>&lt;\u7a97\u53e3\u51fd\u6570&gt;</code>     \u662f\u5bf9<code>where</code>\u6216\u8005<code>group by</code>\u5b50\u53e5\u5904\u7406\u540e\u7684\u7ed3\u679c\u8fdb\u884c\u64cd\u4f5c\uff0c\u6240\u4ee5\u7a97\u53e3\u51fd\u6570\u539f\u5219\u4e0a\u53ea\u80fd\u5199\u5728<code>select</code>\u5b50\u53e5\u4e2d</p> <ul> <li> <p>\u4e13\u7528\u7a97\u53e3\u51fd\u6570\uff0c<code>rank, dense_rank, row_number</code>       \u51fd\u6570\u540e\u9762\u7684\u62ec\u53f7\u4e0d\u9700\u8981\u4efb\u4f55\u53c2\u6570\uff0c\u4fdd\u6301()\u7a7a\u7740\u5c31\u53ef\u4ee5\u3002       |\u6392\u5e8f\u76f8\u540c\u65f6|\u4f1a\u91cd\u590d|\u7ef4\u6301\u603b\u6570|\u6392\u5e8f\u7ed3\u679c       |--|--|--|--|       <code>rank()</code>|\u2705|\u2705|1\u30011\u30013       <code>dense_rank()</code>|\u2705|\u274c|1\u30011\u30012       <code>row_number()</code>|\u274c|\u2705| 1\u30012\u30013\uff08\u6839\u636eprimary key \u6765\uff09</p> </li> <li> <p>\u805a\u5408\u51fd\u6570\uff0c\u5982<code>sum. avg, count, max, min</code>\u7b49</p> </li> </ul> </li> <li> <p><code>partition by</code>         \u53ef\u7701\u7565\uff0c\u7701\u7565\u5c31\u662f\u4e0d\u6307\u5b9a\u5206\u7ec4, \u4f46\u662f\uff0c\u8fd9\u5c31\u5931\u53bb\u4e86\u7a97\u53e3\u51fd\u6570\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u4e00\u822c\u4e0d\u8981\u8fd9\u4e48\u4f7f\u7528</p> </li> </ul> <pre><code># 1. \u3010\u4e13\u7528\u7a97\u53e3\u51fd\u6570\u3011\u4e0d\u8981\u5206\u7ec4 \nselect id, class, score,\n    rank() over (order by score desc) as ranking,\n    dense_rank() over (order by score desc) as dese_rank,\n    row_number() over (order by score desc) as row_num\nfrom scores;\n\n# 2. \u3010\u4e13\u7528\u7a97\u53e3\u51fd\u6570\u3011\u8981\u5206\u7ec4 \nselect id, class, score,\n    rank() over (partition by class order by score desc) as ranking,\n    dense_rank() over (partition by class order by score desc) as dese_rank,\n    row_number() over (partition by class  order by score desc) as row_num\nfrom scores;\n\n# 3. \u3010\u805a\u5408\u51fd\u6570\u3011\u8981\u5206\u7ec4\n</code></pre> <ul> <li>\u901a\u4fd7\u6613\u61c2\u7684\u5b66\u4f1a\uff1aSQL\u7a97\u53e3\u51fd\u6570</li> </ul>"},{"location":"SQL/#_12","title":"\u5e38\u89c1\u4e1a\u52a1","text":"<ul> <li> <p>\u6700\u4f4e\u6700\u9ad8     &gt; \u73b0\u5728\u8fd0\u8425\u60f3\u8981\u627e\u5230\u6bcf\u4e2a\u5b66\u6821gpa\u6700\u4f4e\u7684\u540c\u5b66\u6765\u505a\u8c03\u7814\uff0c\u8bf7\u4f60\u53d6\u51fa\u6bcf\u4e2a\u5b66\u6821\u7684\u6700\u4f4egpa     &gt; \u5148\u6309 \u5b66\u6821\u5206\u7ec4\u548c\u5bf9\u6210\u7ee9\u6392\u540d\uff0c\u800c\u4e0d\u80fd\u7528<code>min</code></p> <pre><code>select device_id, university, gpa\nfrom(\n    select device_id, university, gpa, \n        rank() over (partition by university order by gpa) as rk\n    from user_profile\n    ) olap\nwhere olap.rk = 1;\n</code></pre> </li> <li> <p>\u7d2f\u79ef\u767e\u5206\u6bd4     &gt; \u60f3\u770b\u524dXX%\u7684\u7528\u6237\u8d21\u732e\u4e86XX%\u7684\u603b\u989d\u3002</p> </li> <li> <p>hive sql</p> </li> </ul>"},{"location":"SQL/#operations","title":"operations","text":""},{"location":"SQL/#insert","title":"insert","text":"\u4f7f\u7528\u573a\u666f \u8bed\u53e5 \uff5c \uff5c \u5199\u4e0acols <code>insert into users(col1, col2,...) values (row1), (row2),..;</code> \u5b57\u6bb5\u548cvalue\u4e00\u4e00\u5bf9\u5e94\uff0c null\u53ef\u4ee5\u4e0d\u5199 \u5bfc\u5165\u6570\u636e Ta-\u3009Tb <code>insert into Tb(b1, b2, ...) select a1, a2,... from Ta where conditions;</code> \u540d\u5b57\u53ef\u4ee5\u4e0d\u4e00\u6837\u4f46\u662f\u6570\u636e\u7c7b\u578b\u8981\u4e00\u6837 <p><code>insert into Tb(b1, b2, ...) select a1, a2,... from Ta where conditions;</code> \u6ca1\u6709values</p> <p>select\u8bfb\u51fa\u6765\u662f\u591a\u884c\u591a\u5217\uff0c\u800cvalues\u4e00\u4e2a\u62ec\u53f7\u4e00\u6b21\u53ea\u80fd\u5b58\u5165\u4e00\u884c\u6570\u636e</p> <ul> <li>primary key<ul> <li>\u81ea\u589e id<ul> <li>\u9ed8\u8ba4\u4ece 0 \u5f00\u59cb</li> <li>\u63d2\u5165\u65f6\u5199 <code>0, null, default</code> \uff0c\u5c31\u4f1a\u81ea\u52a8\u586b\u5145 id</li> <li>\u5199\u5217\u540d\u7684\u65f6\u5019\u53ef\u4ee5\u8df3\uff0c\u4f46\u662f\u4e0d\u5199\u5b57\u6bb5\u540d\u7684\u65f6\u5019\u8981\u5199</li> </ul> </li> </ul> </li> </ul> <p>\u63d2\u5165\u91cd\u590d\u95ee\u9898</p> <p>\u6307\u7684\u662f primary key Duplicate entry '1' for key 'PRIMARY'</p> <p>|sql| meaning| |--|:--:|:--:|:--:| |<code>insert into users values ...;</code> |\u5982\u679c\u5df2\u7ecf\u6709\u4e86\u5c31\u62a5\u9519 |<code>insert ignore into users values ...;</code>|\u5982\u679c\u6709\u4e86\u5c31 ignore\uff0c\u7ee7\u7eed |<code>replace users values ...;</code>|\u65e0\u8bba\u5982\u4f55\u90fd\u8981\u63d2\u5165\uff0c\u6709\u4e86\u5c31 update |<code>insert into users values ... on duplicate key update col1 = value1, col2 = value2;</code>|\u65e0\u8bba\u5982\u4f55\u90fd\u8981\u63d2\u5165\uff0c\u6709\u4e86\u5c31 update \u6307\u5b9a\u7684\u5b57\u6bb5</p> <p>\u725b\u5ba2\u540e\u53f0\u4f1a\u8bb0\u5f55\u6bcf\u4e2a\u7528\u6237\u7684\u8bd5\u5377\u4f5c\u7b54\u8bb0\u5f55\u5230exam_record\u8868\uff0c\u73b0\u5728\u6709\u4e24\u4e2a\u7528\u6237\u7684\u4f5c\u7b54\u8bb0\u5f55\u8be6\u60c5\u5982\u4e0b\uff1a \u7528\u62371001\u57282021\u5e749\u67081\u65e5\u665a\u4e0a10\u70b911\u520612\u79d2\u5f00\u59cb\u4f5c\u7b54\u8bd5\u53779001\uff0c\u5e76\u572850\u5206\u949f\u540e\u63d0\u4ea4\uff0c\u5f97\u4e8690\u5206\uff1b \u7528\u62371002\u57282021\u5e749\u67084\u65e5\u4e0a\u53487\u70b91\u52062\u79d2\u5f00\u59cb\u4f5c\u7b54\u8bd5\u53779002\uff0c\u5e76\u572810\u5206\u949f\u540e\u9000\u51fa\u4e86\u5e73\u53f0\u3002 \u8bd5\u5377\u4f5c\u7b54\u8bb0\u5f55\u8868exam_record\u4e2d\uff0c\u8868\u5df2\u5efa\u597d\uff0c\u5176\u7ed3\u6784\u5982\u4e0b\uff0c\u8bf7\u7528\u4e00\u6761\u8bed\u53e5\u5c06\u8fd9\u4e24\u6761\u8bb0\u5f55\u63d2\u5165\u8868\u4e2d\u3002</p> <p>\u6ca1\u6709\u63d0\u4ea4\u5c31\u662fnull submit time</p> <pre><code>insert into exam_record\nvalues\n    (default, 1001, 9001, '2021-09-01 22:11:12', date_add('2021-09-01 22:11:12', interval 50 minute), 90),\n    (default, 1002, 9002, '2021-09-04 07:01:02', default, default);\n</code></pre> <p>\u73b0\u6709\u4e00\u5f20\u8bd5\u5377\u4f5c\u7b54\u8bb0\u5f55\u8868exam_record\uff0c\u7ed3\u6784\u5982\u4e0b\u8868\uff0c\u5176\u4e2d\u5305\u542b\u591a\u5e74\u6765\u7684\u7528\u6237\u4f5c\u7b54\u8bd5\u5377\u8bb0\u5f55\uff0c\u7531\u4e8e\u6570\u636e\u8d8a\u6765\u8d8a\u591a\uff0c\u7ef4\u62a4\u96be\u5ea6\u8d8a\u6765\u8d8a\u5927\uff0c\u9700\u8981\u5bf9\u6570\u636e\u8868\u5185\u5bb9\u505a\u7cbe\u7b80\uff0c\u5386\u53f2\u6570\u636e\u505a\u5907\u4efd\u3002</p> <pre><code>\n</code></pre>"},{"location":"SQL/#alter-update","title":"alter &amp; update","text":""},{"location":"SQL/#alter-scheme","title":"<code>alter</code> \u57fa\u4e8e\u8868 scheme","text":"<p><code>alter table users</code> \u6bcf\u4e00\u53e5\u90fd\u8981\u5199</p> cases \u57fa\u4e8e\u8868 scheme \u6dfb\u52a0\u5217 <code>alter table users add column col1 int [first|after col5]</code> \u9ed8\u8ba4\u6dfb\u52a0\u5230\u6700\u540e\u4e00\u5217 \u4fee\u6539\u5217\u7684\u7c7b\u578b\u6216\u7ea6\u675f <code>alter table users modify column col1 char constraint;</code> \u4fee\u6539\u5217\u540d <code>alter table users change column old_col1 new_col1 char;</code> \u5220\u9664\u5217 <code>alter table users drop column col1;</code> \u4fee\u6539\u8868\u540d <code>alter table old_users rename new_users;</code> \u5c06\u67d0\u4e00\u5217\u653e\u5230\u7b2c\u4e00\u5217 <code>alter table usrs modify column col1 int first;</code> <p>\u8bf7\u5728\u7528\u6237\u4fe1\u606f\u8868\uff0c\u5b57\u6bb5level\u7684\u540e\u9762\u589e\u52a0\u4e00\u5217\u6700\u591a\u53ef\u4fdd\u5b5815\u4e2a\u6c49\u5b57\u7684\u5b57\u6bb5school\uff1b\u5e76\u5c06\u8868\u4e2djob\u5217\u540d\u6539\u4e3aprofession\uff0c\u540c\u65f6varchar\u5b57\u6bb5\u957f\u5ea6\u53d8\u4e3a10\uff1bachievement\u7684\u9ed8\u8ba4\u503c\u8bbe\u7f6e\u4e3a0\u3002</p> <pre><code>alter table user_info add column school varchar(15) after level;\nalter table user_info change column job profession varchar(10);\nalter table user_info modify column achievement int(11) default 0;\n</code></pre>"},{"location":"SQL/#update-records","title":"<code>update</code>  \u57fa\u4e8e\u8bb0\u5f55 records","text":"<p>update</p> <ul> <li>\u66f4\u65b0\u7684\u503c\u8981\u6ee1\u8db3\u5efa\u8868\u65f6\u7684\u5b57\u6bb5\u7c7b\u578b\u3002\u6bd4\u5982score\u662fint\u7c7b\u578b\u5c31\u4e0d\u80fd\u66f4\u65b0\u4e3achar\u7c7b\u578b\u3002</li> <li>\u66f4\u65b0\u7684\u65f6\u5019\u662f\u6309\u7167\u4ee3\u7801\u8bed\u53e5\u7684\u5148\u540e\u987a\u5e8f\u66f4\u65b0\u7684\u3002</li> </ul> when \u57fa\u4e8e\u8bb0\u5f55 records \u5b8c\u5168\u4e00\u4e2a\u503c <code>update users set col1 = val1, col2 = val2,... where condition;</code> partial\u4e00\u4e2a\u503c <code>update users set col1 = replace(col1, 'old','new'),...;</code> \u591a\u4e2a\u503c <code>update users set col1 if(condition,val1, val2);</code> <code>case</code> \u4e5f\u53ef\u4ee5"},{"location":"SQL/#delete-truncate","title":"delete &amp; truncate","text":"<p>\u975e\u5fc5\u8981\u4e0d\u8981\u7528 truncate \u6216 drop</p> case sql \u81ea\u589e\u503c\u91cd\u7f6e rollback \u901f\u5ea6 \u5220\u9664\u8bb0\u5f55 <code>delete from users where condition;</code> DML\uff0c\u53ef\u52a0where \u274c \u2705 3\ufe0f\u20e3 \u6e05\u7a7a\u622a\u65ad\u8868 <code>truncate users;</code> DDL\uff0cdrop \u4e4b\u540e\u518d create \u65b0\u7684\uff0c\u6709drop\u7684\u6743\u9650 \u2705 \u274c 2\ufe0f\u20e3 \u9500\u6bc1\u8868\u3001\u89c6\u56fe <code>drop users;</code> DDL\uff0c \u90fd\u6ca1\u4e86 \u274c 1\ufe0f\u20e3 <p>\u8bf7\u5220\u9664 exam_record \u8868\u4e2d\u672a\u5b8c\u6210\u4f5c\u7b54\u6216\u4f5c\u7b54\u65f6\u95f4\u5c0f\u4e8e5\u5206\u949f\u6574\u7684\u8bb0\u5f55\u4e2d\uff0c\u5f00\u59cb\u4f5c\u7b54\u65f6\u95f4\u6700\u65e9\u76843\u6761\u8bb0\u5f55\u3002\u4f5c\u7b54\u8bb0\u5f55\u8868 exam_record, start_time \u662f\u8bd5\u5377\u5f00\u59cb\u65f6\u95f4\u3002submit_time \u662f\u4ea4\u5377\u65f6\u95f4\uff0c\u5373\u7ed3\u675f\u65f6\u95f4\uff0c\u5982\u679c\u672a\u5b8c\u6210\u7684\u8bdd\uff0c\u5219\u4e3a\u7a7a\u3002</p> <pre><code>delete from exam_record\nwhere submit_time is null or \n    timestampdiff(minute, start_time, submit_time) &lt; 5\norder by start_time\nlimit 3;\n</code></pre>"},{"location":"SQL/#create","title":"create","text":"<pre><code>create table [if not exists] users\n(\n    col1 int [ primary key  \n                foreign key  \n                auto_increment  #\u81ea\u589e\n                comment ...  #\u6ce8\u91ca\n                default default_val/ current_timestamp # \u5f53\u524d\u65f6\u95f4\u6233\n                unique \n                not null # \u4e0d\u5141\u8bb8\u7a7a\n                ],\n    col2  char  ... ,\n    ...\n)[default charset = ] [collate \u7f16\u7801];\n</code></pre> <ul> <li> <p>collate \u7f16\u7801</p> charset default collayte <code>utf8</code> <code>utf8_general_ci</code> <code>utf8mb4</code>\ud83d\udc4d <code>utf8mb4_unicode_ci</code> </li> </ul> <pre><code>create table if not exists user_info_vip\n(\n    id int primary key auto_increment comment '\u81ea\u589eID',\n    uid int unique not null comment '\u7528\u6237ID',\n    nick_name varchar(64) comment '\u6635\u79f0',\n    achievement int default 0 comment '\u6210\u5c31\u503c',\n    level int comment '\u7528\u6237\u7b49\u7ea7',\n    job varchar(32) comment '\u804c\u4e1a\u65b9\u5411',\n    register_time datetime default current_timestamp comment '\u6ce8\u518c\u65f6\u95f4'\n) default charset=utf8;\n</code></pre> case \u5b58\u5728\u5c31\u8986\u76d6 <code>drop table if exist users (...);</code> and <code>create</code> \u5b58\u5728\u5c31\u8fd4\u56de <code>create table if not exists (...);</code>"},{"location":"SQL/#index","title":"index","text":"<p>\u6ca1\u6709\u5185\u7f6e\u4fee\u6539\u7d22\u5f15\u64cd\u4f5c\u7684\uff0c\u9700\u8981\u5148\u6267\u884c\u5220\u9664\u64cd\u4f5c\u5728\u91cd\u65b0\u5efa\u7acb\u4e00\u4e2a\u7d22\u5f15</p> <p>\u5148\u5bfc\u6570\u636e\u518d\u8bbe <code>create fulltime index</code></p> <p>\u5728\u6570\u636e\u91cf\u8f83\u5927\u65f6\u5019\uff0c\u5148\u5c06\u6570\u636e\u653e\u5165\u4e00\u4e2a\u6ca1\u6709\u5168\u6587\u7d22\u5f15\u7684\u8868\u4e2d\uff0c\u7136\u540e\u518d\u7528CREATE INDEX\u521b\u5efaFULLTEXT\u7d22\u5f15\uff0c\u8981\u6bd4\u5148\u4e3a\u4e00\u5f20\u8868\u5efa\u7acbFULLTEXT\u7136\u540e\u518d\u5c06\u6570\u636e\u5199\u5165\u7684\u901f\u5ea6\u5feb\u5f88\u591a\u3002</p>"},{"location":"SQL/#create2","title":"create2","text":"<pre><code># 1. \u521b\u5efa\u8868\u65f6\ncreate table users(  \n  id int not null, ...,\n  index index_name [description] (col);\n);\n\n# 2. \u53e6\u5916\u521b\u5efa\ncreate [description] index index_name on users(col);\n\n# 3. \u4fee\u6539\u8868\u65f6\nalter table users\nadd [description] index index_name(col);\n</code></pre> <p><code>unique index</code> &amp; <code>primary key</code></p> <p>\u90fd\u662f\u552f\u4e00\u7684\u503c\uff0c\u4e0d\u53ef\u4ee5\u51fa\u73b0\u76f8\u540c\u7684\u503c <code>unqiue index</code> \u53ef\u4ee5\u4e00\u4e2a\u8868\u591a\u4e2a <code>primary key</code> \u53ea\u80fd\u4e00\u8868\u4e00\u4e2a</p> <p>cases|[description]||NULL |--|--|--|--| \u552f\u4e00|unique|\u4e0d\u53ef\u4ee5\u51fa\u73b0\u76f8\u540c\u7684\u503c|dui \u5168\u6587|fulltxt|\u9488\u5bf9\u503c\u4e2d\u7684\u67d0\u4e2a\u5355\u8bcd\uff0c\u4f46\u6548\u7387\u4f4e\uff08\u4e0d\u5efa\u8bae\uff0c\u53ef\u5229\u7528\u6dfb\u52a0\u5173\u952e\u8bcd\u5173\u8054\u5217\u6765\u5b9e\u73b0\uff09,\u6309\u7167\u5206\u8bcd\u539f\u7406\u5efa\u7acb\u7d22\u5f15\u7684 \u666e\u901a||\u5141\u8bb8\u51fa\u73b0\u76f8\u540c\u7684\u7d22\u5f15\u5185\u5bb9 \u666e\u901a\u7d22\u5f15\uff1aINDEX  (normal)</p> <p>mysql \u4e0d\u540c\u7d22\u5f15\u7684\u533a\u522b\u548c\u9002\u7528\u60c5\u51b5\u603b\u7ed3</p> <p>\u73b0\u6709\u4e00\u5f20\u8bd5\u5377\u4fe1\u606f\u8868examination_info\uff0c\u5176\u4e2d\u5305\u542b\u5404\u79cd\u7c7b\u578b\u8bd5\u5377\u7684\u4fe1\u606f\u3002\u4e3a\u4e86\u5bf9\u8868\u66f4\u65b9\u4fbf\u5feb\u6377\u5730\u67e5\u8be2\uff0c\u9700\u8981\u5728examination_info\u8868\u521b\u5efa\u4ee5\u4e0b\u7d22\u5f15\uff0c\u89c4\u5219\u5982\u4e0b\uff1a \u5728duration\u5217\u521b\u5efa\u666e\u901a\u7d22\u5f15idx_duration\u3001\u5728exam_id\u5217\u521b\u5efa\u552f\u4e00\u6027\u7d22\u5f15uniq_idx_exam_id\u3001\u5728tag\u5217\u521b\u5efa\u5168\u6587\u7d22\u5f15full_idx_tag</p> <pre><code>create index idx_duration on examination_info(duration);\ncreate unique index uniq_idx_exam_id on examination_info(exam_id);\ncreate fulltext index full_idx_tag on examination_info(tag);\n</code></pre>"},{"location":"SQL/#delete","title":"delete","text":"<pre><code>drop index index_name on users;\n\nalter table users\ndrop index index_name;\n</code></pre>"},{"location":"SQL/#_13","title":"\u4e1a\u52a1","text":"<p>\u725b\u5ba2\u7684\u8fd0\u8425\u540c\u5b66\u60f3\u8981\u67e5\u770b\u5927\u5bb6\u5728SQL\u7c7b\u522b\u4e2d\u9ad8\u96be\u5ea6\u8bd5\u5377\u7684\u5f97\u5206\u60c5\u51b5\u3002 \u8bf7\u4f60\u5e2e\u5979\u4eceexam_record\u6570\u636e\u8868\u4e2d\u8ba1\u7b97\u6240\u6709\u7528\u6237\u5b8c\u6210SQL\u7c7b\u522b\u9ad8\u96be\u5ea6\u8bd5\u5377\u5f97\u5206\u7684\u622a\u65ad\u5e73\u5747\u503c\uff08\u53bb\u6389\u4e00\u4e2a\u6700\u5927\u503c\u548c\u4e00\u4e2a\u6700\u5c0f\u503c\u540e\u7684\u5e73\u5747\u503c\uff09\u3002</p> <p>\\(=\\cfrac{\\sum-\\max-\\min}{\\#-2}\\)</p> <pre><code>select tag, difficulty,\n    round((sum(score)-min(score)-max(score))/\n        (count(score)-2),1) as avg_score\nfrom exam_record \ninner join (\n    select exam_id, tag, difficulty\n    from examination_info\n    where tag='SQL' and difficulty='hard'\n    )info\non info.exam_id = exam_record.exam_id;\n</code></pre> <p>\u6709\u4e00\u4e2a\u8bd5\u5377\u4f5c\u7b54\u8bb0\u5f55\u8868exam_record\uff0c\u8bf7\u4ece\u4e2d\u7edf\u8ba1\u51fa\u603b\u4f5c\u7b54\u6b21\u6570total_pv\u3001\u8bd5\u5377\u5df2\u5b8c\u6210\u4f5c\u7b54\u6570complete_pv\u3001\u5df2\u5b8c\u6210\u7684\u8bd5\u5377\u6570complete_exam_cnt\u3002 \u793a\u4f8b\u6570\u636e exam_record\u8868\uff08uid\u7528\u6237ID, exam_id\u8bd5\u5377ID, start_time\u5f00\u59cb\u4f5c\u7b54\u65f6\u95f4, submit_time\u4ea4\u5377\u65f6\u95f4, score\u5f97\u5206\uff09\uff1a</p> <p>\u4e3b\u8981\u5728\u4e8e\u5df2\u5b8c\u6210\u7684\u8bd5\u5377\u6570\u7684\u7edf\u8ba1\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u5e26\u6709\u6761\u4ef6\uff0c\u4e14\u9700\u8981\u7edf\u8ba1\u805a\u5408\u7ed3\u679c\uff0c\u5f88\u81ea\u7136\u53ef\u4ee5\u60f3\u5230 \u4f7f\u7528 \u805a\u5408\u51fd\u6570\u4e0ecase when \u7ed3\u5408\u3002</p> <pre><code>select count(1) as total_pv,\n    count(submit_time) as complete_pv,\n    count(distinct (case when score is not null then exam_id else null end)) as complete_exam_cnt\nfrom exam_record\n</code></pre> <p>\u8bf7\u4ece\u8bd5\u5377\u4f5c\u7b54\u8bb0\u5f55\u8868\u4e2d\u627e\u5230SQL\u8bd5\u5377\u5f97\u5206\u4e0d\u5c0f\u4e8e\u8be5\u7c7b\u8bd5\u5377\u5e73\u5747\u5f97\u5206\u7684\u7528\u6237\u6700\u4f4e\u5f97\u5206\u3002 \u793a\u4f8b\u6570\u636e exam_record\u8868\uff08uid\u7528\u6237ID, exam_id\u8bd5\u5377ID, start_time\u5f00\u59cb\u4f5c\u7b54\u65f6\u95f4, submit_time\u4ea4\u5377\u65f6\u95f4, score\u5f97\u5206\uff09\uff1a</p> <pre><code>select min(score) as min_score_over_avg\nfrom exam_record\ninner join (\n    select exam_id\n    from examination_info\n    where tag = 'SQL'\n    )info\non exam_record.exam_id = info.exam_id\nwhere score &gt;= (\n    select avg(score)\n    from exam_record\n    inner join (\n        select exam_id\n        from examination_info\n        where tag = 'SQL'\n        )info\n    on exam_record.exam_id = info.exam_id\n    )\n</code></pre> <p>\u8bf7\u8ba1\u7b972021\u5e74\u6bcf\u4e2a\u6708\u91cc\u8bd5\u5377\u4f5c\u7b54\u533a\u7528\u6237\u5e73\u5747\u6708\u6d3b\u8dc3\u5929\u6570avg_active_days\u548c\u6708\u5ea6\u6d3b\u8dc3\u4eba\u6570mau\uff0c\u4e0a\u9762\u6570\u636e\u7684\u793a\u4f8b\u8f93\u51fa\u5982\u4e0b\uff1a</p> <pre><code>    select DATE_FORMAT(submit_time, \"%Y%m\") as month, \n        round(count(distinct uid, DATE_FORMAT(submit_time, \"%Y%m%d\"))/count(distinct uid), 2) as avg_active_days, \n        count(distinct uid) as mau\n    from exam_record\n    where year(submit_time) = 2021\n    group by month\n</code></pre> <p>\u8bf7\u4f60\u627e\u5230\u9ad8\u96be\u5ea6SQL\u8bd5\u5377\u5f97\u5206\u5e73\u5747\u503c\u5927\u4e8e80\u5e76\u4e14\u662f7\u7ea7\u7684\u7ea2\u540d\u5927\u4f6c\uff0c\u7edf\u8ba1\u4ed6\u4eec\u76842021\u5e74\u8bd5\u5377\u603b\u5b8c\u6210\u6b21\u6570\u548c\u9898\u76ee\u603b\u7ec3\u4e60\u6b21\u6570\uff0c\u53ea\u4fdd\u75592021\u5e74\u6709\u8bd5\u5377\u5b8c\u6210\u8bb0\u5f55\u7684\u7528\u6237\u3002\u7ed3\u679c\u6309\u8bd5\u5377\u5b8c\u6210\u6570\u5347\u5e8f\uff0c\u6309\u9898\u76ee\u7ec3\u4e60\u6570\u964d\u5e8f\u3002</p> <pre><code>select red_users.uid,  \n    count(distinct exam_id, exam_submit) as exam_cnt, \n    count(distinct question_id, prac_submit) as question_cnt\nfrom (\n    select uid\n    from exam_record\n    where exam_id in (select exam_id from examination_info \n                        where tag = 'SQL' and difficulty = 'hard')\n            and uid in (select uid from user_info \n                        where level = 7)\n    group by uid\n    having avg(score) &gt; 80\n    ) red_users\nleft join (\n    select uid, exam_id, submit_time as exam_submit\n    from exam_record\n    where year(submit_time)=2021\n    ) exam_rec\non red_users.uid = exam_rec.uid\nleft join (\n    select uid, question_id, submit_time as prac_submit\n    from practice_record\n    where year(submit_time)=2021\n    ) prac_rec\non red_users.uid = prac_rec.uid\ngroup by uid\norder by exam_cnt asc, question_cnt desc;\n</code></pre>"},{"location":"Temp/","title":"Temp","text":""},{"location":"Temp/#_1","title":"?","text":""},{"location":"Temp/#_2","title":"\u670d\u52a1\u5668 \u8fdb\u7a0b","text":"<pre><code>\"\"\"\n\u5199\u5728xxx.py\u91cc\uff0c\u7136\u540e\u5728\u540e\u53f0bash\u7aef \n1. screen \n3. \u5728 screen \u91cc python xxx.py\n3. \u56de\u6765 \n\"\"\"\nfrom multiprocessing import Process\n\ndef main(a, b):\n    a = funcA(a)\n    b = funB(b)\n    return a+b\n\nprocess = Process(\n    target=main,  # \u5199\u8981\u8c03\u7528\u7684\u4e3b\u51fd\u6570 your_function\n    args=(a,b)  # \u4f20\u8fdb\u4e3b\u51fd\u6570\u7684\u53c2\u6570\n    )\n\nprocess.start()\n</code></pre> <ul> <li> <p>\u5173\u4e8e\u8fdb\u7a0b</p> <ul> <li>\u67e5\u770b\u8fdb\u7a0b\u53f7 <code>ps -ef|grep ?</code></li> <li>\u6740\u6b7b\u8fdb\u7a0b <code>kill pid</code></li> </ul> </li> <li> <p>\u67e5\u770b==\u7cfb\u7edf\u5185\u5b58==</p> <ul> <li><code>free -h</code> Linux</li> <li><code>-h</code> \u81ea\u52a8\u8f6c\u6362\u5355\u4f4d</li> </ul> total used free shared buff/cache available Mem: \u7269\u7406\u5185\u5b58 \u7269\u7406\u5185\u5b58\u603b \u5df2\u7ecf\u4f7f\u7528\u7684\u7269\u7406\u5185\u5b58 \u7a7a\u95f2\u7684\u7269\u7406\u5185\u5b58 \u591a\u4e2a\u8fdb\u7a0b\u5171\u4eab\u7684\u7269\u7406\u5185\u5b58 \u7f13\u5b58\u5185\u5b58\u6570 \u53ef\u7528\u5185\u5b58 Swap:\u4ea4\u6362\u5206\u533a ^ ^ ^ ^ ^ ^ <ul> <li>\u516c\u5f0f     availale = free + buff/cache total = used + available</li> <li>\u5982\u679c\u4f7f\u7528\u5230==\u4ea4\u6362\u5206\u533a==\uff0c\u5219\u8868\u660e\u7269\u7406\u5185\u5b58\u4e0d\u591f\u6216\u5185\u5b58\u6cc4\u6f0f\u4e86</li> <li> <p>buff/cache     \u6211\u4eec\u7684\u6570\u636e\u662f\u5b58\u653e\u5728\u78c1\u76d8\u4e0a\u7684\uff0c\u6570\u636e\u662f\u4ea4\u7ed9CPU\u8fdb\u884c\u5904\u7406\u7684\uff0c\u4f46\u78c1\u76d8\u7684\u8fd0\u8f6c\u901f\u5ea6\u5f88\u5feb\uff0cCPU\u7684\u8fd0\u8f6c\u901f\u5ea6\u5f88\u6162\uff0c\u4e0d\u53ef\u80fd\u76f4\u63a5\u628a\u78c1\u76d8\u7684\u6570\u636e\u76f4\u63a5\u4e22\u7ed9CPU\u8fdb\u884c\u5904\u7406\uff0c\u56e0\u6b64\u8981\u7ecf\u8fc7\u4e00\u4e2a\u4e2d\u95f4\u5c42\uff0c\u5373\u5185\u5b58\uff0c\u6211\u4eec\u628a\u8fd9\u90e8\u5206\u5185\u5b58\u79f0\u4e3a==\u7f13\u5b58, cache==\uff1b\u76f8\u53cd\u5730\uff0cCPU\u628a\u6570\u636e\u5904\u7406\u5b8c\u4e86\uff0c\u8981\u5b58\u653e\u5230\u78c1\u76d8\u4e2d\uff0c\u4e5f\u8981\u7ecf\u8fc7\u5185\u5b58\u8fd9\u4e2a\u4e2d\u95f4\u5c42\uff0c\u8fd9\u90e8\u5206\u5185\u5b58\u5219\u79f0\u4e3a==\u7f13\u51b2, buffer==\u3002\u56e0\u6b64\uff0c\u6570\u636e\u7684\u6d41\u5411\u4e0d\u4e00\u6837\uff0c\u5185\u5b58\u7684\u89d2\u8272\u4e5f\u4e0d\u4e00\u6837\u3002\u7cfb\u7edf\u4f1a\u4f18\u5148\u9884\u7559\u4e00\u90e8\u5206\u5185\u5b58\u7ed9 buff/cache \u4f7f\u7528\uff0c\u5269\u4e0b\u7684\u5185\u5b58\u518d\u7559\u7ed9\u7cfb\u7edf\u6216\u7a0b\u5e8f\u4f7f\u7528</p> <pre><code>graph LR\n\u78c1\u76d8 --\u7f13\u5b58, cache--&gt; CPU\nCPU --\u7f13\u51b2, buffer--&gt; \u78c1\u76d8</code></pre> </li> </ul> <pre><code>         total       used      free    shared     buff/cache   available\nMem:     31Gi        10Gi      9.4Gi   4.0Mi      11Gi         20Gi\nSwap:    979Mi       227Mi     752Mi\n\n\"\"\"\n20G = 9.4G + 11G\n31G = 10G + 20G\n\"\"\"\n</code></pre> <p>linux free \u547d\u4ee4 \u67e5\u770b\u5185\u5b58\u4f7f\u7528\u60c5\u51b5</p> <li> <p>\u67e5\u770b\u5404\u4e2a\u8fdb\u7a0b\u5185\u5b58 <code>ps</code></p> <ul> <li><code>-aux</code></li> <li><code>-ef</code></li> <li><code>-aux/-ef --sort -col_name</code> \u6309col_name\u8fdb\u884c\u6392\u5e8f</li> <li><code>ps -ef | grep myprocess</code> \u67e5\u770b\u9884\u671f\u7684\u8fdb\u7a0b<code>myprocess</code>\u662f\u5426\u542f\u52a8 \u2757\u2757\u2757</li> </ul> <p>USER|PID| %MEM | VSZ | RSS |STAT |--|--|--|--|--|--| \u7528\u6237|\u8fdb\u7a0b\u53f7|\u5df2\u7528\u7269\u7406\u5185\u5b58\u5360\u6bd4|\u5df2\u7528\u865a\u62df\u5185\u5b58|\u5df2\u7528\u7269\u7406\u5185\u5b58|\u8fdb\u7a0b\u72b6\u6001</p> <ul> <li>STAT \u8fdb\u7a0b\u5f53\u524d\u7684\u72b6\u6001(\"S\":\u4e2d\u65ad sleeping,\u8fdb\u7a0b\u5904\u5728\u7761\u7720\u72b6\u6001,\u8868\u660e\u8fd9\u4e9b\u8fdb\u7a0b\u5728\u7b49\u5f85\u67d0\u4e9b\u4e8b\u4ef6\u53d1\u751f--\u53ef\u80fd\u662f\u7528\u6237\u8f93\u5165\u6216\u8005\u7cfb\u7edf\u8d44\u6e90\u7684\u53ef\u7528\u6027;\"D\":\u4e0d\u53ef\u4e2d\u65ad uninterruptible sleep;\"R\":\u8fd0\u884c runnable;\"T\":\u505c\u6b62 traced or stopped;\"Z\":\u50f5\u6b7b a defunct zombie process)</li> </ul> <p>linux\u7cfb\u7edf\u4e0bps -aux\u548cps -ef\u547d\u4ee4\u53c2\u6570\u7684\u4f5c\u7528\u53ca\u533a\u522b\u8be6\u89e3</p> </li>"},{"location":"Temp/#_3","title":"\u97f3\u9891","text":"<pre><code>graph LR\nA[\u8bbe\u5907\u91c7\u96c6] --\u83b7\u53d6--&gt; B(\u6a21\u62df\u4fe1\u53f7) \nB --\u6a21\u6570\u8f6c\u6362--&gt; C(\u6570\u5b57\u4fe1\u53f7)\nC --\u6570\u6a21\u8f6c\u6362--&gt; B\nC --\u5199\u5165--&gt; D[\u97f3\u9891\u6587\u4ef6]\nB --&gt; E[\u64ad\u653e\u5668\u64ad\u653e]</code></pre> <ul> <li>\u91c7\u6837\uff1a \u5bf9\u6a21\u62df\u4fe1\u53f7\u9694\u4e00\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u53d6\u4e00\u4e2a\u70b9\uff08\u56fe\u4e2d\u4ea4\u70b9\uff09</li> <li>\u91cf\u5316\uff1a \u7ed9\u7eb5\u5750\u6807\u52a0\u523b\u5ea6\uff0c\u6839\u636e\u8fd1\u4f3c\u53d6\u6574\u6570\u503c\uff0c\u4f7f\u91c7\u6837\u5f97\u5230\u7684\u70b9\u7684\u503c\u90fd\u662f\u6574\u6570\u3002</li> <li>\u7f16\u7801\uff1a\u5bf9\u91cf\u5316\u53d6\u5f97\u7684\u6574\u6570\u503c\u6309\u4e8c\u8fdb\u5236\u8fdb\u884c\u7f16\u7801</li> <li>\u6570\u5b57\u4fe1\u53f7\uff1a\u628a\u7f16\u7801\u5f97\u5230\u7684 0 \u548c 1 \u7684\u5e8f\u5217\u53d8\u73b0\u4e3a\u9ad8\u4f4e\u7535\u5e73\u7684\u4fe1\u53f7</li> </ul>"},{"location":"Temp/#_4","title":"\u4e00\u4e9b\u6570\u636e\u6307\u6807","text":"<ul> <li>\u91c7\u6837\u7387, SampleRate, FrameRate=1 \u6bcf\u79d2\u7684\u91c7\u6837\u6b21\u6570\u3002\u91c7\u6837\u7387 \u2b06\uff0c\u91c7\u6837\u70b9\u8d8a\u5bc6\u96c6\uff0c\u79bb\u6563\u4fe1\u53f7\u5bf9\u6a21\u62df\u4fe1\u53f7\u7684\u8fd8\u539f\u5ea6\ud83d\udc4d, \u4f46\u662f\u5360\u7684\u8d44\u6e90\u2b06\u3002 \u91c7\u6837\u7387 * \u8bed\u97f3\u65f6\u957f = \u8bed\u97f3\u91c7\u6837\u70b9\u6570</li> <li> <p>\u58f0\u9053, Channel, \u901a\u9053=16000</p> <ul> <li>\u5355\u58f0\u9053, monaural\uff1a\u53ea\u6709\u4e00\u4e2a\u91c7\u96c6\u5668\u91c7\u96c6\u97f3\u9891</li> <li>\u7acb\u4f53\u97f3, stereophonic\uff1a\u4e24\u4e2a\u6216\u4e24\u4e2a\u4ee5\u4e0a\u58f0\u9053\u6570\uff0c\u591a\u4e2a\u8bbe\u5907\u5f55\u97f3\uff0c\u7136\u540e\u6570\u636e\u7f16\u7801\u6574\u5408\u5230\u4e00\u8d77\u3002</li> </ul> </li> <li> <p>\u683c\u5f0f     |.wav|mp3|     |--|--|     \u9996\u9009</p> </li> </ul> <p>\u97f3\u9891\u76f8\u5173\u7684\u57fa\u7840\u77e5\u8bc6</p>"},{"location":"Temp/#python","title":"python \u8bfb\u53d6","text":"* <code>soundfile</code> <code>AudioSegment</code> <code>librosa</code> <code>dataset.Audio</code> read wav\u2714mp3\u274c wav\u2714mp3\u2714mp4\u2714 wav\u2714mp3\u2714 \u5c5e\u6027 sound.frame_ratesound.channelssound.duration_seconds Notes \u4e0d\u80fd\u8d85\u8fc74GB v <pre><code>import soundfile as sf\n\nwav, samplerate = sf.read(wav_path)\nsf.write(file=path, data=array_data, samplerate=samplerate, format='wav')\n</code></pre> <pre><code>librosa.load\n</code></pre> <pre><code>from pydub import AudioSegment\n\n# read\nsound = AudioSegment.from_file(video_path, 'mp4')\nsound = AudioSegment.from_wav(wav_path)\n\n# setting\nsound = sound.set_frame_rate(frame_rate)\nsound = sound.set_channels(channel)\n\n# export\nsound.export(name+'.wav', format='wav')\n</code></pre> <ul> <li>\u5e73\u5747\u5206\u5272\u97f3\u9891</li> </ul> <pre><code>len_wav = sound.duration_seconds  # \u65f6\u95f4\u7684\u5355\u4f4d\u662f\u79d2\n    if second_of_segment == None:\n        lst = [0, len_wav * 1000]\n        count_segments = 2\n    else:\n        # \u4ee5 second_of_segment \u6765\u5212\u5206\uff0c\u5207\u7247\u7684\u5355\u4f4d\u662f\u6beb\u79d2\n        count_segments = math.ceil(len_wav / second_of_segment)\n        lst = [i * 10000 for i in range(count_segments)]\n        lst[-1] = len_wav * 1000  # \u4e0d\u8981\u6c42\u5b9a\u957f\uff0c\u6240\u4ee5\u6700\u540e\u4e00\u6bb5\u4e5f\u8981\u4e86\n</code></pre> <pre><code>from datasets import load_dataset, Audio\n\ndataset_args = {\n    'dataset_name': 'mozilla-foundation/common_voice_11_0',\n    'lang': 'en',\n    'split': 'validation',\n    'streaming': True\n}\n\ndef array_to_wav(dataset):\n    \"\"\" Transform array format to WAV file \n\n    Not loading mp3 files, instead of extracting ID from their paths\n    \"\"\"\n    mp3_path = dataset['audio']['path'].replace('.mp3', '', )\n    dataset['ID'] = mp3_path[mp3_path.rfind('/')+1:]\n    wav_path = str(DATASET_DIR + '/wavs/' + dataset['ID'] + '.wav')\n\n    sf.write(file=str(wav_path), data=dataset['audio']['array'], \n             samplerate=FRAME_RATE, format='wav')\n    dataset['audio']['path'] = wav_path\n    return dataset\n\ndef process(dataset_args: Dict, to_wav=True):\n    \"\"\" To generate a \"new\" dataset from common voice, streaming = True\n\n    - Process:\n        - Download the dataset with streaming mode to reduce the usage of memory\n        - Select columns needed from the original dataset. \n            ['audio', 'sentence']\n        - Set sample rate = 16000\n            Assumption: all original data have only 1 channel\n        - Transform array format to WAV file \n        - Get ASR, and delete the WAV file after finishing transcribing.\n        - Save as JSON\n    - the \"new\" dataset\n        - ID: relate to the common voice by it\n        - truth: the transcripts provided by the common voice\n        - asr\n    \"\"\"\n    dataset = load_dataset(dataset_args['dataset_name'], dataset_args['lang'],\n                           split=dataset_args['split'], \n                           streaming=dataset_args['streaming'])\n\n    dataset = dataset.select_columns(['audio', 'sentence'])\n    print(dataset.features)\n    dataset = dataset.cast_column('audio', Audio(sampling_rate=FRAME_RATE))\n    # \u52a0\u8f09datasets\u97f3\u983b\u6a23\u672c\u6642\u767c\u51fa\u4fe1\u865f\u4ee5\u52d5\u614b\u91cd\u65b0\u63a1\u6a23\u5b83\u5011\n    if to_wav == True:\n        if not os.path.exists(DATASET_DIR+'/wavs'):\n            os.makedirs(DATASET_DIR+'/wavs')\n        dataset = dataset.map(array_to_wav)\n    i, asr_dict = 0, {}\n    for data in iter(dataset):\n        asr_dict[i] = {'ID': data['ID'],\n                        'truth': data['sentence'],\n                        'asr': gen_asr.asr(data['audio']['path'])\n                        }\n        os.remove(data['audio']['path'])\n        i += 1\n        if i % 200 == 0:\n            print(f'-----------{i}-------------')\n        if i % 3000 == 0:\n            write_json(asr_dict, DATASET_DIR + f'/asr_{i}.json')\n            asr_dict = {}\n        if i&gt;= 8000 and dataset_args['lang'] != 'yue' and dataset_args['lang'] != 'zh-HK':\n            break\n    if i % 3000 != 0:\n        write_json(asr_dict, DATASET_DIR + f'/asr_{i}.json')\n    return\n</code></pre> <p>Python | \u8bed\u97f3\u5904\u7406 | \u7528 librosa / AudioSegment / soundfile \u8bfb\u53d6\u97f3\u9891\u6587\u4ef6\u7684\u5bf9\u6bd4</p> <pre><code> wav phycical file\n\ndef asr_from_json(data_wav_path: str, asr_gt_path: str):\n    \"\"\"\n    :param data_wav_path: \n        json that recorded data' wav relative path and goundtruth sentence \n        - json format\n            {\"idx\": {\n                \"wav_path\": wav relative path,\n                \"truth\": ground truth sentence\n                }\n            }\n    :return: no-return, generating json instead.\n        - json format\n            {\"idx\": {\n                \"asr\": asr sentence,\n                \"truth\": ground truth sentence\n                }\n    \"\"\"\n    data_dict = load_dataset_from_json(DATASET_DIR + data_wav_path)\n    test_dict = {}\n    # T1 = time.perf_counter()\n    for idx, data in tqdm(data_dict.items()):\n        test_dict[idx] = { \n            'truth' : data['sentence'],\n            'asr' : asr(DATASET_DIR + '/' + data['wav_path'])\n            }\n\n    # T2 = time.perf_counter()\n    # print(f'---------------\u7a0b\u5e8f\u8fd0\u884c\u65f6\u95f4:{T2-T1}s.-------------')\n\n    write_json(test_dict, DATASET_DIR + asr_gt_path) \n</code></pre>"},{"location":"blog/","title":"Blog","text":""},{"location":"math/","title":"math","text":""},{"location":"math/#logrithm","title":"logrithm","text":"<p>\u5728\u6570\u636e\u5904\u7406\u4e2d\uff0c\u7ecf\u5e38\u4f1a\u628a\u539f\u59cb\u6570\u636e\u53d6\u5bf9\u6570\u4e4b\u540e\u518d\u5904\u7406\uff0c\u65e0\u8bba\u662f\u5728\u753b\u56fe\uff0c\u8fd8\u662f\u5728 da \u91cc\u3002 \u8b93\u6211\u5011\u5728\u8655\u7406\u6307\u6578\u7d1a\u589e\u9577\u7684\u4e8b\u7269\u6642\u5177\u6709\u66f4\u5927\u7684\u9748\u6d3b\u6027(\u5c0d\u6578\u5e6b\u52a9\u6211\u5011\u8655\u7406\u201c\u975e\u7dda\u6027\u201d\u6578\u64da\u3002)\u3002\u8207\u666e\u904d\u770b\u6cd5\u76f8\u53cd\uff0c\u6307\u6578\u589e\u9577\u4e26\u4e0d\u7e3d\u662f\u50cf\u4e00\u68f5\u6a39\u9577\u5230\u5929\u7a7a\u4e00\u6a23\u2014\u2014\u5b83\u50c5\u50c5\u610f\u5473\u8457\u6578\u64da\u4ee5\u76f8\u7576\u6046\u5b9a\u7684\u901f\u5ea6\u8907\u5408\uff08\u6216\u8870\u6e1b\uff09</p> <p>\u4e3a\u4ec0\u4e48\u80fd\u8fd9\u6837\u505a\uff1a log \u662f\u5355\u8c03\u589e\u51fd\u6570\uff0c\u4e0d\u4f1a\u6539\u53d8\u6570\u636e\u7684\u76f8\u5bf9\u5173\u7cfb\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8981\u8fd9\u6837\u505a\uff1a</p> <ul> <li>\u7f29\u5c0f\u6570\u636e\u7684\u7edd\u5bf9\u6570\u503c, \u65b9\u4fbf\u8ba1\u7b97\u3002\u5c24\u5176\u662f\u5bf9\u4e00\u4e9b\u76f4\u63a5\u8ba1\u7b97\u4f1a\u8d85\u8fc7\u5e38\u7528\u6570\u636e\u7c7b\u578b\u7684\u53d6\u503c\u8303\u56f4\u3002     &gt; \u6bd4\u5982 TF-IDF \u8ba1\u7b97 \u5728\u5927\u89c4\u6a21\u9884\u6599\u4e2d\uff0c\u5e38\u7528\u8bcd\u7684\u9891\u7387\u4f1a\u975e\u5e38\u5927 (I, \u6211)     !!! p \"\"         \u5176\u5b9e\u5c31\u8ddf \u5343\u4e07\u7ea7\u522b\u7684\u6570\u5b57 \u9664\u4ee5\u5343\u4e07\uff0c\u4ece \\(x*{10}^7\\xrightarrow{\\div{10}^7}x\\)\uff0c\u5c31\u53ef\u4ee5\u5728\u9ed8\u8ba4\u662f\u5343\u4e07\u7ea7\u522b\u53ea\u5bf9\u5343\u4e07\u4f4d\u4e0a\u8fdb\u884c\u5904\u7406\u3002log \u5c31\u662f\u5176\u4e2d\u4e00\u79cd\u7f29\u5c0f\u6570\u636e\u7684\u7edd\u5bf9\u6570\u503c\u7684\u65b9\u6cd5\u800c\u5df2\uff0c\u53ea\u662f\u5b83\u66f4\u64c5\u957f\u5904\u7406\u6570\u636e\u4e4b\u95f4\u76f8\u5dee\u975e\u5e38\u5927\uff0c\u7c7b\u6307\u6570\u589e\u52a0\u6216\u8870\u51cf\u7684\u8d8b\u52bf\u7684\u95f4\u8ddd\u3002</li> <li> <p>\u53d6\u5bf9\u6570\u540e\uff0c\u53ef\u4ee5\u5c06\u4e58\u6cd5\u8ba1\u7b97 \\(\\rightarrow\\) \u52a0\u6cd5\u8ba1\u7b97\uff0c\u66f4\u5bb9\u6613\u7406\u89e3\u5927\u5c0f\u5173\u7cfb\u3002     !!! warning \u8fd9\u4e2a\u7279\u522b\u5e38\u89c1\u5728\u56fe\u7247\u4e2d\uff01\uff01\uff01</p> <p><code>python title = volume of planets planets= {     'sun': 1.41*10**18,     'jupiter': 1.43*10**15     'earth': 1.83*10**12,     'moon': 2.20*10**10 }</code></p> <p> <p>\u4e0d\u7ecf\u8fc7\u5904\u7406\u4e4b\u524d\uff0c\u53ea\u80fd\u77e5\u9053 Sun \u662f\u4e00\u9a91\u7edd\u5c18\u7684\u5927\uff0c\u4f46\u662f\u8fd9\u4e2a\u4e00\u9a91\u7edd\u5c18\u5230\u5e95\u662f\u591a\u4e00\u9a91\u7edd\u5c18\u4e5f\u4e0d\u77e5\u9053\uff0c\u9664\u6b64\u4e4b\u5916\u5176\u5b83 items \u662f\u4e0d\u77e5\u9053\u76f8\u5bf9\u5927\u5c0f\u7684\uff0c\u6240\u4ee5\u4e0d\u597d\u3002</p> <p>\u5f88\u660e\u786e\u77e5\u9053\u76f8\u5bf9\u5927\u5c0f\u5173\u7cfb\uff0c\u800c\u4e14: Sun \u5728 18\uff0cJupiter \u5728 15\uff0c\u4e24\u8005\u76f8\u5dee\u4e863\uff0c\u5c31\u662f\\(10^3\\) \u91cf\u7ea7\u3002</p> <p>\u6e2c\u91cf\u5730\u9707\u5f37\u5ea6\u3002\u9019\u88ab\u7a31\u70ba\u91cc\u6c0f\u9707\u7d1a\uff0c\u7d66\u51fa\u4e86\u4ee5 10 \u70ba\u5e95\u7684\u5c0d\u6578\u7684\u5730\u9707\u5f37\u5ea6\u3002 6.0\u7d1a\u5730\u9707\u6bd45.0\u7d1a\u5730\u9707\u5f3710\u500d - \u5728\u6570\u503c\u5c0f\u7684\u573a\u666f\u6bd4\u6570\u503c\u5927\u7684\u65f6\u5019\u5bf9\u5dee\u5f02\u66f4\u654f\u611f\u3002\u662f\u4e00\u4e2a\u8fd9\u7b26\u5408\u67d0\u4e9b\u5e94\u7528\u573a\u666f\u3002 \u5bf9\u4e8e\u4ef7\u683c\uff0c\u767e\u5143\u4e0b\u7684\u5dee\u51e0\u767e &amp; \u5343\u5143\u7684\u5dee\u51e0\u767e \u4e0d\u662f\u4e00\u4e2a\u654f\u611f\u7a0b\u5ea6\u3002 \u5bf9\u4e8e\u4e2d\u6587\u5206\u8bcd\uff0c\u80fd\u5206\u6210 \\(A_1(200) \\&amp; A_2(800)\\) &amp; \\(B_1(500) \\&amp; B_2(500)\\)\uff0c\u5355\u7eaf\u6bd4\u8f83\u9891\u7387\u548c\u90fd\u662f1000\uff0c\u65e0\u6cd5\u8fa8\u6e05\u4f18\u52a3\u3002\u4f46\u662f\u6bd4\u8f83\u5bf9\u6570\u548c \\(\\begin{cases}A=\\log_{10}(200)+\\log_{10}(800)\\approx2.30103+2.90308\\approx5.2\\\\B:2\\log_{10}(500)\\approx2*2.69897\\approx5.4\\end{cases}\\implies B&gt;A\\) \u504f\u5411\u90fd\u662f\u5e38\u89c1\u7684\u60c5\u51b5\uff0c\u9009\u62e9 B \u7684\u65b9\u6848\u3002 - \u6240\u5f97\u5230\u7684\u6570\u636e\u6613\u6d88\u9664\u5f02\u65b9\u5dee\u95ee\u9898\u3002\u3010\u4e0d\u61c2\u3011 - \u5728\u7ecf\u6d4e\u5b66\u4e2d\uff0c\u5e38\u53d6\u81ea\u7136\u5bf9\u6570\u518d\u505a\u56de\u5f52\uff0c\u8fd9\u65f6\u56de\u5f52\u65b9\u7a0b\u4e3a lnY=a lnX+b \uff0c\u4e24\u8fb9\u540c\u65f6\u5bf9X\u6c42\u5bfc\uff0c1/Y(DY/DX)=a1/X, b=(DY/DX)(X/Y)=(DYX)/(DX*Y)=(DY/Y)/(DX/X) \u8fd9\u6b63\u597d\u662f\u5f39\u6027\u7684\u5b9a\u4e49\u3002\u3010\u4e0d\u61c2\u3011</p> <p>\u5b9e\u8df5\u4e2d\uff0c\u53d6\u5bf9\u6570\u7684\u4e00\u822c\u662f\u6c34\u5e73\u91cf\uff0c\u800c\u4e0d\u662f\u6bd4\u4f8b\u6570\u636e\uff0c\u4f8b\u5982\u53d8\u5316\u7387\u7b49\u3002</p> <p>\u6570\u636e\u96c6\u6709\u8d1f\u6570\uff0c\u53ef\u4e0d\u53ef\u4ee5\u901a\u8fc7\u52a0\u4e00\u4e2a\u5e95\u6570\uff0c\u4f7f\u5f97\u6574\u4f53\u6570\u636e\u4e3a\u6b63\u518dlog \u5904\u7406</p> <p>!!! danger \u201c\u5173\u4e8e\u8d8b\u52bf\u7684\u9519\u89c9\uff1a\u589e\u52a0\u91cf &amp; \u589e\u957f\u901f\u7387\u201d     \u589e\u52a0\u91cf \\(=Y-X\\), \u589e\u52a0\u901f\u7387 \\(=\\cfrac{Y-X}{X}\\)     \u589e\u52a0\u91cf\u5927\u4e0d\u4ee3\u8868\u589e\u52a0\u901f\u7387\u5927\uff0c\u800c\u662f\u8981\u8fdb\u884c\u8ba1\u7b97\u3002\u901a\u8fc7 raw data \u6211\u4eec\u80fd\u611f\u89c9\u201c\u91cf\u201d\u7684\u53d8\u5316\uff0c\u901a\u8fc7 log data \u6211\u4eec\u80fd\u611f\u5230\u201c\u901f\u7387\u7684\u53d8\u5316\u201d\u3002 \\(\\begin{cases}x:=\\log_{10}X\\\\y:=\\log_{10}Y\\end{cases}\\implies \\cfrac{Y-X}{X}=\\cfrac{10^y-10^x}{10^x}=y-x-1\\)     log data \u4e2d y \u8f74\u53d8\u5316\u8d8a\u591a\uff0c\u589e\u957f\u7387\u8d8a\u5927\uff0c\u6240\u4ee5 log data \uff1a \u523b\u5ea6\u7ebf\u659c\u7387\u2b06\ufe0f\ud83d\udff0\u589e\u957f\u7387\u2b06\ufe0f\u523b\u5ea6\u7ebf\u659c\u7387\u2796\ud83d\udff0\u589e\u957f\u7387\u2796\u523b\u5ea6\u7ebf\u659c\u7387\u2b07\ufe0f\ud83d\udff0\u589e\u957f\u7387\u2b07\ufe0f</p> <p> \u524d 50 \u5929\u75c5\u4f8b\u4ece 0 \u589e\u957f\u8fdc\u4f4e\u4e8e 10w\uff08\u770b\u8d77\u6765\u4f9d\u65e7\u57280\u7684\u9644\u8fd1\uff09\uff0c\u540e 50 \u5929\u75c5\u4f8b\u4ece\u4e0d\u5230 30w \u98d9\u5230\u4e86 50w\u3002\u4ece\u91cf\u7684\u53d8\u5316\u6765\u8bf4\uff0c\u8d8a\u540e\u9762\u589e\u52a0\u7684\u91cf\u8d8a\u5927\u3002 \u4f46\u662f\u4ece\u611f\u67d3\u7387\u7684\u53d8\u5316\u6765\u8bf4\uff0c\u524d50\u5929\u7684\u611f\u67d3\u7387\u8fc5\u901f\u98d9\u5347\uff0c\u540e30\u5929\u7684\u611f\u67d3\u7387\u5df2\u7ef4\u6301\u7a33\u5b9a\uff0c\u8bc1\u660e\u5df2\u7ecf\u9010\u6b65\u7a33\u4f4f\u8d8b\u52bf\u6216\u8005\u611f\u67d3\u4eba\u6570\u5df2\u7ecf\u63a5\u8fd1\u9971\u548c\uff0c\u5df2\u7ecf\u6da8\u4e0d\u4e86\u591a\u5c11\u3002</p> <ul> <li>\u544a\u8bc9\u4f60\u4e3a\u4ec0\u4e48\u6570\u636e\u8981\u53d6\u5bf9\u6570</li> <li>What\u2019s A Logarithm?</li> <li>Logarithms \u2014 What, Why and How</li> </ul> <p>\u534f\u65b9\u5dee\u3000\u8861\u91cf\u4e00\u4e2a\u53d8\u91cf\u4e0e\u53e6\u4e00\u4e2a\u53d8\u91cf\uff08\u5728\u6570\u503c\u548c\u65b9\u5411\u4e0a\uff09\u4e00\u81f4\u53d8\u5316\u7a0b\u5ea6\u7684\u65b9\u5f0f\u3002</p>"},{"location":"math/#_1","title":"\u7b1b\u5361\u5c14\u79ef","text":"<p>A\u00d7B={(x,y)|x\u2208A\u2227y\u2208B}</p> <p>A square matrix A is called a projection matrix if AA = A. If this is satisfied, then An = A\u00b7\u00b7\u00b7A = A.</p> <p>The matrix Am\u00d7m is called an orthogonal matrix if A\u22121 = A\u2032. Therefore AA\u2032 = A\u2032A = I.</p> <p>The space spanned by a set of vectors {x1, \u00b7 \u00b7 \u00b7 , xm}, is the totality of all the linear combinations of these vectors. A linear combination is like c1x1 +\u00b7\u00b7\u00b7+cmxm, where c1, \u00b7 \u00b7 \u00b7 , cm are constants, and in particular, they can all be zero. \u25b6 The range, or image of a matrix A, is the space spanned by the vectors which are the columns of A. \u25b6 ThenullspaceofamatrixA,istheset{x:Ax=0}.</p> Range Null space Identity Matrix The whole space The zero vector Zero Matrix The zero vector The whole space"},{"location":"math/#vector","title":"Vector","text":"\\[x=\\begin{bmatrix}x_1\\\\x_2\\\\\\vdots\\\\x_n\\end{bmatrix}\\in\\R^{n\\times1}\\Longleftrightarrow x^T=\\begin{bmatrix}x_1&amp;x_2&amp;\\cdots&amp;x_n\\end{bmatrix}\\in\\R^{1\\times n}\\] <ul> <li> <p>\u7b80\u5355\u7684\u64cd\u4f5c     \\(cx =\\begin{bmatrix}cx_1\\\\cx_2\\\\\\vdots\\\\cx_n\\end{bmatrix}\\)</p> <p>\\(x+y = \\begin{bmatrix}x_1+y_1\\\\x_2+y_2\\\\\\vdots\\\\x_n+y_n\\end{bmatrix}\\)</p> <p>\\(&lt;x, y&gt; = &lt;y, x&gt;=x^Ty=y^Tx\\)</p> <p>\\(\\Vert x\\Vert =\\sqrt{&lt;x, x&gt;} =\\sqrt{x_1^2+x_2^2+\\cdots+x_n^n}\\\\\\Vert cx\\Vert=c\\Vert x\\Vert\\)</p> <p>\\(\\Vert x+y\\Vert\\le\\Vert x\\Vert+\\Vert y\\Vert\\)</p> </li> </ul>"},{"location":"math/#matrix","title":"Matrix","text":"\\[A = []\\in\\R^{m\\times n}\\] <ul> <li>\u7b80\u5355\u7684\u64cd\u4f5c     \\(A+B\\Longleftrightarrow (A+B)_{i,j}=A_{i,j}+B_{i,j}\\) \\(A-B\\Longleftrightarrow (A-B)_{i,j}=A_{i,j}-B_{i,j}\\) \\(cA\\Longleftrightarrow (cA)_{i,j}=cA_{i,j}\\)</li> </ul>"},{"location":"math/#ss","title":"ss","text":""},{"location":"math/#square-matrix","title":"Square Matrix","text":"<p>\\(A\\in\\R^{n\\times n}\\)</p> <ul> <li>invertible</li> </ul>"},{"location":"math/#matrices","title":"Matrices","text":"<p>\\(A\\in\\R^{n\\times n}\\xRightarrow{A^2=A}\\text{projection}\\xRightarrow{A=A^T}\\text{orthogonal}\\)</p>"},{"location":"math/#symmetric-matrix","title":"symmetric matrix","text":""},{"location":"math/#invertible","title":"invertible","text":""},{"location":"math/#derivatives","title":"Derivatives","text":""},{"location":"math/#vector_1","title":"vector","text":"<p>\\(x\\in\\R^n, A, B\\in\\R^{m\\times n}, c\\in\\R^m\\) \\(\\cfrac{\\partial}{\\partial x}c^Tx=c\\)</p> <p>\\(\\cfrac{\\partial}{\\partial x}Ax=A^T\\)</p> <p>\\(\\cfrac{\\partial }{\\partial x}c^TAx=A^Tc\\)</p> <p>\\(\\cfrac{\\partial }{\\partial x}x^TAx= (A^T+A)x\\xRightarrow{if A\\in  S}2Ax\\)</p> <p>\\(\\cfrac{\\partial }{\\partial x}x^TB^TAx=(B^TA+A^TB)x\\)</p> <p>\\(\\cfrac{\\partial }{\\partial x}x^Tx=(I^T+I)x=2x\\)</p>"},{"location":"math/#_2","title":"\u5173\u4e8e\u7ea6\u675f\u6761\u4ef6","text":"<p>To solve: \u7ea6\u675f\u6761\u4ef6\u4e0b\u7684\u53ef\u884c\u57df\u7a7a\u95f4\u4e0d\u89c4\u5219\uff0c\u96be\u4ee5\u6c42\u89e3\u3002 \u5e0c\u671b\u8f6c\u5316\u4e3a\u89c4\u5219\u7684\u53ef\u884c\u7a7a\u95f4</p> \\(\\min\\limits_x f(x)\\\\\\text{s.t.} h(x)=0,g(x)\\le0\\\\\\text{\u4e0d\u89c4\u5219\u7684\u7ea6\u675f}\\) \\(\\implies\\) \\(\\min\\limits_x\\max\\limits_{\\lambda,\\mu} f(x)+\\lambda h(x)+\\mu g(x)\\\\\\text{s.t.} \\lambda,\\mu\\ge0\\\\\\text{\u89c4\u5219\u7684\u7ea6\u675f}\\) <p>\u7ea6\u675f\u60c5\u51b5:</p> \\[\\begin{align*} \\text{\u65e0\u7ea6\u675f}&amp;\\min f(x_1,\\dots,x_n)\\\\ \\text{\u7b49\u5f0f\u7ea6\u675f}&amp; \\min f(x_1,\\dots,x_n) \\text{ s.t. }h(x_1,\\dots,x_n)=0\\\\ \\text{\u4e0d\u7b49\u5f0f\u7ea6\u675f}&amp;\\min f(x_1,\\dots,x_n) \\text{ s.t. }g(x_1,\\dots,x_n)\\red{\\le} 0 \\end{align*}\\]"},{"location":"math/#lagrange-multiplier","title":"\u62c9\u683c\u6717\u65e5\u4e58\u5b50\u6cd5, Lagrange Multiplier","text":"<p>For \u6c42 \\(f(x_1,\\dots,x_n)\\) \u5728 \\(k\\) \u4e2a\u7ea6\u675f\u6761\u4ef6 \\(h_i(x) =\\le 0, i=1,\\dots, k\\)\u4e0b\u7684\u6781\u503c</p> <p>\u5c06\u7ea6\u675f\u6761\u4ef6\u51fd\u6570\u4e0e\u539f\u51fd\u6570\u8054\u7acb\uff0c\u4ece\u800c\u6c42\u51fa\u4f7f\u539f\u51fd\u6570\u53d6\u5f97\u6781\u503c\u7684\u5404\u4e2a\u53d8\u91cf\u7684\u89e3\u3002</p> \\[\\text{k \u4e2a\u7b49\u5f0f\u7ea6\u675f: } \\min f(x_1,\\dots,x_n) \\text{ s.t. }h_j(x_1,\\dots,x_n)=0, j=1, \\dots,k\\\\ \\Leftrightarrow \\min_x\\max_\\alpha \\mathcal{L}(x,\\alpha):=\\min_x\\max_\\alpha f(x)+\\sum_{j=0}^k\\alpha_jh_j(x)\\] <p>To solve:</p> \\[\\cfrac{\\partial \\mathcal{L}}{\\partial x}=\\cfrac{\\partial \\mathcal{L}}{\\partial \\alpha_1}=\\dots =\\cfrac{\\partial \\mathcal{L}}{\\partial \\alpha_k}\\xlongequal{SET}0\\] <p>p \u4e2a\u7b49\u5f0f\u6761\u4ef6 \\(h_j(x_1,\\dots, x_n)=0, j=1,\\dots,p\\)  q\u4e2a\u4e0d\u7b49\u5f0f\u6761\u4ef6 \\(g_k(x_1, \\dots, x_n)\\red{\\le}0, k=1,\\dots,q\\)</p> \\[\\min f(x_1,\\dots,x_n) \\text{ s.t. }\\begin{cases} h_j(x_1,\\dots, x_n)=0, j=1,\\dots,p\\\\g_k(x_1,\\dots,x_n)\\red{\\le}0, k=1, \\dots,q \\end{cases}\\\\ \\Leftrightarrow  \\mathcal{L}(x,\\lambda,\\mu):=f(x)+\\sum_{j=0}^p\\lambda_jh_j(x)+\\sum_{k=1}^q\\mu_kg_k(x)\\\\ \\implies \\min_{x}\\max_{\\lambda,\\mu} \\mathcal{L}(x,\\lambda,\\mu)\\] <p>To solve:</p> \\[\\cfrac{\\partial \\mathcal{L}}{\\partial x_i}=\\cfrac{\\partial \\mathcal{L}}{\\partial \\lambda_j}=\\cfrac{\\partial \\mathcal{L}}{\\partial \\mu_k}\\xlongequal{SET}0\\] <p>\u8bc1\u660e\uff1a\\(\\min\\limits_x\\max\\limits_{\\lambda,\\mu}\\) \u8ba8\u8bba \\(g(x)\\) \u7684\u53d6\u503c\u3002 - \\(g(x)\\gt0\\)\uff0c\u4e0d\u5728\u53ef\u884c\u57df\u5185\u3002\u5148\u6c42\u7684 \\(\\max\\limits_\\mu\\rightarrow\\infin\\impliedby\\mu\\rightarrow+\\infin\\) - \\(g(x)\\le0\\)\uff0c\u5728\u53ef\u884c\u57df\u5185\u3002\u5148\u6c42\u7684 \\(\\max\\limits_\\mu\\rightarrow f(x)\\impliedby\\mu\\rightarrow0\\impliedby \\mu\\ge0\\) \\(\\implies\\mathcal{L}(x,\\lambda,\\mu)=\\begin{cases}f(x)&amp;g(x)\\le0\\text{\u5728\u53ef\u884c\u57df\u5185}\\\\+\\infin&amp;g(x)\\ge0\\text{\u4e0d\u5728\u53ef\u884c\u57df\u5185}\\end{cases}\\) \u6240\u4ee5\u4e00\u65e6\u53ef\u89e3(\\(\\neq\\infin\\))\uff0c\u5c31\u80af\u5b9a\u662f\u5728\u53ef\u884c\u57df\u5185\u8303\u56f4\u5185\u6c42\u5f97\u7684\u89e3\u3002</p>"},{"location":"math/#_3","title":"\u5bf9\u5076\u95ee\u9898","text":"<p>\u539f\u59cb\u5f62\u5f0f\uff1a\\(p^*:=\\min\\limits_x\\max\\limits_\\lambda f(x)+\\lambda h(x),\\text{ s.t. }\\lambda\\ge0\\rightarrow(x_p^*,\\lambda_p^*)\\) \u5bf9\u5076\u95ee\u9898\uff1a\\(q^*:=\\max\\limits_\\lambda\\min\\limits_x f(x)+\\lambda h(x),\\text{ s.t. }\\lambda\\ge0\\rightarrow(x_q^*,\\lambda_q^*)\\)</p> <p>\\(p^* \\&amp; q^*\\) \u5b58\u5728 \\(\\implies p^*\\ge q^*\\begin{cases}p^*=q^*&amp;\\text{\u5f3a\u5bf9\u5076}\\\\p^*&gt;q^*&amp;\\text{\u5f31\u5bf9\u5076}\\end{cases}\\)</p> <p>\u8bc1\u660e\uff1a\\(p^*\\ge q^*\\),</p> <p>Let \\(\\mathcal{L}(x, \\lambda)= f(x)+\\lambda h(x)\\) \\(\\lambda_p^*=\\max\\limits_\\lambda \\mathcal{L}(x,\\lambda)\\implies \\mathcal{L}(x,\\lambda_p^*) \\ge\\forall x, \\mathcal{L}(x, \\lambda)\\)</p> <p>\\(x_q^*=\\min\\limits_x \\mathcal{L}(x,\\lambda)\\implies \\mathcal{L}(x_q^*,\\lambda) \\le \\forall \\lambda, \\mathcal{L}(x, \\lambda)\\)</p> \\[\\mathcal{L}(x,\\lambda_p^*)\\ge\\mathcal{L}(x, \\lambda)\\ge \\mathcal{L}(x_q^*,\\lambda)\\\\\\implies p^*= \\mathcal{L}(x_p^*,\\lambda_p^*)\\ge \\mathcal{L}(x_q^*,\\lambda_q^*)=q^*\\]"},{"location":"math/#kkt","title":"KKT","text":"<p>\u4e3a\u4e86\u8fbe\u5230\u5f3a\u5bf9\u5076\u6761\u4ef6 \\(p^*=q^*\\)\uff0c\u771f\u7684\u62ff\u5230\u539f\u95ee\u9898\u7684\u6700\u4f18\u89e3\u3002</p> <ol> <li>\\(f(x), g(x)\\) \u76ee\u6807\u51fd\u6570\uff0c\u4e0d\u7b49\u5f0f\u7ea6\u675f \u662f\u51f8\u51fd\u6570</li> <li>\\(h(x)\\) \u7b49\u5341\u7ea6\u675f \u662f \u4eff\u5c04\u51fd\u6570</li> <li>\u4e0d\u7b49\u5f0f\u7ea6\u675f\u53ef\u4e25\u683c\u4e0d\u7b49\u4e8e</li> <li>\u978d\u70b9\u6761\u4ef6 \\(\\cfrac{\\partial \\mathcal{L}(\\cdot)}{\\partial x}=\\cfrac{\\partial \\mathcal{L}(\\cdot)}{\\partial \\lambda}=\\cfrac{\\partial \\mathcal{L}(\\cdot)}{\\partial \\mu}\\xlongequal{SET}0\\)</li> <li>\u53ef\u884c\u6761\u4ef6 \\(\\begin{cases} \\lambda,\\mu\\ge0\\\\h(x)=0\\\\g(x)\\le0\\end{cases}\\)</li> <li>\u4e92\u8865\u677e\u5f1b\u6761\u4ef6 \\(\\mu g(x)=0\\)</li> </ol>"},{"location":"math/#_4","title":"\u6982\u7387 &amp; \u7edf\u8ba1","text":"\u6982\u7387 \u7edf\u8ba1 \u8f93\u5165 \u89c4\u5f8b \u5927\u91cf\u6837\u672c \u8f93\u51fa \u7279\u5b9a\u6837\u672c\u7684\u6982\u7387 \u89c4\u5f8b \u5b9e\u8d28\u4f3c\u7136\u51fd\u6570 \u6839\u636e\u5206\u5e03\u89c4\u5f8b\u63a8\u7b97\u67d0\u4e00\u6837\u672c\u53d1\u751f\u6982\u7387 \u6839\u636e\u5927\u91cf\u6837\u672c\u603b\u7ed3\u63a8\u65ad\u80cc\u540e\u7684\u89c4\u5f8b(\u53c2\u6570)\u3002 \\(\\Updownarrow\\)\u51fa\u73b0x\u6837\u672c\u6982\u7387\u6700\u5927\u7684\u53c2\u6570 <p>\u4f2f\u52aa\u5229\u5927\u6570\u5b9a\u5f8b\uff0c\u8bbe\\(f_A\\)\u662fn\u6b21\u72ec\u7acb\u91cd\u590d\u8bd5\u9a8c\u4e2d\u4e8b\u4ef6A\u53d1\u751f\u7684\u6b21\u6570\u3002P\u662fA\u5728\u6bcf\u6b21\u5b9e\u9a8c\u4e2d\u53d1\u751f\u7684\u6982\u7387\u3002\\(\\forall \\epsilon\\gt0,\\lim\\limits_{n\\rightarrow\\infin}P\\{\\vert\\frac{f_A}{n}-p\\vert&lt;\\epsilon\\}=0\\)\u3002\u5f53\u8bd5\u9a8c\u6b21\u6570\u8d8b\u5411\u65e0\u7a77\u65f6\uff0c\u4e8b\u4ef6 A \u53d1\u751f\u7684\u9891\u7387\u4f9d\u6982\u7387\u6536\u655b\u4e8eA\u4e8b\u4ef6\u5728\u8bd5\u9a8c\u4e2d\u53d1\u751f\u7684\u6982\u7387\u3002 \u4e2d\u5fc3\u6781\u9650\u5b9a\u7406\uff0c\u5927\u91cf\u76f8\u4e92\u72ec\u7acb\u968f\u673a\u53d8\u91cf\u7684\u5747\u503c\u7ecf\u8fc7\u9002\u5f53\u6807\u51c6\u5316\u540e\u4f9d\u5206\u5e03\u6536\u655b\u4e8e\u6b63\u6001\u5206\u5e03\u3002</p>"},{"location":"math/#_5","title":"\u6a21\u578b\u8bc4\u4ef7","text":"\u5b9e\u8d28\u8ba1\u7b97 \u6982\u7387\u89d2\u5ea6 \uff5e \u6700\u5c0f\u4e8c\u4e58\u6cd5 \u6700\u5927\u4f3c\u7136\u4f30\u8ba1 MAE \\((y-\\hat{y})^2\\) \u5cad\u56de\u5f52 \u6700\u5927\u540e\u9a8c\u4f30\u8ba1 MAP \u5f15\u5165\u6b63\u5219\u9879 \\(P(w), w^2\\) <p>\u6700\u5927\u4f3c\u7136\u6cd5 \\(\\xrightarrow{\\text{\u5960\u5b9a}}\\\\\\xrightarrow{\\text{\u6982\u7387\u89e3\u91ca}}\\) \u6700\u5c0f\u4e8c\u4e58\u6cd5 \u6700\u5927\u540e\u9a8c\u4f30\u8ba1 \\(\\xrightarrow{\\text{\u5960\u5b9a}}\\\\\\xrightarrow{\\text{\u6982\u7387\u89e3\u91ca}}\\) \u5cad\u56de\u5f52 (\u6700\u5c0f\u4e8c\u4e58\u6cd5 &amp; \u6700\u5927\u4f3c\u7136\u6cd5),(\u5cad\u56de\u5f52 &amp; \u6700\u5927\u540e\u9a8c\u4f30\u8ba1) \u5f62\u5f0f\u5b9e\u8d28\u76f8\u7b49\uff0c\u5b9e\u8d28\u601d\u60f3\u4e00\u81f4\uff0c\u4f46\u51fa\u53d1\u89d2\u5ea6\u4e0d\u540c</p> <p>\u6700\u5927\u540e\u9a8c\u4f30\u8ba1\u662f\u589e\u52a0\u4e86 \\(p(w)\\)\u5148\u9a8c\uff0c\u4f5c\u4e3a\u6b63\u5219\u9879\u5b58\u5728\u3002</p> \uff5e \u6700\u5927\u4f3c\u7136 \u6700\u5927\u540e\u9a8c\u4f30\u8ba1 \u76ee\u6807\u51fd\u6570 \\(P(x\\vert w)\\) \\(P(w\\vert x)=\\cfrac{P(x\\vert w)P(w)}{P(x)}\\) \u5047\u8bbe \\(\\epsilon\uff5eN(0,\\sigma^2)\\)\u9ad8\u65af\u566a\u58f0 \\(\\epsilon\uff5eN(0,\\sigma_\\epsilon^2)\\)\u9ad8\u65af\u566a\u58f0\\(w\uff5eN(0,\\sigma_w^2)\\)\u9ad8\u65af\u5148\u9a8c <p>\u89e3\u6790 MAE &amp; MAP</p> <p>\\(\\(A:=\\text{\u8f66\u88ab\u7838\u4e86},\\qquad\\overline{A}:=\\text{\u8f66\u6ca1\u88ab\u7838}\\\\B:=\\text{\u8b66\u62a5\u54cd\u4e86},\\qquad\\overline{B}:=\\text{\u8b66\u62a5\u6ca1\u54cd}\\)\\) \u7edf\u8ba1\u95ee\u9898\uff1a\u6709\u5927\u91cf\u6837\u672c\uff0c\u53bb\u63a2\u8ba8\u8f66\u88ab\u7838\u4e86\u548c\u8b66\u62a5\u54cd\u4e86\u6709\u4ec0\u4e48\u5173\u7cfb \u6982\u7387\u95ee\u9898\uff1a\u8b66\u62a5\u54cd\u4e86\uff0c\u6709\u591a\u5c11\u6982\u7387\u53ef\u4ee5\u76f8\u4fe1\u8f66\u662f\u88ab\u7838\u4e86 ||| |--|--| \u6700\u5927\u4f3c\u7136 MAE| \\(P(B\\vert A)\\) \u5728\u8f66\u88ab\u7838\u4e86\u7684\u60c5\u51b5\u4e0b \u8b66\u62a5\u54cd\u4e86 \u6700\u5927\u540e\u9a8c\u4f30\u8ba1 MAP| \\(P(A\\vert B)=\\cfrac{P(B\\vert A)P(A)}{P(B)}=\\cfrac{\\text{\u4f3c\u7136\u51fd\u6570*\u5148\u9a8c}}{P(B)}\\) \u5728\u8b66\u62a5\u54cd\u4e86\u7684\u60c5\u51b5\u4e0b\uff0c\u8f66\u88ab\u7838</p> <p>\u5982\u679c\u4e24\u8005\u5177\u6709\u5f3a\u5173\u8054\u6027 \\(P(A\\vert B)\\approx P(B\\vert A)\\rightarrow1\\)</p> <p>\\(\\(\\{(x_i, y_i)\\vert i=1,\\dots,n\\}, x_i\\in\\R^d,y_i\\in\\R\\\\y_i=w^Tx_i+\\epsilon_i=\\hat{y}_i+\\epsilon_i\\)\\)</p>"},{"location":"math/#_6","title":"\u6700\u5c0f\u4e8c\u4e58\u6cd5","text":"\\[\\min_{w^T}\\mathcal{L}(w^T)=\\frac{1}{2}\\epsilon^2=\\frac{1}{2}\\sum_{i=1}^n(y_i-\\hat{y}_i)^2\\\\\\hat{y}=w^Tx\\]"},{"location":"math/#_7","title":"\u6700\u5927\u4f3c\u7136\u4f30\u8ba1","text":"<p>\u5047\u8bbe \\(\\epsilon\uff5eN(0,\\sigma^2)\\)\uff0c\u670d\u4ece\u9ad8\u65af\u5206\u5e03\u3002\\(\\begin{cases}y\uff5eN(w^Tx,\\sigma^2)\\\\P(y=y^*)=\\cfrac{1}{\\sqrt{2\\pi}\\sigma}\\exp(-\\cfrac{(y^*-w^Tx)^2}{2\\sigma^2})\\end{cases}\\)</p> \\[\\max_{w^T}\\prod_{i=1}^nP(y_i)=\\max_{w^T}\\sum_{i=1}^n\\log P(y_i)\\\\\\begin{align*} \\max_{w^T}\\mathcal{L}(w^T)&amp;=\\sum_{i=1}^n\\log \\Big[\\cfrac{1}{\\sqrt{2\\pi}\\sigma}\\exp(-\\cfrac{(y_i-w^Tx_i)^2}{2\\sigma^2})\\Big]\\\\ &amp;=\\sum_{i=1}^n \\Big[-\\log(\\sqrt{2\\pi}\\sigma)-\\cfrac{(y_i-w^Tx_i)^2}{2\\sigma^2}\\Big]\\\\ &amp;\\propto \\min_{w^T}\\sum_{i=1}^n(y_i-w^Tx_i)^2\\\\ &amp;\\propto \\min_{w^T}\\sum_{i=1}^n(y_i-\\hat{y}_i)^2 \\end{align*}\\] <p>\u6700\u5927\u4f3c\u7136\u6cd5\u7684\u4f9d\u636e: - \u8bef\u5dee\u662f\u968f\u673a\u3001\u65e0\u6570\u3001\u72ec\u7acb - \u4e2d\u5fc3\u6781\u9650\u5b9a\u7406(\u5927\u91cf\u76f8\u4e92\u72ec\u7acb\u968f\u673a\u53d8\u91cf\u7684\u5747\u503c\u7ecf\u8fc7\u9002\u5f53\u6807\u51c6\u5316\u540e\u4f9d\u5206\u5e03\u6536\u655b\u4e8e\u6b63\u6001\u5206\u5e03) \\(\\implies\\) \u8bef\u5dee\u670d\u4ece\u6b63\u6001\u5206\u5e03</p> <p>\u82e5\u8bef\u5dee\u662f\u6b63\u6001\u5206\u5e03\uff0c\u5219\u6700\u5c0f\u4e8c\u4e58\u6cd5\u5f97\u6700\u4f18\u89e3\u4e5f\u5fc5\u7136\u662f\u6700\u4f18\u89e3\u3002</p>"},{"location":"math/#_8","title":"\u6700\u5927\u540e\u9a8c\u4f30\u8ba1","text":"<p>$$ \\max_w P(w|x)=\\cfrac{P(x|w)P(w)}{P(x)}$$ \u5047\u8bbe: - \\(\\epsilon\\) \u670d\u4ece\u6b63\u6001\u5206\u5e03 \\(\\begin{cases}\\epsilon\uff5eN(0,\\sigma_\\epsilon^2)\\\\y\uff5eN(w^Tx,\\sigma_\\epsilon^2)\\\\P(y)=\\cfrac{1}{\\sqrt{2\\pi}\\sigma_\\epsilon}\\exp(-\\cfrac{(y-w^Tx)^2}{2\\sigma_\\epsilon^2})\\end{cases}\\) - \\(w\\) \u670d\u4ece\u6b63\u6001\u5206\u5e03 \\(w\uff5eN(0, \\sigma_w^2), P(w)=\\cfrac{1}{\\sqrt{2\\pi}\\sigma_w}\\exp(-\\cfrac{w^2}{2\\sigma_w^2})\\)</p> \\[ \\begin{align*} \\max_w P(w|x)&amp;=\\cfrac{P(x|w)P(w)}{P(x)}\\\\ &amp;\\propto P(x|w)P(w)\\\\ \\Leftrightarrow\\max_w\\log P(w|x)&amp;\\propto \\log P(x|w)+\\log P(w)\\\\ &amp;=-\\log\\sqrt{2\\pi}(\\sigma_1+\\sigma_2)-\\cfrac{(y-w^Tx)^2}{2\\sigma_\\epsilon^2}-\\cfrac{w^2}{2\\sigma_w^2}\\\\ &amp;\\propto-\\cfrac{(y-w^Tx)^2}{2\\sigma_\\epsilon^2}-\\cfrac{w^2}{2\\sigma_w^2}\\\\ &amp;\\xrightarrow{\\times-2\\sigma_\\epsilon^2}\\min_w (y-w^Tx)^2+\\cfrac{\\sigma_\\epsilon^2}{\\sigma_w^2}w^2\\\\ &amp;\\xLeftrightarrow{=}\\min_w(y-w^Tx)^2+\\frac{\\lambda}{2}w^2,\\lambda=2\\cfrac{\\sigma_\\epsilon^2}{\\sigma_w^2}\\text{ L1-penalty \u5cad\u56de\u5f52} \\end{align*}\\]"},{"location":"math/#simplicity-linear-and-optimality-minimal-risk","title":"Simplicity (linear) and Optimality (minimal risk).","text":"<p>Risk function.</p> <p>\\(R(\u03b4) = \\int\\limits_{f_X(z)&gt;f_Y(z)}f_Y(z)dz + \\int\\limits_{f_X(z)\u2264f_Y(z)}f_X(z)dz=\\int\u03b4(z)f_Y(z)dz+\\int(1-\u03b4(z))f_X(z)dz\\)</p> <p>Optimality:</p> <p>\\(\\forall \u03b4^*,R(\u03b4^*)-R(\u03b4)=\\int(\u03b4^* \u2212\u03b4)(f_Y(z)\u2212f_X(z))dz\u22650\\impliedby \u03b4=I\\{f_X(z) \u2212 f_Y (z)\\}.\\)</p> <p>If X is greater than FY, our classifier says that OK, we are going to classify sample Z into class X. Right. Because the density, the likelihood that it comes from cost X is greater than class Y. Right. And we are going to cut our decision our best through just now says that OK, in this case we are going to classify the sample into class X.</p>"},{"location":"math/#entropy","title":"Entropy \u71b5","text":"<p>Entropy \u71b5\u3002\u662f\u4e00\u7a2e\u5c0d\u7269\u7406\u7cfb\u7d71\u4e4b\u7121\u79e9\u5e8f\u6216\u4e82\u5ea6\u7684\u91cf\u5ea6\u3002</p> <p>\u4fe1\u606f\u91cf &amp; \u71b5 \u5c31\u662f\u4e92\u8865\u7684\u5173\u7cfb\uff0c\u4fe1\u606f\u91cf\u5c31\u662f\u8d1f\u71b5\u3002</p> <p>\u71b5 \u53ef\u4ee5\u7528\u6765\u8861\u91cf\u63a5\u6536\u5230\u7684\u4fe1\u606f\uff0c\u83b7\u5f97\u4fe1\u606f\u540e\uff0c \u7cfb\u7edf\u8d8a\u65e0\u5e8f\u8d8a\u968f\u673a\uff0c\u71b5\u589e\uff1b\u7cfb\u7edf\u8d8a\u6709\u5e8f\u8d8a\u786e\u5b9a\uff0c\u71b5\u51cf\u3002</p> ? High Entropy Low Entropy Distribution of variable uniform like may have many peaks and valleys histogram Flat may have many lows and highs Values sampled from it less predictable more predictable information(about label) Less More <p>We flip two different coins independently for 16 times, which have the following results: Sequence 1 : 0 0 0 1 0 1 0 1 0 0 0 1 0 0 0 0 [0:1=12:4] Sequence 2 : 0 1 1 0 0 1 0 1 0 1 0 1 0 1 1 0 [0:1=8:8] Compute the information content (entropy) of the outcome of tossing these two coins, respectively. I(conin_toss_1)= \\(-0.75\\log_2(0.75)-0.25\\log_2(0.25)=0.811\\) bits  I(conin_toss_2)= \\(-0.5\\log_2(0.5)-0.5\\log_2(0.5)=1\\) bits </p>"},{"location":"math/#_9","title":"\u8d77\u6e90","text":"<p>\u4fe1\u606f\u8bba\u4e2d\u71b5\u7684\u6982\u5ff5\u9996\u6b21\u88ab\u9999\u519c\u63d0\u51fa\uff0c\u76ee\u7684\u662f\u5bfb\u627e\u4e00\u79cd\u9ad8\u6548/\u65e0\u635f\u5730\u7f16\u7801\u4fe1\u606f\u7684\u65b9\u6cd5\uff1a\u4ee5\u7f16\u7801\u540e\u6570\u636e\u7684\u5e73\u5747\u957f\u5ea6\u6765\u8861\u91cf\u9ad8\u6548\u6027\uff0c\u5e73\u5747\u957f\u5ea6\u8d8a\u5c0f\u8d8a\u9ad8\u6548\uff1b\u540c\u65f6\u8fd8\u9700\u6ee1\u8db3\u201c\u65e0\u635f\u201d\u7684\u6761\u4ef6\uff0c\u5373\u7f16\u7801\u540e\u4e0d\u80fd\u6709\u539f\u59cb\u4fe1\u606f\u7684\u4e22\u5931\u3002\u8fd9\u6837\uff0c\u9999\u519c\u63d0\u51fa\u4e86\u71b5\u7684\u5b9a\u4e49\uff1a\u65e0\u635f\u7f16\u7801\u4e8b\u4ef6\u4fe1\u606f\u7684\u6700\u5c0f\u5e73\u5747\u7f16\u7801\u957f\u5ea6</p> <p>\u5bf9\u4e8e N \u79cd\u4fe1\u606f\uff0c\u4f7f\u7528 0-1 \u7684\u4e8c\u503c bit\uff0c\u9700\u8981 \\(\\log_2N\\) bits \u8868\u793a\u3002\u5728\u8fd9\u6837\u7684\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e00\u4e2a\u4e8b\u4ef6\u8868\u793a\u90fd\u4e0d\u80fd\u7f3a\u5c11\u4e00\u4f4d\uff0c\u5426\u5219\u5c31\u4f1a\u5f15\u8d77\u6b67\u4e49\uff0c\u540c\u65f6\u4e5f\u4e0d\u9700\u8981\u591a\u4f59\u7684 bits \u6765\u8fdb\u884c\u7f16\u7801\u3002\u6240\u4ee5\u6bcf\u4e2a\u8868\u793a\u7684\u4f4d\u6570\u90fd\u662f\u6052\u5b9a \\(\\text{AVL}=\\log_2N(P_1+\\dots+P_N)=\\log_2N\\)(\u6052\u5b9a\u7684)</p> <p>\u4f46\u5176\u5b9e\u53ef\u4ee5\u9009\u62e9\u5728\u65e0\u635f\u7684\u60c5\u51b5\u4e0b\uff0c\u628a\u9ad8\u53ef\u80fd\u4e8b\u4ef6\u4f7f\u7528\u77ed\u7f16\u7801(\u51cf\u5c11\u4f4d\u6570)\uff0c\u5bf9\u4f4e\u53ef\u80fd\u4e8b\u4ef6\u4f7f\u7528\u957f\u7f16\u7801\uff08\u589e\u52a0\u4f4d\u6570\uff09\u3002\u8fd9\u5c31\u662f \u970d\u592b\u66fc\u78bc Huffman Code\u3002</p> <p>alpha \u8981\u53d1\u4e00\u4e32\u4fe1\u606f\u7ed9 beta\uff0c \u53d1\u9001\u7684\u4fe1\u606f\u662f\u4e00\u4e2a\u968f\u673a\u91cf\uff0c\u6982\u7387\u5e76\u4e0d\u5747\u7b49\u3002\u901a\u8fc7\u7f16\u7801\u7684\u5e73\u5747\u957f\u5ea6\u9a8c\u8bc1\u54ea\u4e2a\u7f16\u7801\u6bd4\u8f83\u6709\u6548\u7387\u3002\u5728\u970d\u5c14\u66fc\u7f16\u7801\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u4e8b\u4ef6\u7684\u8868\u793a\u4f4d\u6570\u5e76\u4e0d\u662f\u6052\u5b9a\uff0c\u5728\u4e00\u4e9b\u9ad8\u53ef\u80fd\u4e8b\u4ef6 AE \u91cc\u4ec5\u91c7\u7528\u4e24\u4f4d\u751a\u81f3\u4e00\u4f4d\u8fdb\u884c\u8868\u793a\uff0c\u5728 BD \u91cc\u91c7\u7528\u66f4\u591a\u7684\u4f4d\u6570\u8fdb\u884c\u8868\u793a</p> <p>\u7f29\u77ed\u4f4d\u6570\u7684\u540c\u65f6\u76f8\u5e94\u7684\u5bf9\u67d0\u4e9b\u4e8b\u4ef6\u7684\u8868\u793a\u8fdb\u884c\u589e\u52a0\u4f4d\u6570\uff0c\u5426\u5219\u4f1a\u5f15\u8d77\u6b67\u4e49</p> <p>\u5982\u679c\u5728\u970d\u5c14\u66fc\u7f16\u7801\u7684\u65f6\u5019\uff0c\u53ea\u7f29\u51cf AE \u7684\u7f16\u7801\uff0cBD \u7ef4\u6301\u539f\u5f62</p> A B C D E 10(0) 001 010 011 0(00) <p>\u5c31\u4f1a\u4ea7\u751f\u6b67\u4e49\uff1a010 = 010 C \uff5c 0_10 E_A  \u6240\u4ee5\u5176\u5b9e\u5c31\u662f\u901a\u8fc7\u51cf\u5c11\u4e00\u4e9b\u8868\u793a\u7684\u4f4d\u6570\u6765\u7f29\u51cf\u5e73\u5747\u7f16\u7801\u957f\u5ea6\uff0c\u53c8\u901a\u8fc7\u589e\u52a0\u4e00\u4e9b\u8868\u793a\u7684\u4f4d\u6570\u6765\u6d88\u9664\u6b67\u4e49\u3002 \u5e73\u5747\u7f16\u7801\u957f\u5ea6\u53c8\u8ddf\u6982\u7387\u6302\u94a9\uff0c\u6240\u4ee5\u9009\u62e9\u9ad8\u6982\u7387\u7f29\u51cf\uff0c\u4f4e\u6982\u7387\u589e\u52a0\u6d88\u9664\u6b67\u4e49\u3002</p> <p>\u5355\u7eaf\u76f4\u63a5\u4e8c\u8fdb\u5236\u7f16\u7801\u9700\u8981\u5e73\u5747 24/40 \u7684\u7f16\u7801\u957f\u5ea6\uff0c\u970d\u5c14\u66fc\u7f16\u7801\u53ea\u9700\u8981\u5e73\u5747 15/40 \u7684\u7f16\u7801\u957f\u5ea6</p> <p>\u970d\u592b\u66fc\u7de8\u78bc\u9577\u5ea6 &amp; Entropy \u4e4b\u9593\u7684\u95dc\u4fc2</p> <p>\u91c7\u7528 2 \u4e3a\u57fa\uff0c$E=-P(x)\\log_2^P(x)$$E(A)=-\\cfrac{1}{4}\\log_2\\cfrac{1}{4}=\\cfrac{1}{4}\\log_24=2/8$</p> <p>\u90a3\u4e48\u600e\u4e48\u786e\u8ba4\u65e0\u635f\u7f16\u7801\u7684\u6700\u5c0f\u5e73\u5747\u5927\u5c0f\uff0c\u4e5f\u5c31\u662f\u71b5\uff1f</p> <p>\u7528\u6bcf\u79cd\u62a5\u6587\u7c7b\u578b\u7684\u6700\u5c0f\u7f16\u7801\u5927\u5c0f\u6765\u8ba1\u7b97\u5e73\u5747\u7f16\u7801\u5927\u5c0f\u3002</p> <p>\u518d\u8bf4\u4e00\u6b21\uff1a\u4e00\u822c\u7528 bits \u6765\u5bf9 N \u79cd\u4fe1\u606f\u8868\u793a\uff0c\u9700\u8981 \\(\\log_2N\\) bits\u3002 \u6362\u8a00\u4e4b\uff0c\u5982\u679c\u4e00\u79cd\u4fe1\u606f\u5728 N \u6b21\u51fa\u73b0\u4e00\u6b21\uff0c\u6240\u9700\u7684\u6700\u5c0f\u5927\u5c0f\u662f \\(\\log_2N\\)\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8fd9\u91cc\u662f\u6700\u5c0f\u7684\u5927\u5c0f\u662f \\(\\log_2N\\)\uff0c\u4e0d\u662f\u8bf4\u6709\u4e9b\u8868\u793a\u8981\u5ef6\u957f\u4f4d\u6570\u5417\uff1f</p> <p>\u8fd8\u662f\u4ee5ABCDE\u7684\u4e8b\u60c5\u4e3a\u4f8b\u5b50\uff1a \u6700\u5c0f\u5355\u4f4d\u662f1\u6b21\u3002 BD \u51fa\u73b0\u7684\u6982\u7387\u662f \\(\\cfrac{1}{16}\\),\u4e5f\u5c31\u662f 16 \u6b21\u91cc\u51fa\u73b0\u4e00\u6b21\uff0c\u8fd9\u91cc\u7684 N \u662f 16\uff0c\u800c\u4e0d\u662f5\u79cd\u4fe1\u606f\u76845\u3002\u6240\u9700\u6700\u5c0f\u5927\u5c0f\u662f \\(\\log_2(16)=4\\neq\\log_25\\)</p> \\[\\log_2N=-\\log_2(\\cfrac{1}{N})=-\\log_2(P)\\\\\\text{AVL=Entropy}=-\\sum_iP(i)\\log_2P(i)\\] <p>\u71b5\u544a\u8bc9\u6211\u4eec\u9075\u5faa\u7279\u5b9a\u6982\u7387\u5206\u5e03\u7684\u4e8b\u4ef6\u7684\u7406\u8bba\u6700\u5c0f\u5e73\u5747\u7f16\u7801\u5927\u5c0f\u3002</p>"},{"location":"math/#_10","title":"\u71b5\u7684\u7c7b\u6bd4 &amp; \u610f\u4e49","text":"<p>\u5173\u4e8e\u71b5\uff0c\u6709\u5f88\u591a\u7c7b\u6bd4\uff1a\u65e0\u5e8f\u3001\u4e0d\u786e\u5b9a\u6027\u3001\u60ca\u559c\u3001\u4e0d\u53ef\u9884\u6d4b\u6027\u3001\u4fe1\u606f\u91cf\u7b49\u7b49\u3002</p> <p>\u5982\u679c\u71b5\u5f88\u9ad8\uff0c\u5c31\u610f\u5473\u7740\u6211\u4eec\u6ca1\u6709\u5f88\u591a\u9ad8\u6982\u7387\u4e8b\u4ef6\u8fdb\u884c\u7f29\u51cf\u7f16\u7801\uff0c\u6bcf\u4e2a\u4fe1\u606f\u7684\u7f16\u7801\u90fd\u5f88\u5927\uff08\u4fe1\u606f\u91cf\u5927\uff09\uff0c\u5f53\u4e8b\u4ef6\u7684\u53ef\u80fd\u6027\u90fd\u76f8\u5dee\u4e0d\u5927\uff0c\u90a3\u4e48\u968f\u673a\u6027\u5c31\u4f1a\u5f88\u5927\uff1b\u5982\u679c\u71b5\u5f88\u4f4e\uff0c\u610f\u5473\u7740\u6211\u4eec\u6709\u5f88\u591a\u9ad8\u6982\u7387\u4e8b\u4ef6\u6765\u7f29\u51cf\u7f16\u7801\uff0c\u6211\u4eec\u66f4\u5bb9\u6613\u6536\u5230\u77ed\u7684\u7f16\u7801\u5c31\u662f\uff08\u4fe1\u606f\u91cf\u5c11\uff09\uff0c\u67d0\u4e00\u4e8b\u4ef6\u53ef\u80fd\u6027\u8d8a\u5927\uff0c\u4e8b\u60c5\u5c31\u5145\u6ee1\u786e\u5b9a\u6027\u3002</p>"},{"location":"math/#estimate-entropy-cross-entropy","title":"Estimate Entropy ~ Cross-Entropy","text":"\\[\\text{Entropy}=-\\sum_iP(i)\\log_2P(i)=\\mathbb{E}_{x\\sim P}(-\\log_2P(x))\\] <p>\u5982\u679c\u77e5\u9053\u4e8b\u60c5\u7684\u6982\u7387\u5206\u5e03\uff0c\u5c31\u53ef\u4ee5\u8ba1\u7b97\u5b83\u7684\u71b5\u3002\u4f46\u662f\u5982\u679c\u4e0d\u77e5\u9053\uff0c\u5c31\u65e0\u6cd5\u8ba1\u7b97\u71b5\uff0c\u6240\u4ee5\u9700\u8981\u4f30\u8ba1\u6982\u7387\u5206\u5e03\u3002\\(Q:=\\hat{P}\\)</p> <p>Groud truth \\(\\text{E}=\\mathbb{E}_{x\\sim P}(-\\log_2P(x))\\)</p> <p>Estimated  \\(\\hat{\\text{E}}=\\mathbb{E}_{x\\sim Q}(-\\log_2Q(x))\\)</p> <p>\u4f46\u662f\u4f30\u8ba1\u7684 Q \u540c\u65f6\u5f71\u54cd\u4e8b\u4ef6\u7684\u6982\u7387 &amp; \u4e8b\u4ef6\u7684\u7f16\u7801\u5927\u5c0f\uff0c\u5bfc\u81f4 \u9884\u6d4b\u7684\u671f\u671b\u6700\u5c0f\u7f16\u7801\u7684\u7ed3\u679c &amp; \u771f\u6b63\u7684\u71b5\u76f8\u5dee\u5f88\u5927\uff0c\u4e5f\u6709\u53ef\u80fd\u9634\u5dee\u9633\u9519\u4e4b\u4e0b\u76f8\u8ddd\u5f88\u5c0f\u3002\u56e0\u6b64\u5355\u7eaf \u9884\u6d4b\u71b5 &amp; \u771f\u5b9e\u71b5 \u7684\u6bd4\u8f83\u5e76\u4e0d\u91cd\u8981\uff0c\u91cd\u8981\u7684\u662f \u9884\u6d4b\u7684\u7f16\u7801\u65b9\u6848 \u548c \u7406\u8bba\u7684\u6700\u5c0f\u7f16\u7801\u65b9\u6848 \u662f\u5426\u63a5\u8fd1\u3002</p> <p>\u5b9e\u9645\u5e94\u7528\u7684\u7f16\u7801\u5927\u5c0f &amp; \u7406\u8bba\u6700\u5c0f\u7f16\u7801\u5927\u5c0f</p> <p>\u91cd\u89c6\u7684\u7f16\u7801\u65b9\u6848\uff0c\u5176\u5b9e\u5c31\u662f\u8bf4 \u91cd\u89c6\u7684\uff1a\u662f\u5426\u77e5\u9053\u54ea\u4e9b\u662f\u9ad8\u53ef\u80fd\u4e8b\u4ef6\uff0c\u54ea\u4e9b\u662f\u4f4e\u53ef\u80fd\u4e8b\u4ef6\u3002\u4e5f\u5c31\u662f\u4ece \u5355\u4e00\u4e8b\u4ef6\u7684\u6700\u5c0f\u9700\u8981 \\(-\\log_2P(x)\\) \u53c8\u843d\u811a\u6982\u7387\u4e0a\uff0c\u7275\u626f\u4e0a\u5206\u5e03\u3002\u6240\u4ee5\u8bf4\u4e3a\u4ec0\u4e48\u662f\u8861\u91cf\u4e24\u4e2a\u5206\u5e03\u7684\u8ddd\u79bb\u3002</p> <p>\u5b9e\u9645\u5e94\u7528\u7684\u7f16\u7801\u5927\u5c0f\uff1a\u57fa\u4e8e\u9884\u6d4b\u7684 Q \u5236\u5b9a\u7f16\u7801\u65b9\u6848\uff0c\u5b9e\u9645\u7528\u7684\u65f6\u5019\u662f\u771f\u5b9e\u5730\u6839\u636e P \u6765\u7528\u3002</p> <p>\u5728\u4e24\u79cd\u671f\u671b\u503c\u8ba1\u7b97\u4e2d\u4f7f\u7528\u4e86\u76f8\u540c\u7684\u771f\u5b9e\u5206\u5e03\u3002\u6bd4\u8f83\u7684\u662f\u7406\u8bba\u4e0a\u7684\u6700\u5c0f\u7f16\u7801\u548c\u5b9e\u9645\u4f7f\u7528\u7684\u7f16\u7801\u3002 \u5bf9\u4e8e\u671f\u671b\u503c\uff0c\u6211\u4eec\u5e94\u8be5\u4f7f\u7528\u771f\u5b9e\u6982\u7387 P\uff0c\u56e0\u4e3a\u5b83\u8bf4\u660e\u4e86\u4e8b\u4ef6\u7684\u5206\u5e03\u60c5\u51b5\u3002\u5bf9\u4e8e\u7f16\u7801\u5927\u5c0f\uff0c\u6211\u4eec\u5e94\u8be5\u4f7f\u7528 Q\uff0c\u56e0\u4e3a Q \u662f\u7528\u6765\u5bf9\u4fe1\u606f\u8fdb\u884c\u7f16\u7801\u7684\u3002 \u7b80\u800c\u8a00\u4e4b\uff0c\u6211\u4eec\u6b63\u5728\u4ea4\u53c9\u68c0\u67e5\u7f16\u7801\u5927\u5c0f\uff0c\u8fd9\u5c31\u662f\u4ea4\u53c9\u71b5\u4e2d \"\u4ea4\u53c9 \"\u7684\u542b\u4e49\u3002</p> <p>gt: Entropy \\(\\text{E}=\\mathbb{E}_{x\\sim P}(-\\log_2P(x))\\)</p> <p>CrossEntropy  \\(\\hat{\\text{E}}=\\mathbb{E}_{x\\sim P}(-\\log_2Q(x))\\)</p> <p>CrossEntropy \u4ea4\u53c9\u71b5\u3002\\(H(P,Q)=\\mathbb{E}_{x\\sim P}\\log Q(x)\\)</p> <ul> <li>\\(H(P,Q)\\gt H(P)\uff0cH(P,Q)\\xlongequal{P=Q}H(P)\\) \u4ea4\u53c9\u71b5\u5927\u4e8e\u7b49\u4e8e\u71b5, \u53ea\u6709\u5f53 \\(P=Q\\) \u7b49\u53f7\u6210\u7acb</li> <li>\\(H(P,Q)\\neq H(Q,P)\\)</li> </ul>"},{"location":"math/#cross-entropy-as-a-loss-function","title":"Cross-Entropy as a Loss Function","text":"<p>\"\u53ef\u4ee5\u5c06\u4e00\u79cd\u70ed\u7f16\u7801\u89c6\u4e3a\u6bcf\u5e45\u56fe\u50cf\u7684\u6982\u7387\u5206\u5e03\"</p> <p>\u5f53 $P_1=[1,0,0,0,0]$, \u662f\u72d7\u7684\u6982\u7387 =100%, $ H(P_1)= 0$. \u6a21\u578b $Q1\uff1aQ1_1=[.4,.3,.05,.05,.2]$ \u662f\u72d7\u7684\u6982\u7387 =40% $H(P_1,Q1_1)=\\mathbb{E}_{x\\sim P_1}-\\log_2Q1_1=-\\sum_iP_1(i)\\log_2Q1_1(i)=-1\\log0.4+0*\\dots=-log0.4$ \u6a21\u578b $Q2\uff1aQ2_1=[.98,.01,0,0,.01]$ \u662f\u72d7\u7684\u6982\u7387 =98% $H(P_1,Q2_1)=\\mathbb{E}_{x\\sim P_1}-\\log_2Q2_1=-\\sum_iP_1(i)\\log_2Q2_1(i)=-1\\log0.98+0*\\dots=-log0.98$  $H(P_1, Q1_1)&gt;&gt;H(P_1Q2_1)&gt;H(P_1)=0$</p> <p>\u4ea4\u53c9\u71b5\u5c06\u6a21\u578b\u7684\u9884\u6d4b\u4e0e\u6807\u7b7e\uff08\u5373\u771f\u5b9e\u7684\u6982\u7387\u5206\u5e03\uff09\u8fdb\u884c\u6bd4\u8f83\u3002\u968f\u7740\u9884\u6d4b\u8d8a\u6765\u8d8a\u51c6\u786e\uff0c\u4ea4\u53c9\u71b5\u4f1a\u4e0b\u964d\u3002\u5982\u679c\u9884\u6d4b\u662f\u5b8c\u7f8e\u7684\uff0c\u4ea4\u53c9\u71b5\u5c31\u4f1a\u53d8\u4e3a\u96f6\u3002\u56e0\u6b64\uff0c\u4ea4\u53c9\u71b5\u53ef\u4ee5\u4f5c\u4e3a\u8bad\u7ec3\u5206\u7c7b\u6a21\u578b\u7684\u635f\u5931\u51fd\u6570\u3002</p> <p>\u5728\u673a\u5668\u5b66\u4e60\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u57fa e \u800c\u4e0d\u662f\u57fa 2 </p> <p>\u6539\u53d8\u5bf9\u6570\u57fa\u6570\u4e0d\u4f1a\u9020\u6210\u4efb\u4f55\u95ee\u9898\uff0c\u56e0\u4e3a\u5b83\u53ea\u6539\u53d8\u4e86\u5927\u5c0f\u3002 \\(\\log_2x=\\cfrac{\\log_ex}{\\log_e2}\\) \u597d\u5904\uff1a\u4fbf\u4e8e\u8ba1\u7b97\u5bfc\u6570\uff1b</p> <p>\u4ee5 e \u4e3a\u5e95\u5bf9\u6570\u7684\u4fe1\u606f\u5355\u4f4d\u662f \u7eb3\u7279 nat\uff0c\u800c\u4ee5 2 \u4e3a\u5e95\u5bf9\u6570\u7684\u4fe1\u606f\u5355\u4f4d\u79f0\u4e3a \u6bd4\u7279 bit</p> <p>1 \u7eb3\u7279\u7684\u4fe1\u606f\u91cf\u6765\u81ea\u4ee5 1/e \u7684\u6982\u7387\u53d1\u751f\u7684\u4e8b\u4ef6\u3002 3 \u6bd4\u7279\u5730\u4fe1\u606f\u91cf\u6765\u81ea\u4ee5 \\(\\cfrac{1}{2^3}=\\cfrac{1}{8}\\) \u7684\u6982\u7387\u53d1\u751f\u7684\u4e8b\u4ef6\u3002 \u4ee5 e \u4e3a\u5e95\u7684\u5bf9\u6570\u4e0d\u5982\u4ee5 2 \u4e3a\u5e95\u7684\u5bf9\u6570\u76f4\u89c2\u30021 \u6bd4\u7279\u7684\u4fe1\u606f\u91cf\u6765\u81ea\u4ee5 1/2 \u6982\u7387\u53d1\u751f\u7684\u4e8b\u4ef6\u3002\u5982\u679c\u6211\u4eec\u80fd\u7528 1 \u6bd4\u7279\u7f16\u7801\u4e00\u6761\u4fe1\u606f\uff0c\u90a3\u4e48\u4e00\u6761\u8fd9\u6837\u7684\u4fe1\u606f\u5c31\u80fd\u51cf\u5c11 50%\u7684\u4e0d\u786e\u5b9a\u6027\u3002\u540c\u6837\u7684\u7c7b\u6bd4\u5728\u4ee5 e \u4e3a\u5e95\u7684\u60c5\u51b5\u4e0b\u4e0d\u6613\u5b9e\u73b0\uff0c\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u4eba\u4eec\u7ecf\u5e38\u4f7f\u7528\u4ee5 2 \u4e3a\u5e95\u7684\u5bf9\u6570\u6765\u89e3\u91ca\u4fe1\u606f\u71b5\u6982\u5ff5\u7684\u539f\u56e0\u3002\u4e0d\u8fc7\uff0c\u673a\u5668\u5b66\u4e60\u5e94\u7528\u4f7f\u7528\u57fa e \u5bf9\u6570\u662f\u4e3a\u4e86\u6267\u884c\u65b9\u4fbf\u3002</p> <ul> <li>Entropy (\u71b5)\u662f\u751a\u9ebc\uff1f\u5728\u8cc7\u8a0a\u9818\u57df\u7684\u7528\u9014\u662f\uff1f</li> <li>\u4e00\u6587\u641e\u61c2\u71b5(Entropy),\u4ea4\u53c9\u71b5(Cross-Entropy)</li> <li>Entropy Demystified</li> <li>Cross-Entropy Demystified</li> </ul>"},{"location":"math/LA/","title":"Linear Algebra","text":""},{"location":"math/LA/#eigen-decoposition","title":"Eigen Decoposition \u7279\u5f81\u503c\u5206\u89e3","text":"<p>Eigen Decoposition. \\(\\forall A\\in\\R^n\uff0c\\exist\\lambda, x\\text{ s.t. }Ax=\\lambda x\\)</p> <ul> <li>$x:= $ \u7279\u5f81\u5411\u91cf eigenvector</li> <li>\\(\\lambda:=\\) \u7279\u5f81\u503c eigenvalue \u53ef\u4ee5\u662f\u590d\u6570\uff0c\u4f46 \\(A^T=A\\implies \\forall\\lambda\\in\\R\\)</li> <li>\\(A\\) \u5fc5\u987b\u662f\u65b9\u9635</li> </ul> <p>!!! warning \"\u63a5\u4e0b\u6765\u7814\u7a76\u7684 covariance matrix \\(\\in S^n\\implies \\forall\\lambda\\in\\R\\) \" \u7531 eigen decomposition \u63a8 \u5bf9\u89d2\u5316 diagonalization. \\(A=U\\Lambda U^T\\) \\(x_i=\\) eigenvectors of \\(A\\), \\(U=\\begin{bmatrix}x_1&amp;\\dots&amp;x_n\\end{bmatrix}\\in\\R^n\\) \\(U\\Lambda U^T=\\begin{bmatrix}x_1&amp;\\dots&amp;x_n\\end{bmatrix}\\begin{bmatrix}\\lambda_1\\\\&amp;\\ddots\\\\&amp;&amp;\\lambda_n\\end{bmatrix}\\begin{bmatrix}x_1\\\\\\vdots\\\\x_n\\end{bmatrix}=\\begin{bmatrix}\\lambda_1x_1x_1^T\\\\&amp;\\ddots\\\\&amp;&amp;\\lambda_nx_nx_n^T\\end{bmatrix}\\)</p>"},{"location":"math/LA/#singular-value-decomposition-svd","title":"Singular value decomposition SVD","text":"<p>SVD \u6b63\u4ea4\u5206\u89e3 \\(\\neq\\) Eigen Decoposition \u7279\u5f81\u503c\u5206\u89e3</p> <p>\u867d\u7136\u5bf9\u534a\u6b63\u5b9a\u77e9\u9635\u6765\u8bf4\uff0cSVD is a special eigen decomposition.</p> <p>SVD \\(\\forall A\\in\\R^{m\\times n}, A\\xlongequal{\\text{can be factored into}} U\\Sigma V^T=\\text{(orthogonal)(Diagonal)(orthogonal)}\\)</p> <ul> <li>\\(U\\in \\R^{m\\times m}\\). Orthogooal \\(U^TU=I\\) The columns of \\(U\\) are eigenvectors of \\(AA^T\\in\\R{m\\times m}\\)</li> <li>\\(V\\in\\R^{n\\times n}\\) Orthogooal \\(V^TV=I\\) The columns of \\(V\\) are eigenvectors of \\(A^TA\\in\\R^{n\\times n}\\).</li> <li>\\(\\Sigma\\in\\R^{m\\times n}\\) Diagonal The \\(\\red{r}\\) singular values on the diagonal of \\(\\Sigma\\) are the square roots of the nonzero eigenvalues of both \\(AA^T \\&amp; A^TA\\)</li> </ul> <p>Proof: Suppose \\(m&gt;n, \\Sigma=\\begin{bmatrix}\\theta_1\\\\&amp;\\ddots\\\\&amp;&amp;\\theta_n\\\\&amp;&amp;\\end{bmatrix}\\in\\R^{m\\times n}\\)</p> <p>\\(\\Sigma^T\\Sigma=\\begin{bmatrix}\\theta_1\\\\&amp;\\ddots\\\\&amp;&amp;\\theta_n&amp;\\end{bmatrix}\\begin{bmatrix}\\theta_1\\\\&amp;\\ddots\\\\&amp;&amp;\\theta_n\\\\&amp;\\end{bmatrix}=\\begin{bmatrix}\\theta_1^2\\\\&amp;\\ddots\\\\&amp;&amp;\\theta_n^2\\end{bmatrix}\\in S^n\\) \\(\\Sigma\\Sigma^T=\\begin{bmatrix}\\theta_1\\\\&amp;\\ddots\\\\&amp;&amp;\\theta_n\\\\&amp;\\end{bmatrix}\\begin{bmatrix}\\theta_1\\\\&amp;\\ddots\\\\&amp;&amp;\\theta_n&amp;\\end{bmatrix}=\\begin{bmatrix}\\theta_1^2\\\\&amp;\\ddots\\\\&amp;&amp;\\theta_n^2&amp;\\\\&amp;\\end{bmatrix}\\in S^m\\)</p> \\[\\begin{align*} A^TA&amp;=V\\Sigma^TU^TU\\Sigma V^T\\xlongequal{U^TU=I}V\\Sigma^T\\Sigma V^T\\in S^n\\\\ AA^T&amp;=U\\Sigma V^TV\\Sigma^TU^T\\xlongequal{V^TV=I}U\\Sigma\\Sigma^TU^T\\in S^m \\end{align*}\\] <p>\u56e0\u4e3a \u5bf9\u79f0\u65b9\u9635\u90fd\u80fd\u8fdb\u884c\u7279\u5f81\u5206\u89e3 \\(A=U\\Lambda U^T\\) \\(x_i=\\) eigenvectors of \\(A\\), \\(U=\\begin{bmatrix}x_1&amp;\\dots&amp;x_n\\end{bmatrix}\\in\\R^{n\\times n}\\) \\(U\\Lambda U^T=\\begin{bmatrix}x_1&amp;\\dots&amp;x_n\\end{bmatrix}\\begin{bmatrix}\\lambda_1\\\\&amp;\\ddots\\\\&amp;&amp;\\lambda_n\\end{bmatrix}\\begin{bmatrix}x_1\\\\\\vdots\\\\x_n\\end{bmatrix}=\\lambda_1x_1x_1^T+\\dots+\\lambda_nx_nx_n^T\\)</p> <p>\\(V\\Sigma^T\\Sigma V^T\\xlongequal{SVD}A^TA=S_1\\xlongequal{\\text{eigen decomp}}U_1\\Lambda_1U_1^T\\begin{cases}U_1=V\\\\\\Lambda_1=\\Sigma^T\\Sigma\\end{cases} \\\\ U\\Sigma\\Sigma^TU^T\\xlongequal{SVD}AA^T=S_2\\xlongequal{\\text{eigen decomp}}U_2\\Lambda_2U_2^T\\begin{cases}U_2=U\\\\\\Lambda_2=\\Sigma\\Sigma^T\\end{cases}\\) \\(\\begin{bmatrix}\\lambda_1\\\\&amp;\\ddots\\\\&amp;&amp;\\lambda_n\\end{bmatrix}_1=\\Lambda_1=\\Sigma^T\\Sigma=\\begin{bmatrix}\\theta_1^2\\\\&amp;\\ddots\\\\&amp;&amp;\\theta_n^2\\end{bmatrix}\\) \\(\\begin{bmatrix}\\lambda_1\\\\&amp;\\ddots\\\\&amp;&amp;\\lambda_m\\end{bmatrix}_2=\\Lambda_2=\\Sigma\\Sigma^T=\\begin{bmatrix}\\theta_1^2\\\\&amp;\\ddots\\\\&amp;&amp;\\theta_n^2&amp;\\\\&amp;\\end{bmatrix}\\) \\(\\implies\\) - The columns of \\(U\\) are eigenvectors of \\(AA^T\\in\\R^{m\\times m}\\) - The columns of \\(V\\) are eigenvectors of \\(A^TA\\in\\R^{n\\times n}\\). - \\(\\lambda_i=\\theta_i^2\\implies\\) The \\(\\red{r}\\) singular values on the diagonal of \\(\\Sigma\\) are the square roots of the nonzero eigenvalues of both \\(AA^T \\&amp; A^TA\\)</p>"},{"location":"math/optimization/linearSearch/","title":"Linear Search","text":""},{"location":"math/optimization/linearSearch/#background","title":"Background","text":""},{"location":"math/optimization/linearSearch/#pre-info","title":"pre-info","text":"<p>Structure Risk. \\(\\min\\limits_{\\theta\\in\\R^s}f(\\theta):=\\cfrac{1}{n}\\sum\\limits_{i=1}^nL_i(Y_i;f(X_i;\\theta))\\) Gradient in multiple dimensions. \\(\\nabla f(x):=\\begin{bmatrix} \\frac{\\partial f}{\\partial x_1}(x)\\\\ \\vdots\\\\ \\frac{\\partial f}{\\partial x_p}(x)\\\\ \\end{bmatrix}=[Df(x)]^T \\in \\R^{p\\times1}\\)</p> <p>L-smooth function. \\(\\begin{cases}f(\\theta)\\text{ is continuously differentiable }\\\\\\nabla f(\\theta)\\text{ is Lipschitz continuous }\\iff\\Vert\\nabla f(x)-\\nabla f(y)\\Vert\u2264L\\Vert x-y\\Vert,\\text{ for some }L&gt;0\\end{cases}\\\\\\qquad\\implies f\\text{ is  L-smooth }\\) Lemma 3.1 Given a L-smooth function \\(f,\\forall x,y\\in\\text{dom}(f),f(y)\\le f(x)+\\nabla f(x)^T(y-x)+\\cfrac{L}{2}\\Vert y-x\\Vert^2\\)</p>"},{"location":"math/optimization/linearSearch/#problem-setting","title":"Problem Setting","text":"<p>Assume: \\(f(\\theta)\\) is L-smooth \\(\\(\\min\\limits_{\\theta\\in\\R^s}f(\\theta):=\\cfrac{1}{n}\\sum\\limits_{i=1}^nL_i(Y_i;f(X_i;\\theta))\\)\\)</p> <p>given a point \\(x^k\\)1. find a descent direction \\(d^k\\) 2. find a stepsize \\(\\alpha^k\\) \\(\\(x^{k+1}=x^{k}+\\alpha^kd^k\\)\\)</p> <p>\u5047\u8bbe\u5728\u67d0\u70b9\uff0c\u5bfb\u627e\u65b9\u5411 direction \u548c\u6b65\u957f stepsize \u4f7f\u5f97\u6700\u5c0f\uff0c\u5982\u679c\u786e\u5b9a\u5219\u53ea\u9700\u8981\u89e3\u51b3\u4e00\u7ef4\u6700\u4f18\u5316\u95ee\u9898\u5c31\u53ef\u4ee5\u627e\u5230\u4e0b\u4e00\u4e2a\u641c\u7d22\u70b9. \u9996\u5148\u9009\u62e9\u65b9\u5411\u00a0\\(d^k\\) \u901a\u8fc7\u89e3\u51b3\u4e00\u7ef4\u6700\u4f18\u5316\u95ee\u9898\u627e\u5230\u6b65\u957f\u00a0\\(\\alpha^k\\)</p>"},{"location":"math/optimization/linearSearch/#content","title":"Content","text":"<p>given a point \\(x^k\\):</p> <ol> <li>find a descent direction \\(d^k\\)</li> <li>find a stepsize \\(\\alpha^k\\)</li> <li>\\(x^{k+1}=x^{k}+\\alpha^kd^k\\)</li> </ol> <p>Descent Direction \\(d^k\\), \\(f\\in C^1(\\R^n),x\\in \\R^n\\) A \\(d\\in\\R^n\\) is said to be a descent direction of \\(f\\) at \\(x\\impliedby\\red{[\\nabla f(x)]^Td &lt; 0}\\).</p> <ul> <li>More generally, if \\(D\\succeq0\\), then \\(d = -D\\nabla f(x)\\) is a descent direction. \\(\\iff\\) \u4efb\u4e00\u65b9\u5411 \\(d\\) \u53ea\u8981\u80fd\u5206\u89e3\u6210\u4e00\u4e2a\u6b63\u5b9a\u77e9\u9635 \\(D\\) \u548c\u8d1f\u68af\u5ea6 \\(-\\nabla f(x)\\) \u7684\u4e58\u79ef\uff0c\u90a3\u4e48\u8fd9\u4e2a\u65b9\u5411\u4e00\u5b9a\u662f\u4e0b\u964d\u65b9\u5411 Proof\uff1a\\([\\nabla f(x)]^T\\cdot\\big(-D\\nabla f(x)\\big)=-\\big(\\nabla f(x)^TD\\nabla f(x)\\big)\\\\\\qquad\\qquad     \\because \\nabla f(x)\\not=0,\\therefore &lt;0\\)</li> </ul> <p>\u662f\u4e0d\u662f\u4e0b\u964d\u65b9\u5411\u5c31\u770b\uff1a\\([\\nabla f(x)]^Td &lt; 0\\)</p> <p>At an x that is not stationary,</p> <p>d = \\(-\\nabla f(x)\\) is a descent direction\uff1f</p> <p>yes. \\([\\nabla f(x)]^T\\cdot-\\nabla f(x)=-\\Vert\\nabla f(x)\\Vert_2^2&lt;0\\)</p> <p>is the Newton direction \\(-[\\nabla^2f(x)]^{-1}\\nabla f(x)\\)  a descent direction?</p> <p>A: Not necessary. \\(\\because d=[\\nabla^2f(x)]^{-1}\\nabla f(x),\\therefore D=[\\nabla^2f(x)]^{-1} ? \\text{positive definite}\\begin{cases}\\in &amp;\\text{yes}\\\\\\notin&amp;\\text{no}\\end{cases}\\)</p> \\(d^k=-D^k\\nabla f(x^k),D\\succeq0\\) descent direction \u725b\u987f\u6cd5 \\(-[\\nabla^2f(x^k)]^{-1}\\nabla f(x^k)\\) \u4e00\u9636\u5bfc=0 \\(d^k= -[\\nabla^2f(x^k)]^{-1}\\cdot\\nabla f(x^k)\\text{ (not necessary) }\\\\\\text{only }[\\nabla^2f(x^k)]\\succeq0\\) \u4ec5\u4ec5\u4f9d\u8d56\u51fd\u6570\u503c\u548c\u68af\u5ea6\u7684\u4fe1\u606f(\u5373\u4e00\u9636\u4fe1\u606f) \u6700\u901f\u4e0b\u964d\u6cd5 \\(-\\nabla f(x^k)\\) \u8d1f\u68af\u5ea6\u65b9\u5411 \\(d^k=-1I\\cdot \\nabla f(x^k),\\checkmark\\) \u62df\u725b\u987f\u6cd5 \\(-B^k\\nabla f(x^k)\\) \\(d^k= -B^k\\cdot\\nabla f(x^k)\\text{ (not necessary) }\\\\\\text{only }B^k\\succeq0\\) \u5171\u8f6d\u68af\u5ea6\u6cd5"},{"location":"math/optimization/linearSearch/#direction","title":"direction","text":""},{"location":"math/optimization/linearSearch/#gradient-descent-gd-steepest-descent","title":"Gradient Descent, GD, Steepest descent \u6700\u901f\u4e0b\u964d\u6cd5","text":"<p>\u68af\u5ea6,\u67d0\u4e00\u70b9\u5904\u7684\u68af\u5ea6\u65b9\u5411\u662f\u51fd\u6570\u503c\u589e\u957f\u6700\u5feb\u7684\u65b9\u5411</p> \\[\\text{Start from some }\\theta^0\\in\\R^s,\\\\\\text{ GD updates as}\\theta^{k+1}=\\theta^k-\\alpha_k\\nabla f(\\theta^k),\\\\\\text{ until }\\Vert\\nabla f(\\theta^{k+1})\\Vert\\le\\epsilon,\\text{ for some }\\epsilon&gt;0\\] <p>Steepest descent with exact line search\uff1a</p> <p>\u5e0c\u671b\u5f97\u5230\u4e00\u4e2a\u5728\u8be5\u70b9\u4e0b\u964d\u6700\u5feb\u7684\u65b9\u5411\uff0c\u6765\u4f7f\u5f97\u6211\u4eec\u7684\u8fed\u4ee3\u8fc7\u7a0b\u5c3d\u53ef\u80fd\u7684\u9ad8\u6548\u3002 \u68af\u5ea6\u7684\u53cd\u65b9\u5411\u5c31\u662f\u51fd\u6570\u503c\u4e0b\u964d\u6700\u5feb\u7684\u65b9\u5411\u3002</p> <p>1. In practice: Always use analytic gradient, but check implementation with numerical gradient. This is called a\u00a0gradient check.</p>"},{"location":"math/optimization/linearSearch/#_1","title":"\u5b58\u5728\u6027\u8bc1\u660e\uff1a\u8d1f\u68af\u5ea6\u65b9\u5411\u5c31\u662f\u4e0b\u964d\u6700\u5feb\u65b9\u5411","text":"<p>Taylor\u5c55\u5f00. \\(f\\in C^1(\\R), \\exist \\xi\\in\\{x+td:t\\in(0,1)\\}, f(x+d)=f(x)+[\\nabla f(x)]^Td+[\\nabla f(\\xi)-\\nabla f(x)]^Td\\). \u5176\u4e2d\u672c\u6765\u4e8c\u9636\u5bfc\u7684\u5730\u65b9\uff1a \\(\\frac{1}{2}d^T\\nabla^2 f(\\xi)=[\\nabla f(\\xi)-\\nabla f(x)]^T;\\xi\\text{ depends on }d\\) \u5982\u679c \\(\\nabla f(x)\u22600 \\iff x\\text{ is not a stationary}\\), then\uff0c\u6211\u4eec\u53d6 \\(\\red{d=-\\alpha\\nabla f(x) \\text{ for some }\\alpha&gt;0}\\) then\uff0c\\(f(x+d)=f(x)+[\\nabla f(x)]^Td+[\\nabla f(\\xi)-\\nabla f(x)]^Td\\) \u53d8\u6210 \\(\\(f(x-\\alpha\\nabla f(x))=f(x)-\\alpha\\Vert\\nabla f(x)\\Vert_2^2-\\alpha([\\nabla f(\\xi)-\\nabla f(x)]^T\\cdot\\nabla f(x))\\)\\) \u5176\u4e2d\u7b2c2\u9879\uff1a\\(\\nabla f(x)\\cdot \\alpha\\nabla f(x)=\\alpha\\Vert\\nabla f(x)\\Vert_2^2\uff1b\\xi \\text{ depends on }\\alpha\\) \u5176\u4e2d\u7b2c3\u9879\uff1a\\(\\alpha([\\nabla f(\\xi)-\\nabla f(x)]^T\\cdot\\nabla f(x))=0\\) \\(\\(\\implies f(x-\\alpha\\nabla f(x))=f(x)-\\alpha\\Vert\\nabla f(x)\\Vert_2^2\\)\\) \\(\\(\\therefore \\text{ for sufficiently small }\\alpha&gt;0, f(x-\\alpha\\nabla f(x))&lt;f(x)\\space\\text{(\u662f\u4e0b\u964d\u65b9\u5411)}\\)\\) $\\implies\\red{-\\nabla f(x)} $ is called the steepest descent direction</p> <ul> <li>\u4e3a\u4ec0\u4e48 \\(\\alpha d:=-\\alpha \\nabla f(x) \\text{ for some }\\alpha&gt;0,\\)(\u6b64\u5904\u7684d\u8303\u56f4\u66f4\u7f29\u5c0f\u4e00\u70b9\uff0c\u6307\u65b9\u5411     \u5728\u6ca1\u6709\u7ed9\u5b9ad\u4e4b\u524d\uff1a\\(f(x+d)=f(x)+\\alpha\\nabla f(x)^Td\\)     \u2235 Given $ f\\&amp; x \\implies f(x)\\&amp;\\nabla f(x)^T\\in$ \u5e38\u91cf     \\(\\min\\limits_\\alpha f(x+d)=f(x)+\\alpha\\nabla f(x)^Td\\) \u662f\u5173\u4e8e\\(\\alpha\\)\u7684\u51fd\u6570\uff0c\u8981\u968f\u7740\\(\\alpha\\)\u589e\u52a0\u800c\u51cf\u5c0f\uff0c\u4e14\u51cf\u5c11\u5f97\u5c3d\u53ef\u80fd\u5feb\uff0c     \\(\\(\\therefore d^k=\\min_{d^k} \\cfrac{\\partial f}{\\partial \\alpha} = \\max_{d^k} -\\cfrac{\\partial f}{\\partial \\alpha}\\)\\)     Recall\uff1a Cauchy\u4e0d\u7b49\u5f0f. \\(-\\frac{\\partial f}{\\partial \\alpha}=-\\nabla f(x)^Td=(-\\nabla f(x),d)=\\Vert-\\nabla f(x)\\Vert\\cdot\\Vert d\\Vert\\cdot\\cos\\theta_k\\).  \\(\\theta_k\\)\u5c31\u662f\u641c\u7d22\u65b9\u5411d\u548c\u8d1f\u68af\u5ea6\u65b9\u5411\u7684\u89d2\u5ea6\uff0c\u5f53\\(\\theta_k=0\u00b0\\) \u65f6\uff0c\u6700\u5927\uff0c\u6240\u4ee5\u5c31\u662f\u6700\u901f.     \\(\\(\\implies \\red{d=- \\nabla f(x)}\\)\\)</li> </ul>"},{"location":"math/optimization/linearSearch/#steepest-descent-with-exact-line-search","title":"Steepest descent with exact line search","text":"<p>\\(\\text{Start at }x^0\\in R^n. \\text{ For each }k=0,1,\u2026\\)</p> <ol> <li>\\(\\text{Set }d^k=-\\nabla f(x^k)\\qquad\\text{(the search direction)}\\)</li> <li>\\(\\text{pick } \\alpha_k\\in\\argmin\\{f(x^k+\\alpha d^k):\\alpha&gt;0\\}\\qquad\\text{(step size | learning rate)}\\)</li> </ol> <p>\u5176\u4e2d \\(\\alpha_k\\) is chosen according to the exact line search criterion \u901a\u8fc7\u7cbe\u786e\u7ebf\u641c\u7d22\u786e\u5b9a\u6b65\u957f\uff08\u9690\u542b\u5730\u5047\u5b9a\uff0c\u5bf9\u4e8e\u7cbe\u786e\u7ebf\u641c\u7d22\uff0c\u5b58\u5728\u4e00\u4e2a\u6700\u5c0f\u5316\u5668\\(\\alpha_k\\)\u3002\uff09</p>"},{"location":"math/optimization/linearSearch/#convergence-of-steepest-descent-with-constant-stepsize","title":"Convergence of Steepest descent with constant stepsize","text":"<p>\\(\\begin{cases}f\\in C^2(\\R^n)\\\\\\inf f &gt;-\\infin\\\\\\exist L&gt;0, L\\ge\\Vert\\nabla^2f(x)\\Vert_2\\\\x^{k+1}=x^k-\\cfrac{\\gamma}{L}\\nabla f(x^k)&amp;(1)\\end{cases}\\implies\\forall x, \\text{fix any }\\gamma\\in(0,2)\\) any accumulation point of \\(\\{x^k\\}\\) is a stationary point of \\(f\\) \\((1)\\): the formula as which sequence generated \u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u8981 stepsize \\(\u03b1 \\in(0, \\cfrac{2}{L}),\\) \u6211\u4eec\u5c31\u80fd\u8fbe\u5230\u6536\u655b\u7684\u76ee\u6807\u3002</p> <ul> <li>proof:</li> </ul> <p>Lemmma \\(f\\text{ is L-smooth }\\\\ \\implies \\forall x,y\\in \\text{dom}(f), f(y)\\le f(x)+\\nabla f(x)^T(y-x)+\\cfrac{L}{2}\\Vert y-x\\Vert^2\\\\ \\implies f(y)-f(x)\\le\\nabla f(x)^T(y-x)+\\cfrac{L}{2}\\Vert y-x\\Vert^2\\) \u7531\u4e0a\u9762\u7684\u5f15\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u5bf9 stepsize \u8fdb\u884c\u8ba8\u8bba, \u76ee\u6807\u662f\uff1a\\(f(\\theta^{k+1})-f(\\theta^k)&lt;0\\) $$\\begin{align}f(\\theta^{k+1})-f(\\theta^k)&amp;=f(\\theta^k-\\alpha_k\\nabla f(\\theta^k))-f(\\theta^k)\\&amp;\\le\\nabla f(\\theta^k)^T(-\\alpha_k\\nabla f(\\theta^k))+\\cfrac{L}{2}\\Vert\\alpha_k\\nabla f(\\theta^k)\\Vert^2\\&amp;\\le(\\cfrac{L}{2}\\alpha_k-1)\\cdot\\alpha_k\\Vert \\nabla f(\\theta^k)\\Vert^2\\quad \\colorbox{aqua}{\\text{res-1}}\\end{align}\\\\implies \\cfrac{L\\alpha_k}{2}-1&lt;0\\implies\\alpha_k&lt;\\cfrac{2}{L}\\rightarrow\\cfrac{\\gamma}{L} $$</p> <p>\u4f46\u662f what is the optimal step size in the constant step-size strategy\uff1f</p> <p>\\(\\colorbox{aqua}{\\text{res-1}} \\quad \\Delta= f(\\theta^{k+1})-f(\\theta^k)\\le(\\cfrac{L}{2}\\alpha_k-1)\\cdot\\alpha_k\\Vert \\nabla f(\\theta^k)\\Vert^2\\\\\\qquad\\Delta_{\\alpha_k}:= \\cfrac{L\\alpha_k^2}{2}-\\alpha_k&lt;0,\\therefore  \\alpha_k^*=\\argmin\\limits_{\\alpha_k }\\cfrac{L\\alpha_k^2}{2}-\\alpha_k \\\\\\qquad\\quad \\cfrac{\\partial\\Delta_{\\alpha_k}}{\\partial\\alpha_k}=L\\alpha_k-1\\xlongequal{SET}0\\implies \\alpha_k^*=\\cfrac{1}{L}\\)</p> <p>Convergence of GD with optimal constant step-size \\(\\alpha=\\frac{1}{L}\\)</p> <p>\\(\\begin{cases}f\\text{ is L-smooth }\\\\\\inf f&gt;-\\infin\\\\\\{\\theta^k\\}_{k=0}^T:=\\text{ the sequence by GD with }\\alpha=\\cfrac{1}{L}\\end{cases}\\\\\\qquad\\implies \\forall\\theta^0, \\min\\limits_{1\\le k\\le T}\\Vert\\nabla f(\\theta^k)\\Vert^2\\le\\cfrac{2L(f(\\theta^0)-\\inf f)}{T}\\)</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u6211\u4eec\u53d6\u8fd9\u4e2a optimal step size\uff0c\u5bf9\u4efb\u4f55\u7684\u521d\u59cb\u53c2\u6570(\u5206\u5b50 constant )\uff0c\u53ea\u8981 run \u8db3\u591f\u591a\u6b21(\u5206\u6bcd T large enough), \u8fd9\u4e2a\u68af\u5ea6 \\(\\nabla f(x)\\) \u603b\u80fd\u6536\u655b\u5230\u63a5\u8fd10\uff0c\u4e5f\u5c31\u662f \\(f(x)\\) \u8fbe\u5230\u6211\u4eec\u7684 local minimizer\u3002</p> <p>\u6b65\u957f\u4fdd\u5b88 the constant stepsize\uff0c\u4e0b\u964d\u7f13\u6162 potentially</p>"},{"location":"math/optimization/linearSearch/#expensive-computation","title":"Expensive computation","text":"<p>\u5728\u5f88\u9ad8\u7ef4\u7684\u60c5\u51b5\u4e0b\uff0c\u8ba1\u7b97\u5f88\u590d\u6742\u5f88\u597d\u8017\u65f6\u95f4\u3002 \u7528\u5168\u90e8\u6837\u672cto estimate the exact gradient of a random variable\u3002</p> <p>while computing gradient in GD\u3002\u7b97\u6bcf\u4e00\u4e2a\u6837\u672c\u70b9\u7684\u68af\u5ea6\uff0c\u5982\u679c\u6709 n \u4e2a\u6837\u672c\uff0c\u5c31\u8981\u7b97 n \u4e2a\u68af\u5ea6\uff0c\u4f7f\u7528\u4e86\u6240\u6709\u8bad\u7ec3\u6570\u636e\u7684\u8bef\u5dee, \u7136\u540e\u518d\u7b97\u5979\u4eec\u7684\u5e73\u5747\u503c\u6765\u5145\u5f53\u53c2\u6570\u3002 This computation is\u00a0expensive\u00a0if\u00a0n is huge\u00a0!!! \\(\\(\\nabla f(\\theta^k)=\\cfrac{1}{n}\\sum\\limits_{i=1}^n\\nabla_\\theta l(\\theta^k;X_i,Y)\\)\\)</p> <p>\u6240\u4ee5\u73b0\u5728\u4e0d\u662f\u771f\u7684\u53bb\u7b97\u51fa\u6765\uff0c\u800c\u662f\u7b97\u7528\u4f30\u8ba1\u7684\u6cd5\u5b50\u3002 Instead of computing the exact gradient, we consider \\(g(\\theta,\\xi)\\), which is a estimation satisfying \\(\\mathop{E}\\limits_\\xi[g(\\theta,\\xi)]=\\nabla f(\\theta)\\)</p> \\[\\mathop{E}\\limits_\u03be[g(\\theta,\u03be)]\\xlongequal{\\text{estimate}}\\nabla f(\\theta)\\] Assume \u03be : \\(g(\\theta,\u03be)\\) notes Noisy gradients a random noise satisfying E[\u03be]=0 \\(\\nabla f(\\theta)+\u03be\\) Stochastic gradients an index uniformly sampling from \\(\\nabla_\\theta l(\\theta;X_\u03be,Y_\u03be)\\) \u57fa\u4e8e Batchsize \u7684\u5206\u7c7b\u548c\u8fdb\u5316 <p>assumption of \\(g(\\theta,\\xi)\\) \\(\\begin{cases}f \\text{ is convex }\\\\\\mathbb E_\\xi[g(\\theta,\\xi)]=\\nabla f(\\theta)&amp;\\text{(mean)}\\\\\\text{given B, }\\forall\\theta,\\mathbb E_\\xi[\\Vert g(\\theta,\\xi)\\Vert^2]\\le B^2&amp;\\text{(variance)}\\end{cases}\\)</p> <p>\u56e0\u4e3a\u7528\u968f\u673a\u53d8\u91cf\u6765 estimate\uff0c\u6240\u4ee5\u671f\u671b\u672c\u6765\u5c31\u662f\u6211\u4eec\u60f3\u8981\u7684 \\(=\\nabla f(\\theta)\\), \u65b9\u5dee\u8fd9\u91cc\u9700\u8981\u88ab bounded by B \\(\\iff \\sup \\mathbb E_\\xi[\\Vert g(\\theta,\\xi)\\Vert^2]\\le B^2\\)</p> <p>\\(\\mathbb E_\\xi\\Vert g(\\theta^k,\\xi)\\Vert\\)</p>"},{"location":"math/optimization/linearSearch/#_2","title":"\u62bd\u6837\u4f30\u8ba1\u601d\u8def\u7684\u6bd4\u8f83","text":"Gradient Descent, GD Stochastic Gradient Descent, SGD Batch Gradient Descent, BGD mini-batch SGD Batch_Size None, All train data \u5f97\u5230\u68af\u5ea6 1, stochastic - subset, Batch Size T(n) \u4f46\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8ba1\u7b97\u975e\u5e38\u8017\u65f6\uff0c\u540c\u65f6\u795e\u7ecf\u7f51\u7edc\u5e38\u662f\u975e\u51f8\u7684\uff0c\u7f51\u7edc\u6700\u7ec8\u53ef\u80fd\u6536\u655b\u5230\u521d\u59cb\u70b9\u9644\u8fd1\u7684\u5c40\u90e8\u6700\u4f18\u70b9 ^ ^ ^ \u68af\u5ea6\u51c6\u786e\u6027 Accurate but slow (\u8fed\u4ee3\u6b21\u6570\u5c11\uff0c\u8fed\u4ee3\u4e00\u6b21\u6162 Fast but fluctuant (\u8fed\u4ee3\u4e00\u6b21\u5feb\uff0c\u8fed\u4ee3\u6b21\u6570\u591a\uff0c\u8fed\u4ee3\u8fd9\u4e48\u591a\u6b21\u7684whole process \u8fd8\u662f\u4f1a\u6bd4GD\u5feb ^ \u68af\u5ea6\u51c6\u786e\u4e86\uff0c\u5b66\u4e60\u7387\u8981\u52a0\u5927\u3002 ^ ^ ^ ^ \u5229\u7528\u566a\u58f0\u68af\u5ea6\uff0c\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u7f13\u89e3\u4e86GD\u7b97\u6cd5\u76f4\u63a5\u6389\u8fdb\u521d\u59cb\u70b9\u9644\u8fd1\u7684\u5c40\u90e8\u6700\u4f18\u503c <p>SGD \u5728\u8bad\u7ec3 DNN \u65f6\u5e76\u4e0d\u5bb9\u6613\u627e\u5230\u5168\u5c40\u6700\u5c0f\u503c\u70b9\u3002</p> <p>SGD\u662f\u57fa\u4e8e\u968f\u673a\u91c7\u6837\u7684\uff0c\u6bcf\u6b21\u8fed\u4ee3\u4ec5\u4f7f\u7528\u4e00\u4e2a\u6837\u672c\u6216\u4e00\u5c0f\u6279\u6837\u672c\u6765\u4f30\u8ba1\u68af\u5ea6\uff0c\u56e0\u6b64\u5b83\u5728\u53c2\u6570\u7a7a\u95f4\u4e2d\u641c\u7d22\u6700\u5c0f\u503c\u7684\u8def\u5f84\u662f\u4e0d\u786e\u5b9a\u7684\u3002 \u5bf9\u4e8e\u590d\u6742\u7684\u635f\u5931\u51fd\u6570\u548c\u9ad8\u7ef4\u7684\u53c2\u6570\u7a7a\u95f4\uff0cDNNs\u901a\u5e38\u5b58\u5728\u8bb8\u591a\u5c40\u90e8\u6700\u5c0f\u503c\u548c\u978d\u70b9\u3002\u5c40\u90e8\u6700\u5c0f\u503c\u662f\u635f\u5931\u51fd\u6570\u7684\u5c40\u90e8\u6781\u5c0f\u503c\uff0c\u800c\u978d\u70b9\u662f\u5728\u67d0\u4e2a\u7ef4\u5ea6\u4e0a\u662f\u5c40\u90e8\u6781\u5c0f\u503c\uff0c\u800c\u5728\u53e6\u4e00\u4e2a\u7ef4\u5ea6\u4e0a\u662f\u5c40\u90e8\u6781\u5927\u503c\u3002\u8fd9\u4e9b\u5c40\u90e8\u6700\u5c0f\u503c\u548c\u978d\u70b9\u53ef\u80fd\u5bfc\u81f4SGD\u9677\u5165\u5c40\u90e8\u6700\u5c0f\u503c\u6216\u6536\u655b\u5230\u4e0d\u7406\u60f3\u7684\u89e3\u3002 \u4e3a\u4e86\u514b\u670d\u8fd9\u4e2a\u95ee\u9898\uff0c\u7814\u7a76\u4eba\u5458\u53d1\u5c55\u4e86\u4e00\u4e9b\u6539\u8fdb\u7684\u4f18\u5316\u7b97\u6cd5\uff0c\u5982\u968f\u673a\u68af\u5ea6\u4e0b\u964d\u7684\u53d8\u79cd\uff08\u5982\u52a8\u91cf\u68af\u5ea6\u4e0b\u964d\u3001Adam\u7b49\uff09\u548c\u81ea\u9002\u5e94\u5b66\u4e60\u7387\u65b9\u6cd5\u3002\u8fd9\u4e9b\u7b97\u6cd5\u901a\u8fc7\u5f15\u5165\u52a8\u91cf\u3001\u81ea\u9002\u5e94\u8c03\u6574\u5b66\u4e60\u7387\u7b49\u6280\u672f\u6765\u66f4\u6709\u6548\u5730\u641c\u7d22\u53c2\u6570\u7a7a\u95f4\uff0c\u5e76\u6709\u52a9\u4e8e\u907f\u514d\u9677\u5165\u5c40\u90e8\u6700\u5c0f\u503c</p>"},{"location":"math/optimization/linearSearch/#stochastic-gradient-descent-sgd","title":"Stochastic Gradient Descent, SGD, \u968f\u673a\u68af\u5ea6\u4e0b\u964d","text":"<p>Instead of computing the exact gradient, we consider \\(g(\\theta,\\xi)\\), which is a stochastic estimation satisfying \\(\\mathop{E}\\limits_\\xi[g(\\theta,\\xi)]=\\nabla f(\\theta)\\)</p> <p>SGD\u5c31\u662f\u4e00\u6b21\u8dd1\u4e00\u500b\u6a23\u672c\u6216\u662f\u5c0f\u6279\u6b21(mini-batch)\u6a23\u672c\u7136\u5f8c\u7b97\u51fa\u4e00\u6b21\u68af\u5ea6\u6216\u662f\u5c0f\u6279\u6b21\u68af\u5ea6\u7684\u5e73\u5747\u5f8c\u5c31\u66f4\u65b0\u4e00\u6b21\uff0c\u90a3\u9019\u500b\u6a23\u672c\u6216\u662f\u5c0f\u6279\u6b21\u7684\u6a23\u672c\u662f\u96a8\u6a5f\u62bd\u53d6\u7684\uff0c\u6240\u4ee5\u624d\u6703\u7a31\u70ba==\u96a8\u6a5f\u68af\u5ea6\u4e0b\u964d\u6cd5==\u3002</p> <p>Stochastic Gradient. \\(\\xi\\) is an index uniformly sampling from  {1, 2, ..., n} \u88ab\u968f\u673a\u9009\u4e2d\u7684\u6570\u636e\u7d22\u5f15  $ g(\\theta,\\xi)=\\nabla_\\theta l(\\theta;X_\\xi,Y_\\xi)\\rightarrow \\mathbb E_\\xi g(\\theta,\\xi)=\\nabla f(\\theta)$</p> <p>Stochastic Gradient Descent, SGD \\(\\(\\text{Start from some }\\theta^0\\in\\R^s,\\\\\\text{ SGD updates as }\\theta^{k+1}=\\theta^k-\\alpha_kg(\\theta^k,\u03be_k)=\\theta^k-\\alpha_k\\cdot\\nabla f_{\\theta_k}(x_{\\xi_k})\\\\\\xrightarrow{\\text{approximate}}\\theta^k-\\alpha_k\\nabla f(\\theta_k)\\)\\) \\(g(\\theta^k,\\xi_k):=\\) the stochastic gradient computed at \\(\\theta^k\\) \\(\\xi_k :=\\) the selected index at k round</p> <ol> <li>Sampling strategy to compute\u00a0\ud835\udc54(\ud835\udf03\\(, \ud835\udf09\\)).</li> <li> <p>Choose step size\u00a0\ud835\udefc$\u00a0&gt; 0\u00a0.</p> <p>We need to choose decreasing step size. \u5982\u679c\u662fconstant \u5c31\u4e0d\u80fd find ultimate value</p> <ul> <li> <p>if \\(\\alpha_j\\equiv \\alpha&gt;0\\) \u274c\u00a0(\u9664\u975eB\u9012\u51cf     \\(\\xRightarrow{ \\alpha_j\\equiv \\alpha&gt;0}\\mathbb E[f(\\overline{\\theta}^T)-f^*]\\le\\cfrac{\\Vert\\theta^0-\\theta^*\\Vert^2+B^2(T+1)\\alpha^2}{2(T+1)}\\) \\(\\xrightarrow{T-&gt;\\infin}\\hat{\\theta}^T\\text{ will be in a ball with radius }\\frac{B^2\\alpha^2}{2}\\) </p> </li> <li> <p>if \\(\\alpha_j\\downarrow\\) e.g. \\(\\alpha_t=\\frac{1}{t+1}(\\text{decreasing})\\)  \u2b55     \\(\\xRightarrow{\\alpha_t=\\frac{1}{t+1}}\\begin{cases}\\sum\\limits_{t=0}^\\infin\\alpha_t=\\sum\\limits_{t=1}^\\infin\\cfrac{1}{t}=\\infin\\\\\\sum\\limits_{t=0}^\\infin\\alpha_t^2=\\sum\\limits_{t=1}^\\infin\\cfrac{1}{t^2}=\\cfrac{\\pi^2}{6}&lt;\\infin\\end{cases}\\) \\(\\implies\\lim\\limits_{T\\rightarrow\\infin}\\mathbb E[f(\\overline{\\theta}^T)-f^*]=0\\)</p> </li> </ul> </li> </ol> <p>Convergence of SGD with step-size \\(\\alpha&gt;0\\)</p> <p>\\(\\begin{cases}f \\text{ is convex }\\iff f(\\lambda u + (1-\\lambda )v)\\le\\lambda f(u) + (1-\\lambda )f(v).\\\\E_\u03be[g(\\theta,\u03be)]=\\nabla f(\\theta)\\\\E_\u03be[\\Vert g(\\theta,\u03be)\\Vert^2]\\le B^2,\\forall \\theta, \\text{given B}\\\\\\{\\theta^k\\}:=\\text{ the sequence by SGD with }\\alpha&gt;0\\end{cases}\\) \\(\\implies E[f(\\overline{\\theta}^T)-f^*]\\le\\cfrac{\\Vert\\theta^0-\\theta^*\\Vert^2+B^2\\sum\\limits_{j=0}^T\\alpha_j^2}{2\\sum\\limits_{j=0}^T\\alpha_j},\\begin{cases}\\:\\lambda_k=\\sum\\limits_{j=0}^k\\alpha_j\\\\\\overline{\\theta}^k=\\lambda_k^{-1}\\sum\\limits_{j=0}^k\\alpha_j\\theta^j\\end{cases}\\)</p> <p>\\(\\xRightarrow{ \\alpha_j=\\alpha&gt;0}E[f(\\overline{\\theta}^T)-f^*]\\le\\cfrac{\\Vert\\theta^0-\\theta^*\\Vert^2+B^2(T+1)\\alpha^2}{2(T+1)}\\)</p> <p>\\(\\xrightarrow{T-&gt;\\infin}\\hat{\\theta}^T=\\cfrac{B^2\\alpha^2}{2}\\)</p> <p>\\(\\xRightarrow{\\alpha_t=\\cfrac{1}{t+1}(\\text{decreasing})}\\begin{cases}\\sum\\limits_{t=0}^\\infin\\alpha_t=\\sum\\limits_{t=1}^\\infin\\cfrac{1}{t}=\\infin\\\\\\sum\\limits_{t=0}^\\infin\\alpha_t^2=\\sum\\limits_{t=1}^\\infin\\cfrac{1}{t^2}=\\cfrac{\\pi^2}{6}&lt;\\infin\\end{cases}\\)</p> <p>proof</p> <p>Advantage:</p> <ol> <li>\u8ba1\u7b97\u5feb\uff0c\u6700\u901f\u4e0b\u964d\u6cd5\u66f4\u65b01\u6b21\u53c2\u6570\u7684\u65f6\u95f4\uff0c\u968f\u673a\u68af\u5ea6\u4e0b\u964d\u6cd5\u53ef\u4ee5\u66f4\u65b0n\u6b21</li> </ol> <p>Limitation:</p> <ol> <li>Slow convergence\uff0c\u56e0\u4e3a\u968f\u673a\uff0c\u6240\u4ee5\u65b9\u5411\u6447\u6446\u4e0d\u5b9a\uff0c\u6536\u655b\u5f88\u6162,\u72c2\u8d70\u4e4b\u5b57\u8def\u7ebf\uff0c\u5feb\u7684\u662f\u8ba1\u7b97\u8fc7\u7a0b \u21d2 SGD with momentum</li> <li>converge to the local optimal solution \u4e0d\u7ecf\u610f\u95f4\u6536\u655b\u5230local\u5c31\u505c\u4e86\uff0c\uff08\u968f\u673a\u68af\u5ea6\u4e0b\u964d\u6cd5\u7531\u4e8e\u8bad\u7ec3\u6570\u636e\u662f\u968f\u673a\u9009\u62e9\u7684\uff0c\u66f4\u65b0\u53c2\u6570\u65f6\u4f7f\u7528\u7684\u53c8\u662f\u9009\u62e9\u6570\u636e\u65f6\u7684\u68af\u5ea6\uff0c\u6240\u4ee5\u5bb9\u6613\u9677\u5165\u76ee\u6807\u51fd\u6570\u7684\u5c40\u90e8\u6700\u4f18\u89e3\u3002</li> <li>converge to saddle points</li> <li>\u53ea\u80fd go to some neighbourhoods of the optimal solution \\(\\mathbb E[f(\\overline{\\theta}^T)-f^*]\\le\\cfrac{\\Vert\\theta^0-\\theta^*\\Vert^2+B^2(T+1)\\alpha^2}{2(T+1)}\\rightarrow\\hat{\\theta}^T\\text{ on a ball with radius}\\cfrac{B^2\\alpha^2}{2}\\)</li> </ol> <p>\u6bcf\u6b21\u66f4\u65b0\u53c2\u6570\u65f6\u53ea\u4f7f\u7528\u4e00\u4e2a\u6837\u672c\u6765\u8ba1\u7b97\u68af\u5ea6\uff0c\u8fd9\u6837\u5c31\u907f\u514d\u4e86BGD\u8ba1\u7b97\u975e\u5e38\u7f13\u6162\u7684\u95ee\u9898\uff0c\u540c\u65f6SGD\u6bcf\u6b21\u8ba1\u7b97\u68af\u5ea6\u7684\u6837\u672c\u4e0d\u540c\uff0c\u6240\u4ee5\u8ba1\u7b97\u51fa\u6765\u7684\u68af\u5ea6\u4e0d\u7a33\u5b9a\uff0c\u4f1a\u51fa\u73b0\u6296\u52a8\uff0c\u6b63\u662f\u8fd9\u79cd\u4e0d\u7a33\u5b9a\u4ea7\u751f\u7684\u6296\u52a8\uff0c\u4f7f\u7b97\u6cd5\u53ef\u80fd\u8df3\u51fa\u978d\u70b9\u4ece\u800c\u627e\u5230\u66f4\u4f18\u89e3\u3002SGD\u6bcf\u6b21\u53ea\u4f7f\u7528\u4e00\u4e2a\u6837\u672c\u66f4\u65b0\u68af\u5ea6\uff0c\u8ba1\u7b97\u66f4\u5feb\uff0c\u5e76\u4e14\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u53ef\u65b0\u589e\u6837\u672c\uff0c\u56e0\u6b64\u9002\u5408online\u8bad\u7ec3\u3002</p> <p>\u6bcf\u6b21\u4f7f\u7528\u4e00\u4e2a\u6837\u672c\u8ba1\u7b97\u68af\u5ea6\u5177\u6709\u9ad8\u65b9\u5dee\u6027\uff0c\u5bb9\u6613\u53d7\u5230\u79bb\u7fa4\u70b9\u6216\u5f02\u5e38\u6570\u636e\u7684\u5e72\u6270\uff0c\u5728\u4f18\u5316\u8fc7\u7a0b\u4e2d\u4f1a\u51fa\u73b0\u4e25\u91cd\u7684\u6296\u52a8\uff0c\u8fd9\u79cd\u968f\u673a\u6027\u4fbf\u662f\u5176\u540d\u5b57\u7684\u7531\u6765</p>"},{"location":"math/optimization/linearSearch/#mini-batch-sgd","title":"mini-batch SGD","text":"<p>\u8bbe\u968f\u673a\u9009\u62e9m\u4e2a\u8bad\u7ec3\u6570\u636e\u7684\u7d22\u5f15\u7684\u96c6\u5408\u4e3aK\uff0c</p> <p>\u5047\u8bbe\u8bad\u7ec3\u6570\u636e\u6709100\u4e2a\uff0c\u90a3\u4e48\u5728m=10\u65f6\uff0c\u521b\u5efa\u4e00\u4e2a\u670910\u4e2a\u968f\u673a\u6570\u7684\u7d22\u5f15\u7684\u96c6\u5408\uff0c\u4f8b\u5982K={61, 53, 59, 16, 30, 21, 85, 31, 51, 10}\uff0c\u7136\u540e\u91cd\u590d\u66f4\u65b0\u53c2\u6570</p> <p>mini--batch Stochastic Gradient Descent, SGD. \\(\\(\\text{Start from some }\\theta^0\\in\\R^s,\\\\ \\text{ SGD updates as }\\large\\theta^{k+1}=\\theta^k-\\alpha_k\\mathop{\\mathbb E}\\limits_{\\xi_k\\in\\Xi_k}g(\\theta^k,\u03be_k)=\\theta^k-\\alpha_k\\cdot\\mathop{\\mathbb E}\\limits_{\\xi_k\\in\\Xi_k}\\nabla f_{\\theta_k}(x_{\\xi_k})\\)\\) \\(g(\\theta^k,\\xi_k):=\\) the stochastic gradient computed at \\(\\theta^k\\) \\(\\Xi_k :=\\) the selected indexes at k round(mini-batch)</p> <p>In each epoch,\u00a0\\(n_E\\)\u00a0SGD updates will be executed. Usually, we select</p> <p>\\(n_E=\\text{ceil}(\\frac{n}{p}),\\quad\\begin{cases}n:= \\#\\text{ samples in each epoch} = \\#\\text{ all samples}\\\\p:= \\#\\text{ samples in each mini-batch} \\\\n_E:=\\#\\text{batch in each epoch}\\end{cases}\\)</p> <p>\u4e0d\u540c\u4ee3\u4e4b\u95f4\u6570\u636e\u8981shuffle</p> <p>\u91c7\u7528\u4e00\u4e2a\u5c0f\u6279\u91cf\u7684\u6570\u636e\u8fdb\u884c\u68af\u5ea6\u7684\u8ba1\u7b97\uff0c\u5176\u76ee\u7684\u662f\u5728\u4fdd\u8bc1\u8ba1\u7b97\u901f\u5ea6\u7684\u540c\u65f6\uff0c\u907f\u514dSGD\u7684\u968f\u673a\u6027\uff0c\u964d\u4f4e\u53c2\u6570\u66f4\u65b0\u65f6\u7684\u65b9\u5dee\uff0c\u4f7f\u6536\u655b\u66f4\u7a33\u5b9a\u3002</p> <p>MBGD\u5bb9\u6613\u53d7\u5b66\u4e60\u7387\u7684\u5f71\u54cd\uff1a\u8bbe\u7f6e\u5f97\u592a\u5927\u5bb9\u6613\u51fa\u73b0\u4e0eSGD\u7c7b\u4f3c\u7684\u4e0d\u7a33\u5b9a\u73b0\u8c61\uff0c\u4f1a\u5728\u978d\u70b9\u5904\u632f\u8361\uff0c\u751a\u81f3\u504f\u79bb\u6700\u4f18\u89e3\uff1b\u8bbe\u7f6e\u5f97\u592a\u5c0f\uff0c\u4f1a\u9020\u6210\u6536\u655b\u901f\u5ea6\u8fc7\u6162\u3002 MBGD\u7684\u5b66\u4e60\u7387\u5bf9\u6240\u6709\u7684\u53c2\u6570\u66f4\u65b0\u90fd\u662f\u4e00\u6837\u7684\uff0c\u5982\u679c\u6570\u636e\u662f\u7a00\u758f\u7684\uff0c\u6211\u4eec\u66f4\u5e0c\u671b\u5bf9\u51fa\u73b0\u9891\u7387\u4f4e\u7684\u7279\u5f81\u8fdb\u884c\u8f83\u5927\u7684\u66f4\u65b0\uff0c\u5e76\u4e14\u5b66\u4e60\u7387\u4f1a\u968f\u7740\u66f4\u65b0\u6b21\u6570\u9010\u6e10\u51cf\u5c0f\u3002\u663e\u7136\uff0cMBGD\u5e76\u4e0d\u80fd\u6ee1\u8db3\u8fd9\u4e9b\u9700\u6c42\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u80fd\u591f\u81ea\u9002\u5e94\u5b66\u4e60\u7387\u7684\u7b97\u6cd5\u3002</p>"},{"location":"math/optimization/linearSearch/#sgd-with-momentum","title":"SGD with Momentum","text":"<p>Momentum We often think of Momentum as a means of dampening oscillations and speeding up the iterations, leading to faster convergence. Momentum proposes the following tweak to gradient descent. We give gradient descent a short-term memory:</p> <p>\u3010\u4e0d\u90a3\u4e48\u6b63\u786e\u4f46\u5f88\u597d\u7406\u89e3\u7684\u4f8b\u5b50\u3011Momentum is a heavy ball rolling down the same hill. The added inertia acts both as a smoother and an accelerator, dampening oscillations and causing us to barrel through narrow valleys, small humps and local minima. \u52a8\u91cf\u662f\u4e00\u4e2a\u6c89\u91cd\u7684\u7403\u6eda\u4e0b\u540c\u4e00\u5ea7\u5c71\u3002\u589e\u52a0\u7684\u60ef\u6027\u65e2\u662f\u5e73\u6ed1\u7684\uff0c\u4e5f\u662f\u52a0\u901f\u5668\uff0c\u6291\u5236\u632f\u8361\uff0c\u5bfc\u81f4\u6211\u4eec\u7a7f\u8fc7\u72ed\u7a84\u7684\u5c71\u8c37\u3001\u5c0f\u9a7c\u5cf0\u548c\u5c40\u90e8\u6700\u5c0f\u503c\u3002</p> \\[\\colorbox{grey}{\\text{(def)}} \\text{ SGD with momentum }\\\\\\quad \\text{Start from some }\\theta^0\\in\\R^s, v_0=g(\\theta^0,\\xi_0), \\text{ for }k\\ge0,\\\\[1em]\\qquad v^{k+1}=\\red\\gamma v^k+\\red{(1-\\gamma)}g(\\theta^k,\\xi_k),\\quad (\\gamma \\text{ usually 0.9}\\\\[1ex]\\qquad \\theta^{k+1}=\\theta^k-v^{k+1}\\] <p>SGD\u548cmomentum\u5728\u66f4\u65b0\u53c3\u6578\u6642\uff0c\u90fd\u662f\u7528\u540c\u4e00\u500b\u5b78\u7fd2\u7387(\u03b3)</p> <p></p> <p>\u4e3b\u8981\u662f\u7528\u5728\u8a08\u7b97\u53c3\u6578\u66f4\u65b0\u65b9\u5411\u524d\u6703\u8003\u616e\u524d\u4e00\u6b21\u53c3\u6578\u66f4\u65b0\u7684\u65b9\u5411 \\((v_{t-1})\\)\uff0c\u5982\u679c\u7576\u4e0b\u68af\u5ea6\u65b9\u5411\u548c\u6b77\u53f2\u53c3\u6578\u66f4\u65b0\u7684\u65b9\u5411\u4e00\u81f4\uff08\u56e0\u4e3a\u662f\u7d2f\u79ef\u6c42\u548c\u7684\uff09\uff0c\u5247\u6703\u589e\u5f37\u9019\u500b\u65b9\u5411\u7684\u68af\u5ea6\uff0c\u82e5\u7576\u4e0b\u68af\u5ea6\u65b9\u5411\u548c\u6b77\u53f2\u53c3\u6578\u66f4\u65b0\u7684\u65b9\u5411\u4e0d\u4e00\u81f4\uff0c\u5247\u68af\u5ea6\u6703\u8870\u9000\u3002\u7136\u5f8c\u6bcf\u4e00\u6b21\u5c0d\u68af\u5ea6\u4f5c\u65b9\u5411\u5fae\u8abf\u3002\u9019\u6a23\u53ef\u4ee5\u589e\u52a0\u5b78\u7fd2\u4e0a\u7684\u7a69\u5b9a\u6027(\u68af\u5ea6\u4e0d\u66f4\u65b0\u592a\u5feb)\uff0c\u9019\u6a23\u53ef\u4ee5\u5b78\u7fd2\u7684\u66f4\u5feb\uff0c\u4e26\u4e14\u6709\u64fa\u812b\u5c40\u90e8\u6700\u4f73\u89e3\u7684\u80fd\u529b\u3002</p> <p></p> <p>\u52a0\u4e0a\u52a8\u91cf\u4e4b\u540e\u7684SGD\u4f18\u5316\u7b97\u6cd5\u4f1a\u6cbf\u7740\u68af\u5ea6\u7684\u65b9\u5411\u8d8a\u6765\u8d8a\u5feb\u5730\u8fdb\u884c\u66f4\u65b0\uff0c\u800c\u4e0d\u76f8\u5173\u7684\u65b9\u5411\u5c06\u9010\u6e10\u5f97\u5230\u6291\u5236\uff0c\u56e0\u6b64\u80fd\u51cf\u5c11\u4f18\u5316\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u7684\u201c\u4e4b\u201d\u5b57\u5f62\u8def\u7ebf</p> <p>Limitation: momentum may be wrong\u3002\u5982\u679c\u4e00\u8f86\u6c7d\u8f66\u4e00\u76f4\u52a0\u901f\uff0c\u5728\u9047\u5230\u969c\u788d\u7269\u65f6\u662f\u5426\u80fd\u505c\u4e0b\u6765\uff1f\u68af\u5ea6\u66f4\u65b0\u4e5f\u662f\u4e00\u6837\u7684\uff0cMomentum\u867d\u7136\u80fd\u52a0\u901fSGD\u7b97\u6cd5\uff0c\u4f46\u662f\u5f88\u5bb9\u6613\u201c\u51b2\u4e0a\u659c\u5761\u201d</p> <p>momentum \u80fd\u9003\u79bb\u5c40\u90e8\u6700\u5c0f\u70b9\uff0c\u51b2\u4e0a\u5c0f\u5c71\u8c37\uff0c\u4f46\u662f\u4e5f\u6709\u53ef\u80fd\u56e0\u4e3a\u4e0d\u65ad\u7d2f\u79ef\u7684\u52a8\u91cf\u592a\u5927\uff0c\u9519\u8fc7\u5168\u5c40\u6700\u5c0f\uff0c\u4e00\u51b2\u51b2\u51fa\u53bb</p> <p></p>"},{"location":"math/optimization/linearSearch/#sgd-with-nesterov-momentum","title":"SGD with Nesterov momentum","text":"<p>\u5047\u8bbe\u6709\u4e00\u4e2a\u201c\u667a\u80fd\u201d\u7684\u96ea\u7403\u4ece\u659c\u5761\u4e0a\u5f80\u4e0b\u6eda\uff0c\u5b83\u5728\u6eda\u52a8\u8fc7\u7a0b\u4e2d\u4e0d\u4ec5\u4f1a\u8003\u8651\u52a8\u91cf\u4e3a\u81ea\u5df1\u52a0\u901f\uff0c\u8fd8\u4f1a\u601d\u8003\u201c\u4e0b\u4e00\u65f6\u523b\u662f\u5426\u4f1a\u649e\u5899\u201d\uff0c\u4ece\u800c\u5b9e\u73b0\u51cf\u901f \u2014\u2014 \u5728\u8ba1\u7b97\u53c2\u6570\u7684\u68af\u5ea6\u65f6\uff0c\u5e94\u5728\u635f\u5931\u51fd\u6570\u4e2d\u51cf\u53bb\u52a8\u91cf\u9879</p> <p>SGD with Nesterov  momentum</p> \\[\\text{Start from some }\\theta^0\\in\\R^s, v_0=g(\\theta^0,\\xi_0), \\text{ for } k\\ge0,\\\\ \\red\u03bd^k=\\theta^k-\\beta_kv^k \\\\ v^{k+1}=\\red\\gamma v^k+\\red{(1-\\gamma)}g(\\red\u03bd^k,\\xi_k), \\\\ \\theta^{k+1}=\\theta^k-v^{k+1}\\] <p>\\(\\red\u03bd^k:=\\) \u8fd1\u4f3c\u5f53\u4f5c\u53c2\u6570\u4e0b\u4e00\u6b65\u4f1a\u53d8\u6210\u7684\u503c \\(\\gamma\\) usually 0.9</p> <p></p> <p>difference between Origin and Nesterov:</p> <ul> <li>Origin momentum: \u5728 \\(\u03b8^k\\) \u4e0a\u65e2\u8ba1\u7b97 gradient  \\(g(\u03b8^k,\\xi_k)\\), \u53c8\u8ba1\u7b97 momentum \\(v^k\\)<ul> <li>Momentum SGD\u5148\u8ba1\u7b97\u5f53\u524d\u7684\u68af\u5ea6\uff0c\u66f4\u65b0\u540e\u7684\u7d2f\u79ef\u68af\u5ea6\u4f1a\u51fa\u73b0\u4e00\u4e2a\u5927\u7684\u8df3\u8dc3</li> </ul> </li> <li>Nesterov momentum: \u5728 \\(\u03b8^k\\) \u4e0a\u5148\u8ba1\u7b97 momentum \\(\u03c5^k\\), \u518d\u5728\u65b0\u7684\u70b9\u4e0a\u8ba1\u7b97 gradient   \\(g(\u03bd^k,\\xi_k)\\) .\uff0c\u5728NAG\u7b97\u6cd5\u4e2d\u4e0d\u662f\u8ba1\u7b97\u5f53\u524d\u4f4d\u7f6e\u7684\u68af\u5ea6\uff0c\u800c\u662f\u8ba1\u7b97\u672a\u6765\u4f4d\u7f6e\u4e0a\uff08\u4e0b\u4e00\u65f6\u523b\uff09\u7684\u68af\u5ea6<ul> <li>NAG SGD\u4f1a\u5728\u524d\u4e00\u6b65\u68af\u5ea6\u7684\u57fa\u7840\u4e0a\u505a\u4fee\u6b63\uff0c\u4ece\u800c\u5f97\u5230\u6700\u4e0b\u9762\u7684\u68af\u5ea6\uff0c\u907f\u514d\u901f\u5ea6\u8d8a\u6765\u8d8a\u5feb\u3002with a shorter step to prevent overshoot</li> <li>NAG\u7b97\u6cd5\u5728\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u3001LSTM\u7b49\u4efb\u52a1\u4e0a\u8868\u73b0\u826f\u597d\u3002</li> </ul> </li> <li>Momentum SGD\u548cNAG SGD\u8fd9\u4e24\u79cd\u52a0\u901f\u7b97\u6cd5\u53ea\u9488\u5bf9\u68af\u5ea6\u8fdb\u884c\u4f18\u5316\uff0c\u5e76\u6ca1\u6709\u9488\u5bf9\u53c2\u6570\u91cd\u8981\u6027\u8fdb\u884c\u4e0d\u540c\u7a0b\u5ea6\u7684\u66f4\u65b0\uff0c\u4e5f\u6ca1\u6709\u5b66\u4e60\u7387\u7684\u81ea\u52a8\u8c03\u6574</li> </ul>"},{"location":"math/optimization/linearSearch/#adagrad-adaptive-learning-rates","title":"Adagrad: Adaptive Learning Rates","text":"<p>\u5b78\u7fd2\u7387\u8870\u6e1b(Learning rate decay)\u3002\u5927\u7684\u5b78\u7fd2\u7387\u53ef\u4ee5\u8f03\u5feb\u8d70\u5230\u6700\u4f73\u503c\u6216\u662f\u8df3\u51fa\u5c40\u90e8\u6975\u503c\uff0c\u4f46\u8d8a\u5f8c\u9762\u5230\u8981\u627e\u5230\u6975\u503c\u5c31\u9700\u8981\u5c0f\u7684\u5b78\u7fd2\u7387\u3002</p> <p>Rescale the learning rate of each coordinate by the historical progress.</p> <p>Adagrad $$ \\text{Start from some }\\theta^0\\in\\R^s, n_g^0=0,\\text{ for }k\\ge0\\[1em]\\qquad n_g^{k+1}= n_g+\\[1ex]\\qquad \\theta^{k+1}=\\theta^k-\\cfrac{\\alpha_k}{\\red{n_g+10^{-8}}}g(\\theta^k,\\xi_k) \\qquad\\text{ (rescale)}$$ <p>The learning rate (step size) goes to zero quickly.</p>"},{"location":"math/optimization/linearSearch/#rmsprop","title":"RMSProp","text":"<p>Discount the accumulated norm of the gradients.</p> <p>RMSProp\u3002 \\(\\(\\text{Start from some }\\theta^0\\in\\R^s, n_g^0=0,\\text{ for }k\\ge0\\\\ n_g^{k+1}=\\red\\gamma n_g+\\red{(1-\\gamma)}&lt;g(\\theta^k,\\xi_k),g(\\theta^k,\\xi_k)&gt;\\\\ \\theta^{k+1}=\\theta^k-\\cfrac{\\alpha_kg(\\theta^k,\\xi_k)}{\\red{n_g+10^{-8}}} \\qquad\\text{ (rescale)}\\)\\)</p> <p>\u4ecd\u7136\u4f7f\u7528\u6307\u6570\u52a0\u6743\u5e73\u5747\uff0c\u65e8\u5728\u6d88\u9664\u68af\u5ea6\u4e0b\u964d\u4e2d\u7684\u6446\u52a8\uff0c\u4e0e Momentum \u7684\u6548\u679c\u4e00\u6837\u3002\u5982\u679c\u67d0\u4e2a\u7ef4\u5ea6\u7684\u5bfc\u6570\u6bd4\u8f83\u5927\uff0c\u5219\u6307\u6570\u52a0\u6743\u5747\u503c\u5c31\u5927\uff1b\u5982\u679c\u67d0\u4e2a\u7ef4\u5ea6\u7684\u5bfc\u6570\u6bd4\u8f83\u5c0f\uff0c\u5219\u5176\u6307\u6570\u52a0\u6743\u5747\u503c\u5c31\u5c0f\u3002\u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u5404\u4e2a\u7ef4\u5ea6\u7684\u5bfc\u6570\u90fd\u5728\u4e00\u4e2a\u91cf\u7ea7\uff0c\u4ece\u800c\u51cf\u5c11\u6446\u52a8</p>"},{"location":"math/optimization/linearSearch/#adam-adaptive-moment-estimation","title":"ADAM, Adaptive Moment Estimation","text":"<p>Consider momentum and adaptive learning rate (second-order momentum) together.</p> <p>\u662f\u53e6\u5916\u4e00\u79cd\u8ba1\u7b97\u6bcf\u4e2a\u53c2\u6570\u7684\u81ea\u9002\u5e94\u5b66\u4e60\u7387\u7684\u7b97\u6cd5\uff0c\u6bd4Adadelta\u7b97\u6cd5\u548cRMSprop\u7b97\u6cd5\u66f4\u6fc0\u8fdb\uff0c\u4e0d\u4ec5\u8003\u8651\u4e86\u6307\u6570\u8870\u51cf\u5747\u503c\uff0c\u964d\u4f4e\u5b66\u4e60\u7387\u8fc7\u5ea6\u8870\u51cf\u7684\u95ee\u9898\uff0c\u8fd8\u52a0\u5165\u4e86 Momentum \u7684\u52a8\u91cf\u601d\u60f3\u3002 \\(m_t=\\beta_1m_{t-1}+(1-\\beta_1)g_t\\) t\u65f6\u523b\u7684\u52a8\u91cf \\(v_t=\\beta_2v_{t-1}+(1-\\beta_2)g_t^2\\)t\u65f6\u523b\u7684\u6307\u6570\u8870\u51cf\u5747\u503c\u3002 \u5982\u679c \\(m_t\uff0cv_t\\) \u521d\u59cb\u5316\u4e3a0\uff0c\u5219\u4f1a\u54110\u504f\u7f6e\uff0c\u56e0\u6b64Adam\u505a\u4e86\u504f\u5dee\u7ea0\u6b63 \\(\\hat{m}_t=\\cfrac{m_t}{1-\\beta_1^t}\\) \\(\\hat{v}_t=\\cfrac{v_t}{1-\\beta_2^t}\\) \u6700\u7ec8\u68af\u5ea6\u66f4\u65b0 \\(\\(\\theta_{t+1}=\\theta_t-\\cfrac{\\iota}{\\sqrt{\\hat{v}_t}+\\epsilon}\\hat{m}_t\\)\\)</p> <p>\u5efa\u8bae:\\(\\alpha=0.001,\\beta_1=0.9,\\beta_2=0.999,\\epsilon=10^{-8}\\)</p> <p>\u5927\u91cf\u4e8b\u4ef6\u8868\u660e Adam \u300b Adadelta &amp; RMSprop. Transformer in CV \u5f88\u7231\u7528ADAM</p> <p></p> <p>\u5f53\u4e8c\u9636\u52a8\u91cf\u53c2\u6570 \\(\\beta_2\\) \u5f88\u5927\u4e14\u4e00\u9636\u52a8\u91cf\u53c2\u6570 \\(\\beta_1 &lt; \\sqrt{\\beta_2}&lt;1\\) \u65f6\uff0cAdam \u53ef\u4ee5\u6536\u655b\u3002\u636e\u6211\u4eec\u6240\u77e5\uff0c\u6211\u4eec\u662f\u7b2c\u4e00\u4e2a\u8bc1\u660e\u5177\u6709\u4efb\u610f\u5927 \\(\\beta_1\\) \u7684 Adam \u53ef\u4ee5\u5728\u6ca1\u6709\u4efb\u4f55\u5f62\u5f0f\u7684\u6709\u754c\u68af\u5ea6\u5047\u8bbe\u7684\u60c5\u51b5\u4e0b\u6536\u655b\u3002\u8fd9\u4e2a\u7ed3\u679c\u8868\u660e\uff0c\u6ca1\u6709\u4efb\u4f55\u4fee\u6539\u7684Adam\u5728\u7406\u8bba\u4e0a\u4ecd\u7136\u53ef\u4ee5\u6536\u655b\u3002\u5f53\\(\\beta_2\\) \u8f83\u5c0f\u65f6\uff0c\u6211\u4eec\u8fdb\u4e00\u6b65\u6307\u51faAdam \u53ef\u4ee5\u53d1\u6563\u5230\u65e0\u7a77\u3002\u6211\u4eec\u7684\u53d1\u6563\u7ed3\u679c\u8003\u8651\u4e86\u4e0e\u6536\u655b\u7ed3\u679c\u76f8\u540c\u7684\u8bbe\u5b9a\uff08\u63d0\u524d\u56fa\u5b9a\u4f18\u5316\u95ee\u9898\uff09\uff0c\u8fd9\u8868\u660e\u5f53\u589e\u52a0 \\(\\beta_2\\) \u65f6\u5b58\u5728\u4ece\u53d1\u6563\u5230\u6536\u655b\u7684\u76f8\u53d8\u3002\u8fd9\u4e9b\u7ed3\u679c\u53ef\u80fd\u4f1a\u4e3a\u66f4\u597d\u5730\u8c03\u6574 Adam \u7684\u8d85\u53c2\u6570\u63d0\u4f9b\u6307\u5bfc\u3002</p>"},{"location":"math/optimization/linearSearch/#convergence-of-adam","title":"convergence  of ADAM","text":"<p>But the convergence analysis contains some\u00a0mistakes\u00a0in the original paper. ADAM can be\u00a0non-convergent!</p> <p></p>"},{"location":"math/optimization/linearSearch/#newtons-method","title":"Newton\u2019s method \u725b\u987f\u8fed\u4ee3\u6cd5","text":"<p>\u65b9\u6cd5\u672c\u8eab\uff1a\u6c42\u89e3\u975e\u7ebf\u6027\u65b9\u7a0b \\(g(x)=0\\) \u7684==\u8fd1\u4f3c\u6839== \\(x^*\\) \u5728 Descent Direction \u4e0a\u7684\u5e94\u7528\uff1a\u6c42\u89e3  \\(\\red{\\text{\u65b0}\\cdot g(x) = \\nabla f(x^*)=0}\\)</p> <p>\u4f7f\u7528\u51fd\u6570\u7684\u6cf0\u52d2\u7ea7\u6570\u7684\u524d\u9762\u51e0\u9879\u6765\u5bfb\u627e\u65b9\u7a0b\u7684\u6839\u3002</p>"},{"location":"math/optimization/linearSearch/#_3","title":"\u65b9\u6cd5\u672c\u8eab","text":"<ul> <li>\u80cc\u666f \u591a\u6570\u65b9\u7a0b\u4e0d\u5b58\u5728\u6c42\u6839\u516c\u5f0f\uff0c\u56e0\u6b64\u6c42\u7cbe\u786e\u6839\u975e\u5e38\u56f0\u96be\uff0c\u751a\u81f3\u4e0d\u53ef\u80fd\uff0c\u4ece\u800c\u5bfb\u627e\u65b9\u7a0b\u7684\u8fd1\u4f3c\u6839\u5c31\u663e\u5f97\u7279\u522b\u91cd\u8981\u3002\u65b9\u7a0b\u7528\u4e8c\u6b21\u51fd\u6570\u7684\u5f62\u5f0f\u8868\u793a\u51fa\u6765\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e0a\u9762\u7684\u529e\u6cd5\u5927\u8e0f\u6b65\u7684\u524d\u8fdb\u4e86\uff01\u7531\u6b64\u6211\u4eec\u796d\u51fa\u5c06\u4efb\u610fN\u9636\u53ef\u5bfc\u51fd\u6570\u5316\u4e3aN\u6b21\u591a\u9879\u5f0f\u7684\u795e\u5668\uff1aN\u9636\u6cf0\u52d2\u5c55\u5f00</li> <li> <p>\u601d\u8def \u8bbe \\(x^*\\) \u662f \\(g(x)=0\\) \u7684\u8fd1\u4f3c\u6839\uff0c\u5c06 \\(g(x)\\) \u5728 \\(x^k\\) \u9644\u8fd1\u7528\u4e00\u9636\u6cf0\u52d2\u591a\u9879\u5f0f\u8fd1\u4f3c \\(\\(g(x)=g(x^{k})+ \\nabla g(x^k)^T\\cdot (x-x^k)+o(\\vert x-x_0\\vert)\\)\\) \u820d\u53bb\u9ad8\u9636\u9879\uff1a\\(g(x)=g(x^{k})+ \\nabla g(x^k)^T\\cdot (x-x^k)\\) \u5c06\u8fd1\u4f3c\u6839\u4ee3\u5165\uff1a  \\(\\(\\begin{align*} g(x^*)=g(x^{k})+ \\nabla g(x^k)^T\\cdot (x^*-x^k)=0\\tag{1}\\\\x^*=x^k-\\cfrac{g(x^k)}{g'(x^k)}\\tag{2}\\end{align*}\\)\\)  \u4e0d\u80fd\u4e00\u6b65\u5f97\u5230\uff0c\u6240\u4ee5\u9700\u8981\u8fed\u4ee3  \u2234\u8fed\u4ee3\u516c\u5f0f\uff1a\\(\\red{x^{k+1}=x^k-\\cfrac{f(x^k)}{f'(x^k)}}\\)</p> <p>\u3010\u8bf4\u4eba\u8bdd\u3011</p> <ol> <li>\u5148\u968f\u673a\u9009\u4e00\u4e2a\u70b9\uff0c</li> <li>\u7136\u540e\u6c42\u51fa\\(f(x)\\)\u5728\u8be5\u70b9\u7684\u5207\u7ebf\u3002</li> <li>\u8be5\u5207\u7ebf\u4e0ex\u8f74\u76f8\u4ea4\u7684\u70b9\u4e3a\u4e0b\u4e00\u6b21\u8fed\u4ee3\u7684\u503c\u3002 \u76f4\u81f3\u903c\u8fd1\\(f(x)=0\\)\u7684\u70b9\u3002</li> </ol> <ul> <li>\u505c\u6b62\u6807\u51c6</li> <li>\\(\\vert x_{k+1}-x_k\\vert &lt;\\epsilon_1\\)</li> <li>\\(\\vert f(x) \\vert&lt;\\epsilon_2\\): \\(f(x)\\)\u5f88\u5c0f\uff0c\u5c0f\u4e8e\u7cbe\u5ea6\uff0c\u4e0d\u80fd\u4fdd\u8bc1x\u7684\u7cbe\u5ea6 \u5c40\u9650\u6027\uff1a\u5bf9\u4e8e\u67d0\u4e9b\u7279\u6b8a\u51fd\u6570\uff0c\u5c0f\u533a\u95f4\u6025\u901f\u53d8\u5316</li> <li>\u51e0\u4f55\u672c\u8d28 \u5728\u539f\u51fd\u6570\u7684\u67d0\u4e00\u70b9\u5904\u7528\u4e00\u4e2a\u4e8c\u6b21\u51fd\u6570\u8fd1\u4f3c\u539f\u51fd\u6570\uff0c\u7136\u540e\u7528\u8fd9\u4e2a\u4e8c\u6b21\u51fd\u6570\u7684\u6781\u5c0f\u503c\u70b9\u4f5c\u4e3a\u539f\u51fd\u6570\u7684\u4e0b\u4e00\u4e2a\u8fed\u4ee3\u70b9\u3002 \u57fa\u4e8e\u5f53\u524d\u8fed\u4ee3\u70b9\u7684\u68af\u5ea6\u4fe1\u606f\u8fdb\u884c\u641c\u7d22\u65b9\u5411\u7684\u9009\u62e9\u7684\uff0c\u725b\u987f\u6cd5\u662f\u901a\u8fc7Hessian\u77e9\u9635\u5728\u68af\u5ea6\u4e0a\u8fdb\u884c\u7ebf\u6027\u53d8\u6362\u5f97\u5230\u641c\u7d22\u65b9\u5411</li> </ul> </li> </ul>"},{"location":"math/optimization/linearSearch/#_4","title":"\u6536\u655b","text":"<p>fast local convergence \u5feb\u901f\u7684\u5c40\u90e8\u6536\u655b  + Quadratic convergence \u4e8c\u9636\u6536\u655b\u6027 \\(\\iff\\) \u725b\u987f\u6cd5\u9760\u8fd1\u6700\u4f18\u70b9\u65f6\u662f\u4e8c\u6b21\u6536\u655b\u7684</p> <p>\\(\\begin{cases}g\\in C^2(\\red{\\R})\\\\g(x^*)=0\\\\g\u2019(x^*) \u22600. \\end{cases}\\implies\\exist \\varepsilon&gt;0, \\vert x^0-x^* \\vert&lt;\\varepsilon.\\) And with Newton\u2019s iterate: \\(x^{k+1}=x^k-\\cfrac{g(x^{k})} {g'(x^{k+1})}\\)is well defined. \\(\\(\\implies\\exist M&gt;0, \\vert x^{k+1}-x^k\\vert\u2264M\\Vert x^k-x^*\\Vert_2\\)\\)</p> <p>\u3010\u8bf4\u4eba\u8bdd\u3011\u5c31\u662f\u8bf4\u5982\u679c \\(x^0\\) \u9009\u7684\u597d\uff0c\u90a3\u4e48\u725b\u987f\u6cd5\u5f88\u597d\u7528\uff0c\u6536\u655b\u901f\u5ea6\u5f88\u5feb\uff0c\u6bcf\u6b21\u8fed\u4ee3\u4e4b\u540e\uff0c\u5982\u679c \\(x^0\\) \u7684\u521d\u59cb\u5316\u8db3\u591f\u63a5\u8fd1\u4e00\u4e2a\u597d\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u90a3\u4e48\u725b\u987f\u65b9\u6cd5\u7684\u5b9a\u4e49\u5f88\u597d\uff0c\u6536\u655b\u901f\u5ea6\u4e5f\u975e\u5e38\u5feb\uff1a\u6bcf\u6b21\u8fed\u4ee3\u7684\u6b63\u786e\u6570\u5b57\u6570\u91cf\u5927\u7ea6\u7ffb\u4e00\u756a\u3002\uff08\u751a\u81f3\u6b65\u957f\u90fd\u4e0d\u9700\u8981\u786e\u5b9a\uff09\u3002\u6240\u4ee5\u725b\u987f\u6cd5\u5bf9\u51fd\u6570\u5728\u8fed\u4ee3\u70b9\u5904\u7684\u4fe1\u606f\u5229\u7528\u66f4\u52a0\u5145\u5206\uff0c\u76f4\u89c2\u6765\u770b\uff0c\u76f8\u6bd4\u4e8e\u68af\u5ea6\u4e0b\u964d\u6cd5\uff0c\u51fd\u6570\u8db3\u591f\u6b63\u5219\u7684\u60c5\u51b5\u4e0b\u725b\u987f\u6cd5\u8fed\u4ee3\u5f97\u66f4\u52a0\u51c6\u786e\uff0c\u6536\u655b\u901f\u7387\u4e5f\u4f1a\u66f4\u5feb\u3002</p> <p>\u5f53x\u5728\u4ee5 \\(x^*\\) \u4e3a\u539f\u70b9\uff0c\\(\\varepsilon\\) \u4e3a\u533a\u95f4\u7684\u90bb\u57df\u5185\u8fdb\u884c\u8fed\u4ee3\uff0c\u6240\u6709\u8fed\u4ee3\u8fc7\u6765\u7684 \\(x^k\\) \u90fd\u4ee5\u4e8c\u6b21\u6536\u655b\u7684\u901f\u5ea6\u6536\u655b\u4e8e \\(x^*\\)\u3010\u5c40\u90e8\u306e\u4e8c\u6b21\u306e\u6536\u655b\u3011\uff0c\u5176\u4e2d\\(M=\\frac{\\tau}{2\\delta}\\)</p>"},{"location":"math/optimization/linearSearch/#_5","title":"\u5931\u6548","text":"<ol> <li>\\(x^0\\)\u9009\u7684\u4e0d\u597d\uff0c\u79bb\\(x^*\\)\u5f88\u8fdc\uff0c\\(\\exist x^k\\in(x^0,x^*),g'(x^k)=0\\)\uff0c\u51e0\u4f55\u4e0a\u6ca1\u6709\u5347\u964d\u7684\u7a7a\u95f4\uff0c\u8fd0\u7b97\u4e0a\u5206\u6bcd\u4e3a0\u5931\u6548\uff08\u66f4\u8fdc\u4e86\uff09</li> <li>due to cycling</li> </ol>"},{"location":"math/optimization/linearSearch/#descent-direction","title":"\u5728 Descent Direction \u4e0a\u7684\u5e94\u7528","text":"<p>\u76ee\u6807\uff1a\\(\\red{\\text{\u65b0}\\cdot g(x) = \\nabla f(x^*)=0}\\)</p> <p>\\(\\exist x^{k+1}, \\nabla f(x^{k+1})=0 \\implies \\nabla f(x)=\\nabla f(x^k)+\\nabla^2f(x^{k})(x-x^k)\\)</p> <p>\u8fed\u4ee3\u65b9\u7a0b\uff1a</p> <p>\\(\\(\\begin{align*} g(x^*)=g(x^{k})+ \\nabla g(x^k)^T\\cdot (x^*-x^k)=0\\tag{1}\\\\x^*=x^k-\\cfrac{g(x^k)}{g'(x^k)}\\tag{2}\\end{align*}\\\\\\Downarrow\\)\\) \\(\\(\\begin{align*} \\nabla f(x^*)=\\nabla f(x^{k})+ \\nabla^2 f(x^k)^T\\cdot (x^*-x^k)=0\\tag{3}\\\\x^*=x^k-\\cfrac{\\nabla f(x^k)}{\\nabla^2f(x^k)}\\tag{4}\\end{align*}\\)\\) \u7ecf\u5178\u725b\u987f\u6cd5: \\(\\(d^k=-\\cfrac{\\nabla f(x^k)}{\\nabla^2f(x^k)}, \\alpha\\equiv1\\)\\)</p> <p>\u8981\u6c42\uff1a</p> <ol> <li>\\(\\forall k,\\nabla^2f(x^k)\\)\u53ef\u9006\\(\\iff  \\in\\text{sigular \u975e\u5947\u5f02\u77e9\u9635}\\) \u4e8c\u9636\u53ef\u5fae\u51fd\u6570</li> <li>\u8ba1\u7b97\\(\\cfrac{\\nabla f(x^k)}{\\nabla^2f(x^k)}\\) \u7b80\u5355</li> </ol> <p>\\(\\text{ For k=0,1,2\u2026,}\\text{ update }x^{k+1}=x^k-\\cfrac{\\nabla f(x^k)}{\\nabla^2f(x^k)}\\). \u4e0d\u8981\u53bb\u6c42\u89e3\\((\\nabla^2f)^{-1}\\)\u7136\u540e\u518d\u4e58\uff0c\u800c\u662f\u628a\\(d=\\cfrac{\\nabla f(x^k)}{\\nabla^2f(x^k)}\\)\uff0c\u89e3\\(\\nabla^2f(x^k)d=\\nabla f(x^k)\\)</p> <p>\u2b50 \u725b\u987f\u6cd5\u4e5f\u53ea\u662f\u627e\u5230\u4e00\u9636\u5bfc\u4e3a0\uff0c\u4e5f\u5c31\u662f\u8bf4\u671d\u7740\u6781\u503c\u7684\\(d^k\\)\uff0c\u4e0d\u4e00\u5b9a\u662f\u51fd\u6570\u503c\u7684\u4e0b\u964d\u65b9\u5411\uff0c\u8fd8\u8981verify \u901a\u8fc7\\(\\nabla^2 f(x^*)\\)\u53bb\u9a8c\u8bc1\\(X=x^*\\)\u662f\u5426local minimizer \u2b50 \u53ef\u4ee5\u7528\u66f4\u5c11\u7684\u8fed\u4ee3\u6b21\u6570\u5927\u8e0f\u6b65\u5730\u524d\u8fdb\uff0c\u5e76\u4e14\u524d\u8fdb\u7684\u65b9\u5411\u4e5f\u66f4\u8d8b\u5411\u4e8e\u51fd\u6570\u7684\u5168\u5c40\u6700\u4f18\u89e3\uff08\u5373\u6700\u503c\u800c\u975e\u6781\u503c\u70b9\uff09\uff0c\u540c\u65f6\u4e5f\u80fd\u591f\u6446\u8131\u4e0a\u9762\u68af\u5ea6\u4e0b\u964d\u6cd5\u4e2d\u786e\u5b9a\u03b1\u7684\u75db\u82e6</p> <p>Here we discuss just the local rate-of-convergence properties of Newton\u2019s method. We know that for all x in the vicinity of a solution point x\u2217 such that\u22072 f(x\u2217) is positive de\ufb01nite, the Hessian \u22072 f(x) will also be positive de\ufb01nite. Newton\u2019s method will be well de\ufb01ned in this region and will converge quadratically, provided that the step lengths \u03b1k are eventually always 1.</p>"},{"location":"math/optimization/linearSearch/#_6","title":"\u7f3a\u70b9","text":"<ol> <li>\u6bcf\u4e00\u6b65\u8fed\u4ee3\u9700\u8981\u6c42\u89e3\u4e00\u4e2a\u00a0\\(n\\)\u00a0\u7ef4\u7ebf\u6027\u65b9\u7a0b\u7ec4\uff0c\u8fd9\u5bfc\u81f4\u5728\u9ad8\u7ef4\u95ee\u9898\u4e2d\u8ba1\u7b97\u91cf\u5f88\u5927.\u6d77\u745f\u77e9\u9635\u00a0\\(\\nabla^2\u00a0f\u00a0(x^k\u00a0)\\)\u00a0\u65e2\u4e0d\u5bb9\u6613\u8ba1\u7b97\u53c8\u4e0d\u5bb9\u6613\u50a8\u5b58.</li> <li>\\(\\nabla^2 f (x^k )\\)\u00a0\u4e0d\u6b63\u5b9a\u65f6\uff0c\u7531\u725b\u987f\u65b9\u7a0b\u7ed9\u51fa\u7684\u89e3\u00a0dk\u00a0\u7684\u6027\u8d28\u901a\u5e38\u6bd4\u8f83\u5dee.\u4f8b\u5982\u53ef\u4ee5\u9a8c\u8bc1\u5f53\u6d77\u745f\u77e9\u9635\u6b63\u5b9a\u65f6\uff0cdk\u00a0\u662f\u4e00\u4e2a\u4e0b\u964d\u65b9\u5411\uff0c\u800c\u5728\u5176\u4ed6\u60c5\u51b5\u4e0b\u00a0dk\u00a0\u4e0d\u4e00\u5b9a\u4e3a\u4e0b\u964d\u65b9\u5411.</li> <li>We need to assume \ud835\udc53 to be convex to guarantee the direction is a descent direction.</li> <li> <p>Newton\u2019s method only converges locally, even for strongly convex functions.</p> </li> <li> <p>advantage:</p> </li> <li> <p>Newton\u2019s method enjoys a local quadratic convergence rate under some assumptions: fast local convergence \u5feb\u901f\u7684\u5c40\u90e8\u6536\u655b  + Quadratic convergence \u4e8c\u9636\u6536\u655b\u6027 \\(\\iff\\) \u725b\u987f\u6cd5\u9760\u8fd1\u6700\u4f18\u70b9\u65f6\u662f\u4e8c\u6b21\u6536\u655b\u7684.\u5f53x\u5728\u4ee5\\(x^*\\)\u4e3a\u539f\u70b9\uff0c\\(\\varepsilon\\)\u4e3a\u533a\u95f4\u7684\u90bb\u57df\u5185\u8fdb\u884c\u8fed\u4ee3\uff0c\u6240\u6709\u8fed\u4ee3\u8fc7\u6765\u7684\\(x^k\\)\u90fd\u4ee5\u4e8c\u6b21\u6536\u655b\u7684\u901f\u5ea6\u6536\u655b\u4e8e\\(x^*\\)\u3010\u5c40\u90e8\u306e\u4e8c\u6b21\u306e\u6536\u655b\u3011 \\(\\exist M&gt;0 ,\\vert \\theta^{k+1}-x^*\\vert\u2264M\\Vert x^k-x^*\\Vert^2\\)</p> </li> </ol> <p></p> <p>If the current iteration achieves an accuracy of the order \ud835\udfcf\ud835\udfce^-\ud835\udfd1, we can expect an accuracy of the order \ud835\udfcf\ud835\udfce^-\ud835\udfd4 for the next iteration!!!</p>"},{"location":"math/optimization/linearSearch/#conjugate-gradient-method","title":"Conjugate gradient method \u5171\u8f6d\u68af\u5ea6\u6cd5","text":"<p>Flops per iteration is\u00a0\\(O(n^2)\\); It converges in\u00a0at most\u00a0n\u00a0steps; It keeps track of\u00a0O(1)\u00a0vectors of dimension\u00a0n\u00a0per iteration.</p> <p>idea: Modify the steepest descent direction to fit the\u00a0(ellipse) geometry.</p> <p>Projection onto v. \\(u\\in\\R^n,v\\in\\R^n\\setminus\\{0\\}\\). The projection of u onto v \\(\\text{proj}_v(u):=w:=\\cfrac{u^Tv}{\\Vert v\\Vert_2^2}v\\) \u4ece\u51e0\u4f55\u7684\u89d2\u5ea6\uff1a\\(\\Vert w\\Vert_2=\\Vert u\\Vert_2\\cos\\theta=\\Vert u\\Vert_2\\cfrac{u^Tv}{\\Vert u\\Vert_2\\Vert v\\Vert_2}=\\cfrac{u^Tv}{\\Vert v\\Vert_2}\\implies\\) Unit vector along w is \\(\\cfrac{v}{\\Vert v\\Vert_2}\\)</p> <p>Gram-Schmidt process. Given a set of linearly independent vectors \\(\\{v^0,...,v^k\\} \\subset\\R^n, w^0\\xlongequal{SET} v^0.\\) \\(\\forall j = 1,...,k, w^k=v^k-\\sum\\limits_{j=0}^{k-1}\\cfrac{{(v^k)}^Tw^j}{\\Vert w^j\\Vert_2^2}w^j, \\begin{cases}\\forall i,w^i\\ne 0\\\\\\forall i\\ne j,{(w^i)}^Tw^j=0\\end{cases}\\\\\\implies\\text{Span}\\{v^0,...,v^k\\}=\\text{Span}\\{w^0,...,w^i\\}\\)</p> <p>Generalized Gram-Schmidt process. Given \\(A\\in\\R^n,A\\succ0\\) and a set of linearly independent vectors \\(\\{v^0,...,v^k\\} \\subset\\R^n, w^0\\xlongequal{SET} v^0.\\) \\(\\forall j = 1,...,k, w^k=v^k-\\sum\\limits_{j=0}^{k-1}\\cfrac{{(v^k)}^TAw^j}{{(w^j)}^TA w^j}w^j, \\begin{cases}\\forall i,w^i\\ne 0\\\\\\forall i\\ne j,{(w^i)}^TAw^j=0\\end{cases}\\\\\\implies\\text{Span}\\{v^0,...,v^k\\}=\\text{Span}\\{w^0,...,w^i\\}\\)</p>"},{"location":"math/optimization/linearSearch/#conjugate-gradient-method-conceptual-version","title":"Conjugate gradient method: Conceptual version","text":"<p>Start at \\(x^0\\in\\R^n\\)\u00a0and \\(d^0 =-\\nabla f(x^0)=b-Ax^0\\).</p> <p>For each\u00a0k\u00a0=\u00a00,1,2,...,</p> <ul> <li>If\u00a0\\(d^k\u00a0=\u00a00\\), terminate.</li> <li>Pick\u00a0\\(\\alpha_k\\text{ s.t. }\\alpha_k\\in\\min\\{f(x^k +\\alpha d^k): \u03b1\\ge0\\}\\).</li> <li>\\(x^{k+1}\\xlongequal{SET}x^k +\u03b1_kd^k, d^{k+1} = -\\nabla f(x^{k+1})-\\blue{\\sum\\limits_{j=0}^k\\cfrac{[-\\nabla f(x^{k+1})]^T Ad^j}{ (d^j)^TAd^j}}\\)</li> </ul>"},{"location":"math/optimization/linearSearch/#conjugate-gradient-method-formal-version","title":"Conjugate gradient method: Formal version","text":"<p>Start at \\(x^0\\in\\R^n\\)\u00a0and \\(d^0 =-\\nabla f(x^0)=b-Ax^0\\).</p> <p>For each\u00a0k\u00a0=\u00a00,1,2,...,</p> <ul> <li>If\u00a0\\(d^k\u00a0=\u00a00\\), terminate.</li> <li>Pick\u00a0\\(\\alpha_k\\text{ s.t. }\\alpha_k\\in\\min\\{f(x^k +\\alpha d^k): \\alpha\\ge0\\}\\).</li> <li>\\(x^{k+1}\\xlongequal{SET}x^k +\\alpha_kd^k, d^{k+1} = -\\nabla f(x^{k+1})-\\blue{\\cfrac{\\Vert\\nabla f(x^{k+1})\\Vert_2^2}{\\Vert\\nabla f(x^k)\\Vert_2^2}d^k}\\)</li> </ul>"},{"location":"math/optimization/linearSearch/#conjugate-gradient-method-actual-version","title":"Conjugate gradient method: Actual version","text":"<p>\u8fed\u4ee3\u8fc7\u7a0b\uff1a</p> <p>Start at \\(x^0\\in\\R^n\\)\u00a0and \\(\\blue{r^0}=d^0 =-\\nabla f(x^0)=b-Ax^0\\).</p> <p>For each\u00a0k\u00a0=\u00a00,1,2,...,</p> <ul> <li>If\u00a0\\(\\Vert d^k\\Vert \\blue{\\text{ is below a tolerance}}\\), terminate.</li> <li>\\(\u03b1_k=\\cfrac{(r^k)^Tr^k}{(d^k)^TAd^k}\\:,\\:x^{k+1}=x^k+\\alpha_kd^k\\:,\\:r^{k+1}=r^k-\\alpha_kAd^k\\qquad\\text{(excat line search)}\\).</li> <li>\\(\\beta_{k} =\\cfrac{(r^{k+1})^Tr^{k+1}}{(r^k)^Tr^k}\\:,\\:d^{k+1}=r^{k+1}+\\beta_kd^k\\qquad\\text{Update} d^{k+1}\\)</li> </ul> <p>\u4f18\u70b9:</p> <ul> <li>One matrix-vector multiplication per iteration if\u00a0\\(Ad^k\\)\u00a0is saved.</li> <li>Keeping track of\u00a0four vectors,\u00a0\\(x^k, r^k, d^k, Ad^k\\)\u00a0saved.</li> </ul> <p>Newton-CG\u554a\uff0c\u5176\u5b9e\u633a\u7b80\u5355\u7684\u3002\u4f20\u7edf\u7684\u725b\u987f\u6cd5\u662f\u6bcf\u4e00\u6b21\u8fed\u4ee3\u90fd\u8981\u6c42Hessian\u77e9\u9635\u7684\u9006\uff0c\u8fd9\u4e2a\u590d\u6742\u5ea6\u5c31\u5f88\u9ad8\uff0c\u4e3a\u4e86\u907f\u514d\u6c42\u77e9\u9635\u7684\u9006\uff0cNewton-CG\u5c31\u7528CG\u5171\u8f6d\u68af\u5ea6\u6cd5\u6765\u6c42\u89e3\u7ebf\u6027\u65b9\u7a0b\u7ec4\uff0c\u4ece\u800c\u907f\u514d\u4e86\u6c42\u77e9\u9635\u9006\u3002</p>"},{"location":"math/optimization/linearSearch/#truncated-newtons-method-hessian-free-optimization","title":"Truncated Newton\u2019s method (Hessian-Free Optimization)\u4fee\u6b63\u725b\u987f\u6cd5","text":"<p>Projection onto \\(S_+^n\\). \\(A\\in S^n,A = UDU^T\\) be its eigenvalue decomposition. \\(A_+ := UD_+U^T\\) \\(D_+\\) is the diagonal matrix with \\((d_+)_{ii}=\\max\\{d_{ii},0\\}, \\forall i.\\) \\(A_+\\)  is the unique solution of $ \\min\\Vert Y-A\\Vert_F \\text{ s.t.}Y\\succeq0$</p>"},{"location":"math/optimization/linearSearch/#_7","title":"\u5b9a\u4e49","text":"<ol> <li>Pick \\(\\sigma\\in(0,1), \\beta\\in(0,1), \\overline{\\alpha}_k\\equiv1\\), a small  \\(\\eta&gt;0\\) and a huge  \\(M &gt; 0\\). Initialize at \\(x^0 \\in\\R^n\\)</li> <li>For \\(k = 0,1,2,...,\\) <ol> <li>let \\(UDU^T\\) be an eigenvalue decomposition of \\(\\nabla^2f(x^k).\\)</li> <li>Let \\(\\varLambda\\) be diagonal with \\(\\lambda_{ii} = \\max\\{\\min\\{M,d_{ii}\\},\\eta\\} \\qquad\\text{(Project } d_{ii} \\text{ on }[\\eta,M])\\) </li> <li>Set \\(D^k \\coloneqq U\\varLambda U^T\\) and \\(d^k\\coloneqq -D^k\\nabla f(x^k).\\).</li> <li>Update \\(x^{k+1}=x^k+\\alpha^kd^k\\\\\\qquad \\alpha^k\\text{ is obtained via the Armijo line search by backtracking }\\)</li> </ol> </li> </ol> <p>Let \\(f\\in C^2(\\R^n)\\) with \\(\\inf f &gt; 1\\) and let \\(\\{x^k\\}\\) be generated by the truncated Newton\u2019s method. Then any accumulation point of \\(\\{x^k\\}\\) is a stationary point of f.</p>"},{"location":"math/optimization/linearSearch/#computational-concerns","title":"Computational concerns","text":""},{"location":"math/optimization/linearSearch/#_8","title":"\u62df\u725b\u987f\u7c7b\u7b97\u6cd5","text":"<p>\u5bf9\u4e8e\u5927\u89c4\u6a21\u95ee\u9898\uff0c\u51fd\u6570\u7684\u6d77\u745f\u77e9\u9635\u8ba1\u7b97\u4ee3\u4ef7\u7279\u522b\u5927\u6216\u8005\u96be\u4ee5\u5f97\u5230\uff0c\u5373\u4fbf\u5f97\u5230\u6d77\u745f\u77e9\u9635\u6211\u4eec\u8fd8\u9700\u8981\u6c42\u89e3\u4e00\u4e2a\u5927\u89c4\u6a21\u7ebf\u6027\u65b9\u7a0b\u7ec4. \u5b83\u80fd\u591f\u5728\u6bcf\u4e00\u6b65\u4ee5\u8f83\u5c0f\u7684\u8ba1\u7b97\u4ee3\u4ef7\u751f\u6210\u8fd1\u4f3c\u77e9\u9635\uff0c\u5e76\u4e14\u4f7f\u7528\u8fd1\u4f3c\u77e9\u9635\u4ee3\u66ff\u6d77\u745f\u77e9\u9635\u800c\u4ea7\u751f\u7684\u8fed\u4ee3\u5e8f\u5217\u4ecd\u5177\u6709\u8d85\u7ebf\u6027\u6536\u655b\u7684\u6027\u8d28. \u4e0d\u8ba1\u7b97\u6d77\u745f\u77e9\u9635\u00a0\\(\u2207^2\u00a0f\u00a0(x)\\)\uff0c\u800c\u662f\u6784\u9020\u5176\u8fd1\u4f3c\u77e9\u9635 \\(B^k\\)\u00a0\u6216\u5176\u9006\u7684\u8fd1\u4f3c\u77e9\u9635 \\(H^k\\)</p>"},{"location":"math/optimization/linearSearch/#basic-idea-secant-equations","title":"Basic idea: Secant equations","text":"<ul> <li> <p>\u601d\u8def</p> <p>\u76ee\u7684\uff1a\\(g(x)=0\uff0cg\\in C^1(\\R)\\)</p> <p>Taylor Formula. \\(g(x^{k+1})=g(x^{k})+\\nabla g(x^k)(x^{k+1}-x^k)=0\\) \\(\\implies x^{k+1}=x^k-\\cfrac{g(x^k)}{\\nabla g(x^k)}\\)</p> <p>\u4f46\u5f53\u4e00\u9636\u5bfc\\(\\nabla g(x)\\)\u592a\u96be\u6c42\uff0c\u6211\u4eec\u5c31\u60f3\u5230\u4e86\u5272\u7ebf\u65b9\u7a0b Secant equation\u3002Use finite difference to approximate \\(\\nabla g(x)\\)</p> <p>Secant equations. \\(\\nabla g(x^k)\\approx\\cfrac{g(x^k)-g(x^{k-1})}{x^k-x^{k-1}}\\) \\(\\implies x^{k+1}=x^k-g(x^k)\\cfrac{x^k-x^{k-1}}{g(x^k)-g(x^{k-1})}\\)</p> </li> <li> <p>Notes:</p> <ol> <li>\u8fd9\u91cc\u540c\u65f6\u6709k+1\uff0ck\uff0ck-1. initialized at \\(x^0,x^{-1},g(x^0)\u2260g(x^{-1})\\)</li> <li>The local convergence rate of the\u00a0secant method\u00a0is typically slower than Newton\u2019s method. However, the\u00a0computational cost per iteration\u00a0can be smaller when\u00a0\\(g'\\)\u00a0is hard to compute compared with\u00a0g</li> </ol> </li> </ul> <p>Find the square root of 2 using the secant method, starting at\u00a0\\(x^{-1}\u00a0=\u00a01.4,\u00a0x^0\u00a0=\u00a01.5\\), up to\u00a04 decimal places.</p>"},{"location":"math/optimization/linearSearch/#descent-direction_1","title":"\u5728 descent direction \u4e0a\u7684\u5e94\u7528","text":"<p>\u76ee\u7684\uff1a\\(\\nabla f(x)=0\\)</p> <p>same ideas: \\(\\nabla g(x^k)(x^k-x^{k-1})\\approx g(x^k)-g(x^{k-1})\\Downarrow\\) \\(\\(\\nabla^2f(x^{k+1})(x^{k+1}-x^k)\\approx\\nabla f(x^{k+1})-\\nabla f(x^k)\\)\\)</p> <p>Notation: \\(s^k:=x^{k+1}-x^k,\\space y^k=\\nabla f(x^{k+1})-\\nabla f(x^k)\\implies \\nabla^2f(x^{k+1})s^k=y^k\\)</p> <p>\u6210\u529f\u7684\u5173\u952e\uff1a \u6211\u4eec\u80fd\u591f\u8fde\u7eed\u4e0d\u65ad\u5730\u6784\u9020\u77e9\u9635\\(\\begin{cases}\\text{Method 1: }B^{k+1}\\approx \\nabla^2f(x^{k+1})\\\\\\text{Method 2 }H^{k+1}\\approx \\cfrac{1}{\\nabla^2f(x^{k+1})}\\end{cases}\\) \u53bb\u62df\u5408\u6d77\u585e\u77e9\u9635\uff0c\u4f7f\u5f97\\(\\begin{cases}  B^{k+1}s^k=y^k \\\\H^{k+1}y^k=s^k\\end{cases}\\), \u56e0\u4e3a\u6211\u4eec\u662f\u8981\u8fed\u4ee3\u7684\uff0c\u6240\u4ee5\u5c31\u662f\u80fd\u8fde\u7eed\u751f\u6210\u8fed\u4ee3</p> <p>\u95ee\u9898\uff1a\u600e\u4e48\u8fed\u4ee3\uff0c\u8fed\u4ee3\u6709\u4ec0\u4e48\u8981\u6c42?</p> <ol> <li>Initialize\u00a0\\(B^0\\)\u00a0(or\u00a0\\(*H^0*\\)) at a\u00a0positive definite matrix.    proposition of BFGS. \\(\\begin{cases}H_k\\succ0\\\\{y^k}^Ts^k&gt;0\\\\H_{k+1}\\text{ is given by BFGS update}\\end{cases}\\implies H_{k+1}\\succ 0.\\)    Same for B</li> <li>Since\u00a0\\(B^0\\)\u00a0and\u00a0\\(H^0\\)\u00a0were\u00a0symmetric\u00a0to start with, by induction, all\u00a0\\(B^k\\)and\u00a0\\(H^k\\)\u00a0are\u00a0symmetric.</li> <li> <p>Popular update formula</p> </li> <li> <p>Note:</p> <ol> <li>DFP and BFGS are rank-2 updates, while SR1 is rank-1 update.</li> <li>In practice, BFGS usually performs better.</li> </ol> </li> <li>Verify the secant equation for BFGS.</li> </ol>"},{"location":"math/optimization/linearSearch/#quasi-newton-method","title":"Quasi-Newton method","text":"<p>Given \\(f\\in C^1(\\R^n).\\)</p> <p>Initialize at \\(x^0\\in\\R^n\\) and \\(B_0,H_0\\succ 0\\), is symmetric and positive definite</p>"},{"location":"math/optimization/linearSearch/#quasi-newton-based-on-b_k","title":"Quasi-Newton based on \\(B_k\\)","text":"<p>For \\(k = 0,1,2,...\\) </p> <ol> <li>Find \\(d^k =-B_k^{-1}\\nabla f(x^k).\\)</li> <li>Update \\(x^{k+1} = x^k +d^k\\times 1\\),</li> <li>Set \\(y^k =\\nabla f(x^{k+1})-\\nabla f(x^k)\\)  and \\(s^k = x^{k+1}-x^k\\).</li> <li>Compute \\(B_{k+1}\\) by Popular update formula</li> </ol>"},{"location":"math/optimization/linearSearch/#bfgs","title":"BFGS","text":""},{"location":"math/optimization/linearSearch/#quasi-newton-based-on-h_k","title":"Quasi-Newton based on \\(H_k\\)","text":"<p>For \\(k = 0,1,2,...\\) </p> <ol> <li>Find \\(d^k =-H_k\\nabla f(x^k).\\)</li> <li>Update \\(x^{k+1} = x^k +d^k\\times 1\\),</li> <li>Set \\(y^k =\\nabla f(x^{k+1})-\\nabla f(x^k)\\)  and \\(s^k = x^{k+1}-x^k\\).</li> <li>Compute \\(H_{k+1}\\) by Popular update formula</li> </ol>"},{"location":"math/optimization/linearSearch/#stepsize-alpha_k","title":"StepSize \\(\\alpha_k\\)","text":"<p>\\(\\text{ given } x^{k} \\text{ and }d^k\\)  \u53d8\u6210\u4e86\u5355\u53d8\u91cf\u4f18\u5316\uff1a\\(\\alpha^k =\\min\\limits_{\\alpha&gt;0}\\varphi(\\alpha) =f(x^k+\\alpha d^k)\\).\u5b83\u662f\u76ee\u6807\u51fd\u6570\u00a0f\u00a0(x)\u00a0\u5728\u5c04\u7ebf\u00a0\\(\\{x^k + \u03b1d^k:\u03b1 &gt; 0\\}\\) \u4e0a\u7684\u9650\u5236</p> \\[\\alpha^k =\\min\\limits_{\\alpha&gt;0} f(x^k+\\alpha d^k)\\]"},{"location":"math/optimization/linearSearch/#exact-inexact","title":"\u5206\u7c7b: exact &amp; inexact","text":"<p>exact line search strategy. \u7b49\u4e8e\u6c42\u6781\u5c0f\u503c\u70b9\u95ee\u9898\u3002</p> <p>\\(\\nabla\\varphi(\\alpha)=[\\nabla f(x^k+\\alpha d^k)]^Td^k\\xlongequal{SET}0\\implies[\\nabla f_{k+1}]^Td^k=0\\)</p> <p>\u901a\u5e38\u9700\u8981\u5f88\u5927\u8ba1\u7b97\u91cf\uff0c\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u8f83\u5c11\u4f7f\u7528</p> <p>inexact line search strategy\u3002\u5bfb\u627e\u6b65\u957f\\(\\alpha\\)\u7684\u4e00\u4e2a\u533a\u95f4\uff0c\u901a\u8fc7\u9010\u6b65\u8fed\u4ee3\u7684\u65b9\u6cd5\u53bb\u5bfb\u627e\u4ec5\u4ec5\u662f\u6ee1\u8db3\u6761\u4ef6\u7684\u70b9\u3002\u5f53\u641c\u7d22\u7ed3\u675f\u65f6\uff0c\u9700\u8981\u6ee1\u8db3\u8be5\u6b65\u957f\u80fd\u591f\u5bf9\u76ee\u6807\u51fd\u6570\u5e26\u6765\u5145\u5206\u7684\u4e0b\u964d\u3002More practical strategies perform an inexact line search to identify a step length that achieves adequate reductions in f at a minimal cost.</p>"},{"location":"math/optimization/linearSearch/#inexact-line-search-strategy","title":"inexact line search strategy","text":""},{"location":"math/optimization/linearSearch/#termination-conditions","title":"Termination conditions \u7ebf\u641c\u7d22\u51c6\u5219","text":"<p>\u56e0\u4e3a\u8fed\u4ee3\uff1a \\(\\(f(x^k + \u03b1^kd^k) = \\min\\limits_{\u03b1\u22650}f(x^k + \u03b1d^k)\\)\\)</p> <p>\u4e3a\u63d0\u9ad8\u975e\u7cbe\u786e\u7b97\u6cd5\u7684\u641c\u7d22\u6548\u7387\uff0c\u9700\u8981\u786e\u5b9a\u4e00\u4e9btermination conditions \u53bb\u5224\u65ad\u662f\u5426\u8fed\u4ee3\u5230 \\(\\alpha^*\\)\uff0c\u786e\u4fdd\u8fed\u4ee3\u7684\u6536\u655b\u6027\u3002</p>"},{"location":"math/optimization/linearSearch/#sufficient-decrease-condition-armijo-condition","title":"Sufficient Decrease condition (Armijo condition) \u5145\u5206\u4e0b\u964d\u6761\u4ef6","text":"<ul> <li> <p>\u5b9a\u4e49\uff1a</p> \\[\\begin{cases}x\\in \\R^n, d\\in \\R^n\\\\\\alpha&gt;0, c_1\\in(0,1)\\\\f(x^k+\\alpha d^k)\u2264f(x^k)+c_1\\alpha[\\nabla f(x^k)]^Td^k \\end{cases}\\implies \\alpha\\text{ satisifies Armijo rule}\\] <p>\u5176\u4e2d\uff1a\\(d^k\\): descent direction;\\(c_1=10^{-4}\\)is chosen to be quite small</p> <p>alone is not sufficient to ensure that the algorithm makes reasonable progress along the given search direction:</p> <p>\u03b1\u00a0=\u00a00\u00a0\u663e\u7136\u6ee1\u8db3\u6761\u4ef6\uff0c\u800c\u8fd9\u610f\u5473\u7740\u8fed\u4ee3\u5e8f\u5217\u4e2d\u7684\u70b9\u56fa\u5b9a\u4e0d\u53d8\uff0c\u7814\u7a76\u8fd9\u6837\u7684\u6b65\u957f\u662f\u6ca1\u6709\u610f\u4e49\u7684 \u662f the Wolfe conditions \\(1^{st}\\)  condition \u662f the Goldstein conditions \\(2^{nd}\\) inequality \u662f Backtracking line search \u7684\u505c\u6b62\u6807\u51c6stopping criterion\uff0c alone is ok</p> </li> <li> <p>\u5b58\u5728\u6027\u8bc1\u660e:</p> <p>\\(\\alpha \u5b58\u5728 \\iff \\text{Armijo rule is not valid}\\)\uff0c\u9009\u53d6\u7b26\u5408Armijo rule \u786e\u5b9e\u4f1a\u4f7f\u5f97\u51fd\u6570\u503c\u4e0b\u964d</p> <p>Let \\(f\\in C^1(\\R^n), x\\in\\R^n, d\\in\\R^n \\text{ be a descent direction at }x\\). Let \\(\\sigma\\in(0,1)\\). Then there \\(\\exist \\alpha_1 &gt; 0\\) so that \\(\\forall \\alpha\\in[0,\\alpha_1],f(x + \\alpha d)\u2264f(x)+\\alpha\\sigma[\\nabla f(x)]^Td.\\)</p> </li> <li> <p>How to execute Armijo rule in practice?</p> <p>Fix  \\(\\sigma\\in(0,1)\\) and \\(\\beta\\in(0,1)\\). Given  \\(x\\in\\R^n, d\\in\\R^n, \\overline{\\alpha}&gt;0\\). Find the smallest nonnegative integer \\(j = j_0\\) so that</p> <p>\\(\\(f(x +\\overline{\\alpha}\\beta^jd)\u2264 f(x)+\\overline{\\alpha}\\beta^j\\sigma[\\nabla f(x)]^Td\\)\\) normally: \\(\\sigma= 10^{-4}, \\beta=\\cfrac{1}{2}, \\overline{\\alpha}\\beta^{j_0}\\) is the step size</p> <p>Note:</p> <ol> <li>\\(d\\) is a descent direction +  \\(j\\) is suf\ufb01ciently large  \\(\\rightarrow \\beta^j\\) is suf\ufb01ciently small \u2192 Armijo rule satisfied\u3002</li> <li>\u53ef\u8bc1 \\(\\overline{\\alpha}\\beta^j \\text{ is decreasing}\\therefore \\text{it is called backtracking}\\)</li> <li>\\(\\overline{\\alpha}\\)  \u9009\u62e9\u5bf9\u6536\u655b\u6548\u7387\u6765\u8bf4\u5f88\u5173\u952e</li> </ol> </li> <li> <p>Convergence under Armijo rule \\(\\begin{cases}f\\in C^1(\\R^n),\\inf f&gt;-\\infin\\\\     \\{\\overline\\alpha_k\\}\\subset\\R ,0&lt;\\inf\\limits_k\\overline{\\alpha}_k\u2264\\sup\\limits_k\\overline{\\alpha}_k&lt;\\infin\\\\     \\sigma\\in(0,1),\\beta\\in(0,1)\\\\     \\{D_k\\}\\succ 0,     d^k=-D_k\\nabla f(x^k)\\\\     x^k \\text{ is non-stationary}\\\\     x^{k+1} = x^k + \\alpha_kd^k     \\end{cases}\\) \\(\\alpha_k\\) is generated via the Armijo line search by backtracking with $ x = x^k, d = d^k, \\overline\\alpha =\\overline\\alpha_k$ Then any accumulation point of  \\(\\{x^k\\}\\) is a stationary point of  \\(f\\).normally $\\sigma=10^{-4},\\beta=\\frac{1}{2} $</p> <p>for BFGS:</p> <p>\\(\\exist M&gt;0,\\Vert H_k\\Vert_2\\Vert H_k^{-1}\\Vert_2\u2264M,\\forall k\\\\\\qquad\\implies \\lim\\limits_{k\\rightarrow\\infin}\\Vert_2=0\\)</p> <p>\\(\\cos\\theta_k=\\cfrac{{d^k}^TH_k^{-1}d^k}{\\Vert d^k\\Vert_2\\Vert H_k^{-1}d^k\\Vert_2}\\ge\\cfrac{{d^k}^T{H_k}^{-1}d^k}{\\Vert H_k^{-1}\\Vert \\Vert d^k\\Vert_2^2}\\ge\\cfrac{\\lambda_{\\min}(H_k^{-1})}{\\Vert H_k^{-1}\\Vert_2}=\\cfrac{1}{\\lambda_{\\max}(H_k)\\Vert H_k^{-1}\\Vert_2}=\\cfrac{1}{\\Vert H_k^{-1}\\Vert_2\\Vert H_k\\Vert_2}\\ge\\cfrac{1}{M}\\)</p> </li> <li> <p>Sufficient Decrease and Backtracking approach use just the sufficient decrease condition to terminate the line search procedure</p> </li> </ul>"},{"location":"math/optimization/linearSearch/#wolfe-conditions","title":"Wolfe conditions","text":"<p>sufficient decrease condition</p> <ul> <li> <p>\u5b9a\u4e49 \\(1^{st}\\) \uff1asufficient decrease condition\uff1a\\(f(x^k+\\alpha^k d^k)\u2264f(x^k)+c_1\\alpha^k[\\nabla f(x^k)]^Td^k\\) \\(2^{nd}\\) \uff1acurvature condition\uff1a\\(\\nabla f(x^k+\\alpha^kd^k)^Td^k\u2265c_2\\nabla f_k^Td^k\\) with \\(0&lt;c_1&lt;c_2&lt;1\uff0cc_1\\text{ usually }10^{-3},c_2\\text{ usually }0.9\\) \u03c6(\u03b1)\u00a0\u5728\u70b9\u00a0\u03b1\u00a0\u5904\u5207\u7ebf\u7684\u659c\u7387\u4e0d\u80fd\u5c0f\u4e8e\u00a0\u03c6\u2032(0)\u00a0\u7684\u00a0\\(*c_2*\\)\u00a0\u500d</p> </li> <li> <p>curvature condition \\(\\nabla f(x^k+\\alpha^kd^k)^Td^k\u2265c_2\\nabla f_k^Td^k\\\\ \\qquad\\qquad\\parallel\\qquad\\qquad\\qquad\\parallel\\\\\\qquad\\space \\nabla\\varphi(\\alpha^k)\\qquad\\qquad c_2\\nabla\\varphi(0)\\) \u5176\u4e2d\uff1a\\(c_2=0.9\\) in Newton or quasi-Newton method, \\(c_2=0.1\\) in a nonlinear conjugate gradient method</p> </li> <li> <p>Wolfe conditions \u5b58\u5728\u6027\u8bc1\u660e\uff1a\u662f\u6709\u533a\u95f4\u80fd\u6ee1\u8db3 Wolfe conditions</p> </li> <li> <p>The strong Wolfe conditions modify the curvature condition to force \\(\u03b1^k\\) to lie in at least a broad neighborhood of a local minimizer or stationary point of \u03c6.  The only difference with the Wolfe conditions is that we no longer allow the derivative \\(\u03c6\u2032 (\u03b1^k )\\)  to be too positive. \\(1^{st}\\) \uff1asufficient decrease condition\uff1a\\(f(x^k+\\alpha^k d^k)\u2264f(x^k)+c_1\\alpha^k[\\nabla f(x^k)]^Td^k\\) \\(2^{nd}\\) \uff1amodified curvature condition\uff1a\\(\\red{\\vert}\\nabla f(x^k+\\alpha^kd^k)^Td^k\\red{\\vert\u2264} c_2\\red{\\vert}\\nabla f_k^Td^k\\red{\\vert}\\) with \\(0&lt;c_1&lt;c_2&lt;1\\)</p> </li> <li> <p>Convergence under Wolfe conditions Zoutendijk\u2019s theorem. \\(f\\in C^1(\\R^n),\\inf f &gt;-\\infin,x^0\\in\\R^n,\\\\\\{x^k\\} \\text{is a sequence of non-stationary points generated as }x^{k+1}+\\alpha_kd^k, \\\\\\begin{cases}f\\in C^1(\\R^n),\\inf f &gt;-\\infin\\text{ (\u4e0b\u6709\u754c\uff0c\u8fde\u7eed\u53ef\u5fae)}\\\\\\exist\\ell&gt;0,\\Vert \\nabla f(x)-\\nabla f(y)\\Vert_2\\le\\ell\\Vert x-y\\Vert_2\uff0c\\forall x,y\\in\\R^n\\text{ (\u68af\u5ea6\u6ee1\u8db3L-\u5229\u666e\u5e0c\u8328\u8fde\u7eed)}\\\\d^k\\text{ is a descent direction}\\\\\\alpha_k \\text{ satisfies the Wolfe conditions }\\text{(Wolfe )}\\end{cases}\\\\\\qquad\\implies\\sum\\limits_{k=0}^\\infin\\cos^2\\theta_k\\Vert\\nabla f(x^k)\\Vert_2^2&lt;\\infin,\\\\\\qquad\\implies\\exist\\delta, \\text{so that }  \\cos\\theta_k=\\cfrac{-[\\nabla f(x^k)]^Td^k}{\\Vert\\nabla f(x^k)\\Vert_2\\Vert d^k\\Vert_2}\\ge\\delta,\\forall k\\text{(independent of k)}\\) \\(\\Vert\\nabla f(x^*)\\Vert=0 \\rightarrow \\Vert\\nabla f(x^n)\\Vert&lt;\\varepsilon\\)</p> </li> </ul>"},{"location":"math/optimization/linearSearch/#goldstein-conditions","title":"Goldstein conditions \u6761\u4ef6","text":"<ul> <li>\u5b9a\u4e49 \\(f(x^k)+(1-c)\\alpha^k[\\nabla f(x^k)]^Td^k\u2264f(x^k+\\alpha^k d^k)\u2264f(x^k)+c\\alpha^k[\\nabla f(x^k)]^Td^k\\) with \\(0&lt;c&lt;\\cfrac{1}{2}\\) \\(2^{nd}\\) \u2264 \uff1asufficient decrease condition \u5fc5\u987b\u5728\u4e24\u6761\u76f4\u7ebf\u4e4b\u95f4</li> </ul> <p>are often used in Newton-type methods but are not well suited for quasi-Newton methods that maintain a positive definite Hessian approximation</p> <p>Goldstein \u51c6\u5219\u80fd\u591f\u4f7f\u5f97\u51fd\u6570\u503c\u5145\u5206\u4e0b\u964d\uff0c\u4f46\u662f\u5b83\u53ef\u80fd\u907f\u5f00\u4e86\u6700\u4f18\u7684\u51fd\u6570\u503c.</p>"},{"location":"math/optimization/opt/","title":"Optimization \u6700\u4f18\u5316","text":"<p>Optimization finds the \u201cbest\u201d possible solutions from a set of feasible points.</p>"},{"location":"math/optimization/opt/#problem","title":"Problem","text":"<p>An optimization problem takes the form of minimizing (or maximizing) an objective function subject to constraints.</p> <p>$$ \\min f(x)\\text{ s.t.} x\\in\\Omega $$ \\(x\\), decision variables  \u51b3\u7b56\u53d8\u91cf \\(f\\), the objective function  \u76ee\u6807\u51fd\u6570 \\(\\Omega\\), the constraint set / feasible set / feasible region   \u53ef\u884c\u7a7a\u95f4</p> \u51f8\u4f18\u5316 \u65e0\u7ea6\u675f\u51f8\u4f18\u5316 \u7ea6\u675f\u51f8\u4f18\u5316\u95ee\u9898 \u76ee\u6807\u51fd\u6570 \u51f8\u51fd\u6570 \u5b9a\u4e49\u57df \u51f8\u96c6 \u4e0d\u7b49\u5f0f\u7ea6\u675f \u274c \u51f8\u51fd\u6570 \u7b49\u5f0f\u7ea6\u675f\u51fd\u6570 ^ \u4eff\u5c04\u51fd\u6570"},{"location":"math/optimization/opt/#f-objective-function","title":"\\(f\\) objective function","text":"$f(x) = $ Linear \\(w^T x\\) \\(w\\in\\R^d\\) \u7ebf\u6027\u53d8\u6362 Affine,\u4eff\u5c04\u51fd\u6570 \\(w^T x +\\red{b}\\) $ w\\in R^n, b\\in R$\u6700\u9ad8\u6b21\u6570\u4e3a1\u7684\u591a\u9879\u5f0f\u51fd\u6570 Quadratic \u4e8c\u6b21\u51fd\u6570 \\(\\red{\\frac{1}{2}x^TGx}+w^Tx+b\\) \\(G\\in S^{n\\times n},w\\in R^n, b\\in R\\) \\(\\nabla f(x)=Gx+w\\) <p>\\(G\\in S^{n\\times n}\\) in Quadratic func \u4e00\u5b9a\u4f1a\u662f\u5bf9\u79f0</p> <p>\\(x^TGx\\in\\R\\implies (x^TGx)^T=x^TG^Tx=x^TGx\\implies G=G^T\\)</p>"},{"location":"math/optimization/opt/#constraints","title":"Constraints","text":"constraints f Unconstrained \\(\\Omega\\in\\R^n\\) Equality sphere \u7403\u9762 \\(x_1^2+\\dots+x_n^2=1\\) ^ hyperplane \u8d85\u5e73\u9762 \\(x_1+\\dots+x_n=1\\) ^ paraboloid \u629b\u7269\u9762 \\(x\\in R^3:x_1^2+x_2^2=x_3\\) Inequality ball \u7403\u4f53 \\(x_1^2+\\dots+x_n^2\u22641\\) ^ half-space \u534a\u7a7a\u95f4 \\(x_1+\\dots+x_n\u22640\\) \\(x\\in R^3:x_1^2+x_2^2\u2264x_3\\) Box \\(\\ell\u2264x\u2264u\\), \\(\\ell\\in R^n\\), \\(u \\in R^n\\)\\(\\ell_i\u2264x_i\u2264u_i,\\forall i\\) \u6309\u5206\u91cf\u9010\u4f4d(component-wise)"},{"location":"math/optimization/opt/#minimizer","title":"Minimizer","text":"<p>\u662f\u5426\u5b58\u5728\u6700\u4f18\u503c</p> <p>\u51fd\u6570 \\(f\\)\u00a0\u7684\u6700\u503c\u4e0d\u4e00\u5b9a\u5b58\u5728\uff0c\u4f46\u662f\u5176\u4e0b(\u4e0a)\u786e\u754c\\(\\inf\u00a0f(\\sup\u00a0f)\\) \u603b\u662f\u5b58\u5728\u7684\u3002 \\(\\(f^*=\\begin{cases}\\min(\\max) f &amp;\\text{\u5b58\u5728}\\\\\\inf(\\sup)f&amp;\\text{\u4e0d\u5b58\u5728}  \\end{cases}\\)\\)</p> <p>Existence of Infimum:  \\(\\(\\quad\\Omega\\subset\\R^n\\text{, a nonempty compact set},f\\text{ be continuous on }\\Omega \\\\ \\implies f\\text{ can achieve its infimum values over }\\Omega\\\\ \\text{i.e. } \\exist x^*\\in\\Omega\\text{ s.t. }f(x^*)=\\inf\\{f(x):x\\in\\Omega\\}\\)\\)</p> <p>In general, finding global minimizers for f is NP-hard. In order to set a modest goal, we look at more properties of local minimizers.</p> <ul> <li>\\(x^*\\) is a global minimizer\uff0c\u5168\u5c40\u6700\u5c0f of \\(f\\impliedby f(x)\u2265f(x^*), \\forall x\\in\\R^n\\)</li> <li>\\(x^*\\) is a local minimizer\uff0c\u5c40\u90e8\u6700\u5c0f of \\(f \\impliedby\\exist  \\epsilon&gt;0,f(x)\u2265f(x^*), \\forall x \\in\\{\\Vert x-x^*\\Vert_2&lt;\\epsilon\\}\\)<ul> <li>\\(x^*\\)\u90bb\u57df\uff0c\u90bb\u57df\u5c31\u662f\u5305\u542b\u5b83\u7684\u4e00\u4e2a\u65e0\u7a77\u5c0f\u91cf\u7684\u7403\uff0c\u5728\u90bb\u57df\u7684\u8303\u56f4\u5185</li> <li>\u5982\u679c\u4e25\u683c\u4e0d\u53d6\u7b49\uff0c\u90a3\u4e48\u5c31\u79f0\u5b83\u4e3a\u4e25\u683c\u5c40\u90e8\u6700\u5c0f\u503c</li> </ul> </li> </ul>"},{"location":"math/optimization/opt/#_1","title":"\u89e3\u7684\u6700\u4f18\u6027\u6761\u4ef6","text":"<p>\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5bfb\u6c42\u7684\u662f\u5c40\u90e8\u6700\u4f18.</p> <p>\u7ed9\u51fa\u4e00\u4e2a\u4e00\u9636\u53ef\u5bfc\u4e14\u8fde\u7eed\u7684\u51fd\u6570 \\(f\\in C^1(R^n)\\): 1. \u901a\u8fc7\\(\\nabla f(x*)=0\\)\u627e\u5230\u9a7b\u70b9\\(X=x^*\\) 2. \u901a\u8fc7 \\(\\nabla^2 f(x^*)\\) \u53bb\u9a8c\u8bc1 \\(X=x^*\\) \u662f\u5426local minimizer\uff08Hessian\u77e9\u9635\u597d\u7b97\u7684\u60c5\u51b5\u4e0b</p> \u552f\u4e00\u89e3 \u65e0\u7a77\u89e3\u6216\u65e0\u89e3 \u65b9\u7a0b\u89e3 \u4e0d\u6ee1\u79e9 \u4e0d\u6ee1\u79e9 \u79e9 \\(\\vert A \\vert\u22600\\) \\(\\vert A \\vert=0\\) \\(\\vert A \\vert\\) \u884c\u5217\u5f0f invertible \u53ef\u9006 uninvertible \u4e0d\u53ef\u9006 \u666e\u901a insingular \u975e\u5947\u5f02 singular \u5947\u5f02 \u65b9\u9635 &gt;0 \u22650 \u7279\u5f81\u503c eigenvalue \\(\\in\\) \u5b9e\u5bf9\u79f0\u77e9\u9635 positive definite \u6b63\u5b9a\u7684 positive semi-definite \u534a\u6b63\u5b9a\u7684 ^ <p>\u5047\u8bbe\\(f(x)\\)\u5177\u6709\u4e8c\u9636\u8fde\u7eed\u504f\u5bfc\u6570\uff0c\u82e5\u7b2ck\u6b21\u8fed\u4ee3\u503c\u4e3a\\(x^k\\)\uff0c\u5219\u53ef\u5c06\\(f(x)\\)\\(\u5728x^k\\)\u8fdb\u884c\u4e8c\u9636\u6cf0\u52d2\u5c55\u5f00\uff1a \\(f(x)=f(x^{k})+ \\nabla f(x^k)^T\\cdot (x-x^k)+\\frac{1}{2}(x-x^k)^T\\cdot\\nabla^2f(x^k)\\cdot(x-x^k)\\) \\(\\(\\red{\\nabla f(x^*)=0\\implies x^* \\text{\u662f}f(x)\u7684\u6781\u503c\u70b9(\u9a7b\u70b9)\\\\\\xRightarrow{\\nabla^2f(x^*)\\succ0}x^* \\text{\u662f}f(x)\u7684\u6781\u5c0f\u503c\u70b9}\\)\\)</p> <p>\u4e0b\u9762\u5f00\u59cb\u8bc1\u660e\uff1a</p>"},{"location":"math/optimization/opt/#1st-order-necessary-conditions","title":"1st-order necessary conditions \u4e00\u9636\u5fc5\u8981\u6761\u4ef6","text":"<p>\\(\\(f\\in C^1(\\R^n), x^*\\text{ is a local minimizer of } f\\implies \\nabla f(x^*) = 0\\)\\) \u82e5\\(f(x)\\) \u5728\\(\\R^n\\)\u4e0a\u6709\u4e00\u9636\u8fde\u7eed\u504f\u5bfc\u6570\uff0c\u4e14\\(x^*\\)\u4e3a\u5c40\u90e8\u6700\u4f18\u89e3\uff0c\u5219\u5fc5\u6709\\(\\nabla f(x^*)=0\\)</p> <p>\u4e00\u9636\u5bfc\u7b49\u4e8e0\uff0c\u8bc1\u660e\u7684\u662f\u8be5\u70b9\u662f\u9a7b\u70b9\uff0cstationary point\uff0c\u662f\u6781\u503c\u70b9\uff0c\u4f46\u53ef\u80fd\u662f\u6781\u5c0f\u503c\uff0c\u4e5f\u6709\u53ef\u80fd\u662f\u6781\u5927\u503c</p>"},{"location":"math/optimization/opt/#2nd-order-necessary-conditions","title":"2nd-order necessary conditions \u4e8c\u9636\u5fc5\u8981\u6761\u4ef6","text":"\\[f\\in C^2(\\R^n),x^*\\text{ is a local minimizer of } f\\implies \\nabla^2 f(x^*) \\bold{\\red{\\succeq}} 0\\] <p>\u82e5\\(f(x)\\) \u5728\\(\\R^n\\)\u4e0a\u6709\u4e8c\u9636\u8fde\u7eed\u504f\u5bfc\u6570\uff0c\u4e14\\(x^*\\)\u4e3a\u5c40\u90e8\u6700\u4f18\u89e3\uff0c\u5219\u5fc5\u6709\\(\\nabla^2 f(x^*)\\bold{\\red{\\succeq}} 0\\) \u5373  \\(\\nabla^2 f(x^*)\\) \u662f\u534a\u6b63\u5b9a\u77e9\u9635\uff0cpositive semifinite matrix.</p>"},{"location":"math/optimization/opt/#2nd-order-sufficient-conditions","title":"2nd-order sufficient conditions \u4e8c\u9636\u5145\u5206\u6761\u4ef6","text":"\\[\\begin{cases}f\\in C^2(\\R^n)\\\\ x^*\\text{ is a stationary point of } f\\\\ \\nabla^2 f(x^*) \\red{\\bold{\\succ 0}} \\end{cases}\\implies x^*\\text{ is a local minimizer of } f\\] <p>\u82e5\\(f(x)\\) \u5728\\(\\R^n\\)\u4e0a\u6709\u4e8c\u9636\u8fde\u7eed\u504f\u5bfc\u6570\uff0c\u4e14\\(\\space x^*\\) \u5df2\u7ecf\u662f\u9a7b\u70b9\u4e14\\(\\space \\nabla^2 f(x^*)\\bold{\\red{\\succ}} 0\\)\uff0c\u5219\u5fc5\u6709\\(x^*\\)\u662f\u5c40\u90e8\u6700\u4f18</p> <p>\u5224\u65ad\u5c40\u90e8\u6700\u4f18\u65f6\uff0c\u4e8c\u9636\u5bfc\u4e00\u5b9a\u8981\u662f\u6b63\u5b9a\u77e9\u9635 \\(\\nabla^2f(x^*)\\succ0\\) \\(\\begin{cases}\\nabla f(x^*)=0\\\\\\nabla^2f(x^*)\\succeq0 \\end{cases}\\nRightarrow\\text{local minimizer}\\)</p> <p>(L2.exp2 in AMA505) Consider \\(f(x)=(x_2^2-x_2^4)(x_2^2-\\cfrac{x_1^4}{4})\\) at the stationary point \\((0, 0)\\) . Then for any \\(h \\in\\R^2|\\{0\\}\\), there \\(\\exist t_0 &gt; 0\\) such that \\(f(th) &gt; 0. \\forall t\\in (0, t_0)\\). However, \\((0, 0)\\) is not a local minimizer of \\(f\\)! Note, however, that \\(\\nabla^2f((0,0))=0\\succeq0\\)\u3010limitation\u3011</p> <p>\u662f\u5426local minimizer or local maximizer</p> <ol> <li>\\(\\nabla f(x)=\\begin{bmatrix} \\frac{\\partial f}{\\partial x_1} \\\\\\frac{\\partial f}{\\partial x_2}\\end{bmatrix} \\xlongequal{SET}0 \\implies x^* \\text{ is stationarty point}\\)</li> <li>compute \\(\\nabla^2f(x)= \\begin{bmatrix} \\frac{\\partial^2f}{\\partial x_1\\partial x_1} &amp;\\frac{\\partial^2f}{\\partial x_1\\partial x_2} \\\\\\frac{\\partial^2f}{\\partial x_2\\partial x_1}&amp;\\frac{\\partial^2f}{\\partial x_2\\partial x_2}\\end{bmatrix},\\)</li> <li>Let \\(\\begin{vmatrix}\\nabla^2f(x^*-\\lambda I)\\end{vmatrix}=0,\\nabla^2f(x^*)\\text{ has eigenvalues }\\lambda_1,\\lambda_2\\)</li> <li>\\(\\lambda_1\\lambda_2 \\begin{cases}\\text{ both &gt;}&amp;\\nabla^2f(x^*)\\succ0&amp;x^*\\text{ is local minimizer}\\\\\\text{ both &lt;}&amp;\\nabla^2f(x^*)\\prec 0&amp;x^*\\text{ is local maximizer}\\\\\\text{ &gt; and &lt;}&amp;\\nabla^2f(x^*)\\text{ is indefinite }&amp;x^*\\text{not local mini../maxi\u2026}&amp;\\end{cases}\\)</li> </ol> <p>(Ex. 3 in L1 in AMA505) Compute the gradient and Hessian of the Rosenbrock func:\\(f(x)=100(x_2-x_1^2)^2+(1-x_1)^2\\)\u00a0Show that\u00a0\\(x^*\u00a0=\u00a0[1,1]^T\\) is its only minimizer and the Hessian is positive definite at\u00a0\\(x^*\\).</p> <p>\\(\\nabla f(x)=\\begin{bmatrix}-400(x_2-x_1^2)x_1-2(1-x_1)\\\\200(x_2-x_1^2)\\end{bmatrix}, \\nabla f(\\begin{bmatrix}1\\\\1\\end{bmatrix})=0\\implies\\) stationary point \\(\\nabla^2f(x)=\\begin{bmatrix}-400x_2+1200x_1^2+2&amp;-400x_1\\\\-400x_1&amp;200\\end{bmatrix},\\nabla^2f(\\begin{bmatrix}1\\\\1\\end{bmatrix})=\\begin{bmatrix}802&amp;-400\\\\-400&amp;200\\end{bmatrix}\\) \\(\\begin{cases}\\lambda_1+\\lambda_2=1002\\\\\\lambda_1*\\lambda_2=\\Vert\\nabla^2f\\Vert=400\\end{cases}\\implies\\lambda_1\\gt0,\\lambda_2\\gt0\\implies\\nabla^2f\\succ0\\) obviously, \\(\\forall x, f(x)\\ge0\\implies \\min\\limits_x(f)=0, \\text{with }x_1=1\\) \\(\\implies x_2=x_1=1\\implies \\begin{bmatrix}1//1\\end{bmatrix}\\) is the only one minimizer.</p> <p>(Ex. 4 in L1 in AMA505) Find all the stationary points and determine their nature, if possible.$ f(x)=x_1^4 +x_2^4-4x_1x_2 +2$</p> <p>\\(\\nabla f(x)=\\begin{bmatrix}4x_1^3-4x_2\\\\4x_2^3-4x_1\\end{bmatrix}\\xlongequal{SET}0\\implies x_1=x_2=0,1,-1. \\qquad\\nabla^2f(x)=\\begin{bmatrix}12x_1^2&amp;-4\\\\-4&amp;12x_2^2\\end{bmatrix}\\) \\(\\nabla^2f(\\begin{bmatrix}0\\\\0\\end{bmatrix})=\\begin{bmatrix}0&amp;-4\\\\-4&amp;0\\end{bmatrix}\\begin{cases}\\lambda_1+\\lambda_2=0\\\\\\lambda_1*\\lambda_2=-16\\end{cases}\\implies (4, -4)\\implies\\) (0,0) is not local minimizer or maximizer \\(\\nabla^2f(\\begin{bmatrix}1\\\\1\\end{bmatrix})=\\nabla^2f(\\begin{bmatrix}-1\\\\-1\\end{bmatrix})=\\begin{bmatrix}12&amp;-4\\\\-4&amp;12\\end{bmatrix}\\begin{cases}\\lambda_1+\\lambda_2\\gt0\\\\\\lambda_1*\\lambda_2\\gt0\\end{cases}\\implies \\lambda\\gt0\\implies\\)(1,1),(-1, -1) is local minimizer</p> <p>(T1 in Hw1 in AMA505) Find all the stationary points and determine their nature based on their Hessian, if possible.  \\(f(x)=\\frac{1}{2}\\begin{bmatrix}x_1\\\\x_2\\\\x_3\\end{bmatrix}^T\\begin{bmatrix}3&amp;1&amp;0\\\\1&amp;4&amp;0\\\\0&amp;0&amp;5\\end{bmatrix}\\begin{bmatrix}x_1\\\\x_2\\\\x_3\\end{bmatrix}-4x_1-5x_2-5x_3^3+7\\)</p> <p>\\(A:=\\begin{bmatrix}3&amp;1&amp;0\\\\1&amp;4&amp;0\\\\0&amp;0&amp;5\\end{bmatrix},b:=\\begin{bmatrix}4\\\\5\\\\0\\end{bmatrix}\\implies f(x)=\\frac{1}{2}x^TAx-b^Tx-5x^3+7\\) \\(\\nabla f(x)=Ax-b-\\cfrac{\\partial 5x^3}{\\partial x}=\\begin{bmatrix}3x_1+x_2-4\\\\x_1+4x_2-5\\\\5x_3-15x_3^2\\end{bmatrix}\\xlongequal{SET}0\\implies x_1=x_2=1, x_3 = 0,\\frac{1}{3}\\) \\(\\begin{bmatrix}1&amp;1&amp;0\\end{bmatrix}^T, \\begin{bmatrix}1&amp;1&amp;\\frac{1}{3}\\end{bmatrix}^T\\) are stationary points. \\(\\nabla^2f(x)=A-\\cfrac{\\partial^25x_3^3}{(\\partial x)^2}=\\begin{bmatrix}3&amp;1&amp;0\\\\1&amp;4&amp;0\\\\0&amp;0&amp;5-30x_3\\end{bmatrix}\\) \\(\\nabla^2f((1,1,0))=\\begin{bmatrix}3&amp;1&amp;0\\\\1&amp;4&amp;0\\\\0&amp;0&amp;5\\end{bmatrix}\\) \\(\\nabla^2f((1,1,\\frac{1}{3}))=\\begin{bmatrix}3&amp;1&amp;0\\\\1&amp;4&amp;0\\\\0&amp;0&amp;-5\\end{bmatrix}\\) \\(D_1=\\begin{bmatrix}3\\end{bmatrix}\\succ0, D_2=\\begin{bmatrix}3&amp;1\\\\1&amp;4\\end{bmatrix}\\begin{cases}\\sum\\lambda\\gt0\\\\\\prod\\lambda\\gt\\end{cases}\\implies D_2\\succ0\\) for \\((1,1,0) \\begin{cases}\\sum\\lambda=12\\\\\\prod\\lambda=55\\end{cases}\\implies\\succ0\\implies\\) is the local minimizer. for \\((1,1,\\frac{1}{3}) \\begin{cases}\\sum\\lambda=2\\gt0\\\\\\prod\\lambda=-55\\lt0\\end{cases}\\implies\\text{indefinite}\\implies\\) is not the local minimizer or maximizer</p> <p>\u6700\u4f18\u5316\u5b66\u4e60 \u65e0\u7ea6\u675f\u4f18\u5316\u95ee\u9898\u7684\u6700\u4f18\u6027\u6761\u4ef6</p>"},{"location":"math/optimization/opt/#method","title":"method","text":"\u4f18\u5316\u6cd5 notes Derivative-free\u65e0\u5bfc\u6570\u4f18\u5316 Pattern search \u6a21\u5f0f\u641c\u7d22 ^ Grid search \u7f51\u683c\u641c\u7d22 ^ NM\u7b97\u6cd5, Nelder-Mead method Derivative-based \u5bfc\u6570\u4f18\u5316 Steepest descent \u6700\u901f\u4e0b\u964d\u6cd5 ^ Newton\u2019s method  \u725b\u987f\u8fed\u4ee3\u6cd5 if \\(f \\in C^2\\) ^ Quasi-Newton method \u62df\u725b\u987f\u6cd5"},{"location":"math/optimization/opt/#_2","title":"\u8fed\u4ee3\u6cd5","text":"<p>\u7ed9\u8d77\u59cb\u70b9\\(x^0\\),\u627e\u5230\u4e0b\u4e00\u4e2a\u70b9\\(x^1,x^2,\u2026\\)\u4e00\u76f4\u627e\u5230\u76ee\u6807\u70b9 \\(x^*\\)</p> <p>\u7ec8\u6b62\u6761\u4ef6 -  \\(\\Vert\\nabla f(x*)\\Vert=0 \\rightarrow \\Vert\\nabla f(x^n)\\Vert&lt;\\varepsilon\\) -  \\(\\Vert x^n-x^*\\Vert&lt;\\varepsilon\\)\uff0c x\u533a\u95f4\u5f88\u5c0f\uff0c\u5c0f\u4e8e\u7cbe\u5ea6 -  \\(\\Big\\vert\\cfrac{f(x^{n+1})-f(x^n)}{???}\\Big\\vert&lt;\\varepsilon\\)</p> <p>\u6536\u655b\u6027: \u8003\u8651\u7b97\u6cd5\u4ea7\u751f\u7684\u70b9\u5217\u662f\u5426\u6536\u655b\u5230\u4f18\u5316\u95ee\u9898\u7684\u89e3 - \u5168\u5c40\u6536\u655b, \\(\\forall x^0,x^k\\rightarrow x^*\\) - \u5c40\u90e8\u6536\u655b, \\(\\forall x^0\\in N(x^*),x^k\\rightarrow x^*\\)\u90bb\u57df\u5185\u6536\u655b</p> <p>\u6536\u655b\u901f\u5ea6 | \\(\\Vert x^k-x^*\\Vert\\rightarrow 0\\) |  | | --- | --- | | \u7ebf\u6027 | \\(\\Vert x^{k+1}-x^*\\Vert\u2264r\\Vert x^k-x^*\\Vert,0&lt;r&lt;1\\) | | \u8d85\u7ebf\u6027 | \\(\\Vert x^{k+1}-x^*\\Vert=\\circ\\Vert x^k-x^*\\Vert \\iff \\cfrac{\\Vert x^{k+1}-x^*\\Vert}{\\Vert x^k-x^*\\Vert}=0\\) | | \u4e8c\u6b21 | \\(\\Vert x^{k+1}-x^*\\Vert\u2264L\\Vert x^k-x^*\\Vert^2\\) |</p>"},{"location":"math/optimization/opt/#_3","title":"\u5206\u7c7b","text":"<p>\u90fd\u662f\u5bf9\u51fd\u6570\u00a0f\u00a0(x)\u00a0\u5728\u5c40\u90e8\u8fdb\u884c\u8fd1\u4f3c\uff0c\u4f46\u5904\u7406\u8fd1\u4f3c\u95ee\u9898\u7684\u65b9\u5f0f\u4e0d\u540c</p>"},{"location":"math/optimization/opt/#line-search","title":"line search \u7ebf\u641c\u7d22","text":"<p>\\(\\text{ given a point }x^k, \\text{ \u2460  find a descent direction }d^k,\\text{ then \u2461 find a stepsize }\\alpha^k&gt;0,\\text{ then }\\\\\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad x^{k+1}=x^{k}+\\alpha^kd^k\\)</p>"},{"location":"math/optimization/opt/#trust-religion-method","title":"trust religion method \u4fe1\u8d56\u57df","text":"<p>x^k\u4e00\u4e2a\u7403\u53bb\u627e\u533a\u95f4</p>"},{"location":"math/optimization/temp/","title":"?","text":""},{"location":"math/optimization/temp/#dynamic-step-size-adjusting","title":"Dynamic Step Size Adjusting:","text":"<ul> <li>Decrease the step size by ratio \\(\u03b3\\in(0,1)\\)  every K epochs.</li> <li> <p>Epoch Doubling Strategy</p> <p>Run K epochs with step size\u00a0\ud835\udefc, then, run 2K epochs with step size\u00a0\ud835\udefc/2, ......</p> </li> </ul>"},{"location":"math/optimization/temp/#noise-reduction-methods","title":"Noise Reduction Methods","text":"<p>\u5728\u673a\u5668\u5b66\u4e60\u4e2d\uff0c\u6700\u5e38\u7528\u7684\u4f18\u5316\u7b97\u6cd5\u5c31\u662fSGD(\u968f\u673a\u68af\u5ea6\u4e0b\u964d\u7b97\u6cd5)\uff0c\u6211\u4eec\u53d1\u73b0\u5b83\u5728\u4f46\u662fSGD\u7531\u4e8e\u6bcf\u6b21\u8fed\u4ee3\u65b9\u5411\u90fd\u662f\u968f\u673a\u9009\u62e9\u7684\uff0c\u6240\u4ee5\u4ea7\u751f\u4e86\u4e0b\u964d\u65b9\u5411\u7684\u566a\u97f3\u7684\u65b9\u5dee\u3002\u6b63\u662f\u7531\u4e8e\u8fd9\u4e2a\u65b9\u5dee\u7684\u5b58\u5728\uff0c\u6240\u4ee5\u5bfc\u81f4\u4e86SGD\u5728\u6bcf\u6b21\u8fed\u4ee3\uff08\u4f7f\u7528\u56fa\u5b9a\u6b65\u957f\u03b1\uff09\u65f6\uff0c\u6700\u7ec8\u662f\u6536\u655b\u4e0d\u5230\u6700\u4f18\u503c\u7684\uff0c\u6700\u4f18\u95f4\u9694\u6700\u7ec8\u8d8b\u4e8e\u4e00\u4e2a\u548c\u65b9\u5dee\u6709\u5173\u7684\u5b9a\u503c\u3002\u4e3a\u4e86\u514b\u670d\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u91c7\u53d6\u4e00\u79cd\u529e\u6cd5\uff0c\u662f\u60f3\u8981\u8ba9\u65b9\u5dee\u5448\u9012\u51cf\u8d8b\u52bf\u4e0b\u964d\uff0c\u90a3\u4e48\u6700\u7ec8\u7b97\u6cd5\u7684\u5c06\u4f1a\u4ee5\u7ebf\u6027\u901f\u5ea6\u6536\u655b\u4e8e\u6700\u4f18\u503c\u3002</p> <p>\ud83d\udca1 To reduce the \\(\\colorbox{aqua}{\\text{B}}\\text{ in } \\colorbox{aqua}{\\text{(1)}}\\)</p>"},{"location":"math/optimization/temp/#dynamic-sampling","title":"Dynamic Sampling","text":""},{"location":"math/optimization/temp/#gradient-aggregation","title":"Gradient Aggregation","text":"<p>\ud83d\udca1 Correct the bias of the stochastic estimation of gradients using historical gradients estimates. \u4f7f\u7528\u5386\u53f2\u68af\u5ea6\u4f30\u8ba1\u6765\u7ea0\u6b63\u68af\u5ea6\u968f\u673a\u4f30\u8ba1\u7684\u504f\u5dee\u3002</p> <p>Stochastic Variance Reduced Gradient Method, SVRG\uff0c \u968f\u673a\u65b9\u5dee\u7f29\u51cf\u68af\u5ea6\u4e0b\u964d\u6cd5</p> <p>\u4e3b\u8981\u6280\u5de7\u662f\u7f13\u5b58\u4e00\u4e2a\u68af\u5ea6\u5411\u91cf\uff0c\u901a\u8fc7\u7f13\u5b58\u5411\u91cf\u4e0e\u6700\u65b0\u68af\u5ea6\u7684\u8ddd\u79bb\u80fd\u7ed9\u51fa\u68af\u5ea6\u65b9\u5dee\u7684\u4e0a\u754c\uff0e</p> <p>Correct the bias of the stochastic estimation of gradients using full batch gradient every m iterations.</p> <p>\u770b\u5230SVRG\u7684\u8ba1\u7b97\u91cf\u76f8\u6bd4\u8f83SGD\u5927\u5f97\u591a</p> <p>Stochastic Average Gradient Accelerated, SAGA</p> <p>Correct the bias of the stochastic estimation of gradients using historical stochastic gradient information.</p> <p>\u5176\u540e\uff0cSAGA\uff3bDefazio et al.\uff0c2014\uff3d\u6539\u8fdb\u4e86SAG\u7b97\u6cd5\uff0c\u4f7f\u7528\u968f\u673a\u65b9\u5dee\u7f29\u51cf\u68af\u5ea6\u4e0b\u964d\u6cd5\uff08SVRG\uff09\u7684\u6280\u5de7\u5c06SAG\u4e2d\u7684\u68af\u5ea6\u6539\u6210\u4e86\u65e0\u504f\u7684\u4f30\u8ba1\uff0e</p>"},{"location":"math/optimization/temp/#iteration-averaging","title":"Iteration Averaging","text":"<ul> <li>\ud83d\udcd1\u00a0ref Introductory Lectures on Convex Programming, Volume I: Basic course, Yu. Nesterov July 2, 1998</li> </ul>"},{"location":"math/optimization/temp/#optimization-problem-setting","title":"Optimization Problem Setting","text":"\\[ \\argmin\\limits_{\\theta\\in\\R^s}R_n(\\theta):=\\cfrac{1}{n}\\sum\\limits_{i=1}^nl(\\theta;X_i,Y_i) \\] <p>Assumption:</p> <ol> <li> <p>\\(f\\text{ is L-smooth}\\) </p> <p>\\(\\colorbox{aqua}{\\text{L-smooth}}\\\\\\quad\\begin{cases}f(\\theta) \\text{ is continuously differentialble}\\iff f\\in C^2(\\R^n)\\\\\\nabla f(\\theta) \\text{ is Lipschitz continuous}\\iff \\exist L&gt;0, \\Vert\\nabla f(x)-\\nabla f(y)\\Vert\\le L\\Vert x-y\\Vert\\\\\\end{cases}\\\\\\quad\\implies f \\text{ is L-smooth}\\)</p> <ul> <li> <p>proof:</p> <p>\\(\\colorbox{aqua}{\\text{Lemma 3.1}} \\text{ Given a L-smooth function }f\\\\\\quad \\forall x,y\\in\\text{dom}(f),f(y)\\le f(x)+\\nabla f(x)^T(y-x)+\\cfrac{L}{2}\\Vert y-x\\Vert^2\\)</p> <p>\\(**\\implies \\alpha_k:=\\frac{1}{L}\\) is feasible and optimal**</p> <ul> <li> <p>proof</p> <p></p> <p></p> </li> </ul> </li> </ul> </li> </ol>"},{"location":"python/enhanced/","title":"Enhanced Python","text":""},{"location":"python/enhanced/#script-module-package","title":"Script &amp; Module &amp; Package","text":"<p>script \u811a\u672c\u3002\u662f\u4e00\u4e2a\u5305\u542b\u53ef\u6267\u884c\u4ee3\u7801\u7684\u6587\u4ef6\uff0c\u4e00\u4e2a py \u6587\u4ef6\uff0c\u66f4\u591a\u65f6\u5019\u662f\u6307\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c\u7684 py \u6587\u4ef6\u3002\u4e3a\u4e00\u4e2a\u7279\u5b9a\u4efb\u52a1\u5199\u6210\u3002 \u9876\u5c42\u4ee3\u7801\u3002\u7531\u7528\u6237\u6307\u5b9a\u7684\u6700\u5148\u5f00\u59cb\u8fd0\u884c\u7684\u90a3\u4e00\u4e2a py \u6587\u4ef6\uff0c\u662f\u5e94\u7528\u7a0b\u5e8f\u7684\u5165\u53e3\u70b9\u3002\u5b83\u7684<code>__name__</code> \u88ab\u8bbe\u4e3a <code>__main__</code> module \u6a21\u5757\u3002\u4e3b\u8981\u662f\u88ab\u5f15\u7528\uff0c\u5305\u542b\u4e86\u76f8\u5173\u6027\u8f83\u9ad8\u7684\u7a0b\u5f0f\u7801\u3002 package \u5305\u3002\u5305\u542b\u4e86\u4e00\u4e2a\u6216\u591a\u4e2a\u7684 Module \uff0c\u5e76\u4e14\u62e5\u6709 <code>__init__.py</code> library \u5e93\u3002</p>"},{"location":"python/enhanced/#_1","title":"\u9876\u5c42\u4ee3\u7801","text":"<p>\u9876\u5c42\u4ee3\u7801\u3002\u7531\u7528\u6237\u6307\u5b9a\u7684\u6700\u5148\u5f00\u59cb\u8fd0\u884c\u7684\u90a3\u4e00\u4e2a py \u6587\u4ef6\uff0c\u662f\u5e94\u7528\u7a0b\u5e8f\u7684\u5165\u53e3\u70b9\u3002</p> <p>\u9876\u5c42\u4ee3\u7801\u7684<code>__name__</code> \u88ab\u8bbe\u4e3a <code>__main__</code>\u3002</p> <p>module \u5982\u679c\u662f \u88ab import\uff0c\u5b83\u7684 <code>__name__</code> \u5c31\u4f1a\u662f\u5b83\u81ea\u5df1\u540d\u5b57\uff1b\u5982\u679c\u662f\u4ee5\u811a\u672c\u65b9\u5f0f\u6267\u884c\uff0c\u4f1a\u628a <code>__name__ = \"__main__\"</code> dir<pre><code>+ A\n    A1.py\n    A2.py\n    + subA\n        a1.py\n</code></pre></p> A1.py<pre><code>print(f'in A1: {__name__}')\n</code></pre> A2.py<pre><code>from A1 import *\nfrom subA.a1 import *\nprint(f'in A2: {__name__}')\n</code></pre> <p>a1.py<pre><code>print(f'in a1: {__name__}')\n</code></pre> \u8fd0\u884c <code>python A2.py</code>\uff0c A2 \u662f\u88ab\u8fd0\u884c\u7684\u9876\u5c42\u4ee3\u7801\uff0c A1 &amp; a1 \u65f6\u88ab import \u7684module <pre><code># &gt;&gt;&gt; in A1: A1\n# &gt;&gt;&gt; in a2: subA.a2  # \u5982\u679c\u6709\u4e0a\u5c42\uff0c\u5c31\u4f1a\u628a\u4e0a\u5c42\u6587\u4ef6\u4e5f\u5c55\u793a\n# &gt;&gt;&gt; in A2: __main__  # A2 \u662f\u88ab\u8fd0\u884c\u7684\u9876\u5c42\u4ee3\u7801\uff0c\u88ab\u6539\u4e3a `__main__`\n</code></pre></p> <p>\u53ef\u4ee5\u5229\u7528<code>if __name__ == '__main__':</code>\u6765\u63a7\u5236 \u6267\u884c \u548c \u88ab\u5f15\u7528\u65f6 \u7684\u8fd0\u884c\u7684\u4ee3\u7801\u5185\u5bb9\u3002 \u6700\u597d\u7528 <code>main</code> \u8fdb\u884c\u5c01\u88c5\uff0c\u518d\u8c03\u7528\u3002\u5982\u679c\u76f4\u63a5\u653e\u5728 <code>if __name__ == '__main__':</code> \u4e0b\u7684\u53d8\u91cf\u4f1a\u6210\u4e3a\u5168\u5c40\u53d8\u91cf\u3002</p> <p><code>__main__.py</code> in package \u53c2\u89c1 package section</p>"},{"location":"python/enhanced/#module","title":"Module","text":"<p>module \u6a21\u5757\u3002\u4e3b\u8981\u662f\u88ab\u5f15\u7528\uff0c\u5305\u542b\u4e86\u76f8\u5173\u6027\u8f83\u9ad8\u7684\u7a0b\u5f0f\u7801\u3002</p> <ul> <li>\u5728\u6a21\u5757\u5185\u90e8\uff0c\u6a21\u5757\u540d \u901a\u8fc7\u5168\u5c40\u53d8\u91cf <code>__name__</code> \u83b7\u53d6.</li> <li>\u6bcf\u4e2a\u6a21\u5757\u90fd\u6709\u81ea\u5df1\u7684\u79c1\u6709\u547d\u540d\u7a7a\u95f4\uff0c\u5b83\u4f1a\u88ab\u7528\u4f5c\u6a21\u5757\u4e2d\u5b9a\u4e49\u7684\u6240\u6709\u51fd\u6570\u7684\u5168\u5c40\u547d\u540d\u7a7a\u95f4\u3002</li> </ul>"},{"location":"python/enhanced/#package","title":"Package","text":"<p>package \u5305\u3002\u5305\u542b\u4e86\u4e00\u4e2a\u6216\u591a\u4e2a\u7684 Module \uff0c\u5e76\u4e14\u62e5\u6709 <code>__init__.py</code>\u3002</p> <p>\u4f46\u662f\u4e00\u4e2a\u6bd4\u8f83\u9f50\u5168\u7684\u5305\u662f\uff1a</p> <pre><code>\"\"\"\n+ package\n    __init__.py\n    __main__.py\n    module1.py\n\"\"\"\n</code></pre>"},{"location":"python/enhanced/#__init__py","title":"<code>__init__.py</code>","text":"<p>\u9700\u8981\u6709 <code>__init__.py</code> \u6587\u4ef6\u624d\u80fd\u8ba9 Python \u5c06\u5305\u542b\u8be5\u6587\u4ef6\u7684\u76ee\u5f55\u5f53\u4f5c\u5305\u6765\u5904\u7406</p> <p>\u4ece\u4e00\u4e2a package \u91cc\u9762\u8c03\u7528\u4e1c\u897f\u7684\u65f6\u5019\uff0c<code>__init__.py</code> \u7684\u4ee3\u7801\u4f1a\u88ab\u9996\u5148\u6267\u884c. \u80fd\u5e2e\u52a9 package \u5b8c\u6210 \u6279\u91cf\u5bfc\u5165\u548c\u89c4\u8303\u5316\u5bfc\u5165</p> <p>\u5176\u53ef\u89c1\u6027\u7684\u7ef4\u62a4\u662f\u9760\u4e00\u5957\u9700\u8981\u5927\u5bb6\u81ea\u89c9\u9075\u5b88\u7684\u201d\u7ea6\u5b9a\u201c</p> <p>Python\u4e2d\u7684__all__: \u4f7f\u7528 <code>from xxx import *</code> \u5bfc\u5165\u8be5\u6587\u4ef6\u65f6\uff0c\u53ea\u4f1a\u5bfc\u5165 <code>__all__</code> \u5217\u51fa\u7684\u6210\u5458\uff0c\u53ef\u4ee5\u5176\u4ed6\u6210\u5458\u90fd\u88ab\u6392\u9664\u5728\u5916\u3002 \u4f46\u662f\u76f4\u63a5\u5b9a\u4f4d\u5230\u7cbe\u786e\u8c03\u7528\u662f\u53ef\u4ee5\u7684</p> <p>\u4fee\u6539\u4e00\u4e2a\u66b4\u9732\u7684\u63a5\u53e3\u53ea\u4fee\u6539\u4e00\u884c\uff0c\u65b9\u4fbf\u7248\u672c\u63a7\u5236\u7684\u65f6\u5019\u770b diff</p> dir<pre><code>+ A\n    __init__.py\n    A1.py\n    A2.py\n    + subA\n        a1.py\n        __init___.py\n</code></pre> subA.a1.py<pre><code>def f1():\n    print(\"F1\")\ndef f2():\n    print(\"F2\")\n</code></pre> <p>subA.__init__.py<pre><code># \u5728 package \u7ea7\u522b\u66b4\u9732\u63a5\u53e3\nfrom sub.a1 import *\n__all__ = [\n    \"f1\"\n]\n</code></pre> \u5728 package \u7ea7\u522b\u66b4\u9732\u63a5\u53e3\uff0cmodule level \u4e5f\u7c7b\u4f3c\u3002\u5982\u679c\u91c7\u7528<code>from package import *</code> A1.py<pre><code>from subA import *\nf1()\n# &gt;&gt;&gt; F1  # \u6210\u529f\u4e86 \nf2()\n# &gt;&gt;&gt; NameError: name 'f2' is not defined. Did you mean: 'f1'?\n</code></pre> \u5982\u679c\u91c7\u7528 <code>from package.module import func</code> \u7cbe\u786e\u8c03\u7528 A2.py<pre><code>from subA.a1 import f1, f2\nf1()\n# &gt;&gt;&gt; F1\nf2()\n# &gt;&gt;&gt; F2\n</code></pre></p>"},{"location":"python/enhanced/#__main__py","title":"<code>__main__.py</code>","text":"<p><code>python -m package</code>\u3002 \u4f7f\u7528 <code>-m</code> \u4ece\u547d\u4ee4\u884c\u76f4\u63a5\u8c03\u7528\u8f6f\u4ef6\u5305\u672c\u8eab\u65f6\uff0c\u5c06\u6267\u884c <code>__main__.py</code>\u3002</p> <p><code>__main__.py</code> \u7684\u5185\u5bb9\u901a\u5e38\u4e0d\u4f1a\u7528 <code>if __name__ == '__main__'</code> \u5757\u56f4\u8d77\u6765\u3002\u76f8\u53cd\uff0c\u8fd9\u4e9b\u6587\u4ef6\u4f1a\u4fdd\u6301\u7b80\u77ed\u5e76\u4ece\u5176\u4ed6\u6a21\u5757\u5bfc\u5165\u51fd\u6570\u6765\u6267\u884c\u3002 \u8fd9\u6837\u5176\u4ed6\u6a21\u5757\u5c31\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u8fdb\u884c\u5355\u5143\u6d4b\u8bd5\u5e76\u53ef\u4ee5\u9002\u5f53\u5730\u91cd\u7528\u3002</p> <p>package \u91cc\u7684 module \u7684\u5355\u5143\u6d4b\u8bd5\u662f\u5728 <code>__main__.py</code> \u8fdb\u884c\u3002</p>"},{"location":"python/enhanced/#import","title":"import","text":"<p>\u4e3a\u4e86\u5feb\u901f\u52a0\u8f7d\u6a21\u5757\uff08\u4e0d\u662f\u52a0\u901f\u6267\u884c\uff09\uff0cPython \u628a\u6a21\u5757\u7684\u7f16\u8bd1\u7248\u672c\u7f13\u5b58\u5728 <code>__pycache__ dir</code> \u4e2d\uff0c\u6587\u4ef6\u540d\u4e3a <code>module.version.pyc\uff0cversion</code> \u5bf9\u7f16\u8bd1\u6587\u4ef6\u683c\u5f0f\u8fdb\u884c\u7f16\u7801</p> <p>CPython \u7684 3.3 \u53d1\u884c\u7248\u4e2d\uff0cspam.py \u7684\u7f16\u8bd1\u7248\u672c == <code>__pycache__/spam.cpython-33.pyc</code></p> <p>\u4e3a\u4ec0\u4e48\u6ca1\u6709 \u8fd0\u884c\u811a\u672c\u7684\u5df2\u7f16\u8bd1\u6863\u6848\uff1f</p> <p>\u8fd0\u884c\u811a\u672c \u5f53\u4f5c\u7a0b\u5f0f\u7684\u8fdb\u5165\u70b9\uff0c\u6240\u4ee5\u6bcf\u4e00\u6b21\u6267\u884c <code>python xxx.py</code> \u6307\u4ee4\u65f6\uff0cPython\u7f16\u8bd1\u5668\u90fd\u8981\u8fdb\u884c\u7f16\u8bd1\uff0c\u6240\u4ee5\u6ca1\u6709\u5c06 <code>xxx.py</code> \u8fdb\u884c\u5feb\u53d6\u7684\u52a8\u4f5c\u3002</p>"},{"location":"python/enhanced/#_2","title":"\u4ece\u5185\u5bb9\u533a\u5206","text":"<ul> <li><code>import module</code> = \u8c03\u7528 \u300b <code>module.specific_func()</code></li> <li><code>from module import specific_func</code> = \u8c03\u7528 \u300b <code>specific_func()</code></li> <li><code>from module import *</code> = \u8c03\u7528 \u300b <code>specific_func()</code></li> </ul> <p>\u5c3d\u91cf\u4e0d\u8981\u7528 <code>from module import *</code>\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5411\u89e3\u91ca\u5668\u5bfc\u5165\u4e86\u4e00\u6279\u672a\u77e5\u7684\u540d\u79f0\uff0c\u53ef\u80fd\u4f1a\u8986\u76d6\u5df2\u7ecf\u5b9a\u4e49\u7684\u540d\u79f0\u3002</p> <p><code>from module import *</code> \u4f1a\u5bfc\u5165\u6240\u6709\u4e0d\u4ee5\u4e0b\u5212\u7ebf\uff08_\uff09\u5f00\u5934\u7684\u540d\u79f0\u3002</p> <ul> <li><code>from package import item</code> \u65f6\uff0citem \u53ef\u4ee5\u662f\u5305\u7684\u5b50\u6a21\u5757\uff08\u6216\u5b50\u5305\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u5305\u4e2d\u5b9a\u4e49\u7684\u51fd\u6570\u3001\u7c7b\u6216\u53d8\u91cf\u7b49\u5176\u4ed6\u540d\u79f0\u3002</li> <li><code>import item.subitem.subsubitem</code> \u65f6\uff0c\u9664\u6700\u540e\u4e00\u9879\u5916\uff0c\u6bcf\u4e2a item \u90fd\u5fc5\u987b\u662f\u5305\uff1b\u6700\u540e\u4e00\u9879\u53ef\u4ee5\u662f\u6a21\u5757\u6216\u5305\uff0c\u4f46\u4e0d\u80fd\u662f\u4e0a\u4e00\u9879\u4e2d\u5b9a\u4e49\u7684\u7c7b\u3001\u51fd\u6570\u6216\u53d8\u91cf\u3002</li> </ul>"},{"location":"python/enhanced/#_3","title":"\u4ece\u65b9\u5f0f\u533a\u5206","text":"<p>See \u8def\u5f84\u76f8\u5173\u7684 section</p> <ul> <li>\u7edd\u5bf9\u5bfc\u5165</li> <li>\u76f8\u5bf9\u5bfc\u5165</li> </ul>"},{"location":"python/enhanced/#_4","title":"\u8def\u5f84\u76f8\u5173","text":"<p>\u5982\u679c\u4e0d\u662f\u4ece\u811a\u672c\u6240\u5728\u8def\u5f84 <code>python ./xxx.py</code> \u8fd0\u884c\u811a\u672c\uff0c\u5c31\u4f1a\u6709 working directory &amp; script path \u533a\u522b</p> <p>\u7528\u6237\u5728\u78c1\u76d8\u4e0a\u5bfb\u627e\u6587\u4ef6\u6216\u5b50\u76ee\u5f55\u65f6\uff0c\u6240\u5386\u7ecf\u7684\u7ebf\u8def\u53eb\u8def\u5f84\u3002 \u76ee\u5f55\u548c\u6587\u4ef6\u5939\u662f\u4e00\u4e2a\u610f\u601d</p> <p>\u5de5\u4f5c\u76ee\u5f55 working directory cwd\u3002\u7528\u6237\u5f53\u524d\u76ee\u5f55\u3002<code>os.getcwd()</code> \u811a\u672c\u8def\u5f84 script path\u3002\u811a\u672c\u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84\u3002 <code>__file__</code> \u7cfb\u7edf\u8def\u5f84 system path sys\u3002\u64cd\u4f5c\u7cfb\u7edf\u7528\u6765\u67e5\u627e\u53ef\u6267\u884c\u6587\u4ef6\u548c\u5e93\u6587\u4ef6\u7684\u4e00\u7ec4\u76ee\u5f55\u8def\u5f84\u3002<code>sys.path:List</code></p> <ul> <li>\u52a0\u5165sys <code>sys.path.append(new_path)</code></li> <li>\u67e5\u770b <code>sys.path</code></li> </ul> <p>\u3010process\u3011</p> <ul> <li>\u7a0b\u5e8f\u5c06\u811a\u672c\u6240\u5728\u7684\u76ee\u5f55\u52a0\u5165\u5230 sys \u4e2d\uff0c\u7528\u6765\u67e5\u627e\u53ef\u6267\u884c\u6587\u4ef6\u548c\u5e93\u6587\u4ef6 <code>os.path.dirname(__file__) == sys.path[0]</code></li> <li>\u7a0b\u5e8f\u4f1a\u5b9e\u884c\u811a\u672c\u91cc\u7684\u4ee3\u7801\uff0c\u5728cwd \u8fdb\u884c\u67e5\u627e\u521b\u9020\u6587\u4ef6\u3002</li> </ul> dir<pre><code>+ A\n    A1.py\n    + subA\n        a1.py\n</code></pre> A1.py<pre><code>import os, sys\n\nif __name__ == \"__main__\":\n    print(f'working_directory = {os.getcwd()}')\n    print(f'script_path = {__file__}' )\n    print(f'system_path[0] = {sys.path[0]}')\n    with open('1.txt', 'w'):\n        ...\n</code></pre> <p>\u5728 subA \u5e95\u4e0b\u8fd0\u884c <code>A1.py</code> <code>.../python.exe .../A/A1.py</code></p> <pre><code># &gt;&gt;&gt; working_directory = ...\\A\\subA\n# &gt;&gt;&gt; script_path = ...\\A\\A1.py\n# &gt;&gt;&gt; system_path[0] = ...\\A\n# &gt;&gt;&gt; 1.txt \u5728 subA \u5e95\u4e0b\uff0c # \u5728\u5de5\u4f5c\u76ee\u5f55\u5bf9\u5e94\u8fdb\u884c\u521b\u5efa\n</code></pre>"},{"location":"python/enhanced/#import-module","title":"import - module \u641c\u7d22\u8def\u5f84","text":"<p>\u5f53 <code>import spam</code>\uff0c\u89e3\u91ca\u5668\uff1a</p> <ol> <li>\u641c\u7d22 <code>spam</code> \u7684\u5185\u7f6e\u6a21\u5757\u3002\u8fd9\u4e9b\u6a21\u5757\u7684\u540d\u79f0\u5728 <code>sys.builtin_module_names</code> \u4e2d\u5217\u51fa\u3002</li> <li>\u5982\u679c\u672a\u627e\u5230\uff0c\u5b83\u5c06\u5728\u53d8\u91cf <code>sys.path</code> \u6240\u7ed9\u51fa\u7684\u76ee\u5f55\u5217\u8868\u4e2d\u641c\u7d22</li> </ol> <p>sys.path\u7684\u521d\u59cb\u5316\uff1a</p> <ul> <li>\u88ab\u547d\u4ee4\u884c\u76f4\u63a5\u8fd0\u884c\u7684\u811a\u672c\u6240\u5728\u7684\u76ee\u5f55\u3002</li> <li>PYTHONPATH \uff08\u76ee\u5f55\u5217\u8868\uff0c\u4e0e shell \u53d8\u91cf PATH \u7684\u8bed\u6cd5\u4e00\u6837\uff09\u3002</li> <li>\u4f9d\u8d56\u4e8e\u5b89\u88c5\u7684\u9ed8\u8ba4\u503c\uff08\u6309\u7167\u60ef\u4f8b\u5305\u62ec\u4e00\u4e2a site-packages \u76ee\u5f55\uff0c\u7531 site \u6a21\u5757\u5904\u7406\uff09\u3002</li> </ul> <p>\u7a0b\u5e8f\u5c06<code>run.py</code> \u811a\u672c\u6240\u5728\u7684\u76ee\u5f55\u52a0\u5165\u5230 sys \u4e2d\uff0c\u7528\u6765\u67e5\u627e\u53ef\u6267\u884c\u6587\u4ef6\u548c\u5e93\u6587\u4ef6</p> <p>\u81ea\u5df1\u5199\u7684\u5305\u6ce8\u610f import \u8def\u5f84\uff0c\u4ece\u7cfb\u7edf\u8def\u5f84\u4e2d\u80fd\u4e0d\u80fd\u627e\u5230\uff0c\u80fd\u4e0d\u80fd\u5f62\u6210\u53ef\u5230\u8fbe\u7684\u8def\u5f84</p> <ol> <li>\u901a\u8fc7 <code>sys</code> \u6dfb\u52a0\u641c\u7d22\u8def\u5f84 <code>sys.path.append('package path')</code></li> <li>\u7edd\u5bf9\u5f15\u7528\u3002\u5f53\u5305\u7531\u591a\u4e2a\u5b50\u5305\u6784\u6210\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u7edd\u5bf9\u5bfc\u5165\u6765\u5f15\u7528\u540c\u7ea7\u5305\u7684\u5b50\u6a21\u5757\u3002</li> <li>\u76f8\u5bf9\u5f15\u7528\u3002</li> </ol> <p>\u4e3b\u6a21\u5757\u59cb\u7ec8\u4f7f\u7528 \u7edd\u5bf9\u5bfc\u5165</p> <p>\u76f8\u5bf9\u5bfc\u5165\u57fa\u4e8e\u5f53\u524d\u6a21\u5757\u540d<code>module.__name__</code>\u3002 - \u6a21\u5757\u4f5c\u4e3a\u9876\u5c42\u6587\u4ef6\u88ab\u6267\u884c\u65f6\uff0c<code>__name__=\"__main__\"</code>\uff0c\u4e0d\u5305\u542b\u4efb\u4f55\u5305\u7684\u540d\u5b57 - \u4f46\u4f5c\u4e3a\u666e\u901a\u6a21\u5757\u88ab import\uff0c \u5c31\u4f1a\u88ab\u5305\u542b\u5305\u3002</p> <p>\u7edd\u5bf9\u5f15\u7528 &amp; \u76f8\u5bf9\u5f15\u7528</p> dir<pre><code>+ A\n    A1.py\n    A2.py\n</code></pre> A1.py<pre><code>import A2  # \u7edd\u5bf9\u5f15\u7528\nimport .A2  # \u76f8\u5bf9\u5f15\u7528\n</code></pre> <p>import \u95ee\u9898\u6d45\u8c08</p>"},{"location":"python/enhanced/#others","title":"Others","text":"<ul> <li>Magic Number \u9b54\u6570\uff08\u4e2d\u6027\u8bcd\uff09    \u7f16\u7a0b\u4e2d\u7684\u300c\u9b54\u6570\u300d\uff08magic number\uff09\u662f\u4ec0\u4e48\u610f\u601d\uff1f\u5e73\u65f6\u6211\u4eec\u80fd\u63a5\u89e6\u5230\u54ea\u4e9b\u9b54\u6570\uff1f    \u4e00\u822c\u662f\u6307\u786c\u5199\u5230\u4ee3\u7801\u91cc\u7684\u6574\u6570\u5e38\u91cf\uff0c\u6570\u503c\u662f\u7f16\u7a0b\u8005\u81ea\u5df1\u6307\u5b9a\u7684\uff0c\u5176\u4ed6\u4eba\u4e0d\u77e5\u9053\u6570\u503c\u6709\u4ec0\u4e48\u5177\u4f53\u610f\u4e49\uff0c\u8868\u793a\u4e0d\u660e\u89c9\u5389\uff0c\u5c31\u79f0\u4f5cmagic number\u3002\u7f16\u7a0b\u6559\u6750\u4e66\u7528magic number\u6307\u4ee3\u521d\u5b66\u8005\u4e0d\u5b9a\u4e49\u5e38\u91cf\u76f4\u63a5\u5199\u6570\u7684\u4e0d\u826f\u4e60\u60ef\u3002<ul> <li>\u8d2c\u4e49\u8bcd: \u6307\u7684\u662f\u4ee3\u7801\u4e2d\u51fa\u73b0\u7684\u6ca1\u6709\u8bf4\u660e\u7684\u6570\u5b57\u3002\u4ee3\u7801\u4e2d\u7a81\u7136\u51fa\u73b0\u4e00\u4e2a\u6ca1\u8bf4\u660e\u7528\u9014\u7684\u6570\u5b57\u4f1a\u8ba9\u5176\u5b83\u9605\u8bfb\u4ee3\u7801\u3001\u7ef4\u62a4\u4ee3\u7801\u7684\u7684\u4eba\u975e\u5e38\u96be\u53d7\u3002 <p>\u4f8b\u5982\u51993.1416\u8fd9\u79cd\u6570\u5b57\uff0c\u4e5f\u5e94\u8be5\u6539\u4e3a\u6570\u5b66\u5e93\u4e2d\u7684\u03c0\u5e38\u6570\uff0c\u4f8b\u5982Unity\u4e2d\u7684Mathf.PI\u3002</p> </li> <li>\u8912\u4e49\u8bcd: \u901a\u8fc7\u4e00\u4e9b\u5e95\u5c42\u539f\u7406\u5b9e\u73b0\u9a9a\u64cd\u4f5c</li> <li>\u4e2d\u6027\u8bcd\uff1a <p>. ELF\u6587\u4ef6\u5934\u4f1a\u5199\u5165\u4e00\u4e2amagic number\uff0c\u68c0\u67e5\u8fd9\u4e2a\u6570\u548c\u81ea\u5df1\u9884\u60f3\u7684\u662f\u5426\u4e00\u81f4\u53ef\u4ee5\u5224\u65ad\u6587\u4ef6\u662f\u5426\u635f\u574f\u3002 . \u5982\u679c\u4f60\u752816\u8fdb\u5236\u7f16\u8f91\u5668\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\uff0c\u5b83\u7684\u5f00\u5934\u4e0d\u662fFFD8FF\uff0c\u90a3\u5c31\u4e0d\u662fjpg\u6587\u4ef6\u3002\u8fd9\u4e2a\u9b54\u6570\u4e00\u822c\u4f1a\u5728\u76f8\u5173\u6587\u4ef6\u6807\u51c6\u4e2d\u8fdb\u884c\u89c4\u5b9a\uff0c\u6240\u6709\u4eba\u90fd\u8981\u9075\u5b88</p> </li> </ul> </li> </ul>"},{"location":"python/enhanced/#todo","title":"Todo","text":"<p>import\u96dc\u8ac7\u4e4b\u4e09\u2014\u2014\u2014sys.path\u7684\u6d2a\u8352\u4e4b\u6642</p>"},{"location":"python/exam/","title":"\u7b14\u9762","text":""},{"location":"python/exam/#_2","title":"\u6392\u5e8f","text":"<p>input: \u65e0\u5e8f\u7684\u6570\u7ec4 &amp; k:intoutput\uff1a\u6570\u7ec4\u7b2ck\u5927\u7684\u5143\u7d20 \u4f18\u5316 &amp; \u65f6\u95f4\u590d\u6742\u5ea6</p> <pre><code>def method(lst, k:int):\n    if k &gt; len(lst) or k &lt; 1:\n        return f'{k} is less than the length of list'\n    return sorted(lst)[k-1]\n\nif __name__ == '__main__':\n    lst = [3,1,5,4,2]\n    print(method(lst, k=3))\n</code></pre> <p>\u5b50\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5217\u8868\u6392\u5e8f</p> data<pre><code>data = [['a', 10,'2020/12/1'],\n        ['b', 2, '2020/12/2'],\n        ['a', 5,'2020/12/1'],\n        ['c', 21,'2020/12/4'],\n        ['b', 19, '2020/12/1'],\n        ['c', 5, '2020/12/6'],\n        ['c', 1, '2020/12/7'],\n        ['a', 8, '2020/12/2'],\n        ['a', 8, '2020/12/3']]\n</code></pre> <pre><code>def func1(data):\n    return sorted(data, key=lambda x:x[0])\n#print(func1(data))\n</code></pre> <p>\u5b50\u5217\u8868\u7b2c2\u4e2a\u5143\u7d20\u5206\u7ec4\u6c42\u548c</p> <pre><code>def func2(data):\n    user_set = set(x[0] for x in data)\n    res = []\n    for user in user_set:\n        print(sum(x[1] for x in data if x[0]==user))\n        if sum(x[1] for x in data if x[0]==user) &gt; 40:\n            res.append(user)\n    return res\n</code></pre> <p>\u5b50\u5217\u8868\u7b2c\u4e00\u4e2a\u5143\u7d20\u5206\u7ec4\u6c42\u6700\u9ad8</p> <pre><code>def func3(data):\n    # res = dict()\n\n    # for rec in data:\n    #     if rec[0] not in res.keys():\n    #         res[rec[0]] = (rec[1], rec[2])\n    #     elif rec[1] &gt; res[rec[0]][0]:\n    #         res[rec[0]] = (rec[1], rec[2])\n    # return res\n    user_payment_dict = {}\n    for entry in data:\n        username = entry[0]\n        payment = entry[1]\n        payment_time = entry[2]\n\n        if username in user_payment_dict:\n            if payment &gt; user_payment_dict[username][0]:\n                user_payment_dict[username] = (payment, payment_time)\n        else:\n            user_payment_dict[username] = (payment, payment_time)\n\n    return user_payment_dict\n\n# user_department\n# u\nprint(func3(data))\n</code></pre>"},{"location":"python/numpy/","title":"Numpy &amp; Scipy","text":"<p>for scientific computing  in Python\uff0cprovide multidimensional array object</p> <p>Numpy \u5b9e\u73b0\u4e86 \u591a\u7ef4\u540c\u8d28\u6570\u7ec4 multidimensional homogenous array &amp; \u77e9\u9635\u3002\u4e0d\u4ec5\u80fd\u5904\u7406\u6570\u5b57\u8fd8\u53ef\u4ee5\u5b58\u653e\u5176\u5b83\u7531\u7528\u6237\u5b9a\u4e49\u7684\u8bb0\u5f55\u3002</p> <p>Scipy \u662f\u57fa\u4e8e Numpy \u7684\u4e00\u4e2a\u5e93\uff0c\u8f6c\u4e3a\u7ebf\u6027\u4ee3\u6570\u3001\u6570\u503c\u79ef\u5206\u3001\u7edf\u8ba1\u5b66\u8bbe\u8ba1\uff0c\u3002</p>"},{"location":"python/numpy/#npndarray","title":"np.ndarray","text":"<p>shape &amp; ndim, vector &amp; matrix</p> Vector Matrix <code>a.shape</code> (3,) or (, 3) (3, 1) or (1, 3) <code>a.ndim</code> 1 2 <p>\u9ed8\u8ba4\u662f float \u7c7b\u578b</p> <p><code>Int index</code> &amp; <code>slice</code></p> <ul> <li><code>slice</code>     \u662f==\u539f\u6765\u7684subarray==\uff0c \u76f8\u5bf9\u987a\u5e8f\u4e0d\u4f1a\u53d8\u5316</li> <li><code>Int index</code>     \u4efb\u610f\u6784\u6210\uff0c\u53ea\u662f\u6570\u636e\u5b58\u5728\uff0c\u4f46\u662f\u76f8\u5bf9\u987a\u5e8f\u4f1a\u53d8\u5316\u7684\u3002 <pre><code>a = np.array([[1, 2], [3, 4]])\na[[1, 0],[1, 0]]\n# &gt;&gt;&gt; array([4, 1]) \u4e0e\u539f\u6765\u7684\u76f8\u5bf9\u4e0d\u4e00\u6837\u4e86\n# = np.array([a[1][1],\n#             a[0][0]])\u00df\na[[[1, 0],[1, 0]],[[1, 0],[1, 0]]]\n# &gt;&gt;&gt; array([[4, 1],[4, 1]]) \u53ea\u662f\u53d6\u81ea\u6570\u636e\n# = np.array([[a[1][1], a[0][0]],\n#            [a[1][1], a[0][0]]])\n</code></pre></li> </ul> case code \u521b\u5efa shape = <code>Int</code> or <code>Tuple(shape1, shape2, ...)</code> <code>np.array(list[list[...]])</code> ^ <code>np.zeros(shape)</code> \u51680 ^ <code>np.ones(shape)</code> \u51681 ^ <code>np.eye(shape)</code> \u5355\u4f4d\u77e9\u9635 ^ <code>np.full(shape, value)</code> \u5e38\u6570 ^ <code>np.random.random(shape)</code> \u4efb\u610f \u5207\u7247\u8981\u5355\u884c\u6216\u5355\u5217 <code>row = a[0, :]</code>, <code>col = a[:, 0]</code> Int index \u27a1\ufe0f shape \u8981\u964d\u7ea7 ^ <code>row = a[0:1, :]</code>, <code>col = a[:, 0:1]</code> slice \u27a1\ufe0f shape \u4e0e\u539f\u6765\u7684\u540c\u7ea7 <pre><code>\"\"\" create \"\"\"\nimport numpy as np\na = np.eye(2)\n# &gt;&gt;&gt; a = array([[1., 0.],[0., 1.]])\na = np.full((2, 1), 7)\n# &gt;&gt;&gt; a = array([[7], [7]])\na = np.random.random((2, 1))\n# &gt;&gt;&gt; array([[0.5018725], [0.283335 ]])\n\n\"\"\" \u5207\u7247\u8981\u5355\u884c\u6216\u5355\u5217, \u8868\u793a vector  \"\"\"\na = np.array([[1, 2, 3], [4, 5, 6]])\nrow1 = a[0, :]  # int index\nrow2 = a[0:1, :]  # slice\n# &gt;&gt;&gt; row1.shape = (3,) ; row2.shape = (1, 3)\ncol1 = a[:,0]\ncol2 = a[:,0:1]\n# &gt;&gt;&gt; col1.shape = (2,) ; col2.shape = (1, 2)\n</code></pre> <ul> <li>numpy \u2194\ufe0f image<ol> <li><code>img_array = opencv()</code> \u6765\u8bfb\u53d6\u56fe\u7247 \u81ea\u52a8\u662f <code>numpy.array</code></li> <li><code>img_array = np.array(img)</code></li> </ol> </li> </ul>"},{"location":"python/numpy/#_1","title":"\u64cd\u4f5c","text":""},{"location":"python/numpy/#_2","title":"\u4e58\u6cd5","text":"<code>a*b</code> <code>a.dot(b)</code> ? \u5bf9\u5e94\u4f4d\u7f6e\u76f8\u4e58 \u77e9\u9635\u5185\u79ef Matrix Product <pre><code>a = np.array([[1, 2], [3, 4]])\nb = np.array([[1, 1], [2, 2]])\na * b \n# &gt;&gt;&gt; array([[1, 2], [6, 8]])\na.dot(b)\n# &gt;&gt;&gt; array([[5, 5], [11, 11]])\n</code></pre> <p>range:int   np.arange float</p>"},{"location":"python/python_elegant/","title":"Elegant Python","text":"<p>\u8fed\u4ee3\u5668 &amp; \u751f\u6210\u5668 \u533a\u522b \u54ea\u4e2a\u66f4\u597d</p> <ul> <li>python \u7a0b\u5e8f\u8fd0\u884c\uff0c<code>python.exe xxx.py</code> \u5b9e\u8d28\u4e0a\u662f\u4f7f\u7528python.exe \u89e3\u91ca\u6240\u5199\u7684 .py\u6587\u4ef6 \u91cc\u7684\u4ee3\u7801\uff0c\u6548\u7387\u5f88\u5927\u7a0b\u5ea6\u4f9d\u8d56 exe \u89e3\u91ca\u5668\u7684\u6548\u7387\u3002<ol> <li>python.exe  \u542f\u52a8</li> <li>python.exe \u628a.py\u6587\u4ef6 \u91cc\u7684\u4ee3\u7801\u5f53\u4f5c\u666e\u901a\u6587\u672c\u5185\u5bb9\u7531\u786c\u76d8\u8bfb\u5165\u5185\u5b58\u3002\uff08\u672c\u8d28\u4e0a\u662f\u5411\u64cd\u4f5c\u7cfb\u7edf\u53d1\u8d77\u7cfb\u7edf\u8c03\u7528\uff0c\u63a7\u5236\u786c\u4ef6\u5b8c\u6210\u8bfb\u53d6\u3002\uff09</li> <li>python.exe \u8bc6\u522b python \u8bed\u6cd5\uff0c\u6267\u884c\u8bfb\u5165\u5185\u5b58\u7684\u4ee3\u7801\u3002</li> </ol> </li> </ul> <p>PyObject. \u5185\u5b58\u4e2d\u957f\u5ea6\u53ef\u53d8\u7684\u5185\u7f6e\u5bf9\u8c61\u7684 C \u8bed\u8a00\u7ed3\u6784\u4f53\u3002</p> <p>\u63d0\u5347python\u6267\u884c\u6548\u7387\u7684\u82e5\u5e72\u65b9\u6cd5</p> <p>\u4e00\u5f00\u59cb\u5e94\u8ba9\u4ee3\u7801\u7ed3\u6784\u5c3d\u53ef\u80fd\u7b80\u5355\u3002\u5148\u5c3d\u53ef\u80fd\u5728\u4e00\u4e2a\u6587\u4ef6\u4e2d\u5b8c\u6210\u6240\u6709\u7684\u5de5\u4f5c\uff0c\u786e\u5b9a\u4e00\u5207\u90fd\u80fd\u6b63\u786e\u8fd0\u884c\u540e\uff0c\u518d\u5c06\u7c7b\u79fb\u5230\u72ec\u7acb\u7684\u6a21\u5757\u4e2d\u3002\u5148\u627e\u51fa\u8ba9\u4f60\u80fd\u591f\u7f16\u5199\u51fa\u53ef\u884c\u4ee3\u7801\u7684\u65b9\u5f0f\uff0c\u518d\u5c1d\u8bd5\u8ba9\u4ee3\u7801\u66f4\u4e3a\u7ec4\u7ec7\u6709\u5e8f\u3002 \u90fd\u5e94\u7d27\u8ddf\u5728\u7c7b\u5b9a\u4e49\u540e\u9762\u5305\u542b\u4e00\u4e2a\u6587\u6863\u5b57\u7b26\u4e32\u3002\u8fd9\u79cd\u6587\u6863\u5b57\u7b26\u4e32\u7b80\u8981\u5730\u63cf\u8ff0\u7c7b\u7684\u529f\u80fd\uff0c\u5e76\u9075\u5faa\u7f16\u5199\u51fd\u6570\u7684\u6587\u6863\u5b57\u7b26\u4e32\u65f6\u91c7\u7528\u7684\u683c\u5f0f\u7ea6\u5b9a\u3002</p> <pre><code>n = 1\nc = 'a'\nl = ['a', 1]\nt = ('a', 1)\ns = {'a', 1}\nd = {'a':'A', 1:'one'}\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_1","title":"\u5bf9\u8c61","text":"<p>\u4e07\u7269\u7686\u53ef\u5bf9\u8c61</p> <p>\u4e00\u822c\u5bf9\u8c61 &amp; \u51fd\u6570\u5bf9\u8c61</p> <p>\ud83d\udcd5 \u5c5e\u6027 <code>__doc__</code> \u751f\u6210\u5bf9\u8c61\u7684\u5e2e\u52a9\u6587\u672c <code>__dict__</code> \u50a8\u5b58\u7528\u6237\u5c5e\u6027</p> <p><code>dir(obj)</code> \u67e5\u770b\u5bf9\u8c61\u5c5e\u6027 <code>callable(obj)</code> \u67e5\u770b\u5bf9\u8c61\u662f\u5426\u53ef\u8c03\u7528</p> <pre><code>class C: pass\nobj = C()  # \u4e00\u822c\u5bf9\u8c61\ndef func(): pass  # \u51fd\u6570\u5bf9\u8c61\nsorted(set(dir(func)) - set(dir(obj)))\n# &gt;&gt;&gt; ['__annotations__', '__builtins__', '__call__', '__closure__', \n# &gt;&gt;&gt; '__code__', '__defaults__', '__get__', '__globals__', \n# &gt;&gt;&gt; '__kwdefaults__', '__name__', '__qualname__']\n</code></pre> <p>\u53ef\u8c03\u7528\u5bf9\u8c61\u3002\u53ef\u4f7f\u7528 \u8c03\u7528\u8fd0\u7b97\u7b26 <code>()</code> \u7684\u5bf9\u8c61\u3002\u53ef\u7528 <code>callable(obj)</code> \u8fdb\u884c\u5224\u65ad\u3002</p> <ul> <li>\u7528\u6237\u5b9a\u4e49\uff1a \u7528 <code>def</code> &amp; <code>lambda</code> \u521b\u5efa\u7684</li> <li>\u5185\u7f6e\u51fd\u6570\uff1a<code>map</code> &amp; <code>filter</code> ...</li> <li>\u5185\u7f6e\u65b9\u6cd5\uff1a <code>dict.get</code></li> <li>\u65b9\u6cd5\uff1a\u5728\u7c7b\u7684\u5b9a\u4e49\u4f53\u4e2d\u5b9a\u4e49\u7684\u51fd\u6570</li> <li>\u7c7b\uff1a\u8c03\u7528\u662f\u4f1a\u8fd0\u884c <code>__new__</code> \u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u7136\u540e\u8fd0\u884c <code>__init__</code> \u521d\u59cb\u5316\u5b9e\u4f8b\uff0c\u7136\u540e\u8fd4\u56de\u5b9e\u4f8b</li> <li>\u7c7b\u7684\u5b9e\u4f8b\uff1a\u5982\u679c\u5b9a\u4e49\u4e86 <code>__call__</code> \u65b9\u6cd5</li> <li>\u751f\u6210\u5668\u51fd\u6570\uff1a\u4f7f\u7528 <code>yield</code> \u7684 \u51fd\u6570\u6216\u65b9\u6cd5</li> </ul>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#some","title":"Some","text":"","tags":["Foo","Bar"]},{"location":"python/python_elegant/#path","title":"\u73af\u5883\u53d8\u91cf \u7cfb\u7edf\u8def\u5f84 PATH","text":"<p>python \u4f1a\u5728\u7cfb\u7edf\u8def\u5f84\u4e2d\u627e\u5bfb\u6240\u9700\u8981\u7684\u5305</p> <p><code>import sys</code></p> meth \u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u8def\u5f84 <code>print(sys.path)</code> \u52a0\u5165\u7cfb\u7edf\u8def\u5f84 <code>sys.path.append(new_path)</code> \u67e5\u770b\u73af\u5883\u53d8\u91cf <code>os.getenv(key)</code> <p>\u6a21\u578b\u4e0b\u8f7d\u7684\u5730\u5740 &amp; \u73af\u5883\u53d8\u91cf</p> <p>\u6a21\u578b\u4e0b\u8f7d\u4e00\u822c\u5404\u6709\u5404\u81ea\u7684\u9ed8\u8ba4\u5b89\u88c5\u5730\u5740\uff0c\u4f46\u4e00\u822c\u90fd\u4e0b\u5230\u4e2a\u4eba\u6587\u4ef6\u5939\u4e2d\u3002\u5982\u679c\u9879\u76ee\u5728\u670d\u52a1\u5668\u4e0a\u6709\u591a\u4e2a\u5206\u652f\u7684\u8bdd\uff0c\u540c\u4e2a\u6a21\u578b\u6587\u4ef6\u5c31\u4f1a\u4e0b\u8f7d\u591a\u6b21\uff0c\u5360\u7528\u5927\u91cf\u5185\u5b58\u3002\u6240\u4ee5\u6700\u597d\u641e\u6e05\u4e0b\u8f7d\u5730\u5740\uff0c</p> <pre><code>import os\n\"\"\"hanlp\"\"\"\nos.getenv('HANLP_HOME')\n# &gt;&gt;&gt; \n#\u4e3a\u7a7a\u5c31\u662f\u7cfb\u7edf\u6ca1\u6709\u50a8\u5b58HANLP_HOME\u7684\u73af\u5883\u53d8\u91cf\uff0c\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_2","title":"\u5bf9\u8c61\u5f15\u7528\u673a\u5236","text":"<p>\u53d8\u91cf\u662f\u2705\u8d34\u5728\u5bf9\u8c61\u4e0a\u7684\u6807\u6ce8\uff0c\u800c\u4e0d\u662f\u274c\u627f\u8f7d\u5bf9\u8c61\u7684\u76d2\u5b50\u3002</p> <p>\u8d4b\u503c\u3002\u662f\u628a\u53d8\u91cf\u5206\u914d\u7ed9\u5bf9\u8c61\u3002\u5bf9\u8c61\u5728\u8d4b\u503c\u4e4b\u524d\u5c31\u5df2\u7ecf\u521b\u5efa\u3002 \u8d4b\u503c\u8bed\u53e5 \u4ece\u53f3\u5230\u5de6\u6267\u884c\u3002</p> <pre><code>var = 'obj'  # \u5148\u521b\u5efa obj \u5bf9\u8c61\uff0c\u518d\u628a var \u7ed1\u5b9a\u7ed9 obj (\u8d34\u7ed9 obj \u4e0a)\n\na = b = c = 4  # \u94fe\u5f0f\u8d4b\u503c\nm, n = n, m  # \u4ea4\u53c9\u8d4b\u503c\n\n# \u89e3\u538b\u8d4b\u503c\nnums = [1, 2, 3, 4]\na, *_, e = nums\n# &gt;&gt;&gt; a=1, e=4\na, _, c, _ = nums\n# &gt;&gt;&gt; a=1, c=3\n</code></pre> <p> </p> <p>\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u6709\u6807\u8bc6\u3001\u7c7b\u578b\u3001\u503c\u3002\u5bf9\u8c61\u4e00\u65e6\u521b\u5efa\uff0c\u6807\u8bc6\u7edd\u4e0d\u4f1a\u53d8\u3002\u53ef\u4ee5\u5c06\u6807\u8bc6\u7406\u89e3\u4e3a\u5bf9\u8c61\u5728\u5185\u5b58\u4e2d\u7684\u5730\u5740\u3002 <code>id(var)</code> \u8fd4\u56de\u53d8\u91cf\u6240\u5f15\u7528\u7684\u5bf9\u8c61\u6807\u8bc6\u7684\u6574\u6570\u8868\u793a\u3002</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#is","title":"is &amp; == \u6807\u8bc6 &amp; \u76f8\u7b49\u6027","text":"<pre><code>var1 = {'name':'Lily', 'sex':'F'}\nvar2 = var1\nvar3 = {'name':'Lily', 'sex':'F'}\nvar1 is var2  \n# &gt;&gt;&gt; True\nvar1 is var3  # id \u662f\u552f\u4e00\u7684\u6807\u8bc6\n# &gt;&gt;&gt; False\nvar1 == var3  # \u5185\u5bb9\u76f8\u540c\n# &gt;&gt;&gt; True\n</code></pre> <p><code>A == B</code> \u5bf9\u8c61\u5185\u5bb9 \u2194\ufe0f <code>__eq__</code> \u3010\u76f8\u7b49\u3011 \u901a\u5e38\u6211\u4eec\u5173\u6ce8\u7684\u662f\u503c\u3002 <code>A is B</code> id\u5730\u5740 \u662f\u5426\u540c\u4e00\u4e2a\u5bf9\u8c61\u5f15\u7528\u3002\u3010\u6807\u8bc6\u3011 \u7ecf\u5e38\u7528\u6765\u786e\u5b9a\u662f\u4e0d\u662f <code>None</code>: <code>is None</code> &amp; <code>is not None</code></p> <p><code>is</code> \u901a\u5e38\u6bd4 <code>==</code> \u5feb\u3002</p> <p>\u56e0\u4e3a <code>is</code> \u4e0d\u80fd\u91cd\u8f7d\uff0c\u6240\u4ee5 python \u4e0d\u9700\u8981\u5bfb\u627e\u548c\u8c03\u7528\u7279\u6b8a\u65b9\u6cd5\uff0c\u800c\u662f\u76f4\u63a5\u6bd4\u8f83\u4e24\u4e2a\u6574\u6570ID\u3002<code>==</code> \u6302\u94a9\u7684\u662f <code>__eq__</code> \u80fd\u91cd\u8f7d\uff0c\u8003\u8651\u66f4\u6709\u5b9e\u9645\u610f\u4e49\u7684\u6bd4\u8f83\uff0c\u76f8\u6bd4\u4e8e\u76f4\u63a5\u7ee7\u627f <code>object</code> \u7684 \u76f4\u63a5\u6bd4\u8f83ID\u7684 <code>__eq__</code>\uff0c\u5927\u591a\u6570\u7c7b\u91cd\u8f7d\u4e86 <code>__eq__</code>\uff0c\u8bbe\u8ba1\u5230\u5bf9\u8c61\u7684\u7c7b\u578b\u3001\u5c5e\u6027\u3001\u53ef\u80fd\u590d\u6742\u5d4c\u5957\u67b6\u6784\u7684\u503c\u3002\u9700\u8981\u591a\u79cd\u6bd4\u8f83\u3002</p> <p><code>is</code> &amp; <code>==</code> SyntaxWarning</p> <p>\u4ecepython 3.8 \u5f00\u59cb\uff0c\u4f7f\u7528 is \u548c is not \u8fd0\u7b97\u7b26\u65f6\uff0c\u4f1a\u629b\u51fa <code>SyntaxWarning</code> \u8bed\u53e5\u8b66\u544a\u4fe1\u606f\u3002\u89e3\u51b3\u65b9\u6cd5\uff1a\u5efa\u8bae\u5c06\u5bf9\u5e94\u8bed\u53e5\u4e2d is/is not \u7528 == \u548c != \u4ee3\u66ff</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_3","title":"\u5185\u5b58\u7ba1\u7406","text":"","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_4","title":"\u6808\u533a\u548c\u5806\u533a","text":"<p>\u6808\u533a\uff1a\u5b58\u653e\u7684\u662f\u53d8\u91cf\u540d\u4e8e\u5185\u5b58\u5730\u5740\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u7b80\u5355\u7406\u89e3\u662f\u53d8\u91cf\u540d\u5b58\u5185\u5b58\u5730\u5740 \u5806\u533a\uff1a\u5b58\u653e\u7684\u662f\u53d8\u91cf\u503c\u3002 \u76f4\u63a5\u5f15\u7528\uff1a\u76f4\u63a5\u4ece\u6808\u533a\u627e\u5230\u5806\u533a\u7684\u5173\u7cfb\u662f\u5bf9\u53d8\u91cf\u503c\u7684\u76f4\u63a5\u5f15\u7528 \u95f4\u63a5\u5f15\u7528\uff1a\u5728\u5806\u533a\u5185\u627e\u5230\u5806\u533a\u7684\u5173\u7cfb\u662f\u5bf9\u53d8\u91cf\u503c\u7684\u95f4\u63a5\u5f15\u7528</p> <p>\u53d8\u91cf\u540d\u7684\u8d4b\u503c\u3001\u53d8\u91cf\u540d\u7684\u4f20\u53c2\uff0c\u4f20\u9012\u90fd\u662f==\u6808\u533a==\u7684\u6570\u636e\uff0c\u800c\u4e14\u6808\u7684\u6570\u636e\u662f==\u53d8\u91cf\u540d\u4e0e\u5185\u5b58\u5730\u5740\u7684\u5bf9\u5e94\u5173\u7cfb==\uff0c\u662f\u5bf9\u53d8\u91cf\u503c\u7684\u5f15\u7528</p> <pre><code>a, b = 1, [1]\nlst = [a, b]\n# &gt;&gt;&gt; lst = [1, 2]\nlst.append(b)\na, b = 2, 4 \n# &gt;&gt;&gt; lst = [1, 2, 2]\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_5","title":"\u5783\u573e\u56de\u6536\u673a\u5236","text":"<p>\u5783\u573e\u53d8\u91cf\uff0c \u5f53\u4e00\u4e2a\u503c\u6ca1\u6709\u4efb\u4f55\u53d8\u91cf\u540d\u548c\u5b83\u8fdb\u884c\u6346\u7ed1\uff0c\u8be5\u53d8\u91cf\u503c\u5c31\u4f1a\u65e0\u6cd5\u88ab\u8bbf\u95ee\u5230\uff0c\u6d89\u53ca\u5230\u5f15\u7528\u8ba1\u6570\u7684\u7b97\u6cd5</p> <p><code>del x</code> \u7684\u7406\u89e3</p> <p>\u89e3\u9664\u4e86 x \u548c\u5b83\u6240\u6307\u5411\u5bf9\u8c61ID\u4e3a\u7684 obj \u7684\u7ed1\u5b9a\u5173\u7cfb ID\u4e3a \u7684 obj \u7684\u5f15\u7528\u8ba1\u6570 -1</p> <pre><code>x = x-value  \n# \u751f\u6210 x-value \u7684 ID\u4e3a* \u7684 obj\uff0c\u628a x \u53d8\u91cf\u540d\u8d34\u5230 ID\u4e3a* \u7684 obj\ndel x  # \u89e3\u9664\n</code></pre> <p>\u5f15\u7528\u8ba1\u6570\u3001\u6807\u8bb0\u6e05\u695a\u3001\u5206\u4ee3\u56de\u6536 \u5f15\u7528\u8ba1\u6570\uff0c\u53d8\u91cf\u503c\u88ab\u5f15\u7528(\u6307\u5411)\u7684\u6570\u91cf\uff0c\u4e00\u65e6\u6ca1\u6709\u5f15\u7528\u5173\u7cfb(\u7bad\u5934\u6307\u5411)\uff0c\u5f15\u7528\u8ba1\u6570=0\uff0c\u5c31\u5f53\u6210\u9700\u8981\u56de\u6536\u7684\u5783\u573e\u3002\u5783\u573e\u5bf9\u8c61\u4f1a\u88ab\u9500\u6bc1\uff0c\u91ca\u653e\u88ab\u5206\u914d\u7684\u5185\u5b58 \u6807\u8bb0\u6e05\u9664\uff0c\u56e0\u4e3a\u95f4\u63a5\u5f15\u7528\u6709\u53ef\u80fd\u9020\u6210\u5faa\u73af\u5f15\u7528\uff0c\u5bfc\u81f4\u5f15\u7528\u8ba1\u6570\u4e0d\u53ef\u80fd\u4e3a0\uff0c\u4ee5\u81f3\u4e8e\u53d8\u91cf\u503c\u6c38\u8fdc\u4e0d\u53ef\u80fd\u88ab\u5220\u9664\u3002\u6240\u4ee5\u5f15\u5165\u6807\u8bb0\u6e05\u9664\uff0c\u5c06\u6240\u6709\u53d8\u91cf\u503c\u8fdb\u884c\u626b\u63cf\uff0c\u82e5\u5b58\u5728\u65e0\u6cd5\u4ece\u6808\u533a\u8bbf\u8fbe\u7684\u53d8\u91cf\u503c\uff0c\u5219\u8bc1\u660e\u662f\u65e0\u76f4\u63a5\u5f15\u7528\uff0c\u7eaf\u95f4\u63a5\u5f15\u7528\u7684\u5783\u573e \u5206\u4ee3\u56de\u6536\uff0c\u7528\u7a7a\u95f4\u6362\u65f6\u95f4\uff0c\u4e0d\u4f1a\u6bcf\u65f6\u6bcf\u523b\u5730\u53bb\u626b\u63cf\u5168\u90e8\u53d8\u91cf\u503c\uff0c\u800c\u662f\u5c06\u53d8\u91cf\u503c\u5206\u7c7b\uff0c\u4ee5\u4e0d\u540c\u7684\u9891\u7387\u53bb\u626b\u63cf\u5f52\u5c5e\u4e0d\u540c\u7c7b\u522b\u7684\u53d8\u91cf\u3002\u521a\u521a\u65b0\u5efa\u7684\u53d8\u91cf\u5c5e\u4e8e\u65b0\u751f\u4ee3\u7684\u53d8\u91cf\uff0c\u6709\u53ef\u80fd\u7528\u5b8c\u5373\u5f03\uff0c\u6240\u4ee5\u626b\u63cf\u9891\u7387\u4f1a\u9ad8\u4e00\u70b9\uff1b\u88ab\u5f15\u7528\u8fc7\u5f88\u591a\u6b21\u7684\u53d8\u91cf\u5c5e\u4e8e\u6210\u719f\u53d8\u91cf\uff0c\u53ef\u80fd\u5c5e\u4e8e\u4e00\u76f4\u90fd\u8981\u7528\u7684\u91cd\u8981\u53d8\u91cf\uff0c\u6240\u4ee5\u626b\u63cf\u9891\u7387\u4f1a\u4f4e\u4e00\u4e9b\u3002</p> <pre><code>graph \nsubgraph \u5806\u533a\nA -.- B\nB -.- A\nend\nsubgraph \u6808\u533a\nNone\nend</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_6","title":"\u4e0d\u53d8 &amp; \u53ef\u53d8","text":"<p>\u4e0d\u53ef\u53d8\u3002\u6570\u636e\u7ed3\u6784\u7684\u7269\u7406\u5185\u5bb9(\u5373\u5143\u7d20\u4fdd\u5b58\u7684\u5f15\u7528 item obj \u7684\u6807\u8bc6)\u4e0d\u53ef\u53d8\uff0c\u4e0e item obj \u7684\u5185\u5bb9\u65e0\u5173\u3002 \u4e0d\u53ef\u53d8\u7c7b\u578b\uff0c\u4e0d\u80fd\u8fdb\u884c item assignment\u3002\u8d4b\u503c\u4f1a\u6539\u53d8\u5143\u7d20\u7684 ID\u3002 \u4e0d\u53ef\u53d8\u7c7b\u578b\uff0c\u4e00\u65e6\u5185\u5bb9\u6539\u53d8\uff0c\u767e\u5206\u4e4b\u767e\u662f\u6307\u5411\u4e86\u65b0\u7684\u5185\u5bb9\uff0c\u5f15\u7528\u7684ID\u5df2\u7ecf\u6539\u53d8\u3002</p> <p>tuple \u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u53ea\u662f\u8bf4 \u6bcf\u4e2a\u5143\u7d20\u5f15\u7528\u7684 ID \u4e0d\u53ef\u53d8\uff0c\u5143\u7d20\u53ef\u80fd\u5f15\u7528\u7684\u662f\u53ef\u53d8\u7c7b\u578b\u7684\u5bf9\u8c61\u3002\u5982\u679c\u5c31\u5730\u4fee\u6539\uff0c\u5143\u7d20\u5f15\u7528\u7684ID\u4e0d\u53d8\uff0c\u5143\u7d20\u5f15\u7528\u7684\u5185\u5bb9\u53d1\u751f\u6539\u53d8\u3002\u4e5f\u4e0d\u4f1a\u4ea7\u751f Error\u3002</p> <pre><code>a = (1, [1, 2])\n[id(item) for item in a]\n# &gt;&gt;&gt; [4309582064, 4312627712]\na[1].append(3)\n[id(item) for item in a]\n# &gt;&gt;&gt; [4309582064, 4312627712]  # id \u4e0d\u53d8\n# &gt;&gt;&gt; a = (1, [1, 2, 3])  # \u5185\u5bb9\u53d8\n</code></pre> <p>\u53d8\u91cf\u540d\u7684\u8d4b\u503c\u3001\u53d8\u91cf\u540d\u7684\u4f20\u53c2\uff0c\u4f20\u9012\u90fd\u662f \u6808\u533a \u7684\u6570\u636e</p> <p>\u8d4b\u503c\u5c31\u662f\u5c06\u4e00\u4e2a\u65e7\u7684\u53d8\u91cf\u540d\u548c - \u65e7\u503c\u7684\u5730\u5740\u89e3\u7ed1\u5173\u7cfb - \u65b0\u503c\u7684\u5730\u5740\u7ed1\u5b9a\u5173\u7cfb <pre><code>\"\"\" \u5bf9\u4e8ea\u91cd\u65b0\u8d4b\u503c\n- \u4e0e 4\u7684\u5730\u5740 \u89e3\u7ed1\u5173\u7cfb\n- \u4e0e 5\u7684\u5730\u5740 \u7ed1\u5b9a\u5173\u7cfb\n\"\"\"\na = 4\n# &gt;&gt;&gt; id(a) = 4373905744\na = 5\n# &gt;&gt;&gt; id(a) = 4373905776\n# &gt;&gt;&gt; id(4) = 4373905744\n# &gt;&gt;&gt; id(5) = 4373905776\n\n\"\"\" \u5bf9\u4e8elst\u91cd\u65b0\u8d4b\u503c\n- \u89e3\u7ed1\u5173\u7cfb\n- \u7ed1\u5b9a\u5173\u7cfb\n\"\"\"\nlst = [1, 2]\n# &gt;&gt;&gt; id(lst) = 4376984512\nlst = [1, 3]\n# &gt;&gt;&gt; id(lst) = 4376922944\n\n\"\"\" \u5bf9\u4e8elst \u7684 item assignment\u3010\u53ef\u53d8\u3011\n- \u4e0d\u6539\u53d8id\u5730\u5740\n- \u4f46\u4f1a\u6539\u53d8\u5bb9\u5668\u5185\u7684\u5730\u5740\n\"\"\"\n# &gt;&gt;&gt; lst[1] = 3\n# &gt;&gt;&gt; id(lst[1]) = 4373905712\n# &gt;&gt;&gt; id(3) = 4373905712\nlst[1] = 2\n# &gt;&gt;&gt; lst = [1, 2]\n# &gt;&gt;&gt; id(lst) = 4376922944 # \u548c\u4e4b\u524d\u4e00\u81f4\n# &gt;&gt;&gt; id(lst[1]) = 4373905680 # \u6539\u4e86\u4e4b\u524d\u7684\n</code></pre></p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_7","title":"\u6df1\u6d45\u62f7\u8d1d","text":"<p>\u9ed8\u8ba4\u4f5c\u6d45\u62f7\u8d1d</p> <p>\u5bf9\u4e0d\u53ef\u53d8\u7c7b\u578b\u65bd\u52a0\u7684\u628a\u620f\uff1a\u8d4b\u503c\u65f6\u4e0d\u521b\u5efa\u526f\u672c\uff0c\u800c\u662f\u8fd4\u56de\u540c\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u3002\u56e0\u4e3a\u4e0d\u80fd\u8fdb\u884c\u4fee\u6539\uff0c\u4e00\u65e6\u4fee\u6539\u5c31\u662f new \u4e00\u4e2a\u65b0\u5bf9\u8c61 with \u65b0 ID\u3002</p> <p>\u6d45\u62f7\u8d1d\u3002\u65e0\u8bba\u5982\u4f55\uff0c\u76f4\u63a5\u6307\u5411 item \u6240\u5f15\u7528\u7684\u5bf9\u8c61\u5730\u5740\u3002 <code>b = a.copy()</code> &amp; \u6784\u9020\u65b9\u6cd5 &amp; <code>[:]</code> \u6df1\u62f7\u8d1d\u3002\u533a\u5206\u8981\u62f7\u8d1d\u7684\u662f\u53ef\u53d8\u7684\u8fd8\u662f\u4e0d\u53ef\u53d8\u7684\u3002 <code>b = copy.deepcopy(a)</code> 1\ufe0f\u20e3 \u4e0d\u53ef\u53d8\uff0c\u6307\u5411\u539f\u6765\u7684\u5730\u5740\uff08\u5730\u5740\u76f8\u540c\uff0c\u540c\u4e00\u4e2a\u5bf9\u8c61\uff09\uff1b 2\ufe0f\u20e3 \u53ef\u53d8\u7684\uff0c\u91cd\u65b0\u6784\u5efa\u4e00\u4e2a\uff0ccopy\u5185\u5bb9\uff08\u5730\u5740\u4e0d\u540c\uff0c\u5185\u5bb9\u76f8\u540c\uff09\u3002</p> <p>\u5bf9\u4e8e\u5bb9\u5668\u7c7b\u578b\u7684\u5206\u522b\uff1a\u770b\u662f\u5426\u5728\u4f5c\u51fa\u3010\u4fee\u6539\u4e4b\u540e ab\u4e0d\u4e00\u6837\u3011\ud83d\udff0 \u3010a b \u662f\u72ec\u7acb\u7684\u3011</p> <p>\u4fee\u6539\u4ece\u5143\u7d20\u5bf9\u8c61\u5206\uff1a\u53ef\u53d8\u5143\u7d20 &amp; \u4e0d\u53ef\u53d8\u5143\u7d20\uff1b\u4eceID\u53d8\u5316\u5206 ID\u53d8 &amp; ID\u4e0d\u53d8\u3002 \u4e0d\u53ef\u53d8\u5143\u7d20\u4e00\u65e6\u6539\u53d8\uff0c\u53ea\u80fd\u8fdb\u884c\u8d4b\u503c\uff0cID\u4e00\u5b9a\u4f1a\u53d8\u3002\u53ef\u53d8\u5143\u7d20\u53ea\u6709\u5728\u8d4b\u503c\u7684\u65f6\u5019 ID\u53d8\uff0c\u5c31\u5730\u66f4\u6539\u65f6ID\u4e0d\u4f1a\u53d8\uff08\u8b6c\u5982\u8bf4 item assignment\uff09\u3002 <code>a = [1, (1, 2), [1, 2]]</code></p> \u4e0d\u53ef\u53d8\u7684\u8d4b\u503c \u53ef\u53d8\u7684\u8d4b\u503c \u53ef\u53d8\u7684item assignment <code>b[1]='a'</code>\u5143\u7ec4 <code>b[2]='a'</code>\u5217\u8868 <code>b[2][0]='a'</code>\u5217\u8868\u7684item assignment \u6d45\u62f7\u8d1d \u2705 \u2705 \u2705 \u6df1\u62f7\u8d1d \u2705 \u2705 \u274c <pre><code>a, b = 1, [1]\nlst = [a, b]\n# &gt;&gt;&gt; lst=[1, [1]]\na += 1\nb += [1]\n# &gt;&gt;&gt; lst=[1, [1, 1]]\n</code></pre> <p> <p>a \u662f\u4e0d\u53ef\u53d8\uff1bb\u662f\u53ef\u53d8\u3002\u5047\u8bbe\u521b\u5efa\u5bf9\u8c61\u7684ID\u4ece1\u5f00\u59cb\u30021. \u521b\u5efa ID=1\u76841 &amp; ID=2\u5217\u8868[1]2. \u628a a &amp; b \u5206\u522b\u8d34\u5230 ID=1 &amp; ID=2\u4e0a3. \u521b\u5efa ID=3\u7684\u5217\u8868\uff0c\u628a[0]\u4f4d\u8d34\u5230ID=1\uff0c[1]\u4f4d\u8d34\u5230ID=2\u3002\u800c\u4e0d\u662f\u8d34\u5230 a &amp; b \u4e0a4. \u521b\u5efa ID=4\u76842\uff0c\u628a a \u4eceID=1\u6495\u6389\uff0c\u7ed9ID=35. \u4fee\u6539b\uff0cb\u6ca1\u6709\u6495\u6389\uff0c\u5176\u5b9e\u4fee\u6539ID=3lst\u7684\u4f4d[0]\u5728ID=1\u4e0a\u4e0ea\u65e0\u5173\uff1b\u4f4d[1]\u5728ID=3\u4e0a\uff0c\u6240\u4ee5\u4e5f\u4fee\u6539\u4e86\u3002</p></p> <pre><code>import copy\n\nl1 = [0, [11, 22], (7, 8)]  # [\u4e0d\u53ef\u53d8, \u53ef\u53d8\uff0c \u4e0d\u53ef\u53d8]\nl2 = list(l1)\nl3 = copy.deepcopy(l1)\n\nid(l1) == id(l2) or id(l1)==id(l3)\n# &gt;&gt;&gt; False\nlist(map(lambda i1, i2 : id(i1)==id(i1), l1 ,l2))\n# &gt;&gt;&gt; [True, True, True]\nlist(map(lambda i1, i3 : id(i1)==id(i3), l1 ,l3))\n# &gt;&gt;&gt; [True, False, True]\n\nl1[0] += 1\nl1[1].remove(11)\nl1[1]+=[33,44]\nl1[2]+=(9, 10)\n# &gt;&gt;&gt; l1=[1, [22, 33, 44], (7, 8, 9, 10), -1]\n# &gt;&gt;&gt; l2=[0, [22, 33, 44], (7, 8)]\n# &gt;&gt;&gt; l3=[0, [11, 22], (7, 8)]\n</code></pre> <p></p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_8","title":"\u6574\u6570\u6c60","text":"<p>\u7406\u8bba\u4e0a\u7684\u6b63\u5e38\u60c5\u51b5\uff0c\u53d8\u91cf\u90fd\u662f\u9700\u8981\u7533\u8bf7\u5185\u5b58\u7a7a\u95f4\uff08id\u4e0d\u540c\uff09 \u5b58\u50a8\u6570\u636e\u7136\u540e\u628a\u5730\u5740\u8fd4\u56de\u7ed9\u53d8\u91cf\u540d\u5f15\u7528\u3002\u4f46\u5728 Python\u89e3\u91ca\u5668\uff08\u4e00\u822c\u662fcpython\uff09[-5, 256] \u662f\u4e0d\u4f1a\u7533\u8bf7\u65b0\u7684\u5185\u5b58\uff0c\u800c\u90fd\u662f\u5f15\u7528\u540c\u4e00\u5757\u65e9\u5df2\u5728\u89e3\u91ca\u5668\u8fd0\u884c\u65f6\u5c31\u5f00\u8f9f\u7684\u5185\u5b58,\u5c0f\u6574\u6570\u6c60\uff0c\u5bfc\u81f4id\u76f8\u540c\u3002\u53e6\u5916 pycharm/vscode \u6709==\u5927\u6574\u6570\u6c60==\u7684\u6982\u5ff5</p> <pre><code>\"\"\"\u6b63\u5e38\u6765\u8bf4\uff0c\u6bcf\u6b21\u7533\u8bf7\uff0cid\u90fd\u4e0d\u4e00\u6837\"\"\"\na, b = 9999999999999, 9999999999999\na == b\n# &gt;&gt;&gt; True\na is b\n# &gt;&gt;&gt; Fasle\n# &gt;&gt;&gt; id(a) = 4336403888\n# &gt;&gt;&gt; id(b) = 4336403152\n\n\"\"\" \u5728vscode\u91ccid\u4f9d\u65e7\u4e00\u6837\uff1a\u5927\u6574\u6570\u6c60\"\"\"\nid(221111111)\n# &gt;&gt;&gt; 4336403952\nid(221111111)\n# &gt;&gt;&gt; 4336403952\n</code></pre> <p>\u5c0f\u6574\u6570\u6c60</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#general","title":"General","text":"","tags":["Foo","Bar"]},{"location":"python/python_elegant/#convention","title":"convention","text":"<ul> <li>prefernce<ul> <li>PEP8\u5efa\u8bae indent using space \u7a7a\u683c\u7f29\u8fdb = 4\uff0c\u8fd9\u65e2\u53ef\u63d0\u9ad8\u53ef\u8bfb\u6027\uff0c\u53c8\u7559\u4e0b\u4e86\u8db3\u591f\u7684\u591a\u7ea7\u7f29\u8fdb\u7a7a\u95f4\u3002</li> <li>\u5782\u76f4\u53c2\u8003\u7ebf\uff0c\u5e2e\u52a9\u4f60\u9075\u5b88\u884c\u957f\u4e0d\u80fd\u8d85\u8fc779\u5b57\u7b26\u7684\u7ea6\u5b9a\u3002</li> </ul> </li> <li><code>.py</code> file<ul> <li>\u5728\u5f00\u5934\u52a0\u4e0a\u59d3\u540d\u548c\u5f53\u524d\u65e5\u671f\uff0c\u518d\u7528\u4e00\u53e5\u8bdd\u9610\u8ff0\u7a0b\u5e8f\u7684\u529f\u80fd</li> <li>\u58f0\u660e\u7f16\u7801\u65b9\u5f0f: <code># -*- coding:utf-8 -*-</code></li> <li>\u53ef\u4f7f\u7528\u7a7a\u884c\u6765\u7ec4\u7ec7\u4ee3\u7801\uff0c\u4f46\u4e0d\u8981\u6ee5\u7528\u3002<ul> <li>\u5728\u7c7b\u4e2d\uff0c\u53ef\u4f7f\u7528\u4e00\u7a7a\u884c\u6765\u5206\u9694\u65b9\u6cd5\uff1b</li> <li>\u5728\u6a21\u5757\u4e2d\uff0c\u53ef\u4f7f\u7528\u4e24\u4e2a\u7a7a\u884c\u6765\u5206\u9694\u7c7b</li> </ul> </li> </ul> </li> <li>\u8bf8\u5982 <code>==, &gt;=, &lt;=</code>\u7b49\u6bd4\u8f83\u8fd0\u7b97\u7b26\u4e24\u8fb9\u5404\u6dfb\u52a0\u4e00\u4e2a\u7a7a\u683c\uff0c\u4f8b\u5982\uff0c<code>if age &lt; 4</code> :\u8981\u6bd4 <code>if age&lt;4</code> \u597d\u3002</li> <li>\u6587\u6863\u5b57\u7b26\u4e32, docstring, \u7684\u6ce8\u91ca\uff0c\u63cf\u8ff0\u4e86\u51fd\u6570\u662f\u505a\u4ec0\u4e48\u7684\u3002\u6587\u6863\u5b57\u7b26\u4e32\u7528\u4e09\u5f15\u53f7\u62ec\u8d77\uff0cPython\u4f7f\u7528\u5b83\u4eec\u6765\u751f\u6210\u6709\u5173\u7a0b\u5e8f\u4e2d\u51fd\u6570\u7684\u6587\u6863\u3002</li> </ul>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#naming-conventions","title":"naming conventions","text":"<ul> <li>\u9a7c\u5cf0\u547d\u540d\u7684\u65f6\u5019</li> <li>\u4f7f\u7528\u5355\u6570\u548c\u590d\u6570\u5f0f\u540d\u79f0\uff0c\u53ef\u5e2e\u52a9\u4f60\u5224\u65ad\u4ee3\u7801\u6bb5\u5904\u7406\u7684\u662f\u5355\u4e2a\u5217\u8868\u5143\u7d20\u8fd8\u662f\u6574\u4e2a\u5217\u8868\u3002</li> </ul> \u7c7b\u578b notes Package\uff0cModule.py\uff0c\u5168\u5c40\u53d8\u91cf\uff0cFunction \u5168\u5c0f\u5199\uff0c\u4e0b\u5212\u7ebf \u5b9e\u4f8b\u53d8\u91cf instance varaibles ^ Classes \u9a7c\u5cf0\u547d\u540d, \u6240\u6709\u7684\u7f29\u5199\u90fd\u8981\u5927\u5199\uff1a<code>HTTPSever</code> \u5e38\u91cf constant \u5168\u5927\u5199\uff0c\u4e0b\u5212\u7ebf <p>\u5b9e\u4f8b\u53d8\u91cf instance varaibles</p> <ul> <li>Non-public instance variables should begin with a single underscore</li> <li>If an instance name needs to be mangled, two underscores may begin its name</li> </ul> <p>CodingConvention | python3-cookbook | Python \u4e2d\u7684\u4e0b\u5212\u7ebf\u547d\u540d\u89c4\u5219</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_9","title":"\u51fd\u6570","text":"<p>\u51fd\u6570\u4e5f\u662f\u5bf9\u8c61\u7684\u4e00\u79cd\uff0c\u662f <code>function</code> \u7c7b\u7684\u5b9e\u4f8b, \u6240\u4ee5\u53ef\u4ee5\u8d4b\u7ed9\u53d8\u91cf\uff0c\u901a\u8fc7\u53d8\u91cf\u540d\u8c03\u7528\uff1b\u4f5c\u4e3a\u53c2\u6570\u4f20\u7ed9\u522b\u7684\u51fd\u6570\u3002\u3002\u3002</p> <p>function \u7c7b \ud83d\udcd5 \u51fd\u6570\u5bf9\u8c61\u7279\u6709\u5c5e\u6027 <code>dir(func)</code> \u67e5\u770b\u5bf9\u8c61\u5c5e\u6027 <code>__call__:method-wrapper</code> <code>__closure__:tuple=None</code> \u51fd\u6570\u95ed\u5305 \u5bf9\u81ea\u7531\u53d8\u91cf\u7684\u7684\u7ed1\u5b9a <code>__defaults__:tuple</code> \u653e \u5f62\u5f0f\u53c2\u6570\u7684\u9ed8\u8ba4\u503c <code>__globals__:dict</code> \u6240\u5728 module \u7684\u5168\u5c40\u53d8\u91cf <code>__kwdefaults__</code> \u653e \u5173\u952e\u5b57\u5f62\u5f0f\u53c2\u6570\u7684\u9ed8\u8ba4\u503c <code>__name__</code> \u51fd\u6570\u540d</p> <pre><code>def func(n):\n    \"\"\" return param \"\"\"\n    return n\n\nf =func\n# &gt;&gt;&gt; f=func=&lt;function func at 0x102fe88b0&gt;\nf(1)\n# &gt;&gt;&gt; f(1)=func(1)=1\nlist(map(f,range(3)))\n# &gt;&gt;&gt; [0, 1, 2]\n</code></pre> <p>higher-order func \u9ad8\u9636\u51fd\u6570\u3002\u63a5\u53d7\u51fd\u6570\u4e3a\u53c2\u6570\uff0c\u6216\u628a\u51fd\u6570\u4f5c\u4e3a\u7ed3\u679c\u8fd4\u56de\u7684\u51fd\u6570\u3002</p> <p>map &amp; filter &amp; reduce &amp; apply &amp;... sorted(\u56e0\u4e3a\u80fd\u7528key\u53bb\u63a5\u53d7k\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u628ak\u51fd\u6570\u7ed3\u679c\u4f5c\u4e3a\u6392\u5e8f\u7684\u4f9d\u636e)</p> <p>\u51fd\u6570\u5185\u7701 Function introspection\u3002\u662f\u6307\u901a\u8fc7\u4e00\u4e9b\u673a\u5236\u6765\u83b7\u53d6\u51fd\u6570\u7684\u5143\u4fe1\u606f\uff0c\u4f8b\u5982\u51fd\u6570\u540d\u79f0\u3001\u53c2\u6570\u5217\u8868\u3001\u8fd4\u56de\u503c\u7c7b\u578b\u7b49\u3002\u5b83\u4f7f\u5f97\u7a0b\u5e8f\u80fd\u591f\u5728\u8fd0\u884c\u65f6\u68c0\u67e5\u51fd\u6570\u7684\u7ed3\u6784\u548c\u7279\u6027\uff0c\u8fdb\u800c\u8fdb\u884c\u52a8\u6001\u7684\u64cd\u4f5c\u548c\u5206\u6790\u3002</p> <p><code>type()</code>: \u83b7\u53d6\u5bf9\u8c61\u7684\u7c7b\u578b <code>dir()</code>: \u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\u548c\u65b9\u6cd5\u7684\u5217\u8868\u3002 <code>inspect module</code>\uff1a<code>inspect.isfunction(obj)</code>:\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u51fd\u6570\uff0c<code>inspect.getargspec(func)</code>: \u83b7\u53d6\u51fd\u6570\u7684\u53c2\u6570\u4fe1\u606f\uff0c<code>inspect.signature(func)</code> : \u83b7\u53d6\u51fd\u6570\u7684\u7b7e\u540d\u4fe1\u606f\u3002 <code>__doc__</code> \u5c5e\u6027\uff1a\u51fd\u6570\u7684\u6587\u6863\u5b57\u7b26\u4e32 <code>\u88c5\u9970\u5668</code> \uff1a\u88c5\u9970\u5668\u662f\u4e00\u79cd\u4fee\u6539\u51fd\u6570\u884c\u4e3a\u7684\u65b9\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u51fd\u6570\u5185\u7701\u3002\u901a\u8fc7\u5b9a\u4e49\u4e00\u4e2a\u88c5\u9970\u5668\u51fd\u6570\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u6267\u884c\u524d\u540e\u8fdb\u884c\u4e00\u4e9b\u64cd\u4f5c\uff0c\u4f8b\u5982\u8bb0\u5f55\u65e5\u5fd7\u3001\u8ba1\u65f6\u7b49\u3002\u88c5\u9970\u5668\u53ef\u4ee5\u7528\u6765\u52a8\u6001\u5730\u4fee\u6539\u51fd\u6570\u7684\u884c\u4e3a\uff0c\u4ece\u800c\u5b9e\u73b0\u51fd\u6570\u5185\u7701\u7684\u76ee\u7684\u3002</p> <p>\u6cdb\u51fd\u6570 generic function\u3002\u6839\u636e\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u7c7b\u578b\uff0c\u4ee5\u4e0d\u540c\u65b9\u5f0f\u88c5\u9970</p> <p>\u7a7a\u51fd\u6570 \u5e94\u7528\u573a\u666f\uff1a\u5199\u5927\u7eb2\uff0c\u63d0\u9192 developer \u6709\u4ec0\u4e48\u529f\u80fd\uff0c\u5728\u9884\u8bbe\u884c\u4e3a\u7684\u65f6\u5019</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_10","title":"\u53c2\u6570\u4f20\u9012","text":"","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_11","title":"\u5171\u4eab\u4f20\u53c2","text":"<p>\u53c2\u6570\u4f20\u9012 \u6839\u636e\u5f15\u7528\u7684\u65b9\u5f0f\u5206\u4e3a - \u6309\u503c\u4f20\u9012\uff0c\u51fd\u6570\u5f97\u5230\u53c2\u6570\u7684\u526f\u672c\u3002 \u4f20 a \u7684\u65f6\u5019\uff0c\u62ff\u5230 a - \u6309\u5f15\u7528\u4f20\u9012\uff0c\u51fd\u6570\u5f97\u5230\u6307\u5411\u53c2\u6570\u7684\u6307\u9488 \u4f20 a \u7684\u65f6\u5019\uff0c\u62ff\u5230 \u6307\u5411 a \u7684\u6307\u9488</p> <p>\u5171\u4eab\u4f20\u53c2 call by sharing\u3002\u51fd\u6570\u7684\u5404\u4e2a\u5f62\u5f0f\u7684\u53c2\u6570\u83b7\u5f97\u5b9e\u53c2\u4e2d\u5404\u4e2a\u5e94\u7528\u7684\u526f\u672c\u3002</p> <p>\u53c2\u6570\u4f20\u9012\u662f\u6309\u503c\u4f20\u9012\uff0c\u4f46\u8fd9\u91cc\u7684\u503c\u662f\u5f15\u7528\u3002</p> <p>\u53c2\u6570\u4f20\u9012\u662f\u3010\u5f15\u7528\u3011\u6309\u503c\u7684\u4f20\u9012\u3002\u51fd\u6570\u5185\u90e8\u7684\u5f62\u53c2\u662f\u5b9e\u53c2\u7684\u522b\u540d\uff0c\u5c31\u662f\u8d34\u5728\u5b9e\u53c2\u6240\u5f15\u7528\u7684\u5bf9\u8c61\u4e0a\uff0c\u4f46\u662f\u4e0d\u80fd\u89e3\u9664\u5b9e\u53c2\u548c\u5bf9\u8c61\u7684\u7ed1\u5b9a\u5173\u7cfb\u3002 \u6240\u4ee5 \u51fd\u6570\u5185\u90e8\u80fd\u4fee\u6539\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\u7684\u53ef\u53d8\u7c7b\u578b\u3002</p> <pre><code>def f(a, b):\n    a += b\n    return a\n\nx, y = 1, 2\nf(x, y)\n# &gt;&gt;&gt; 3\n# &gt;&gt;&gt; x, y=(1, 2)\nx, y = (1, 1), (2, 2)\nf(x, y)\n# &gt;&gt;&gt; (1, 1, 2, 2)\n# &gt;&gt;&gt; x, y=((1, 1), (2, 2))\nx, y = [1, 1], [2, 2]\nf(x, y)\n# &gt;&gt;&gt; [1, 1, 2, 2]\n# &gt;&gt;&gt; x, y=([1, 1, 2, 2], [2, 2])  # \u53ef\u53d8\u7c7b\u578b\u5bf9\u8c61\u88ab\u4fee\u6539\n</code></pre> <p>\u4e0d\u8981\u4f7f\u7528\u53ef\u53d8\u7c7b\u578b <code>[]</code> &amp; <code>dict{}</code> \u4f5c\u4e3a\u9ed8\u8ba4\u53c2\u6570\uff0c\u800c\u662f\u9009\u62e9 <code>None</code></p> <p>\u9ed8\u8ba4\u53c2\u6570\u4f1a\u81ea\u5efa\u5bf9\u8c61\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a\uff0c\u5c31\u4e00\u5f8b\u8d34\u5728\u5176\u4e0a\uff0c\u6240\u4ee5\u5982\u679c\u53ef\u53d8\u7c7b\u578b\u53d8\u5316\uff0c\u5f15\u7528\u7684ID\u5bf9\u8c61\u53d8\u4e86\uff0c\u53ea\u8981\u7ed1\u5b9a\u5728\u8fd9\u4e2aID\u5bf9\u8c61\uff08\u53ea\u8981\u4e0d\u662f\u8d4b\u503c\uff09\uff0c\u90fd\u968f\u7740\u4e00\u8d77\u53d8\u5316\u3002 \u9ed8\u8ba4\u503c\u5728\u5b9a\u4e49\u51fd\u6570\u8ba1\u7b97\uff08\u901a\u5e38\u5728\u52a0\u8f7d\u6a21\u5757\u65f6\u8fdb\u884c\u5bf9\u8c61\u521b\u5efa\uff09\uff0c\u56e0\u6b64\u9ed8\u8ba4\u503c\u4f1a\u53d8\u6210\u51fd\u6570\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u51e1\u662f\u6ca1\u6709\u4f20\u5165\uff0c\u90fd\u4f1a\u6307\u5411\u8fd9\u4e2a\u5728\u4e00\u5f00\u59cb\u5c31\u521b\u5efa\u597d\u7684\u9ed8\u8ba4\u503c\u5bf9\u8c61\uff08ID\u4e3a\u540c\u4e00\u4e2a\uff09\u3002</p> <pre><code>def func(a=[1,2]):\n    a.append(3)\n    return a\n\nfunc([3])\n# &gt;&gt;&gt; [3, 3]  &lt;- [3]\nres = func() \n# &gt;&gt;&gt; res=[1, 2, 3]  &lt;- [1, 2]\nres.append(-1)\n# &gt;&gt;&gt; res=[1, 2, 3, -1]\nfunc()  # \u9ed8\u8ba4\u53c2\u6570\u88ab\u6539\u53d8\n# &gt;&gt;&gt; [1, 2, 3, -1, 3] &lt;- [1, 2, 3, -1]\n# &gt;&gt;&gt; res=[1, 2, 3, -1, 3]\n</code></pre> <p>\u5982\u679c\u5b9a\u4e49\u53c2\u6570\u63a5\u53d7\u53ef\u53d8\u53c2\u6570\uff0c\u8c28\u614e\u8003\u8651\u8c03\u7528\u65b9\u662f\u5426\u671f\u671b\u4fee\u6539\u4f20\u5165\u7684\u53c2\u6570\u3002</p> <pre><code>class C():\n    def __init__(self,lst=None, modified=True):\n        if lst is None:  # \u5f53\u9700\u8981\u7a7a\u7684\u65f6\u5019 \u7528 None \u6765\u5224\u5b9a\n            self.lst = []\n        elif modified == Ture:\n            self.lst = lst  # \u6307\u5411\u4f20\u5165\u7684 ID\uff0c\u91cc\u9762\u53d8\uff0c\u5916\u9762\u540c\u6837 ID\u7684 \u4e5f\u4f1a\u53d8\n        elif modified == Flase:\n            self.lst = list(lst)  # \u6d45\u62f7\u8d1d\uff0cfor \u5143\u7d20\u90fd\u662f\u4e0d\u53ef\u53d8\u7684\n            self.lst = copy.deepcopy() # \u6df1\u62f7\u8d1d\uff0cfor \u5143\u7d20\u6709\u53ef\u53d8\u7684\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#args-kwargs","title":"args &amp; kwargs","text":"<p>\u4ec5\u9650\u5173\u952e\u8bcd\u53c2\u6570 kwargs\u3002\u53ea\u80fd\u7528\u5173\u952e\u5b57\u6a21\u5f0f\u4f20\u9012\u3002\u5728\u51fd\u6570\u5b9a\u4e49\u65f6\u653e\u5728 <code>*args</code> \u7684\u540e\u9762. \u4e00\u822c\u53c2\u6570 args\u3002\u5b9a\u4f4d\u6a21\u5f0f &amp; \u5173\u952e\u5b57\u6a21\u5f0f\u90fd\u53ef\u4ee5\u3002\u5728\u51fd\u6570\u5b9a\u4e49\u65f6\u653e\u5728 <code>*args</code> \u7684\u524d\u9762 \u5b9a\u4f4d\u6a21\u5f0f\uff0c\u5b9a\u4f4d\u53c2\u6570\u3002\u4f20\u5165\u65f6\u6ca1\u6709\u7528\u53c2\u6570\u540d\u6346\u7ed1\uff0c\u5c31\u6309\u4f4d\u7f6e\u8fdb\u884c\u4e00\u4e00\u5bf9\u5e94\u3002\u7528\u5b9a\u4f4d\u6a21\u5f0f\u7684\u662f\u5b9a\u4f4d\u53c2\u6570\u3002 \u5173\u952e\u5b57\u6a21\u5f0f\uff0c\u5173\u952e\u8bcd\u53c2\u6570\u3002\u4f20\u5165\u65f6\u6709\u7528\u53c2\u6570\u540d\u6346\u7ed1\uff0c\u7528\u5173\u952e\u8bcd\u6a21\u5f0f\u7684\u662f\u5173\u952e\u8bcd\u53c2\u6570\u3002</p> <p>\u4e0d\u8bbe\u9ed8\u8ba4\u503c \ud83d\udff0 \u5f3a\u5236\u4f20\u5165\u5b9e\u53c2\u3002\u65e0\u8bba\u662f args &amp; kwargs</p> <p><code>*</code> \u5c55\u5f00 tuple \ud83d\udff0 \u4e00\u822c\u53c2\u6570 &amp; <code>**</code> \u5c55\u5f00 dict \ud83d\udff0 \u5173\u952e\u8bcd\u53c2\u6570</p> <pre><code>def func(general, *args, kw_only=None, **kwargs):\n    print(f'*args={args}')\n    print(f'**kwargs={kwargs}')\n\nfunc()\n# &gt;&gt;&gt; TypeError: func() missing 1 required positional argument: 'general'\nfunc(1, 'a', 'b', 'c')\n# &gt;&gt;&gt; *args=('a', 'b', 'c') **kwargs={}\nfunc(1, 'a', 'b', c='c')\n# &gt;&gt;&gt; *args=('a', 'b') **kwargs={'c': 'c'}\nfunc(args='a', b= 'b', 1)\n# &gt;&gt;&gt; SyntaxError: positional argument follows keyword argument\nfunc(args='a', b= 'b', general=1)\n# &gt;&gt;&gt; *args=()  **kwargs={'args': 'a', 'b': 'b'}\nparams = {'general': 1, 'a': 'a'}\nfunc(**params)\n# &gt;&gt;&gt; *args=()  **kwargs={'a': 'a'}\nparams = (1,2,3)\nfunc(*params)\n# &gt;&gt;&gt; *args=(2, 3)  **kwargs={}\n</code></pre> <p>\u2460 kw-only \u53ea\u5141\u8bb8\u4f7f\u7528\u5173\u952e\u5b57\u6a21\u5f0f\uff0c\u56e0\u4e3a\u5728 *args \u540e\u9762</p> <p>\u2464 \u6ca1\u6709\u6307\u5b9a\u9ed8\u8ba4\u503c\u7684\uff0c\u5f97\u4e0d\u5230\u53c2\u6570\u5c31\u4f1a\u62a5\u9519</p> <p>\u2466 \u90fd\u662f\u5b9a\u4f4d\u6a21\u5f0f\u4f20\u5165\uff0c\u6309\u987a\u5e8f\u8fdb\u884c\u5206\u914d\uff0c\u591a\u51fa\u7684\u4e0d\u5b9a\u91cf\u7684\u53c2\u6570\u4f1a\u88ab *args \u6355\u83b7\uff0c\u5b58\u5165\u5143\u7ec4</p> <p>\u2468 \u6309\u5b9a\u4f4d\u6a21\u5f0f\u4f20\u5165\u591a\u4f59\u7684\u53c2\u6570\u53ea\u4f1a\u88ab args \u6355\u83b7\uff0c\u800c\u4e0d\u4f1a\u88ab kwargs\u6355\u83b7\u3002\u6309\u5173\u952e\u5b57\u6a21\u5f0f\u4f20\u5165\u7684\u591a\u4f59\u7684\u624d\u4f1a\u88ab**kwargs\u6355\u83b7\uff0c\u5b58\u5165\u5b57\u5178</p> <p>\u246a \u5728\u4f20\u5165\u65f6\uff0c\u5b9a\u4f4d\u6a21\u5f0f\u7684\u53c2\u6570\u4e00\u5b9a\u8981\u5728\u91c7\u7528\u5173\u952e\u5b57\u6a21\u5f0f\u7684\u53c2\u6570\u524d\u9762\u3002</p> <p>\u246c \u5728\u4f20\u5165\u65f6\uff0c\u4e00\u822c\u53c2\u6570\u53ef\u4ee5\u4f7f\u7528\u5173\u952e\u5b57\u6a21\u5f0f\uff0c\u6b64\u65f6\u4e0d\u9700\u8981\u8003\u8651\u4f4d\u7f6e\u5173\u7cfb\u3002</p> <p>\u246f \u5b57\u5178\u4f20\u5165\u7684\u662f\u7eaf\u5173\u952e\u5b57\u6a21\u5f0f</p> <p>\u2471 \u5143\u7ec4\u4f20\u5165\u7684\u662f\u5b9a\u4f4d\u6a21\u5f0f\uff0c\u6b64\u65f6\u4e0d\u80fd\u5b58\u5728\u6ca1\u6709\u6307\u5b9a\u9ed8\u8ba4\u503c\u7684\u4ec5\u9650\u5173\u952e\u5b57\u7684\u53c2\u6570\u3002</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_12","title":"\u53d8\u91cf\u4f5c\u7528\u57df","text":"<p>\u540d\u79f0\u7a7a\u95f4 namespace\uff1a\u5b58\u653e\u540d\u5b57\u7684\u5730\u65b9\uff0c\u662f\u5bf9\u6808\u533a\u7684\u5212\u5206\u3002\u540d\u79f0\u7a7a\u95f4\u7684\u201d\u5d4c\u5957\"\u5173\u7cfb\u662f\u4ee5\u51fd\u6570\u5b9a\u4e49\u9636\u6bb5\u4e3a\u51c6</p> <p></p> <p></p> <p>\u6309\u7167\u7531\u4e0a\u81f3\u4e0b\uff1a \u5185\u7f6e\u540d\u79f0\u7a7a\u95f4 \u300b \u5168\u5c40\u540d\u79f0\u7a7a\u95f4 \u300b \u5c40\u90e8\u540d\u79f0\u7a7a\u95f4\u3002 \u52a0\u8f7d\u987a\u5e8f\uff1a\u5185\u7f6e\u540d\u79f0\u7a7a\u95f4&gt;\u5168\u5c40\u540d\u79f0\u7a7a\u95f4&gt;\u5c40\u90e8\u540d\u79f0\u7a7a\u95f4 \u9500\u6bc1\u987a\u5e8f\uff1a\u5c40\u90e8\u540d\u79f0\u7a7a\u95f4&gt;\u5168\u5c40\u540d\u7a7a\u95f4&gt;\u5185\u7f6e\u540d\u79f0\u7a7a\u95f4</p> <p>\u540d\u5b57\u7684\u67e5\u627e\u4f18\u5148\u7ea7\uff1a\u5f53\u524d\u6240\u5728\u7684\u4f4d\u7f6e\u5411\u4e0a\u4e00\u5c42\u4e00\u5c42\u67e5\u627e</p> <p>\u5982\u679c\u5f53\u524d\u5728\u5c40\u90e8\u540d\u79f0\u7a7a\u95f4: \u5c40\u90e8\u540d\u79f0\u7a7a\u95f4-&gt;\u5168\u5c40\u540d\u79f0\u7a7a\u95f4-&gt;\u5185\u7f6e\u540d\u79f0\u7a7a\u95f4</p> <p>python \u5728\u6ca1\u6709\u4efb\u4f55\u58f0\u660e\u7684\u524d\u63d0\u4e0b\uff0c\u5047\u5b9a\u5728\u51fd\u6570\u5b9a\u4e49\u4f53\u5185\u4e2d\u8d4b\u503c\u7684\u53d8\u91cf\u662f==\u5c40\u90e8\u53d8\u91cf==\u3002</p> <p>\u5982\u679c\u60f3\u5728\u51fd\u6570\u5b9a\u4e49\u4f53\u5185\u8d4b\u503c\uff0c\u8fd8\u60f3 python \u89e3\u91ca\u5668\u628a\u5176\u8ba4\u4e3a\u5168\u5c40\u53d8\u91cf\uff0c\u9700\u8981\u58f0\u660e <code>global</code> \u5982\u679c\u518d\u5c40\u90e8\u60f3\u8981\u4fee\u6539\u5168\u5c40\u7684\u540d\u5b57\u5bf9\u5e94\u7684\u503c\uff08\u4e0d\u53ef\u53d8\u7c7b\u578b\uff09\uff0c\u9700\u8981\u7528global Python \u5168\u5c40\u53d8\u91cf</p> <p>\u5168\u5c40\u540d\u79f0\u7a7a\u95f4 \u5b58\u653e\u7684\u540d\u5b57\uff1a\u53ea\u8981\u4e0d\u662f\u51fd\u6570\u5185\u5b9a\u4e49\u3001\u4e5f\u4e0d\u662f\u5185\u7f6e\u7684\uff0c\u5269\u4e0b\u7684\u90fd\u662f\u5168\u5c40\u540d\u79f0\u7a7a\u95f4\u7684\u540d\u5b57\u3002\u5305\u62ec import \u8fdb\u6765\u7684\u51fd\u6570\u548c\u53d8\u91cf \u5b58\u6d3b\u5468\u671f\uff1apython\u6587\u4ef6\u6267\u884c\u5219\u4ea7\u751f\uff0cpython \u6587\u4ef6\u8fd0\u884c\u5b8c\u6bd5\u540e\u9500\u6bc1</p> <p>\u5c40\u90e8\u540d\u79f0\u7a7a\u95f4 \u5b58\u653e\u7684\u540d\u5b57\uff1a\u5728\u8c03\u7528\u51fd\u6570\u65f6\uff0c\u8fd0\u884c\u51fd\u6570\u4f53\u4ee3\u7801\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u51fd\u6570\u5185\u7684\u540d\u5b57 \u5b58\u6d3b\u5468\u671f\uff1a\u5728\u8c03\u7528\u51fd\u6570\u65f6\u5b58\u6d3b\uff0c\u51fd\u6570\u8c03\u7528\u5b8c\u6bd5\u540e\u5219\u9500\u6bc1</p> <p>\u95ed\u5305\u3002\u5ef6\u4f38\u4e86\u4f5c\u7528\u57df\u7684\u51fd\u6570\uff0c\u5176\u4e2d\u5305\u542b\u51fd\u6570\u5b9a\u4e49\u4f53\u4e2d\u8fd0\u7528\uff0c\u4f46\u4e0d\u5728\u5b9a\u4e49\u4f53\u5185\u5b9a\u4e49\u7684\u975e\u5168\u5c40\u53d8\u91cf\u3002\u4e00\u822c\u51fa\u73b0\u5728\u5d4c\u5957\u51fd\u6570\u91cc\u3002\u95ed\u5305\u662f\u4e00\u79cd\u51fd\u6570\uff0c\u4ed6\u4f1a\u4fdd\u7559\u5b9a\u4e49\u51fd\u6570\u65f6\u5b58\u5728\u7684\u81ea\u7531\u53d8\u91cf\u7684\u7ed1\u5b9a\uff0c\u54ea\u6015\u662f\u5b9a\u4e49\u4f5c\u7528\u57df\u4e0d\u80fd\u7528\uff0c\u7ed1\u5b9a\u4e5f\u80fd\u4f7f\u7528\u3002 \u81ea\u7531\u53d8\u91cf\u3002\u672a\u5728\u672c\u5730\u4f5c\u7528\u57df\u5185\u7ed1\u5b9a\u7684\u53d8\u91cf\u3002\u7528 <code>nonlocal</code> \u58f0\u660e\uff0c\u54ea\u6015\u662f\u5728\u51fd\u6570\u5b9a\u4e49\u4f53\u5185\u8d4b\u503c\uff0cpython \u89e3\u91ca\u5668\u4f1a\u628a\u5176\u8ba4\u4e3a\u81ea\u7531\u53d8\u91cf(\u7c7b <code>global</code> )\u3002\u4fdd\u5b58\u5728 \u8fd4\u56de\u5bf9\u8c61\u7684<code>.__code__.co_afreevars</code>  &amp; <code>.__closure__[idx].cell_contents</code> \u4e00\u4e00\u5bf9\u5e94\u3002</p> <pre><code>def outer():\n    # 3-10 inner \u7684\u95ed\u5305\u5ef6\u4f38\u5230 inner \u4e4b\u5916\uff0c\u5305\u542b \u81ea\u7531\u53d8\u91cf \u7684\u5b9a\u4e49\n    series = []\n    total, count = 0, 0 \n    def inner(new_v):\n        nonlocal total, count\n        total += new_v  # \u54ea\u6015\u8d4b\u503c\u4e86\u4f1a\u89e3\u91ca\u81ea\u7531\u53d8\u91cf\u3002\n        count += 1\n        series.append(new_v)  # \u81ea\u7531\u53d8\u91cf\n        return f'{sum(series) / len(series)} {total/count}'\n\n    return inner\n\navg = outer()\navg(10)\n# &gt;&gt;&gt; '10.0 10.0'\navg(11)\n# &gt;&gt;&gt; '10.5 10.5'\navg2 = outer()\navg2(0)\n# &gt;&gt;&gt; '0 0'\navg.__code__.co_freevars\n# &gt;&gt;&gt; ('count', 'series', 'total')\navg.__closure__[1].cell_contents\n# &gt;&gt;&gt; [10, 11]\n</code></pre> <pre><code>glo = 'a'\ndef func():\n    print(glo)  # \u4f7f\u7528\u5185\u90e8\u53d8\u91cf\n    glo = 3     # \u5b9a\u4e49\u5185\u90e8\u53d8\u91cf\n    print(glo)\nfunc()\n# &gt;&gt;&gt; UnboundLocalError: cannot access local variable 'glo' \n\ndef Sol_A():\n    global glo\n    print(glo)  \n    glo = 'A'    # \u4fee\u6539\u5916\u90e8\u53d8\u91cf\n    print(glo)\n\ndef Sol_B():\n    glo = 'B'    # \u5b9a\u4e49\u5185\u90e8\u53d8\u91cf\n    print(glo)  \n\nSol_A()\n# &gt;&gt;&gt; a\n# &gt;&gt;&gt; A\nprint(glo)  # \u5916\u90e8\u53d8\u91cf\u6539\u53d8\n# &gt;&gt;&gt; A\nsol_B()\n# &gt;&gt;&gt; B\nprint(glo)  # \u5916\u90e8\u53d8\u91cf\u4e0d\u53d8\n# &gt;&gt;&gt; A\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_13","title":"\u51fd\u6570\u5206\u7c7b","text":"","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_14","title":"\u7528\u6237\u5b9a\u4e49\u7684\u51fd\u6570","text":"<p><code>def</code> &amp; <code>lambda</code> \u521b\u5efa</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#lambda","title":"lambda \u533f\u540d\u51fd\u6570","text":"<p>\u5728\u8868\u8fbe\u5f0f\u5185\u521b\u5efa\uff0c\u5b9a\u4e49\u4f53\u5185\u4e0d\u80fd\u8d4b\u503c\uff0c\u4e0d\u80fd\u7528 while for\u3002</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_15","title":"\u5185\u7f6e\u51fd\u6570","text":"<p>\u751f\u6210\u8fed\u4ee3\u5668 iterator (\u540e\u7eed\u9700\u8981\u642d\u914d <code>list</code> \u7b49\u50a8\u5b58)\uff1a<code>map</code> &amp; <code>filter</code></p> <p>\u89c4\u7ea6\u51fd\u6570\uff1a<code>sum</code> &amp; <code>all</code> &amp; <code>any</code></p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#map","title":"map","text":"<p>\u4e3a\u4ec0\u4e48 map \u8fd0\u884c\u901f\u5ea6\u6bd4 for \u5faa\u73af\u8981\u5feb</p> <p>map \u7528 C \u7f16\u5199\u7684\u5e76\u4e14\u7ecf\u8fc7\u9ad8\u5ea6\u4f18\u5316, \u5e95\u5c42\u81ea\u52a8\u5b9e\u73b0\u5e76\u884c \u4f7f\u7528 map() \u7684\u7b2c\u4e8c\u4e2a\u4f18\u52bf\u4e0e\u5185\u5b58\u6d88\u8017\u6709\u5173\u3002\u4f7f\u7528 for \u5faa\u73af\uff0c\u60a8\u9700\u8981\u5c06\u6574\u4e2a\u5217\u8868\u5b58\u50a8\u5728\u7cfb\u7edf\u7684\u5185\u5b58\u4e2d\u3002\u4f7f\u7528 map() \u53ef\u4ee5\u6309\u9700\u83b7\u5f97\u9879\u76ee\uff0c\u5e76\u4e14\u5728\u7ed9\u5b9a\u65f6\u95f4\u7cfb\u7edf\u5185\u5b58\u4e2d\u53ea\u6709\u4e00\u4e2a\u9879\u76ee\u3002</p> <p>Python's map(): Processing Iterables Without a Loop</p> <p><code>map(function, iterable[, iterable1, iterable2,..., iterableN])</code></p> <p>\u5982\u679c\u6211\u4eec\u5c06n\u5e8f\u5217\u4f20\u9012\u7ed9map()\uff0c\u5219\u8be5\u51fd\u6570\u5fc5\u987b\u91c7\u7528n\u4e2a\u53c2\u6570\uff0c\u5e76\u4e14\u5e76\u884c\u4f7f\u7528\u5e8f\u5217\u4e2d\u7684\u9879\uff0c\u76f4\u5230\u7528\u5c3d\u6700\u77ed\u7684\u5e8f\u5217\u3002</p> <p>\u6b7b\u5faa\u73af</p> <p>\u7eaf\u8ba1\u7b97\u65e0 IO \u7684\u6b7b\u5faa\u73af\u4f1a\u5bfc\u81f4\u81f4\u547d\u7684\u6548\u7387\u95ee\u9898</p> <pre><code># 1  \u6709 IO \u4f1a\u5361 IO \u6240\u4ee5\u4e0d\u4f1a\u6b7b\u673a\nwhile True:\n    name = input()\n    print(name)\n\n# 2 \u6ca1\u6709 IO \u4f1a\u8017\u5c3d\u8ba1\u7b97\u8d44\u6e90\nwhile True:\n    1+1\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_16","title":"\u89c4\u7ea6\u51fd\u6570","text":"<p><code>sum(iterable)</code> \u7d2f\u8ba1\u4e4b\u524d\u7684\u7ed3\u679c\u6c42\u548c <code>all(iterable)</code> \u53ea\u6709\u5168 True \u624d\u662f True <code>any(iterable)</code> \u4e00\u4e2a True \u90fd\u662f True</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_17","title":"\u88c5\u9970\u5668","text":"<p>\u88c5\u9970\u5668 \u662f\u53ef\u8c03\u7528\u5bf9\u8c61\uff0c\u53c2\u6570\u662f\u53e6\u5916\u4e00\u4e2a\u51fd\u6570\uff08\u88ab\u88c5\u9970\u7684\u51fd\u6570\uff09\u3002\u88c5\u9970\u5668\u53ef\u80fd\uff1a 1\ufe0f\u20e3 \u5904\u7406\u88ab\u88c5\u9970\u7684\u51fd\u6570\u518d\u5c06\u5176\u8fd4\u56de\uff1b 2\ufe0f\u20e3 \u5c06\u5176\u66ff\u6362\u6210\u53e6\u5916\u4e00\u4e2a\u51fd\u6570\u6216\u53ef\u8c03\u7528\u5bf9\u8c61\u5728\u8fd4\u56de\u3002</p> <pre><code>def decorate(func):  # \u88c5\u9970\u5668\n    print(f'running decorator({func})')\n    return function  # \u5fc5\u987b\u8fd4\u56de**\u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\u6216\u8005\u51fd\u6570**s\n\n@decorate  # \u88c5\u9970\ndef func():\n    pass\n</code></pre> <p>\u7b49\u4e8e\u7684\u662f  <code>func = decorate(func)</code> \u800c\u4e0d\u662f <code>func() = decorate(func)</code></p> <ul> <li> <p>\u88c5\u9970\u5668\u4f1a\u5728\u88ab\u88c5\u9970\u51fd\u6570\u5b9a\u4e49\u4e4b\u540e\u7acb\u523b\u6267\u884c\uff0c\u901a\u5e38\u662f\u52a0\u8f7d\u6a21\u5757\u65f6\u3002\u5373\u80cc\u5730\u91cc\u8fd0\u884c\u3002\u6240\u4ee5\u4e00\u822c\u4f1a\u5206\u5f00\u5b9a\u4e49\u3002\u88c5\u9970\u5668\u5728\u4e00\u4e2a\u6a21\u5757\uff0c\u5e94\u7528\u5728\u5176\u4ed6\u6a21\u5757\u7684\u51fd\u6570\u4e0a\u3002\u4f46\u662f\u4e0d\u4ee3\u8868\u9a6c\u4e0a\u8fd0\u884c\u88ab\u88c5\u9970\u7684\u51fd\u6570\u3002</p> <pre><code>func = decorate(func)\n# &gt;&gt;&gt; running decorator(&lt;function func at 0x1356...&gt;)\n</code></pre> </li> </ul> <p>\u5982\u679c <code>decorate</code> \u5185 return \u7684\u662f\u522b\u7684\u51fd\u6570 \ud83d\udff0 <code>func=deco.return_func</code> \uff0c\u90a3\u4e48 <code>func.__name__</code> &amp; <code>func.__doc__</code> \u53d8\u6210\u4e86 <code>deco.return_func.__name__</code> &amp; <code>deco.return_func.__doc__</code> \u270f\ufe0f <code>functools.wraps</code>\uff0c\u4e0d\u4ec5\u80fd\u4f20\u9012\uff0c\u8fd8\u80fd\u5b9e\u73b0\u5173\u952e\u5b57\u4f20\u53c2\u3002</p> <ul> <li> <p>\u88c5\u9970\u5668\u9700\u8981\u8fd4\u56de \u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\u6216\u8005\u51fd\u6570\uff0c\u624d\u80fd\u5728\u8fd0\u884c <code>func()</code> \u65f6\u8fd4\u56de\u6765 \u8ddf\u540e\u9762\u7684 <code>()</code> \u7ee7\u7eed\u7528\u3002\u6240\u4ee5\u5982\u679c func \u9700\u8981\u4f20\u53c2\uff0c\u4e00\u822c\u88c5\u9970\u5668\u9700\u8981\u8fdb\u884c\u5d4c\u5957\u3002</p> <pre><code>func() # \u7b49\u540c\u4e8e decorate(func)() \n</code></pre> </li> </ul> <p>\u88ab\u88c5\u9970\u7684\u51fd\u6570\u5b8c\u5168\u662f\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165.</p> <p><code>decorate(func)</code> \uff0c\u6b64\u65f6\u6ca1\u6709\u5e26<code>()</code>, \u6240\u4ee5 <code>func</code> \u8fd8\u6ca1\u88ab\u8c03\u7528\u3002 \u5728 <code>deco1</code> \u51fd\u6570\u4f53\u5185 \u5e26\u7740 <code>()</code> \u6216\u8005\u5728 <code>deco2</code> \u91cc \u88ab\u8fd4\u56de \u624d\u662f\u88ab\u8c03\u7528\u8fd0\u884c, <code>deco3</code> \u5c31\u662f\u5b8c\u5168\u6ca1\u8fd0\u884c</p> <pre><code>def deco1(func):\n    res = func() + 1  # \u5728\u51fd\u6570\u4f53\u5185\u88ab\u8fd0\u884c\n    return res\n\ndef deco2(func):\n    # func = deco2(func) = func\n    return func  # deco2(func) () = func ()\n\ndef deco3(func):\n    # \u6ca1\u8fd0\u884c func \u8fd0\u884c\u7684\u662f inner\n    # func = deco3(func) = inner\n    def inner:\n        pass\n    return inner  # deco3(func) () = inner ()\n</code></pre> <p>\u88c5\u9970\u5668\u53ef\u4ee5\u53e0\u653e</p> <pre><code>@d1\n@d2\ndef func():\n    pass\n# \u7b49\u4ef7\u4e8e func = d1(d2(func))\n# func() = d1(d2(func))()\n</code></pre> <p>\u66f4\u65b0\u7b56\u7565\u3002</p> <p>\u5f53\u5546\u573a\u505a\u8425\u9500\uff0c\u4e0d\u65ad\u66f4\u65b0\u4e0d\u540c\u7684\u6298\u6263\u6d3b\u52a8\uff0c\u5728\u7ed3\u7b97\u7684\u65f6\u5019\u5f80\u5f80\u9700\u8981\u8ba1\u7b97\u4e0d\u540c\u7b56\u7565\u4e0b\u7684\u4ef7\u683c\uff0c\u7136\u540e\u8fdb\u884c\u6bd4\u8f83\u3002\u5982\u679c\u628a \u6240\u6709\u7684\u6d3b\u52a8\u5199\u8fdb\u53bb\u7ed3\u7b97\u51fd\u6570\uff0c\u4f1a\u4f7f\u7ed3\u7b97\u51fd\u6570\u4f53\u53d8\u957f\u8fd8\u4f1a\u5728\u66f4\u6539\u7684\u65f6\u5019\u9700\u8981\u4fee\u6539\u7740\u81f3\u5173\u91cd\u8981\u7684\u7ed3\u7b97\u51fd\u6570\uff0c\u4f7f\u9519\u8bef\u7684\u53ef\u80fd\u589e\u9ad8\u3002\u6240\u4ee5\u601d\u8def\u5927\u591a\u90fd\u662f\u628a\u5206\u5f00\u4e00\u4e2a\u4e2a\u7b56\u7565\u5199\u6210\u51fd\u6570\uff0c\u7136\u540e\u653e\u8fdb\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u7684\u6570\u7ec4\u91cc\uff0cfor \u5faa\u73af\u5730\u53bb call \u6570\u7ec4\u91cc\u7684\u7b56\u7565\u3002\u4f46\u662f\u5728\u7ef4\u6301\u6570\u7ec4\u9700\u8981\u8bb0\u5f97\u76f8\u5e94\u7684\u51fd\u6570\u540d\uff0c\u5bf9\u6570\u7ec4\u91cc\u7684\u5143\u7d20\u8fdb\u884c\u6dfb\u5220\uff0c\u6bd4\u8f83\u9ebb\u70e6\u3002\u6240\u4ee5\u91c7\u7528\u88c5\u9970\u5668\u6765\u5b8c\u6210 \u201c\u6ce8\u518c\u201d \u8fd9\u4e00\u529f\u80fd</p> <pre><code>promos = []\n\ndef promotion(promo_func):\n    promos.appred(promo_func)  # \u53ea\u662f\u653e\u8fdb\u53bb\uff0c\u4e0d\u6539\u53d8 promo_func \u672c\u8eab \n    return promo_func\n\n@promotion  # \u9700\u8981\u5c31\u52a0\u4e0a \ndef fidelity(order):\n    ...\n    return discount\n\n# @promotion  # \u4e0d\u9700\u8981\u5c31\u6ce8\u91ca\ndef large_order(order)\n    ...\n    return discount\n\nder best_promo(order):\n    return max(promo(order) for promo in promos)\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_18","title":"\u53c2\u6570\u5316\u88c5\u9970\u5668","text":"<ol> <li>\u88ab\u88c5\u9970\u7684\u51fd\u6570\u672c\u8eab\u9700\u8981\u53c2\u6570</li> <li>\u88c5\u9970\u5668\u672c\u8eab\u4e5f\u60f3\u62e5\u6709\u53c2\u6570</li> </ol> <p>\u88c5\u9970\u5668\u9700\u8981\u8fd4\u56de \u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\u6216\u8005\u51fd\u6570\uff0c\u624d\u80fd\u5728\u8fd0\u884c <code>func()</code> \u65f6\u8fd4\u56de\u6765 \u8ddf\u540e\u9762\u7684 <code>()</code> \u7ee7\u7eed\u7528\u3002\u6240\u4ee5\u5982\u679c func \u9700\u8981\u4f20\u53c2\uff0c\u4e00\u822c\u88c5\u9970\u5668\u9700\u8981\u8fdb\u884c\u5d4c\u5957\u3002</p> <p>\u88ab\u88c5\u9970\u7684\u51fd\u6570\u672c\u8eab\u9700\u8981\u53c2\u6570 + \u88c5\u9970\u5668\u672c\u8eab\u4e5f\u60f3\u62e5\u6709\u53c2\u6570</p> <p>\u4e00\u4e2a\u53c2\u6570\u5316\u7684\u6ce8\u518c\u8ba1\u65f6\u88c5\u9970\u5668</p> <pre><code>import time, functools\nregistry = set()  # \u589e\u5220\u66f4\u5feb\n\ndef register(active=True):  # \u88c5\u9970\u5de5\u5382\u51fd\u6570\n    def decorate(func):  # \u771f\u6b63\u7684\u88c5\u9970\u5668\uff08\u63a5\u53d7\u7684\u662f\u51fd\u6570\n        print(f'running register={active} --&gt; decorate {func}')\n        if active:  #  True \u6ce8\u518c\n            registry.add(func)\n        else:  # False \u6ce8\u9500\n            registry.discard(func)\n\n        @functools.wraps(func)  # \u5305\u88c5\u4e00\u4e0b\u624d\u80fd\u63a5\u53d7\u5173\u952e\u8bcd\u53c2\u6570 &amp; \u53d8\u6210 func \u5c5e\u6027\n        def clocked(*_args, **kwargs):  # \u5305\u88c5\u88ab\u88c5\u9970\u7684\u51fd\u6570 \n            t0 = time.time()\n            _result = func(*_args, **kwargs)  # \u63a5\u53d7\u540c\u6837\u7684\u53c2\u6570\n            t1 = time.time()\n            return _result  # \u8fd4\u56de\uff1a\u60f3\u8981\u7684\u7ed3\u679c\n\n        return clocked  # \u8fd4\u56de\uff1a\u51fd\u6570\n\n    return decorate  # \u8fd4\u56de\uff1a\u88c5\u9970\u5668 \n\n@register(active=False)  # f1 \u6ce8\u9500\ndef f1():\n    pass\n\n@register()  # \u5fc5\u987b\u4f5c\u4e3a\u51fd\u6570\u8c03\u7528\ndef f2():\n    pass\n\nf1 = register()(f1) # f1 \u91cd\u65b0\u6ce8\u518c\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_19","title":"\u73b0\u6709\u7684\u6709\u7528\u7684\u88c5\u9970\u5668","text":"<p><code>functools.lru_cache(maxsize=128, typed=False)</code> \u505a\u5907\u5fd8\u3002\u3010\u81ea\u52a8\u4f18\u5316\u3011\u3002\u50a8\u5b58\u8017\u65f6\u7684\u51fd\u6570\u8c03\u7528\u7ed3\u679c\uff0c\u907f\u514d\u91cd\u65b0\u8ba1\u7b97\u3002 Least Recently Used  \u7f13\u5b58\u4e0d\u4f1a\u65e0\u9650\u589e\u957f\uff0c\u4e00\u6bb5\u65f6\u95f4\u4e0d\u7528\u5c31\u4f1a\u88ab\u6254\u6389\u3002 \u7528\u5b57\u5178\u5b58\u50a8\u7ed3\u679c\uff0c\u6240\u4ee5\u7528 <code>lru_cache</code> \u4fee\u9970\u7684\u51fd\u6570\u6240\u6709\u53c2\u6570\u5fc5\u987b\u662f\u53ef\u6563\u5217\u7684</p> <ul> <li><code>maxsize</code> \u8d85\u8fc7\u4f1a\u88ab\u820d\u5f03\uff0c\u5efa\u8bae 2\u7684\u5e42</li> <li><code>typed</code> \u662f\u5426\u6839\u636e\u7c7b\u578b\u628a\u7f13\u5b58\u7684\u4e1c\u897f\u5206\u5f00\u5b58\u653e</li> </ul> <p>\u7b2c n \u4e2a \u6590\u6ce2\u90a3\u5951\u6570 f(n) = f(n-1)+f(n-2) \u5f53\u7b97f(6)\u7684\u65f6\u5019 f(2)\u4f1a\u7b975\u904d\u3002\u3002\u3002\u91cd\u590d\u8ba1\u7b97</p> <pre><code>import functools\n\n@functools.lru_cache()  \ndef fibonacci(n):\n    if n &lt; 2:\n        return n\n    return fibonacci(n-1) + fibonacci(n-2)\n</code></pre> <p><code>functools.wraps</code>\uff0c\u5305\u88c5\u4f7f\u5f97\u88c5\u9970\u540e\u7684\u51fd\u6570\u6216\u5bf9\u8c61\u62e5\u6709\u88ab\u88c5\u9970\u51fd\u6570\u7684<code>__doc__</code> &amp; <code>__name__</code> \u7b49\uff0c\u8fd8\u80fd\u5b9e\u73b0\u5173\u952e\u5b57\u4f20\u53c2\u3002 <code>functools.singledispatch</code> \u53ef\u4ee5\u5427\u6574\u4f53\u65b9\u6848\u62c6\u5206\u6210\u591a\u4e2a\u6a21\u5757\u3002 \u4f7f\u7528 <code>singledispatch</code> \u88c5\u9970\u7684\u666e\u901a\u51fd\u6570\u4f1a\u53d8\u6210 \u6cdb\u51fd\u6570\u3002 \u4f7f\u7528 <code>@func.register(type)</code> \u6765\u88c5\u9970\uff0c\u56e0\u4e3a\u9009\u7528\u7684\u51fd\u6570\u540d\u5b57\u6ca1\u6709\u5173\u7cfb\uff0c\u6240\u4ee5 <code>_</code> \u662f\u4e2a\u4e0d\u9519\u7684\u9009\u62e9 \u88c5\u9970\u5668 \u53e0\u653e \u652f\u6301\u4e0d\u540c\u7c7b\u578b \u6ce8\u518c\u7684\u51fd\u6570\u4e0d\u4e00\u5b9a\u4e0e\u539f\u6765\u7684\u51fd\u6570\u653e\u5728\u4e00\u5757\uff0c\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u6a21\u5757\u53bb\u505a\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u4e0d\u662f\u81ea\u5df1\u5199\u7684\u6216\u8005\u4e0d\u80fd\u4fee\u6539\u90a3\u91cc\u53bb\u52a0\u3002</p> <p>\u4f7f\u7528\u62bd\u8c61\u57fa\u7c7b <code>numbers.Integral</code> &amp; <code>abc.MutableSequence</code> \u800c\u4e0d\u662f\u5177\u4f53\u5b9e\u73b0 <code>int</code> &amp; <code>list</code></p> <p>\u53ef\u4ee5\u652f\u6301\u62bd\u8c61\u57fa\u7c7b\u4ee5\u53ca\u672a\u6765\u7684\u5177\u4f53\u5b50\u7c7b\u6216\u865a\u62df\u5b50\u7c7b\uff0c\u4f7f\u5f97\u4ee3\u7801\u652f\u6301\u7684\u517c\u5bb9\u7c7b\u578b1\u66f4\u5e7f\u6cdb\u3002</p> <p>\u60f3\u8981\u751f\u6210\u4e00\u4e2a\u6807\u7b7e\uff0c\u5e38\u89c4\u7684\u524d\u540e\u7528 \u201cp\u201d \u5305\u56f4\u3002\u5982\u679c\u662f \u6570\u5b57\uff1a\u663e\u793a\u5341\u8fdb\u5236 &amp; 16\u8fdb\u5236\uff0c\u524d\u540e\u7528 \"pre\" \u5305\u56f4 str\uff1a\u91cc\u9762\u7684\u6362\u884c\u7b26\u201c\\n\u201d \u53d8\u6210 \u201cbr\u201d list\uff1a\u5bf9\u6bcf\u4e2a\u5143\u7d20\u90fd\u4ea7\u751f\u76f8\u5e94\u7684\u6807\u7b7e</p> <pre><code>from functools import singledispatch\nfrom collections import abc\nimport numbers\n\n@singledispatch\ndef tag(obj):  # obj \u7c7b\u57fa\u51fd\u6570\n    return f'&lt;p&gt;{obj}&lt;/p&gt;'\n\n@tag.register(numbers.Integral)  # \u662f int \u7684\u865a\u62df\u8d85\u7c7b\ndef _(n):\n    return f'&lt;pre&gt;{n} &amp; {hex(n)}&lt;/pre&gt;'\n\n@tag.register(str)\ndef _(string):\n    content= string.replace('\\n', '&lt;br&gt;')\n    return f'&lt;p&gt;{content}&lt;p&gt;'\n\n@tag.register(tuple)  # \u53e0\u653e \u652f\u6301\u4e0d\u540c\u7c7b\u578b\n@tag.register(abc.MutableSequence)\ndef _(seq):\n    content = '&lt;/li&gt;\\n&lt;li&gt;'.join(tag(item) for item in seq)\n    return f'&lt;ul&gt;\\n&lt;li&gt;{content}&lt;/li&gt;\\n&lt;ul&gt;'\n\ntag(['a/nb',2] )\n# &gt;&gt;&gt; '&lt;ul&gt;\\n&lt;li&gt;&lt;p&gt;a/nb&lt;p&gt;&lt;/li&gt;\\n&lt;li&gt;&lt;pre&gt;2 &amp; 0x2&lt;/pre&gt;&lt;/li&gt;\\n&lt;ul&gt;'\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_20","title":"\u51fd\u6570\u5f0f\u7f16\u7a0b","text":"<p><code>operator module</code></p> <ul> <li>\u4e3a\u7b97\u672f\u8fd0\u7b97\u7b26\u63d0\u4f9b\u5bf9\u5e94\u51fd\u6570 <code>mul(a,b)</code> \ud83d\udff0 <code>lambda a, b: a*b</code></li> <li>\u4ece\u5e8f\u5217\u4e2d\u53d6\u51fa\u5143\u7d20 \uff5c \u8bfb\u53d6\u5bf9\u8c61\u5c5e\u6027 <code>itemgetter(n)</code> \ud83d\udff0 <code>lambda seq: seq[n]</code> <code>attrgetter('a')</code> \ud83d\udff0<code>lambda obj: obj.a</code> \u5982\u679c\u4f20\u5165\u7684\u662f\u591a\u4e2a\u53c2\u6570\uff0c\u8fd4\u56de\u6765\u7684\u5c31\u4f1a\u662f\u5bf9\u5e94\u7684\u5143\u7ec4</li> </ul> <pre><code>from operator import itemgetter, attrgetter\nseq = [('A', 3), ('D', 2), ('B', 2), ('C', 1)]\nclass Obj():\n    def __init__(self, a, b):\n        self.a, self.b = a, b\n    def __repr__(self):\n        return f'&lt;Obj ({self.a},{self.b})&gt;'\n\nobjs = [Obj(*obj) for obj in seq]\nsorted(seq, key=itemgetter(1))\n# &gt;&gt;&gt; [('C', 1), ('D', 2), ('B', 2), ('A', 3)]\nsorted(seq, key=itemgetter(1,0))\n# &gt;&gt;&gt; [('C', 1), ('B', 2), ('D', 2), ('A', 3)]\nsorted(objs, key=attrgetter('b'))\n# &gt;&gt;&gt; [&lt;Obj (C,1)&gt;, &lt;Obj (D,2)&gt;, &lt;Obj (B,2)&gt;, &lt;Obj (A,3)&gt;]\nsorted(objs, key=attrgetter('b','a'))\n# &gt;&gt;&gt; [&lt;Obj (C,1)&gt;, &lt;Obj (B,2)&gt;, &lt;Obj (D,2)&gt;, &lt;Obj (A,3)&gt;]\n</code></pre> <p><code>functools module</code></p> <ul> <li><code>reduce\uff08func, iterable, initializer)</code> <code>initializer</code> \u907f\u514d\u51fa\u73b0 <code>TyperError\uff1aempty sequence with no initial value</code>\u3002\u5982\u679c\u5e8f\u5217\u4e3a\u7a7a\uff0c\u5219\u8fd4\u56de\u521d\u59cb\u503c\u3002\u5426\u5219\u5728\u5f52\u7ea6\u4e2d\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f7f\u7528\uff0c\u6240\u4ee5\u5e94\u8be5\u4f7f\u7528\u6052\u7b49\u503c     &gt; <code>*</code> &amp; <code>&amp;</code>: 1     &gt; <code>+</code> &amp; <code>^</code> &amp; <code>|</code>: 0</li> <li><code>partial</code> \u90e8\u5206\u5e94\u7528\u4e00\u4e2a\u51fd\u6570\u3002\u57fa\u4e8e\u4e00\u4e2a\u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\uff0c\u628a\u539f\u51fd\u6570\u7684\u67d0\u4e9b\u53c2\u6570\u56fa\u5b9a\u3002 \u53ef\u4ee5\u901a\u8fc7 <code>func.func</code> &amp; <code>func.args</code> &amp; <code>func.keywords</code> \u6765\u67e5\u8be2\u56fa\u5b9a\u4e86\u7684\u539f\u51fd\u6570\u548c\u53c2\u6570</li> <li><code>partialmethod</code> \u548c <code>partial</code> \u7c7b\u4f3c\uff0c\u540e\u8005\u5904\u7406\u65b9\u6cd5</li> <li><code>lru_cache</code> \u505a\u5907\u5fd8\u3002\u3010\u81ea\u52a8\u4f18\u5316\u3011\u3002\u50a8\u5b58\u8017\u65f6\u7684\u51fd\u6570\u8c03\u7528\u7ed3\u679c\uff0c\u907f\u514d\u91cd\u65b0\u8ba1\u7b97\u3002</li> </ul> <pre><code>from functools import partial\nfrom operator import mul\n\ntriple = partial(mul, 3)  # \u672c\u6765\u662f mul(a, b)\uff0c\u56fa\u5b9a\u4e86 a=3\ntriple(7)  # \u4e00\u4e2a\u65b0\u7684\u8c03\u7528\u5bf9\u8c61\uff0c\u8fd4\u56de3\u500d\u7684\u7ed3\u679c\n# &gt;&gt;&gt; 21\ntriple.func\n# &gt;&gt;&gt; &lt;built-in function mul&gt;\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#class","title":"Class","text":"<p>\u65b9\u6cd5\u548c\u51fd\u6578</p> inplaced \u65b9\u6cd5 <code>var.func()</code> \u5185\u7f6e, \u2705 \u51fd\u6570 <code>func(var)</code> \u274c \u6309\u5b58\u503c\u4e2a\u6570\u533a\u5206 \u53ea\u80fd\u5b58\u4e00\u4e2a\u503c \u6807\u91cf/\u539f\u5b50\u7c7b\u578b \u6570\u5b57\u3001\u5b57\u7b26\u4e32 \u53ef\u4ee5\u5b58\u653e\u591a\u4e2a\u503c \u5bb9\u5668\u7c7b\u578b \u5217\u8868\u3001\u5143\u7ec4\u3001\u5b57\u5178 <p>|\u6309\u7167\u8bbf\u95ee\u65b9\u5f0f\u533a\u5206||| |--|--|--|| |\u76f4\u63a5\u8bbf\u95ee|\u53ea\u80fd\u901a\u8fc7\u53d8\u91cf\u540d\u8bbf\u95ee\u6574\u4e2a\u503c|\u6570\u5b57| |\u987a\u5e8f\u8bbf\u95ee|\u53ef\u4ee5\u7528\u7d22\u5f15\u8bbf\u95ee\u6307\u5b9a\u7684\u503c\uff0c\u7d22\u5f15I\u4ee3\u8868\u987a\u5e8f\uff0c\u53c8\u79f0\u4e3a\u5e8f\u5217\u7c7b\u578b|\u5b57\u7b26\u4e32\u3001\u5217\u8868\u3001\u5143\u7ec4| |key\u8bbf\u95ee|\u53ef\u4ee5\u7528key\u8bbf\u95ee\u6307\u5b9a\u7684\u503c\uff0c\u53c8\u79f0\u4e3a\u6620\u5c04\u7c7b\u578b|\u5b57\u5178|</p> \u6309\u53ef\u53d8\u4e0d\u53ef\u53d8\u533a\u5206 \u53ef\u53d8\u7c7b\u578b \u5217\u8868\u3001\u5b87\u5178 \u4e0d\u53ef\u53d8\u7c7b\u578b \u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5143\u7ec4","tags":["Foo","Bar"]},{"location":"python/python_elegant/#none","title":"\u7a7a <code>None</code>","text":"<p>\u6570\u636e\u4e3a\u7a7a\u4e0d\u4ee3\u8868\u662f\u7a7a\u5bf9\u8c61</p> \u5305\u62ec \u5224\u522b \u7a7a\u7684\u5bf9\u8c61 <code>None</code> <code>instance == None</code> \u6570\u636e\u4e3a\u7a7a <code>[], '', {}, ()</code>,<code>None</code>,<code>0, False</code> <code>not instance</code>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_21","title":"\u539f\u5b50\u4e0d\u53ef\u53d8\u5bf9\u8c61","text":"<p>\u53ef\u6563\u5217</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#int-float","title":"\u6570\u503c <code>int</code> &amp; <code>float</code>","text":"<p>\u8f6c\u6362</p> <p>\u4e0e <code>char</code> \u7684\u8f6c\u6362</p> <p>\u4e07\u4e8b\u5148\u8f6c <code>float()</code></p> <p>\u5728\u4e0d\u786e\u5b9a\u8fd9\u4e2a\u5b57\u7b26\u4e32\u662f\u6574\u5f62\u8fd8\u662f\u6d6e\u70b9\u6570\u7684\u60c5\u51b5\u4e0b, \u5148\u8f6c\u6210<code>float()</code>\uff0c\u518d\u8f6c<code>int()</code> ValueError: invalid literal for int() with base 10\u95ee\u9898\u5904\u7406</p> <ul> <li><code>int(str)</code> \u5c06\u7b26\u5408\u6574\u6570\u7684\u89c4\u5b9a\u7684\u5b57\u7b26\u4e32\u8f6c\u6362\u6210 int</li> <li><code>float(str)</code> \u5c06\u7b26\u5408\u6d6e\u70b9\u578b\u7684\u89c4\u5b9a\u7684\u5b57\u7b26\u4e32\u8f6c\u6362\u6210 float</li> <li><code>str(num)</code> \u5c06\u6574\u6570\u3001\u6d6e\u70b9\u578b\u8f6c\u6362\u6210 char</li> </ul> <p>\u8fdb\u5236\u4e4b\u95f4\u7684\u8f6c\u6362</p> <p>Python \u4e8c\u8fdb\u5236\uff0c\u5341\u8fdb\u5236\uff0c\u5341\u516d\u8fdb\u5236\u8f6c\u6362</p> <ul> <li>\u27a1\ufe0f 10\uff1a<code>int(str, origin_\u8fdb\u5236)</code></li> <li>10 \u27a1\ufe0f 2: <code>bin(int)</code></li> <li>10 \u27a1\ufe0f 16: <code>hex(x)</code></li> </ul> <pre><code>\"\"\" 16 -&gt; 10 \"\"\"\n&gt;&gt;&gt; int('B', 16)\n# 11\n</code></pre> <p>Base convention\uff1a\u9664\u57fa\u5012\u53d6\u4f59\u6cd5</p> <p>\u4ee510\u8fdb\u5236\u8f6c2\u8fdb\u5236\u4e3a\u4f8b\uff1a</p> <p>\u8f93\u5165\u4e00\u4e2a\u5341\u8fdb\u5236\u6570n\uff0c\u6bcf\u6b21\u7528n\u9664\u4ee52\uff0c\u628a\u4f59\u6570\u8bb0\u4e0b\u6765\uff0c\u518d\u7528\u5546\u53bb\u9664\u4ee52...\u4f9d\u6b21\u5faa\u73af\uff0c\u76f4\u5230\u5546\u4e3a0\u7ed3\u675f\uff0c\u628a\u4f59\u6570\u5012\u7740\u4f9d\u6b21\u6392\u5217\uff0c\u5c31\u6784\u6210\u4e86\u8f6c\u6362\u540e\u7684\u4e8c\u8fdb\u5236\u6570\u3002</p> <p>\u6240\u6709\u8fdb\u5236\u4e4b\u95f4\u7684\u8f6c\u6362\u90fd\u662f\u5982\u6b64\uff0c2\u53ef\u4ee5\u6362\u6210\u4efb\u4f55\u6570\u5b57\u3002\u5341\u8fdb\u5236\u8f6c\u4e8c\u8fdb\u5236\u3001\u516b\u8fdb\u5236\u3001\u5341\u516d\u8fdb\u5236\u300164\u8fdb\u5236\uff0c</p> <p> </p> <pre><code>def two_ten(a: str):\n    \"\"\" 2 -&gt; 10 \"\"\"\n    ans = list(map(lambda i: int(a[-1-i])*2**i, range(len(a))))\n    return sum(ans)\n\ndef ten_two(a: int):\n    \"\"\" 10 -&gt; 2 \"\"\"\n    ans = []\n    while a != 0:\n        ans.append(str(a%2))\n        a = a // 2\n        print(ans)\n    ans.reverse()\n    return ''.join(ans)\n\n\ndef two_eight(a: str):\n    \"\"\" 2 -&gt; 8 \"\"\"\n    ans, tmp = [], 0\n    num, more = len(a)//3, len(a)%3\n    a = list(map(int, a))\n    tmp = 0\n    if more != 0:\n        for i in range(more):\n            tmp += a[i] * 2 ** (more-i-1)\n        ans.append(str(tmp))\n    for i in range(num):\n        tmp = a[more+3*i] * 4 + a[more+ 1+3*i] * 2 + a[more+2+3*i] * 1\n        ans.append(str(tmp))\n    return ''.join(ans)\n</code></pre> <p>\u683c\u5f0f\u8981\u6c42</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_22","title":"\u5e8f\u5217","text":"<p>\u4efb\u4f55\u4e00\u79cd\u90fd\u6ee1\u8db3 \u8fed\u4ee3\u3001\u5207\u7247\u3001\u6392\u5e8f\u3001\u62fc\u63a5</p> <p>\u6309\u662f\u5426\u5b58\u653e\u591a\u79cd\u7c7b\u578b \ud83d\udff0 \u662f\u5426\u5b58\u653e\u7684\u662f\u5f15\u7528</p> <ul> <li>\u2705\u5bb9\u5668\u5e8f\u5217\u3002\u5b58\u653e\u7684\u662f\u5b83\u4eec\u6240\u5305\u542b\u7684\u4efb\u610f\u7c7b\u578b\u7684\u5bf9\u8c61\u7684\u5f15\u7528 list, tuple, collections.deque</li> <li>\u274c\u6241\u5e73\u5e8f\u5217\u3002\u5b58\u653e\u7684\u662f\u503c, \u4e00\u6bb5\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u66f4\u7d27\u51d1\uff0c\u53ea\u80fd\u5b58\u653e\u5b57\u7b26\u3001\u5b57\u8282\u548c\u6570\u503c\u8fd9\u79cd\u539f\u5b50\u6570\u636e\u7c7b\u578b\u3002\u6bcf\u6b21\u53ea\u80fd\u5b58\u653e\u4e00\u79cd\u7c7b\u578b\u3002 str, bytes, bytearray, memoryview, array.array</li> </ul> <p>set &amp; dict \u5c5e\u4e8e \u5bb9\u5668 \u4f46\u662f\u4e0d\u5c5e\u4e8e\u5e8f\u5217\u3002</p> <p>\u6309\u80fd\u5426\u8fed\u4ee3</p> <ul> <li>\u2705IterableObject \u53ef\u8fed\u4ee3\u5bf9\u8c61\u3002\u5982\u679c\u6211\u4eec\u53ef\u4ee5\u4ece\u4e2d\u83b7\u53d6\u8fed\u4ee3\u5668\u3002\u53ea\u8981\u5bf9\u8c61\u662f\u53ef\u8fed\u4ee3\u7684, \u5c31\u53ef\u4ee5\u6267\u884c\u5206\u89e3\u64cd\u4f5c str, tuple, list, dict</li> </ul> <p>\u6309\u80fd\u5426\u88ab\u4fee\u6539</p> <ul> <li>\u2705Mutable Sequence list, bytearray, array.array, collections.deque, memoryview</li> <li>\u274cSequence tuple, str, bytes</li> </ul> <p>!!! question \"\u4e00\u5b9a\u8981\u77e5\u9053\u5e38\u7528\u7684\u5bb9\u5668\u5e95\u5c42\u90fd\u662f\u5982\u4f55\u5b9e\u73b0\u7684\uff0c\u6700\u57fa\u672c\u7684\u5c31\u662fmap\u3001set\u7b49\u7b49\uff0c\u5426\u5219\u81ea\u5df1\u5199\u7684\u4ee3\u7801\uff0c\u81ea\u5df1\u5bf9\u5176\u6027\u80fd\u5206\u6790\u90fd\u5206\u6790\u4e0d\u6e05\u695a \" collections --- \u5bb9\u5668\u6570\u636e\u7c7b\u578b</p> <p>\u5982\u4f55\u9009\u5e8f\u5217\u3002</p> <ul> <li><code>list</code>: \u65b9\u4fbf\u53c8\u5feb\u6377\uff0c\u53ef\u4fee\u6539\uff0c</li> <li><code>set</code>: \u53bb\u6389\u91cd\u590d\u5143\u7d20, \u4e0d\u5173\u5fc3\u5143\u7d20\u7684\u987a\u5e8f\u95ee\u9898\uff0c\u7ecf\u5e38\u68c0\u67e5\u662f\u5426\u5305\u542b</li> <li><code>tuple</code>: \u4e0d\u53ef\u53d8\u7684\u5217\u8868</li> <li><code>array.array</code> \u53ea\u5305\u542b\u6570\u5b57\uff0c\u5c24\u5176\u662f\u6d6e\u70b9\u6570\u3002</li> <li><code>deque</code> \u9891\u7e41\u505a\u4e24\u7aef\u589e\u5220\u3002\u9002\u5408\u505a\u201c\u6700\u8fd1n\u4e2a\u5143\u7d20\u201d</li> </ul> <p>!!! danger <code>set</code> &amp; <code>dict</code>     \u90fd\u662f <code>{}</code>, \u4f46\u662f<code>a={}</code>\u9ed8\u8ba4\u7a7a\u5b57\u5178\uff0c\u7a7a\u96c6\u5408\u662f<code>a=set()</code>     - <code>set = {1, 2, ...}</code>     - <code>dict = {a:1, b:2, ...}</code></p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_23","title":"\u5e8f\u5217\u64cd\u4f5c","text":"<p>\u4efb\u4f55\u4e00\u79cd\u90fd\u6ee1\u8db3 \u8fed\u4ee3\u3001\u5207\u7247\u3001\u6392\u5e8f\u3001\u62fc\u63a5</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#listcomps-genexps","title":"listcomps &amp; genexps","text":"<p>list comprehension, listcomps\uff0c\u5217\u8868\u63a8\u5bfc\u3002\u53ea\u7528\u6765\u751f\u6210\u5217\u8868\u3002 \u539f\u5219\u662f\uff1a\u53ea\u7528\u5217\u8868\u63a8\u5bfc\u6765\u521b\u5efa\u65b0\u7684\u5217\u8868\uff0c\u5e76\u4e14\u5c3d\u91cf\u4fdd\u6301\u7b80\u77ed\uff0c\u4e0d\u8981\u8d85\u8fc7\u4e86\u4e24\u884c python\u4e2d\uff0c(x for y in z for x in y)\u8fd9\u4e2a\u7ed3\u6784\u600e\u4e48\u7406\u89e3\uff1f</p> <pre><code>\"\"\" listcomps \"\"\"\n# 1. \u4e00\u5c42\n[item for item in items]\n\n# 2. \u4e8c\u5c42\uff0c \u53ef\u4ee5\u5c06\u4e8c\u7ef4\u7684\u5217\u8868\u5c55\u5e73\n[item for items in items_list for item in items]\nfor items in items_list:\n    for item in items:\n        list_.append(item)\n\n# 3. mix \u4e24\u4e2a\n[(x,y) for x in list_x for y in list_y if x!=y]\nfor x in list_x:  # \u6240\u4ee5\u662f\u5148\u6309 y \u518d\u6309 x\n    for y in list_y:\n        if x != y:\n            yield (x,y)\n</code></pre> <p>\u7b1b\u5361\u5c14\u79ef  with Listcomps</p> <p>\\(\\text{Cartesian Product}, A\u00d7B=\\{(x,y)|x\u2208A\u2227y\u2208B\\}\\in\\R^{\\#A*\\#B}\\)</p> <p><code>[(a, b) for a in A for b in B]</code></p> <p>\u5185\u5b58\u91cc\u4e0d\u4f1a\u7559\u4e0b\u4e00\u4e2a\u6709\u7ec4\u5408\u7684\u5217\u8868\u3002\u56e0\u4e3a\u5728\u6bcf\u6b21 for \u5faa\u73af\u7684\u65f6\u5019\u624d\u4f1a\u4ea7\u751f\u4e00\u4e2a\u7ec4\u5408\uff0c\u6240\u4ee5\u5185\u5b58\u53d8\u6210\u662f\u4e00\u4e2a\u7ec4\u5408\u7684\u5927\u5c0f</p> <p>generator expression, genexps, \u751f\u6210\u5668\u8868\u8fbe\u5f0f\u3002\u5177\u6709\u751f\u6210\u5404\u79cd\u7c7b\u578b\u7684\u5143\u7d20\u5e76\u7528\u5b83\u4eec\u6765\u586b\u5145\u9664\u5217\u8868\u5916\u5176\u4ed6\u5e8f\u5217\u7684\u529f\u80fd\u3002 genexps \u9075\u5b88\u4e86\u8fed\u4ee3\u5668\u534f\u8bae\uff0c\u53ef\u4ee5\u9010\u4e2a\u5730\u4ea7\u51fa\u5143\u7d20\uff08\u8282\u7701\u5185\u5b58\uff09\uff0c\u800c\u4e0d\u662f\u5148\u5efa\u7acb\u4e00\u4e2a\u5b8c\u6574\u7684\u5217\u8868\uff0c\u7136\u540e\u518d\u628a\u8fd9\u4e2a\u5217\u8868\u4f20\u9012\u5230\u67d0\u4e2a\u6784\u9020\u51fd\u6570\u91cc<code>tuple(list(range(3)))</code> \u5982\u679c genexps \u662f\u4e00\u4e2a\u51fd\u6570\u8c03\u7528\u8fc7\u7a0b\u4e2d\u7684\u552f\u4e00\u53c2\u6570\uff0c\u90a3\u4e48\u4e0d\u9700\u8981\u989d\u5916\u518d\u7528\u62ec\u53f7\u628a\u5b83\u56f4\u8d77\u6765\u3002</p> <p><code>a = tuple(ord(str_) for str_ in 'abc')</code> 1\u4e2a\u62ec\u53f7 <code>array.array('I', (ord(str_) for str_ in 'abc'))</code> 2\u4e2a\u62ec\u53f7</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_24","title":"\u62c6\u5305","text":"<p>\u53ef\u8fed\u4ee3\u5143\u7d20\u62c6\u5305\u3002\u628a\u4efb\u4f55\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u62c6\u5f00\u8fdb\u884c</p> <ul> <li>\u8d4b\u503c</li> <li>\u7528 <code>*</code> \u89e3\u6790\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u3002</li> </ul> <p>\u56e0\u4e3a\u4f4d\u7f6e\u6709\u610f\u4e49\u65f6\u62c6\u5305\u663e\u5f97\u683c\u5916\u6709\u610f\u4e49\uff0c\u6240\u4ee5\u4e00\u822c\u6307 Tuple \u62c6\u5305\u3002 \u552f\u4e00\u7684\u8981\u6c42\uff1a \u88ab\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\u6570\u91cf\u5fc5\u987b\u662f\u548c\u63a5\u53d7\u8fd9\u4e9b\u5143\u7d20\u7684\u5143\u7ec4\u7684\u7a7a\u6863\u6570\u4e00\u81f4\u3002 \u5141\u8bb8\u5d4c\u5957\u62c6\u5305</p> <p><code>_</code> &amp; <code>*</code></p> <p>\u5bf9\u5f85\u5c11\u91cf\u4e0d\u9700\u8981\u7684\u5143\u7d20\uff1a<code>_</code> \u5360\u4f4d\u7b26\u3002\u5fc5\u987b\u6570\u91cf\u5bf9\u5e94\uff0c\u548c\u4f4d\u7f6e\u5bf9\u5e94 \u5bf9\u5f85\u4e0d\u786e\u5b9a\u6570\u91cf\u65e0\u8c13\u9700\u4e0d\u9700\u8981\u7684\u5143\u7d20 <code>*</code>\u3002\u53ef\u4ee5\u51fa\u73b0\u5728\u524d\u4e2d\u540e</p> <pre><code>a, b = ('a', 'b')  # \u5e73\u884c\u8d4b\u503c\na, b = b, a  # \u4e0d\u4f7f\u7528\u4e2d\u95f4\u53d8\u91cf\u4ea4\u6362\u4e24\u4e2a\u53d8\u91cf\na = (20,8)\ndivmod(*a)  # \u7528 * \u89e3\u6790\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570 \n# &gt;&gt;&gt; (2, 4) # 20/8=2...4\n\nfiledir = '/home/dir1/dir2/a.txt'\nfiledir.split('/')\n# &gt;&gt;&gt; ['', 'home', 'dir1', 'dir2', 'a.txt']\n_, _, _, _, filename = filedir.split('/') # \u53ea\u8981\u6700\u540e\u9762\u7684, \u5fc5\u987b\u6570\u91cf\u4e00\u6837\n_, *dirs, filename = filedir.split('/') # \u6bcf\u4e2a\u6587\u4ef6\u50a8\u5b58\u7684\u6587\u4ef6\u5939\u6570\u91cf\u662f\u4e0d\u4e00\u5b9a\u7684\n# \u7528\u5360\u4f4d\u7b26\u5de7\u5999\u51cf\u5c11\u5217\u8868\u5185\u5b58\uff08\u7b2c\u4e00\u4e2a/\u524d\u9762\u7684\u7a7a\u683c\u662f\u4e0d\u9700\u8981\u7684\uff09\nfilename \n# &gt;&gt;&gt; a.txt\ndirs\n# &gt;&gt;&gt; ['home', 'dir1', 'dir2']\n\narea = ('Beijing', 'CN', (111,222))\ncity, cc, (latitude, longitude) = area  # \u5d4c\u5957\u62c6\u5305\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_25","title":"\u5207\u7247","text":"<p><code>seq[n]</code> \u83b7\u5f97\u662f\u4e00\u4e2a\u5143\u7d20\uff0c\u5143\u7d20\u4ec0\u4e48\u7c7b\u578b\uff0c\u8fd4\u56de\u5c31\u4ec0\u4e48\u7c7b\u578b\uff1b <code>seq[n-1:n]</code> \u83b7\u5f97\u662f\u4e00\u4e2a\u957f\u5ea6\u4e3a1\u7684 seq \u5bf9\u8c61\uff0cseq \u4ec0\u4e48\u7c7b\u578b\uff0c\u8fd4\u56de\u5c31\u4ec0\u4e48\u7c7b\u578b\u3002</p> <ul> <li><code>seq[a:b:c]</code> \u5bf9 s \u5728 \\([a, b)\\) \u4e4b\u95f4\u4ee5 c \u4e3a\u95f4\u9694\u53d6\u503c\u3002\u30101d\u3011 \u5176\u5b9e\u662f\u8c03\u7528 <code>seq.__getitem__(slice(a,b,c))</code><ul> <li>c = 1. c&gt;0 \u4ece\u7b2c\u4e00\u4e2a\u5f00\u59cb\u6b63\u5411; c&lt;0 \u4ece\u5012\u6570\u7b2c\u4e00\u4e2a\u5f00\u59cb\u53cd\u5411\u3002\u6709\u53ef\u80fd\u5b8c\u5168\u4e0d\u4e00\u6837\uff01</li> </ul> </li> <li> <p><code>seq[m:n, k:l]</code> \u5bf9 \u591a\u7ef4 s \u53d6 \\([m, n)\\) \u884c \\([k, l)\\) \u5217 \u4ea4\u53e0\u7684\u503c\u3002\u3010&gt;2d\u3011 \u5176\u5b9e\u662f\u8c03\u7528 <code>seq.__getitem__([(m,k)(m,k+1)...])</code></p> <p><code>seq[i, j]</code> \u53d6 i \u884c j \u5217\u7684\u4e00\u4e2a\u503c</p> <p>\u5176\u5b9e\u662f <code>seq.__getitem__((i,j))</code></p> <ul> <li>\u5207\u7247\u8d4b\u503c \u5982\u679c\u8d4b\u503c\u7684\u5bf9\u8c61\u662f\u4e00\u4e2a\u5207\u7247\uff0c\u90a3\u4e48\u8d4b\u503c\u7684\u53f3\u8fb9\u5fc5\u987b\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5e8f\u5217\uff0c\u54ea\u6015\u53ea\u6709\u5355\u72ec\u4e00\u4e2a\u503c\u3002</li> </ul> </li> </ul> <pre><code>s = list('abcd')\ns[::1]\n# &gt;&gt;&gt; ['a', 'b', 'c', 'd']\ns[::2]\n# &gt;&gt;&gt; ['a', 'c']\ns[::-2]  # != s[::2]\u7684\u76f8\u53cd\n# &gt;&gt;&gt; ['d', 'b']\n\ns[:2] = 1\n# &gt;&gt;&gt; TypeError: can only assign an iterable\ns[:2] = [1]  # \u54ea\u6015\u53ea\u6709\u5355\u72ec\u4e00\u4e2a\u503c\u3002\n# &gt;&gt;&gt; [1, 'd']\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_26","title":"\u62fc\u63a5","text":"<ul> <li><code>+</code> \u4e0d\u4fee\u6539\u539f\u6709\u7684\u64cd\u4f5c\u5f62\u8c61\uff0c\u800c\u662f\u6784\u5efa\u4e00\u4e2a\u5168\u65b0\u7684\u5e8f\u5217</li> </ul>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_27","title":"\u590d\u5236\u540e\u62fc\u63a5","text":"<ul> <li> <p><code>seq * n</code> \u4e0d\u4fee\u6539\u539f\u6709\u7684\u64cd\u4f5c\u5f62\u8c61\uff0c\u800c\u662f\u6784\u5efa\u4e00\u4e2a\u5168\u65b0\u7684\u5e8f\u5217\u3002<code>seq[item]</code>\u27a1\ufe0f <code>seq[item1, item1, ...]</code></p> <p>!!! danger seq \u91cc\u7684\u5143\u7d20\u662f\u5f15\u7528\uff0c\u590d\u5236\u7684\u5c06\u4f1a\u662f\u5f15\u7528\uff0c\u4e00\u6539\u5168\u6539  seq \u91cc\u7684\u5143\u7d20\u662f\u503c\uff0c\u590d\u5236\u7684\u5c06\u4f1a\u662f\u503c \u5177\u6709\u72ec\u7acb - <code>seqA(seqB for i in range(n))</code> \u5bf9\u5d4c\u5957\u5e8f\u5217\u7684\u5e8f\u5217\uff0c\u5d4c\u5957\u5185\u7684\u5e8f\u5217\u662f\u5b58\u653e\u4e0d\u540c\u5185\u5bb9\u7684\u4e1c\u897f\u3002 \ud83d\udff0<code>seA[seqB]</code>\u27a1\ufe0f <code>seqA[seqB1, seqB2, ...]</code> \u91cc\u9762\u76f8\u4e92\u72ec\u7acb\u3002 <code>seqA(seqB) *n</code> \ud83d\udff0 <code>seA[seqB]</code>\u27a1\ufe0f <code>seqA[seqB, seqB, ...]</code>\uff08\u7b2c\u4e00\u4e2a\u65b9\u6cd5\uff0c\u91cc\u9762\u4e00\u6539\u5168\u6539\u3002\uff09</p> </li> </ul> <pre><code>a = [0] * 3  # [0] \u662f seq\uff0c 0 \u662f\u5143\u7d20 = \u503c\n# &gt;&gt;&gt; a = [0, 0, 0]\na[0]=1\n# &gt;&gt;&gt; a = [1, 0, 0]\n\nb = [[0]*3]  # [0] \u662f seq\uff0c0 \u662f\u5143\u7d20 = \u503c\n# &gt;&gt;&gt; b = [[0, 0, 0]]  # \u5728 b \u5185\u5c42\u590d\u5236, b \u53ea\u67091\u4e2a\u5143\u7d20 []\nb[0]=1\n# &gt;&gt;&gt; b = [1]\n\nc = [[0]] * 3  # [[0]] \u662f seq\uff0c [0] \u662f\u5143\u7d20 = \u5f15\u7528\n# &gt;&gt;&gt; c = [[0], [0], [0]] # \u5728 c \u590d\u5236\uff0cc \u67093\u4e2a\u5143\u7d20 []\nc[0] = 1\n# &gt;&gt;&gt; c = [1, [0], [0]]\nc[1][0]=2\n# &gt;&gt;&gt; c = [1, [2], [2]]\n\nd = [[0] for i in range(3)]\n# &gt;&gt;&gt; d = [[0], [0], [0]]\nd[0] = 1\n# &gt;&gt;&gt; d = [1, [0], [0]]\nd[1][0]=2\n# &gt;&gt;&gt; d = [1, [2], [0]]\n\ne = ['-'*3]\n# &gt;&gt;&gt; e = ['---']\n</code></pre> <pre><code>graph LR\nsubgraph \u6808\u533a\nc --\u4e00\u76f4\u6ca1\u53d8--&gt; c_address\nend\nsubgraph \u5806\u533a\n0_address\n0\n1\n2\nB[\u30100_address\u3011]\nC[\u30100_address,0_address,0_address\u3011]\nD[\u30101,0_address,0_address\u3011]\nend\nc_address -.- B -.-&gt; 0_address -.- 0 \nc_address -.- C -.-&gt; 0_address\nB --1)\u590d\u5236--&gt; C\nc_address -.- D\nC --2)c0=1--&gt; D\nD -.-&gt; 0_address\nD -.- 1\n0_address -.- 2\n0 --3)c10=2--&gt;2</code></pre> <p>\u53ea\u6709\u524d\u4e24\u6b65\u6539\u7684\u662f <code>c</code> \u5b58\u7684\u7684\u4e1c\u897f\uff0c\u6700\u540e\u4e00\u6b65\u5176\u5b9e<code>c</code> \u5b58\u7684\u7684\u4e1c\u897f\u6ca1\u53d8\uff0c<code>c</code> \u5b58\u7684\u7684\u4e1c\u897f\u5b58\u7684\u4e1c\u897f\u53d8\u4e86</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_28","title":"\u5c31\u5730\u52a0\u4e58","text":"<p><code>+=</code>, <code>*=</code>, <code>__iadd__</code>, <code>__imul__</code> \u91cd\u8981\uff1a\u5bf9 Seq &amp; MutableSeq \u5185\u5b58\u5730\u5740\u7684\u53d8\u5316</p> <pre><code># Seq \u53d8\u4e86\nt = (1, 2)\n# &gt;&gt;&gt; t=(1,2), id(t)=4313022720\nt *= 2\n# &gt;&gt;&gt; t=(1,2,1,2), id(t)=4311067808\n# MutableSeq \u4e0d\u53d8\nl = [1, 2]\n# &gt;&gt;&gt; l=[1,2], id(l)=4311024448\nl *= 2\n# &gt;&gt;&gt; l=[1,2,1,2], id(l)=4311024448\n</code></pre> <p>\u5173\u4e8e\u5c31\u5730\u52a0\u4e58\u4e00\u4e2a\u8fd8\u6ca1\u89e3\u51b3\u7684\u95ee\u9898</p> <pre><code>t = (1,2,[30,40])\nt[2]+=[50,60]\n# &gt;&gt;&gt; TypeError: 'tuple' object does not support item assignment\n# &gt;&gt;&gt; t=(1, 2, [30, 40, 50, 60])\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_29","title":"\u6392\u5e8f","text":"<p>\u7a33\u5b9a\u7684<code>Timsort</code> </p> <p>\u4e24\u4e2a\u5143\u7d20\u540c\u6837\u5927\u5c0f\u7684\u60c5\u51b5\u4e0b\uff0c\u5728\u6392\u5e8f\u7684\u65f6\u5019\u4f4d\u7f6e\u662f\u76f8\u4e92\u56fa\u5b9a\u7684\u3002\u5982\u679c\u5728\u6bd4\u8f83\u957f\u7684\u65f6\u5019\uff0c\u4e24\u4e2a\u5143\u7d20\u4e00\u6837\u957f\uff0c\u90a3\u4e48\u7ed3\u679c\u7684\u5148\u540e\u4f1a\u4ee5\u539f\u672c\u672c\u8eab\u5217\u8868\u7684\u5148\u540e\u51b3\u5b9a\uff0c\u8fd9\u6837\u76f8\u5bf9\u7a33\u5b9a\u3002</p> <p><code>lst.sort()</code> &amp; <code>sorted(iterableObject)</code> \u80cc\u540e\u7528\u7684\u90fd\u662f Timsort\u3002 Timsort\u3002\u4e00\u79cd\u81ea\u9002\u5e94\u7b97\u6cd5\uff0c\u6839\u636e\u539f\u59cb\u6570\u636e\u7684\u987a\u5e8f\u7279\u70b9\u4ea4\u66ff\u4f7f\u7528\u63d2\u5165\u6392\u5e8f &amp; \u5f52\u5e76\u6392\u5e8f\u3002=\uff0c\u4ee5\u8fbe\u5230\u6700\u4f73\u6548\u7387\u3002</p> <p>\u4e0d\u9700\u8981\u7ef4\u62a4\u6392\u5e8f\uff1a</p> <ul> <li><code>lst.sort()</code> \u5c31\u5730\u6392\u5e8f\u5217\u8868\uff0c\u8fd4\u56de None\u3002</li> <li><code>sorted(iterableObject)</code> \u8fd4\u56de\u65b0\u5efa\u7684\u5217\u8868\u3002<ul> <li>\u63a5\u53d7\u4efb\u4f55\u5f62\u5f0f\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\u4e3a\u53c2\u6570\uff0c\u5305\u62ec\u4e0d\u53ef\u53d8\u5e8f\u5217\u6216\u751f\u6210\u5668\u3002</li> </ul> </li> </ul> <p>\ud83d\udcd7 \u90fd\u6709\u4e24\u4e2a\u53ef\u9009\u7684\u5173\u952e\u8bcd\u53c2\u6570</p> <ul> <li><code>reverse=False</code> \u9ed8\u8ba4\u5347\u5e8f</li> <li><code>key=IdentityFunction</code> \u4e00\u4e2a\u53ea\u6709\u4e00\u4e2a\u53c2\u6570\u7684\u51fd\u6570\u3002\u8fd9\u4e2a\u51fd\u6570\u4f1a\u88ab\u7528\u5728\u5e8f\u5217\u4e0a\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\u4e0a\uff0c\u4ea7\u751f\u5143\u7d20\u76f8\u5bf9\u5e94\u7684\u7528\u4e8e\u6392\u5e8f\u7684\u5bf9\u6bd4\u5173\u952e\u8bcd\u3002\u9ed8\u8ba4\u6052\u7b49\u51fd\u6570\uff0c\u4ee5\u5143\u7d20\u81ea\u5df1\u7684\u503c\u6765\u6392\u5e8f\u3002<ul> <li><code>=len</code> \u5bf9\u6bd4\u957f\u5ea6</li> <li><code>=str.lower</code> \u5ffd\u7565\u5927\u5c0f\u5199\u7684\u7684\u6392\u5e8f</li> <li><code>=reverse</code> \u4ece\u5de6\u5230\u53f3\u8fdb\u884c\u6bd4\u8f83</li> </ul> </li> </ul> <pre><code>lst = ['Aa', 'b', 'Cc']\nsorted(lst)\n# &gt;&gt;&gt; ['Aa', 'Cc', 'b']  # \u6309 \u9996\u5b57\u6bcd ord\nsorted(lst, key=str.lower)  # \u6309 \u4e0d\u5206\u5927\u5c0f\u5199 ord\n# &gt;&gt;&gt; ['Aa', 'b', 'Cc']\nsorted(lst, key=len)\n# &gt;&gt;&gt; ['b', 'Aa', 'Cc']\n</code></pre> \u4e0d\u652f\u6301\u539f\u751f\u6bd4\u8f83\u7684\u5bf9\u8c61<pre><code>class User:\n    def __init__(self, id, age):\n        self.id = id\n        self.age = age\n    def __repr__(self):\n        return 'User(id:{}, age:{})'.format(self.id, self.age)\n\nusers = [User(1, 50), User(9, 10), User(1, 30)]\nprint(\"\\n--- uncomparable class ---\")\nprint(users, \"\\n\",\n      \"\\t\", sorted(users, key=lambda d: d.id), \"\\n\",\n      \"\\t\", sorted(users, key=lambda d: (d.id, d.age)))\n\n\nfrom operator import attrgetter # another\nprint(users, \"\\n\",\n      \"\\t\", sorted(users,  key=attrgetter('id')), \"\\n\",\n      \"\\t\", sorted(users,  key=attrgetter('id', 'age')))\n</code></pre> <p>\u9700\u8981\u7ef4\u62a4\u6392\u5e8f\uff1a</p> <p>\u5df2\u7ecf\u6392\u597d\u4e86\u5e8f\uff0c\u5982\u4f55\u67e5\u627e&amp;\u7ef4\u62a4</p> <p>\u6392\u5e8f\u5f88\u8017\u65f6\uff0c\u5f97\u5230\u6709\u5e8f\u5e8f\u5217\u540e\u6700\u597d\u4fdd\u6301\u5b83\u4e00\u76f4\u6709\u5e8f\u3002</p> <p><code>bisect module</code> \u5e95\u4e0b\u7684 <code>bisect</code> &amp; <code>insort</code> \u90fd\u662f\u7528\u4e8c\u5206\u67e5\u627e\u5728\u6709\u5e8f\u5e8f\u5217\u4e0a \u67e5\u627e\u5e76\u63d2\u5165\u5143\u7d20\u3002</p> <p>\ud83d\udcd7 \u6709<code>lo</code> &amp; <code>hi</code>,\u6765\u7f29\u5c0f\u641c\u5bfb\u8303\u56f4\u3002</p> <ul> <li><code>bisect.bisect(sortedlst, target)</code> \u67e5\u627e\u7d22\u5f15\uff0c\u76f8\u540c\u65f6\uff0c\u5728\u540c\u4e00\u4e2a\u7684\u53f3\u8fb9\u3002 \u53ef\u642d\u914d\u4e0a <code>sortedlst.insert(idx, target)</code>\u914d\u5408\u4f7f\u7528 \u6709 <code>bisect.bisect_left</code> \u76f8\u540c\u65f6\uff0c\u5728\u540c\u4e00\u4e2a\u7684\u5de6\u8fb9\u3002</li> <li><code>bisect.insort(sortedlst, target)</code> \u67e5\u627e\u5e76\u63d2\u5165\u3002\u5c31\u5730\u6539\u53d8\u3002\u4e00\u6b65\u5230\u4f4d\uff0c\u901f\u5ea6\u66f4\u5feb\u3002 \u540c\u6837\u6709 <code>bisect.insort_left</code></li> </ul> <pre><code>import bisect\nlst = [2, 4, 6]\nbisect.bisect(lst, 3)\n# &gt;&gt;&gt; 1\nbisect.insort(lst, 3)\n# &gt;&gt;&gt; [2, 3, 4, 6]\n\n# \u7528\u9014\ndef grade(score):\n    breakpoints=[60, 70, 80, 90]\n    grades = 'FDCBA'\n    i = bisect.bisect(breakpoints, score)\n    return grades[i]\n\n[grade(score) for score in [33, 99, 77, 60]]\n# &gt;&gt;&gt; ['F', 'A', 'C', 'D']\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#list","title":"list","text":"<p>\u5bb9\u5668 + MutableSequence</p> <ul> <li>init\u3002 <code>list(range(start, end, step))</code> \u5c06<code>range()</code>\u4f5c\u4e3a<code>list()</code>\u7684\u53c2\u6570\uff0c\u8f93\u51fa\u5c06\u4e3a\u4e00\u4e2a\u6570\u5b57\u5217\u8868</li> <li>\u589e\u52a0<ul> <li><code>lst.append(x)</code> \u672b\u5c3e</li> <li><code>lst.insert(idx, x)</code> any position</li> </ul> </li> <li>\u5220\u9664     ||\u6839\u636e____\u6765\u5220\u9664|return|     |--|--|--|     |<code>del lst[idx]</code> |idx |\u274c no-return|     |<code>lst.pop(idx)</code> |idx |\u2705 lst[idx]\uff0c\u4e0d\u6307\u5b9a\u7d22\u5f15\u9ed8\u8ba4\u5220\u9664\u6700\u540e\u4e00\u4e2a|     |<code>lst.remove(x)</code>| value, \u53ea\u5220\u9664\u7b2c\u4e00\u4e2a\u6307\u5b9a\u7684\u503c|\u2705  x|</li> <li>\u67e5 search <code>lst.index(val)</code> \u8fd4\u56de\u7b2c\u4e00\u4e2a\u627e\u5230\u7684idx\u3002\u627e\u4e0d\u5230\u5c31\u4f1a <code>ValueError</code></li> </ul> <p><code>lst_1r = lst_1[:]</code>  \u5207\u7247\u7b49\u4e8e\u6d45\u62f7\u8d1d</p> <pre><code>a = 'a:a:a:b'\nb = a[:]\n# &gt;&gt;&gt; id(a)=id(b)=4382924912\n</code></pre> <p>\u62fc\u63a5</p> \uff1f cases <code>for + append</code> \u4fee\u6539\u5143\u7d20 <code>list_c = list_a + list_b</code> \u6548\u7387\u597d, \u4e0d\u9002\u5408\u505a\u5927\u6570\u636e\u5904\u7406 <code>list_c = [*list_a, *list_b]</code> \u901a\u8fc7 '*' \u89e3\u6784 \u6548\u7387\u597d, \u4e0d\u9002\u5408\u505a\u5927\u6570\u636e\u5904\u7406 <code>list_a.extend(list_b)</code> \u5185\u7f6e\u7684meth: extend \u9700\u8981\u4fee\u6539\u539f\u59cb\u5217\u8868\u6bd4\u8f83\u5408\u9002 <p>Python3 - 6\u79cd\u65b9\u6cd5\u62fc\u63a5\u5408\u5e76\u5217\u8868list</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#tuple","title":"tuple","text":"<p>\u5bb9\u5668 + Sequence \u4e0d\u53ef\u53d8\u7684\u5217\u8868(\u9664\u4e86\u589e\u5220\u6539\uff0c\u652f\u6301 list \u5176\u4ed6\u6240\u6709\u64cd\u4f5c) \u6ca1\u6709\u5b57\u6bb5\u540d\u7684\u8bb0\u5f55(item \u662f\u643a\u5e26\u4f4d\u7f6e\u4fe1\u606f\uff0c\u6240\u4ee5\u4e00\u822c\u4e0d\u641e\u6392\u5e8f)</p> <p>\u867d\u597d\u4f46\u662f\u6ca1\u6709\u5b57\u6bb5\u540d \u27a1\ufe0f <code>namedtuple</code></p> <ul> <li> <p>init</p> <ul> <li>\u3010\u5355\u6761\u8bb0\u5f55\u3011<code>tuple(val1, val2, ...)</code>, <code>tuple(list1)</code> \u8fd4\u56de\uff1a<code>Tuple</code></li> <li>\u3010\u591a\u5217\u5408\u5e76\u3011 <code>list(zip(col1, col2, ...))</code></li> </ul> <p><code>zip</code></p> <p>zip \u8fd4\u56de\u6765\u7684\u662f <code>&lt;zip object at 0x103abc288&gt;</code>: \u5143\u7ec4\u7ec4\u6210\u7684\u5bf9\u8c61\u3002\u9700\u8981\u53e0\u5c42 list\u3002</p> <pre><code>col1, col2 = [1, 2, 3], ['a', 'b', 'c']\n&gt;&gt;&gt; zip(col1, col2)\n# &gt;&gt;&gt; &lt;zip object at 0x103abc288&gt;\n&gt;&gt;&gt; list(zip(col1, col2))\n# &gt;&gt;&gt; [(1, 'a'), (2, 'b'), (3, 'c')]\n</code></pre> </li> <li> <p>\u56e0\u4e3a\u4e0d\u53ef\u53d8\u53ef\u7528\u4f5c<code>dict</code>\u7684key</p> <pre><code>d = {(x, x + 1): x for x in range(10)}    \nprint(d[(5, 6)])       \n# &gt;&gt;&gt; 5\n</code></pre> </li> </ul>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#namedtuple","title":"namedtuple","text":"<p><code>collections.namedtuple</code>. \u53ef\u4ee5\u7528\u6765\u6784\u5efa\u4e00\u4e2a\u5e26\u5b57\u6bb5\u540d\u7684\u5143\u7ec4\u548c\u4e00\u4e2a\u6709\u540d\u5b57\u7684\u7c7b \u5bb9\u5668 + Sequence \u4e0d\u53ef\u53d8\u7684\u5217\u8868 + \u6709\u5b57\u6bb5\u540d\u7684\u8bb0\u5f55</p> <p><code>namedtuple</code> \u6784\u5efa\u7684\u7c7b\u7684\u5b9e\u4f8b\u6240\u6d88\u8017\u7684\u5185\u5b58\u8ddf\u5143\u7ec4\u662f\u4e00\u6837\u7684\uff0c\u56e0\u4e3a\u5b57\u6bb5\u540d\u90fd\u88ab\u5b58\u5728\u5bf9\u5e94\u7684\u7c7b\u91cc\u9762\u3002\u5c0f\u53f7\u7684\u5185\u5b58\u6bd4\u666e\u901a\u7684\u5b9e\u4f8b\u5bf9\u8c61\u8981\u5c0f\u4e00\u70b9\uff0c\u56e0\u4e3a python \u4e0d\u4f1a\u7528 <code>__dict__</code> \u5b58\u653e\u5b9e\u4f8b\u7684\u5c5e\u6027\u3002</p> <p><code>p</code>\u7684\u5b57\u6bb5\u540d\u90fd\u88ab\u5b58\u5728\u5bf9\u5e94\u7684\u7c7b<code>Point</code>\u91cc\u9762</p> <ul> <li> <p>init <code>Records = namedtuple(typename:str, field_names:Optional(Iterable, String))</code> <code>rec1 = Records(*rec1_data)</code> <code>rec2 = Records._make(*rec2_data)</code> \ud83d\udcd5 Args:</p> <ul> <li>typename: \u7c7b\u8868\u540d\u7684\u611f\u89c9</li> <li>field_names: \u7531\u6570\u4e2a\u5b57\u7b26\u4e32\u7ec4\u6210\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u6216\u8005\u662f\u7531\u7a7a\u683c\u5206\u9694\u5f00\u7684\u5b57\u6bb5\u540d\u7ec4\u6210\u7684\u5b57\u7b26\u4e32</li> </ul> </li> <li> <p>\ud83d\udcd7 \u5c5e\u6027</p> <ul> <li><code>Records._fields</code> \u5305\u542b\u5b57\u6bb5\u540d\u7684\u5143\u7ec4</li> <li><code>rec1._asdict()</code>\u628a namedtuple \u4ee5 <code>collections.OrderedDict</code> \u5f62\u5f0f\u8fd4\u56de\u3002\u53cb\u597d\u5448\u73b0\u4fe1\u606f</li> <li><code>rec1._replace(field_name=v)</code> \u4fee\u6539\u503c\u3002</li> </ul> </li> </ul> <pre><code>from collections import namedtuple\nPoint = namedtuple('Point', ['x', 'y'])\np = Point(11, y=22)  # \u6839\u636e\u4f4d\u7f6e\u548ckw\u5b9e\u4f8b\u5316\np[0] + p[1] == p.x + p.y  # by idx | name \n# &gt;&gt;&gt; True  # = 33\nd = p._asdict()  # namedtuple \u27a1\ufe0f dict\n# &gt;&gt;&gt; d = {'x': 11, 'y': 22}\nPoint(**d)      # dict \u27a1\ufe0f namedtuple            \n# &gt;&gt;&gt; Point(x=11, y=22)\np._replace(x=100)\n# &gt;&gt;&gt; Point(x=100, y=22)\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#array","title":"array \u6570\u7ec4","text":"<p>\u9700\u8981\u7eaf\u6570\u5b57\u7684\u5217\u8868\u662f\uff0carray \u6bd4 list \u66f4\u9ad8\u6548\u3002</p> <p>\u5728\u5b58\u6570\u5b57\u65f6\uff0carray \u80cc\u540e\u5b58\u7684\u4e0d\u662f float \u6216\u8005 int \u5bf9\u8c61\uff0c\u800c\u662f\u6570\u5b57\u7684\u673a\u5668\u7ffb\u8bd1==\u5b57\u8282\u8868\u8ff0==\u3002 \u6307\u5b9a\u6570\u636e\u7c7b\u578b\uff0c\u5f53\u5e8f\u5217\u5f88\u5927\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u8282\u7701\u5f88\u591a\u65f6\u95f4\u3002 \u8fd8\u63d0\u4f9b\u4ece\u6587\u4ef6\u8bfb\u53d6\u548c\u5b58\u5165\u6587\u4ef6\u66f4\u5feb\u7684\u65b9\u6cd5\u3002</p> <ul> <li> <p>init \u9700\u8981\u7c7b\u578b\u7801\uff0c\u8868\u793a\u5e95\u5c42 C \u8bed\u8a00\u9700\u8981\u5b58\u653e\u7684\u6570\u636e\u7c7b\u578b</p> <ul> <li><code>b</code> signed char \u6709\u7b26\u53f7\u7684\u5b57\u7b26\uff0c\u53ea\u80fd\u5b58\u653e\u4e00\u4e2a\u5b57\u8282\u7684\u6574\u6570\u3002\\(2^7=[-128, 127]\\)</li> <li><code>d</code> \u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570\u7ec4</li> <li>\u5feb\u901f\u8bfb\u5199\u6587\u4ef6 <code>array.fromfile(fp)</code> &amp; <code>array.tofile(fp)</code>\u3002\u8bfb\u5199\u4e8c\u8fdb\u5236\u6587\u4ef6\u65f6\u95f4\u6bd4\u5bf9\u6587\u672c\u6587\u4ef6\u8bfb\u5199\u8981\u5feb\uff0c\u56e0\u4e3a\u4e0d\u9700\u8981\u8f6c\u6362\u5b57\u7b26\u548c\u6570\u5b57\u5f62\u5f0f\uff1b\u8fd8\u8282\u7701\u7a7a\u95f4\u3002</li> <li>\u6392\u5e8f <code>a = array.array(a.typecode, sorted(a))</code> \u4e0d\u652f\u6301\u5c31\u5730\u6392\u5e8f\u65b9\u6cd5\u3002</li> </ul> </li> </ul> <p>\u4f46\u662f\u4e0d\u652f\u6301 \u6d45\u590d\u5236 <code>s.copy()</code> \u64cd\u4f5c\uff0c</p> <pre><code>from array import array\nfrom random import random\n\nfloats = array('d', (random() for i in range(3)))\n# &gt;&gt;&gt; floats=array('d', [0.7997733053807442, 0.15195105711939816, 0.013224926567956818])\nwith open('floats.bin', 'wb') as fp:\n    floats.tofile(fp)\nfloats2 = array('d')\nwith open('floats.bin', 'rb') as fp:\n    floats2.fromfile(fp)\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#memoryview","title":"memoryview \u5185\u5b58\u89c6\u56fe","text":"<p>\u80fd\u5728\u4e0d\u590d\u5236\u5185\u5bb9\u7684\u65f6\u5019\uff0c\u64cd\u4f5c\u540c\u4e00\u4e2a\u6570\u7ec4\u4e0d\u540c\u5207\u7247\u3002</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#deque","title":"deque \u53cc\u5411\u961f\u5217","text":"<p>\u5229\u7528 <code>.append()</code> &amp; <code>.pop(0)</code> \u53ef\u4ee5\u628a list \u5f53\u4f5c queue \u4f7f\u7528\u3002\u4f46\u662f\u5220\u9664\u7b2c\u4e00\u4e2a\u6216\u8005\u589e\u52a0\u5230\u5217\u8868\u5f00\u59cb\u662f\u5f88\u8017\u65f6\uff0c\u56e0\u4e3a\u8981\u79fb\u52a8\u5176\u4ed6\u5143\u7d20\u3002</p> <p><code>collections.deque</code> double-end queue \u7ebf\u7a0b\u5b89\u5168\uff0c\u53ef\u4ee5\u5feb\u901f\u5411\u4e24\u7aef\u6dfb\u52a0\u6216\u8005\u5220\u9664\u5143\u7d20\u3002</p> <ul> <li>\u4f46\u662f\u53ea\u5728\u4e24\u7aef\u505a\u4e86\u4f18\u5316\uff0c\u4ece\u4e2d\u95f4\u589e\u5220\u8fd8\u662f\u6162\u7684\u3002</li> <li>append &amp; popleft \u90fd\u662f\u539f\u5b50\u64cd\u4f5c\uff0cdeque \u53ef\u4ee5\u5728\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u4e2d\u5b89\u5168\u5730\u4f5c\u4e3a\u5148\u8fdb\u5148\u51fa\u7684\u961f\u5217\u4f7f\u7528\uff0c\u800c\u4e0d\u9700\u8981\u8003\u8651\u8d44\u6e90\u9501\u7684\u95ee\u9898\u3002</li> </ul> <p>\u539f\u5b50\u64cd\u4f5c</p> <p>\u9002\u5408\u505a\u7c7b\u4f3c\u201c\u6700\u8fd1\u7528\u5230\u7684\u51e0\u4e2a\u5143\u7d20\u201d\u3002\u56e0\u4e3a\u5728\u521d\u59cb\u5316\u7684\u65f6\u5019\uff0c\u6307\u5b9a\u961f\u5217\u7684\u5927\u5c0f(\u4e00\u65e6\u8bbe\u5b9a\u4e4b\u540e\u4e0d\u80fd\u6539)\u3002\u5982\u679c\u6ee1\u5458\u7684\u8bdd\uff0c\u53ef\u4ee5\u4ece\u53cd\u5411\u7aef\u5220\u9664\u8fc7\u671f\u7684\u5143\u7d20\uff0c\u5728\u5c3e\u7aef\u6dfb\u52a0\u65b0\u5143\u7d20\u3002</p> <ul> <li>init <code>q = deque([iterable[, maxlen=None])</code> \ud83d\udcd5 <code>[iterable]</code> \u6ca1\u6709\u6307\u5b9a\uff0c\u65b0\u961f\u5217\u4e3a\u7a7a <code>maxlen=None</code> \uff0cdeques \u53ef\u4ee5\u589e\u957f\u5230\u4efb\u610f\u957f\u5ea6\u3002\u4e00\u65e6\u8bbe\u5b9a\u4e4b\u540e\u4e0d\u80fd\u6539\u3002</li> <li>\u65cb\u8f6c <code>deque.rotate(n)</code> \u5f53 n&gt;0, \u6700\u53f3\u8fb9\u7684 n \u4e2a\u5143\u7d20\u4f1a\u88ab\u65cb\u8f6c\u5230\u6700\u5de6\u8fb9\uff1b\u5f53 n&lt;0, \u6700\u5de6\u8fb9\u7684 n \u4e2a\u5143\u7d20\u4f1a\u88ab\u65cb\u8f6c\u5230\u6700\u53f3\u8fb9\u3002</li> <li> <p>\u589e\u52a0 O(1) <code>deque.append(item)</code> &amp; <code>deque.appendleft(item)</code> <code>deque.extend(iterable)</code> &amp; <code>deque.extendleft(iterable)</code> \u5982\u679c\u6ee1\u5458\u7684\u8bdd\uff0c\u53ef\u4ee5\u4ece\u53cd\u5411\u7aef\u5220\u9664\u8fc7\u671f\u7684\u5143\u7d20\uff0c\u5728\u5c3e\u7aef\u6dfb\u52a0\u65b0\u5143\u7d20\u3002</p> <p><code>deque.extendleft(lst)</code> \u5c06\u8fed\u4ee3\u5668\u7684\u5143\u7d20\u9010\u4e2a\u589e\u52a0\u5230\u961f\u5217\u4e0a\uff0c\u6700\u540e\u5448\u73b0\u51fa\u6765\u7684\u662f\u9006\u5e8f\u3002</p> <ul> <li>\u5220\u9664 O(1) <code>deque.pop()</code> &amp; <code>deque.popleft()</code></li> </ul> </li> </ul> <pre><code>from collections import deque\n\ndq = deque([1,2,3], maxlen=5)\n# &gt;&gt;&gt; dq=deque([1, 2, 3], maxlen=5)\ndq.extend(range(4,8))\n# &gt;&gt;&gt; dq=deque([3, 4, 5, 6, 7], maxlen=5)\ndq.extendleft(range(1,3))\n# &gt;&gt;&gt; dq=deque([2, 1, 3, 4, 5], maxlen=5)\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#bytes","title":"bytes \u5b57\u8282","text":"<p>\u4e8c\u8fdb\u5236\u5e8f\u5217 \u5176\u5b9e\u662f\u6574\u6570\u5e8f\u5217\uff1a\u5404\u4e2a\u5143\u7d20\u662f\u4ecb\u4e8e 0 \uff5e 255=\\(2^8-1\\) \u4e4b\u95f4\u7684\u6574\u6570\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8fd4\u56de\u6765\u7684\u7ed3\u679c\u4e0d\u4e00\u6837\uff1f \u867d\u7136\u4e8c\u8fdb\u5236\u5e8f\u5217\u662f\u6574\u6570\u5e8f\u5217\uff0c\u4f46\u4ed6\u4eec\u7684\u5b57\u9762\u91cf\u8868\u793a\u6cd5\u8868\u660e\u5176\u4e2d\u6709 ASCII \u6587\u672c\u3002\u6240\u4ee5\u5404\u4e2a\u5b57\u8282\u7684\u503c\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e0b\u5217\u4e09\u79cd\u4e0d\u540c\u7684\u6587\u672c\u8868\u793a\uff1a</p> <ul> <li>\u53ef\u6253\u5370\u7684 ASCII \u8303\u56f4\u5185\u7684\u5b57\u8282 \u27a1\ufe0f  ASCII \u5b57\u7b26\u672c\u8eab</li> <li>\u5236\u8868\u7b26\u3001\u6362\u884c\u7b26\u3001\u56de\u8f66\u7b26\u3001\\\u5bf9\u5e94\u7684\u5b57\u8282 \u27a1\ufe0f \u8f6c\u4e49\u5e8f\u5217</li> <li>\u5176\u4ed6\u5b57\u8282\u7684\u503c \u27a1\ufe0f 16\u8fdb\u5236\u8f6c\u4e49\u5e8f\u5217</li> </ul> <pre><code>b = bytes('A\\t\u554a', encoding='utf8')\n# &gt;&gt;&gt; b=b'A\\t\\xe5\\x95\\x8a'\n# &gt;&gt;&gt; b[0]=65    b[1]=9       b[2]=229 \u5176\u5b9e\u662f\u6574\u6570\n# &gt;&gt;&gt; b[:1]=b'A' b[1:2]=b'\\t' b[2:3]= b'\\xe5'\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#str","title":"<code>str</code>","text":"<p>Sequence</p> <p><code>s[i] = 'n'</code> \u5207\u7247\u8d4b\u503c \u274c \\(\\impliedby\\) str \u4e0d\u53ef\u53d8</p> <p>\u5b57\u7b26\u7f16\u7801\u95ee\u9898\uff1a <code>t</code> \u6587\u672c <code>b</code> \u4e8c\u8fdb\u5236/bytes,\u975e\u6587\u672c\u53ea\u80fd byte \u6a21\u5f0f</p> <p>\u5185\u5b58\u56fa\u5b9a\u4f7f\u7528 unicode, \u6211\u4eec\u6539\u53d8\u7684\u662f\u4ece\u5185\u5b58\u5b58\u5165\u786c\u76d8\u7684\u683c\u5f0f</p> <p>linux \u9ed8\u8ba4 utf-8\uff0c windows \u9ed8\u8ba4 gbk</p> <p>\u5b58\u50a8\u6570\u636e - \u5927\u5c0f\u5199</p> <p>\u5b58\u50a8\u6570\u636e\u65f6\uff0c\u65b9\u6cd5<code>lower()</code>\u5f88\u6709\u7528\u3002\u5f88\u591a\u65f6\u5019\uff0c\u4f60\u65e0\u6cd5\u4f9d\u9760\u7528\u6237\u6765\u63d0\u4f9b\u6b63\u786e\u7684\u5927\u5c0f\u5199\uff0c\u56e0\u6b64\u9700\u8981\u5c06\u5b57\u7b26\u4e32\u5148\u8f6c\u6362\u4e3a\u5c0f\u5199\uff0c\u518d\u5b58\u50a8\u5b83\u4eec\u3002\u4ee5\u540e\u9700\u8981\u663e\u793a\u8fd9\u4e9b\u4fe1\u606f\u65f6\uff0c\u518d\u5c06\u5176\u8f6c\u6362\u4e3a\u6700\u5408\u9002\u7684\u5927\u5c0f\u5199\u65b9\u5f0f\u3002</p> <p>\u7a7a\u767d\u6cdb\u6307\u4efb\u4f55\u975e\u6253\u5370\u5b57\u7b26\uff0c\u5982\u7a7a\u683c\u3001\u5236\u8868\u7b26\u548c\u6362\u884c\u7b26</p> cases code return=non-inplaced \u5927\u5c0f\u5199 <code>str.upper()</code>,<code>str.lower()</code>, <code>str.capitalize()</code>\uff0c<code>str.title()</code> \u2705 \u7ed3\u679c ^ <code>str.swapcase()</code> \u2705 \u7ed3\u679c \u5927\u5c0f\u5199\u4e92\u6362 \u53bb\u9664\u524d\u540e\u5b57\u7b26\u4e32 <code>str.lstrip(sub_str)</code>, <code>str.rstrip(sub_str)</code>,<code>str.strip(sub_str)</code> \u2705 \u7ed3\u679c \u9ed8\u8ba4\u662f\u7a7a\u767d \u5b57\u7b26\u4e32\u662f\u5426\u53ea\u7531__\u7ec4\u6210 <code>str_.isalpha()</code>, \u53ea\u7531\u5b57\u6bcd\uff0c\u4e2d\u6587\u4e5f\u662f \u2705 bool ^ <code>str_.isdigit()</code>,<code>str.isnumeric()</code>, <code>str.isdecimal()</code> \u53ea\u7531\u6570\u5b57 ^ ^ <code>str_.isspace()</code>, \u53ea\u7531\u7a7a\u683c ^ ^ <code>in string.punctuation</code> \u6807\u70b9 ^ \u67e5\u627e <code>long_str.find(sub_str)</code> \u27a1\ufe0f \u2705  \u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e or -1. ^ <code>long_str.rfind(sub_str)</code>\u2b05\ufe0f ^ ^ <code>long_str.index(sub_str)</code>\u27a1\ufe0f \u2705 \u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e or ValueError ^ <code>long_str.rindex(sub_str)</code>\u2b05\ufe0f ^ ^ <code>str.count(sub, start= 0, end=len(str))</code> \u2705  sub \u5728 str\u4e2d\u51fa\u73b0\u7684\u6b21\u6570 \u6267\u884c <code>eval(string)</code>\u6267\u884c\u4e00\u4e2a\u5b57\u7b26\u4e32\u8868\u8fbe\u5f0f \u2705 \u8868\u8fbe\u5f0f\u7684\u503c \u586b\u5145 <code>str.ljust(int, pad_str)</code>,<code>str.rjust(int, pad_str)</code>, <code>str.center(int, pad_str)</code> \u2705 \u7ed3\u679c <code>pad_str=' '</code>\u9ed8\u8ba4\u662f\u7a7a\u683c ^ <code>str.zfill(int)</code> \u2705 \u7ed3\u679c \u75280\u5728\u524d\u9762\u7684\u586b\u5145 \u4fee\u6539 <code>s = s[:l] + s[l:][::-1]</code> \u91cd\u65b0\u8d4b\u503c \u2705 \u7ed3\u679c ^ <code>string.replace(old, new)</code>\u6240\u6709\u90fd\u6362\u4e00\u904d \u2705 \u7ed3\u679c \u8fde\u63a5\u5b57\u7b26\u4e32 <code>s3 = s1 + s2</code> \u4e0d\u63a8\u8350 \u2705 \u7ed3\u679c <pre><code>&gt;&gt;&gt; a = 'string'\n&gt;&gt;&gt; a.rjust(9)\n# '   string'\n&gt;&gt;&gt; a.center(9)\n# '  string '\n</code></pre> <ul> <li>\u8bc6\u522b\u6570\u5b57 \u6570\u5b57\u5206\uff1a  \uff0c</li> </ul> <pre><code>num1, num2, num3, num4 = b'4', u'4', '\u56db'\uff0c 'IV'\n</code></pre> bytes(\u4e8c\u8fdb\u5236\u50a8\u5b58) unicode(\u5c31\u662f\u666e\u901a\u7684\u6570\u5b57) \u4e2d\u6587\u6570\u5b57 \u7f57\u9a6c\u6570\u5b57 <code>num=</code> <code>b'4'</code> <code>u'4'</code>python3\u524d\u9762\u4e0d\u5e26<code>u</code>\u5c31\u662f <code>'\u56db'</code> <code>'IV'</code> <code>str.isdigit()</code> \u2705 \u2705 \u274c \u274c <code>str.isnumeric()</code> \u2705 \u2705 \u2705 \u2705 <code>str.isdecimal()</code> \u274c \u2705 \u274c \u274c <p>Python\u4e2d\u4fee\u6539\u5b57\u7b26\u4e32\u7684\u56db\u79cd\u65b9\u6cd5</p> <p>str match</p> <ul> <li><code>str.startswith(sub_str)</code></li> <li><code>str.endswith(sub_str)</code></li> </ul> <p>str\u7684 \u8f6c\u6362</p> <p>list \u2194\ufe0f str</p> <ul> <li><code>str = ''.join(lst)</code></li> <li><code>lst = str.split(':')</code><ul> <li><code>lst = str.split(':', 1)</code></li> <li><code>lst = str.rsplit(':', 1)</code></li> </ul> </li> <li><code>lst = list(str)</code></li> </ul> <pre><code>a = 'a:a:a:a'\nlist(a)\n# &gt;&gt;&gt; ['a', ':', 'a', ':', 'a', ':', 'a']\na.split()\n# &gt;&gt;&gt; ['a:a:a:a']\na.split(':')\n# &gt;&gt;&gt; ['a', 'a', 'a', 'a']\na.split(':', 1)\n# &gt;&gt;&gt; ['a', 'a:a:a']\na.rsplit(':', 1)\n# &gt;&gt;&gt; ['a:a:a', 'a']\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#-support","title":"\u6563\u5217\u8868-support","text":"<p>\u67e5\u8be2\u6027\u80fd\u51fa\u4f17 \u65e0\u5e8f \u952e\u4e0d\u7a33\u5b9a \u7a7a\u95f4\u6362\u65f6\u95f4 \u662f dict &amp; set \u6027\u80fd\u51fa\u4f17\u7684\u6839\u672c\u539f\u56e0\u3002\u867d\u7136\u65e0\u5e8f\u4f46\u662f\u5185\u5bb9\u4e00\u6837\u7684\u8bdd\u4e00\u6837\u7b49\u4ef7\u3002</p> <p>\u53ef\u6563\u5217\u7c7b\u578b hashable\u3002\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u662f\u53ef\u6563\u5217\u7684\uff0c\u90a3\u4e48\u5728\u8fd9\u4e2a\u5bf9\u8c61\u751f\u547d\u5468\u671f\u4e2d\uff0c\u5b83\u7684\u6563\u5217\u503c\u662f\u4e0d\u53d8\u7684\uff0c\u800c\u4e14\u8fd9\u4e2a\u5bf9\u8c61\u9700\u8981\u5b9e\u73b0 <code>.__hash__()</code> &amp; <code>.__eq__()</code> \u3002\u56e0\u4e3a<code>hash()</code> \u65b9\u6cd5\u53ef\u4ee5\u4f5c\u7528\u4e8e\u5bf9\u8c61\u4e0a\uff0c\u5e76\u4e14\u5982\u679c\u4e24\u4e2a\u53ef\u6563\u5217\u7684\u5bf9\u8c61\u662f\u76f8\u7b49\uff0c\u90a3\u4e48\u6563\u5217\u503c\u4e00\u5b9a\u662f\u4e00\u6837\u3002</p> <ul> <li>\u539f\u5b50\u4e0d\u53ef\u53d8\u7c7b\u578b( str &amp; bytes &amp; \u6570\u503c)</li> <li>frozenset\uff08\u56e0\u4e3a\u53ea\u80fd\u5bb9\u7eb3\u53ef\u6563\u5217\u7c7b\u578b\uff09</li> <li>\u5305\u542b\u7684\u6240\u6709\u5143\u7d20\u90fd\u662f\u53ef\u6563\u5217\u7684 tuple</li> <li> <p>\u4e00\u822c\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u7684\u7c7b\u578b\u7684\u5bf9\u8c61\u662f\u53ef\u6563\u5217\u7684\u3002\u6240\u6709\u5bf9\u8c61\u5728\u6bd4\u8f83\u7684\u65f6\u5019\u90fd\u662f\u4e0d\u76f8\u7b49\uff0c\u54ea\u6015\u662f\u5185\u5bb9\u4e00\u6837\u3002</p> <p>\u6563\u5217\u503c\u662f <code>id()</code>?</p> <pre><code>class Fruit():\n    def __init__(self, name):\n        self.name=name\n\napple1, apple2 = Fruit('apple'), Fruit('apple')\nhash(apple1) == hash(apple2)\n# &gt;&gt;&gt; False\n</code></pre> </li> </ul> <p>\u4ece python3.3 \u5f00\u59cb\uff0cstr &amp; byte &amp; datetime \u7684\u5355\u5217\u503c\u8ba1\u7b97\u591a\u4e86 ==\u968f\u673a\u52a0\u76d0==\u8fd9\u4e00\u6b65\u3002</p> <p>\u6240\u52a0\u7684\u76d0\u503c\u662f python \u8fdb\u7a0b\u7684\u4e00\u4e2a\u5e38\u91cf\uff0c\u4f46\u662f\u6bcf\u6b21\u542f\u52a8\u65f6 python.exe \u90fd\u4f1a\u751f\u6210\u4e00\u4e2a\u4e0d\u540c\u7684\u76d0\u503c\u3002\u968f\u673a\u76d0\u503c\u662f\u4e3a\u4e86\u9632\u6b62 DOS \u653b\u51fb\u800c\u91c7\u53d6\u7684\u4e00\u79cd\u5b89\u5168\u63aa\u65bd\u3002</p> <p>python \u91cc\u6240\u6709\u4e0d\u53ef\u53d8\u7684\u7c7b\u578b\u90fd\u662f hashable \u274c</p> <p>\u867d\u7136 tuple \u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u4f46\u662f\u91cc\u9762\u7684\u5143\u7d20\u53ef\u80fd\u662f\u5176\u4ed6\u53ef\u53d8\u7c7b\u578b\u7684\u5f15\u7528\u3002</p> <p>\u6563\u5217\u8868\u7684\u5de5\u4f5c\u539f\u7406\u3002 \u9700\u8981 <code>hash()</code> \u6765\u8ba1\u7b97\u6563\u5217\u503c\uff0c\u5e76\u4e14\u5982\u679c\u4e24\u4e2a\u53ef\u6563\u5217\u7684\u5bf9\u8c61\u662f\u76f8\u7b49\uff0c\u90a3\u4e48\u6563\u5217\u503c\u4e00\u5b9a\u662f\u4e00\u6837\u3002</p> <p>1 == 1.0 \\(\\implies\\) hash(1) == hash(1.0) \u54ea\u6015\u662f\u6574\u578b\u548c\u6d6e\u70b9\u7684\u5185\u90e8\u7ed3\u6784\u5b8c\u5168\u4e0d\u4e00\u6837\u3002</p> <p>\u6563\u5217\u503c\u4e00\u5b9a\u662f\u4e00\u6837 \\(\\nRightarrow\\) \u4e24\u4e2a\u53ef\u6563\u5217\u7684\u5bf9\u8c61\u662f\u76f8\u7b49</p> <p>\u4e3a\u4e86\u8ba9\u6563\u5217\u503c\u80fd\u80dc\u4efb\u6563\u5217\u8868\u7d22\u5f15\u8fd9\u4e00\u89d2\u8272\uff0c\u6563\u5217\u503c\u5fc5\u987b\u5728\u7d22\u5f15\u7a7a\u95f4\u5c3d\u91cf\u5206\u6563\u5f00\u3002\u5728\u6700\u7406\u60f3\u7684\u60c5\u51b5\u4e0b\uff0c\u8d8a\u76f8\u4f3c\u4f46\u4e0d\u60f3\u7b49\u7684\u4e24\u4e2a\u5bf9\u8c61\u7684\u6563\u5217\u503c\u5dee\u5f02\u5e94\u8be5\u8d8a\u5927\u3002 \u8868\u5143\uff0c\u6563\u5217\u8868\u91cc\u7684\u5355\u5143\uff0c\u6240\u6709\u7684\u8868\u5143\u7684\u5927\u5c0f\u4e00\u81f4\uff0c\u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7\u504f\u79fb\u91cf\u6765\u8bfb\u53d6\u67d0\u4e2a\u5355\u5143\u3002 \u4e3a\u4e86\u67e5\u8be2 <code>search_item</code> \u662f\u5426\u5b58\u5728\u5728\u7ed3\u6784\u4e2d\uff1a</p> <ol> <li><code>hash(search_item)</code> \u8ba1\u7b97\u6563\u5217\u503c</li> <li>\u628a\u6563\u5217\u503c\u6700\u4f4e\u7684\u51e0\u4f4d\u6570\u5b57\u5f53\u4f5c\u504f\u79fb\u91cf\uff0c\u5728\u6563\u5217\u8868\u67e5\u627e\u8868\u5143\u3002</li> <li>\ud83d\udff0 \u7a7a\uff0c\u27a1\ufe0f <code>search_item</code> \u4e0d\u5728\u7ed3\u6784\u4e2d\u3002 \ud83d\udd1a</li> <li>\ud83d\udff0 \u975e\u7a7a\uff0c\u5373\u8868\u5143\u5b58\u653e\u4e86\u4e00\u4e2a <code>found_item</code>\uff0c\u4f46\u662f\u6563\u5217\u503c\u76f8\u540c\u7684\u4e0d\u4e00\u5b9a\u662f\u4e00\u6837\u7684</li> <li>\u6bd4\u8f83 <code>if search_item == found_item</code></li> <li>\ud83d\udff0 <code>True</code> \uff0c\u5c31\u5bf9\u4e86\u3002\ud83d\udd1a</li> <li>\ud83d\udff0 <code>False</code>\uff0c\u53ea\u80fd\u8bc1\u660e\u51fa\u73b0 \u6563\u5217\u51b2\u7a81\u3002 \u4e3a\u4e86\u89e3\u51b3\u6563\u5217\u51b2\u7a81\uff0c\u7b97\u6cd5\u5728\u6563\u5217\u503c\u4e2d\u518d\u53e6\u5916\u53bb\u51e0\u4f4d\uff0c\u7136\u540e\u7528\u7279\u6b8a\u7684\u65b9\u6cd5\u5904\u7406\u4e00\u4e0b\uff0c\u5f97\u5230\u65b0\u7684\u6563\u5217\u503c\u6765\u5728\u6563\u5217\u8868\u67e5\u627e\u8868\u5143\uff0c\u91cd\u590d 2-7\u3002</li> <li>\u76f4\u81f3\u53d1\u73b0 1\ufe0f\u20e3 \u8868\u5143\u4e3a\u7a7a 2\ufe0f\u20e3 <code>search_item == found_item</code> \u7ed3\u675f\u5faa\u73af</li> </ol> <p>\u6548\u7387\u5230\u5e95\u6709\u591a\u9ad8\uff1f</p> <p>\u5bf9 s2 \u91cc\u6bcf\u4e2a\u5143\u7d20\uff0c\u67e5\u8be2\u662f\u5426\u5b58\u5728 s1 \u91cc\uff1f <code>if s in s1</code></p> <p>1\uff09\u96c6\u5408\u8fdb\u884c\u5e76\u64cd\u4f5c\uff0c\u4f46\u524d\u63d0\u662f s1 &amp; s2 \u90fd\u662f\u96c6\u5408 2\uff09s1 \u662f \u5b57\u5178 3\uff09s1 \u662f \u96c6\u5408 4\uff09s1 \u662f \u5217\u8868\u3002 \u5728\u5b57\u5178\u548c\u96c6\u5408\u4e0d\u8d85\u51fa\u5185\u5b58\u7684\u524d\u63d0\u4e0b\uff0c\u65e0\u8bba s1 \u91cc\u6709\u591a\u5c11\u5143\u7d20\uff0c\u67e5\u8be2\u65f6\u95f4\u53ef\u5ffd\u7565\u4e0d\u8ba1\u3002 \u56e0\u4e3a\u5217\u8868\u6ca1\u6709\u6563\u5217\u8868\u652f\u6301 <code>__contains__</code> \u64cd\u4f5c\uff0c\u6bcf\u4e00\u6b21\u626b\u63cf\u90fd\u9700\u8981\u626b\u63cf\u4e00\u904d\u5b8c\u6574\u7684\u5217\u8868\uff0c\u65f6\u95f4\u6839\u636e s1 \u7684\u5927\u5c0f\u5448\u7ebf\u6027\u589e\u52a0 \u867d\u7136\u7b2c\u4e00\u79cd\u6700\u5feb\uff0c\u4f46\u662f\u9700\u8981 s2 \u4e5f\u662f\u96c6\u5408\uff0c\u6d89\u53ca\u8f6c\u6210 set \u7684\u6210\u672c\uff0c\u4e0d\u5fc5\u5f3a\u6c42\u3002</p> <p>\u4e3a\u4ec0\u4e48\u5143\u7d20\u662f\u65e0\u5e8f\u4e14\u4e0d\u7a33\u5b9a\uff1f \u952e\u5bf9\u7684\u6392\u5217\u987a\u5e8f\u4e0e\u6dfb\u52a0\u987a\u5e8f\u4e0d\u540c\uff0c\u4e5f\u4e0e\u5b58\u50a8\u987a\u5e8f\u4e0d\u540c\u3002 \u6563\u5217\u8868 \u662f\u4e00\u4e2a\u7a00\u758f\u6570\u7ec4(\u603b\u662f\u6709\u7a7a\u767d\u5143\u7d20)\u3002\u4e3a\u4e86\u51cf\u5c11\u6563\u5217\u51b2\u7a81\u7684\u6982\u7387\uff0cpython \u4f1a\u8bbe\u6cd5\u4fdd\u8bc1\u5927\u6982\u8fd8\u6709\u4e09\u5206\u4e4b\u4e00\u7684\u8868\u5143\u662f\u7a7a\u767d\u7684\uff0c\u6bcf\u5feb\u5230\u8fd9\u4e2a\u9608\u503c\u65f6\uff0cpython \u4f1a\u91cd\u65b0\u5206\u914d\u5185\u5b58\uff0c\u6240\u6709\u7684\u6563\u5217\u8868\u5c31\u4f1a\u88ab\u590d\u5236\u5230\u4e00\u4e2a\u66f4\u5927\u7684\u7a7a\u95f4\u91cc\u9762\u3002\u3010\u7a7a\u95f4\u6362\u65f6\u95f4\u3011 \u5982\u679c\u589e\u52a0\u6563\u5217\u8868\u7684\u5927\u5c0f\uff0c\u6563\u5217\u503c\u6240\u5360\u7684\u4f4d\u6570\u548c\u7d22\u5f15\u7684\u4f4d\u6570\u90fd\u968f\u4e4b\u589e\u52a0\u3002 \u5728\u6269\u5bb9\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6709\u53ef\u80fd\u53d1\u751f\u65b0\u7684\u6563\u5217\u51b2\u7a81\uff0c\u5bfc\u81f4\u65b0\u6563\u5217\u8868\u4e2d\u5143\u7d20\u7684\u6b21\u5e8f\u53d8\u5316\u3002\u6240\u4ee5\u662f\u65e0\u5e8f\u4e14\u4e0d\u7a33\u5b9a\u3002</p> <p>\u4e0d\u8981\u5728\u8fed\u4ee3\u7684\u8fc7\u7a0b\u4e2d \u5bf9 dict &amp; set \u8fdb\u884c\u4fee\u6539\u3002\u6709\u53ef\u80fd\u4f1a\u8df3\u8fc7\u4e00\u4e9b\u952e\u3002</p> <ol> <li>\u9996\u5148\u8fed\u4ee3\uff0c\u8bb0\u5f55\u8981\u4fee\u6539\u7684\u4e1c\u897f\uff0c\u518d\u5728\u8fed\u4ee3\u540e\u8fdb\u884c\u66f4\u65b0\u3002</li> </ol>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#dict","title":"dict","text":"<p>\u4e00\u7cfb\u5217\u952e\u2014\u503c\u5bf9\u3002\u6bcf\u4e2a\u952e\u90fd\u4e0e\u4e00\u4e2a\u503c\u76f8\u5173\u8054\uff0c\u4f7f\u7528\u952e\u6765\u8bbf\u95ee\u4e0e\u4e4b\u76f8\u5173\u8054\u7684\u503c\u3002 \u5185\u5b58\u5f00\u9500\u5de8\u5927\uff0c\u4e0d\u4ec5\u56e0\u4e3a\u6563\u5217\u8868\u8017\u8d39\uff0c\u8fd8\u56e0\u4e3a\u9700\u8981\u3010\u91cd\u590d\u7684\u952e\u3011\u5728\u6bcf\u4e2a\u8bb0\u5f55\u91cc\u90fd\u8981\u5b58\u4e00\u904d\u3002 \u6a21\u5757\u7684\u547d\u540d\u7a7a\u95f4\u3001\u5b9e\u4f8b\u7684\u5c5e\u6027\u3001\u51fd\u6570\u7684\u5173\u952e\u5b57\u53c2\u6570\u3002\u8ddf\u5b83\u76f8\u5173\u7684\u5185\u7f6e\u51fd\u6570\u5728 <code>__builtins__.__dict__</code> \u6a21\u5757\u4e2d</p> <ul> <li>init <code>d = dict(one=1, two=2)</code> <code>d = {'one':1, 'two':2}</code> <code>d = dict(zip(['one', 'two'],[1,2]))</code> &amp; <code>d = dict([('one', 1),('two', 2)])</code> <code>d = {k: v for k, v in [('one', 1),('two', 2)]}</code> \u5b57\u5178\u63a8\u5bfc</li> <li> <p>get. \u53ea\u60f3\u67e5\uff0c\u5e76\u4e0d\u60f3\u5bf9\u5b57\u5178\u66f4\u6539\u3002 <code>d[k]</code>, \u6ca1\u6709\u5c31<code>KeyError</code>. <code>d.get(k, [default=None])</code>, \u6ca1\u6709\u5c31\u8fd4\u56de<code>default</code>\uff0c \u7eaf\u7cb9 get</p> <p>1. <code>d.__getitem__(v)</code> \u7684 call \u662f <code>d[k]</code>\uff1b \u548c<code>d.get(..)</code> \u4e00\u70b9\u5173\u7cfb\u90fd\u6ca1\u6709\u3002 2. <code>d.get(..)</code> \u4e0d\u4f1a\u6539\u53d8\u539f\u6709\u7684\u5b57\u5178\u3002</p> <ul> <li>contains <code>k in d.keys()</code> &amp; <code>k in d:</code> &amp; <code>v in d.values()</code></li> <li>loop <code>for k, v in d.items():</code></li> <li>\u66f4\u65b0\u3002</li> <li><code>d[k]=v</code> \u53ea\u6709\u8d4b\u503c\u65f6\u7ba1\u7528\u3002</li> <li>\u66f4\u65b0\u7684\u65f6\u5019 <code>d.setdefault(k, default)</code> \u503c\u7684\u683c\u5f0f\u4e0d\u7edf\u4e00 <code>from collections import defaultdict</code> \u503c\u7684\u683c\u5f0f\u7edf\u4e00\uff0c\u90fd\u662f list | str | int</li> </ul> </li> </ul> <p>\u4e3a\u4ec0\u4e48\u4e0d\u7528 get \u7684\u65b9\u6cd5\u3002\u3010\u9488\u5bf9\u90e8\u5206\u6539\u53d8 v \u503c \u60c5\u51b5\u3011</p> <p>\u66f4\u65b0 1\ufe0f\u20e3 \u5f7b\u5e95\u6539\u53d8 v \u503c(\u5305\u62ec\u65b0\u589e k-v \u5bf9) 2\ufe0f\u20e3 \u90e8\u5206\u6539\u53d8 v \u503c\uff08<code>d[k]+=1</code> &amp; <code>d[v].append()</code>\uff09 \u5bf9\u4e8e 1\ufe0f\u20e3\uff1a<code>k[v]</code> \u662f\u53ef\u4ee5\u7684\uff0c\u6807\u51c6\u8d4b\u503c\u8bed\u53e5\uff0c\u4f46\u662f 2\ufe0f\u20e3 \u4f1a\u5f15\u53d1 <code>KeyError</code> \u76f4\u63a5\u62a5\u9519\uff0c\u56e0\u4e3a\u64cd\u4f5c\u9700\u8981 k-v \u5b58\u5728\u3002 \u5982\u679c\u7528 <code>.get()</code> \u7684\u65b9\u6cd5 \u5c31\u5fc5\u987b\u6d89\u53ca\u4e8c\u6b21\u67e5\u8be2\uff0c\u56e0\u4e3a\u5f53\u4e0d\u5b58\u5728\u65f6\uff0c\u8fd4\u56de\u7684 default \u5e76\u6ca1\u6709\u8ddf <code>d[k]</code> \u7ed1\u5b9a\u5728\u4e00\u8d77\uff0c\u9700\u8981\u8d4b\u503c\u8bed\u53e5\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5176\u4e2d\u6d89\u53ca\u518d\u6b21\u67e5\u8be2\u3002</p> <pre><code>v = d.get(k, [])  # \u67e5\u4e00\u6b21\nv.append(a) \nd[k] = v  # \u67e5\u4e24\u6b21\nd.setdefault[k, []].append(a)  # \u53ea\u67e5\u4e00\u6b21\n\nfrom collections import defaultdict\nd  = defaultdict(list)  # list []\nd[k].append(a)\n</code></pre> <p>\u5982\u975e\u9700\u8981\uff0c<code>defaultdict</code> \u6bd4 <code>.setdefault()</code>\u66f4\u5feb</p> <p>\u56e0\u4e3a\u4e00\u4e2a\u662f\u5728\u521b\u5efa\u521d\u671f\u5c31\u8bbe\u597d\u7edf\u4e00\u7684\u521d\u59cb\u503c\uff0c\u4e00\u4e2a\u662f\u6839\u636e\u503c\u7684\u4e0d\u4e00\u6837\uff0c\u5728\u627e\u7684\u65f6\u5019\u8bbe\u503c setdefault vs defaultdict performance</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#defaultdict","title":"defaultdict","text":"<p><code>collections.defaultdict</code> \u5f53\u503c\u7684\u683c\u5f0f\u7edf\u4e00\uff0c\u90fd\u662f list | str | int\u3002</p> <p>\u5177\u4f53\u800c\u8a00\uff0c\u5728\u5b9e\u4f8b\u5316\u4e00\u4e2a defaultdict \u5bf9\u8c61\u65f6\uff0c\u7ed9\u6784\u9020\u65b9\u6cd5\u63d0\u4f9b\u4e86\u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61(\u4e0d\u662f\u65b9\u6cd5)\u3002\u5f53 <code>.__getitem__</code> \u627e\u4e0d\u5230\u952e\u65f6\uff0c\u8c03\u7528<code>.__missing__</code>, \u7136\u540e <code>.__missing__</code> \u8c03\u7528\u5b58\u653e\u5728 <code>default_factory</code>\u5c5e\u6027\u7684\u8fd9\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\uff0c\u53ef\u8c03\u7528\u5bf9\u8c61\u4ea7\u751f\u9ed8\u8ba4\u503c\uff0c\u8ba9 <code>.__getitem__</code> \u8fd4\u56de\u3002</p> <p>\u5173\u952e\u662f\u5b9e\u73b0\u4e86 <code>.__missing__</code>\u65b9\u6cd5\u3002</p> <p>\u4e3a\u4e86\u81ea\u5b9a\u4e49\u6620\u5c04\u7c7b\u578b\u5728\u627e\u4e0d\u5230\u952e\u65f6\u7684\u53cd\u5e94\uff0c\u53ef\u4ee5\u91cd\u5b9a\u4e49<code>.__missing__</code>\uff08\u89c1\u9b54\u6cd5\u65b9\u6cd5\u90a3\u4e00\u8282\uff09\u3002 \u57fa\u7c7b dict \u6ca1\u6709\u5b9a\u4e49\uff0c\u4f46\u662f\u5b83\u77e5\u9053\uff0c\u6240\u4ee5\u5982\u679c\u67d0\u4e2a\u7c7b\u7ee7\u627f\u4e86 dict\uff0c\u53c8\u662f\u5b9e\u73b0\u4e86 <code>__missing__</code> \uff0c\u90a3\u4e48\u5728 <code>__getitem__</code> \u627e\u4e0d\u5230\u952e\u65f6\uff0cpython \u4f1a\u81ea\u52a8\u8c03\u7528\u5b83\uff0c\u800c\u4e0d\u662f\u629b\u51fa  KeyError.</p> <ul> <li>init     <code>defaultdict([default_factory])</code>     \u5982\u679c\u6ca1\u6709\u6307\u5b9a default_factory\uff0c \u627e\u4e0d\u5230\u8fd8\u662f\u4f1a\u4ea7\u751f keyError</li> </ul> <pre><code>from collections import defaultdict\nd = defaultdict(list)\n# &gt;&gt;&gt; defaultdict(&lt;class 'list'&gt;, {})\nd.default_factory\n# &gt;&gt;&gt; &lt;class 'list'&gt;\n</code></pre> <p><code>d = defaultdict(list)</code>\uff0c\u5f53 k \u627e\u4e0d\u5230\u7684\u65f6\u5019\uff1a 1\uff09\u8c03\u7528 <code>list()</code> \u5efa\u7acb\u4e00\u4e2a\u65b0 list 2\uff09d[k] \u5b58\u653e \u65b0 list \u7684\u5f15\u7528 3\uff09\u8fd4\u56de d[k]</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#ordereddict","title":"OrderedDict","text":"<p><code>collections.OrderedDict</code>.</p> <p>\u4e0e dict \u7684 \u533a\u522b : \u7ef4\u62a4\u63d2\u5165\u987a\u5e8f\u7684\u5b57\u5178\uff0c\u533a\u522b\u53ea\u5728\u4e8e\u8bb0\u5f55\u4e86\u952e\u2014\u503c\u5bf9\u7684\u6dfb\u52a0\u987a\u5e8f <code>.popitem()</code> \u9ed8\u8ba4\u5220\u9664\u5e76\u8fd4\u56de\u7684\u65f6\u5b57\u5178\u91cc\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff08\u6700\u65b0\u6dfb\u52a0\u7684\uff09</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#chainmaps","title":"ChainMaps","text":"","tags":["Foo","Bar"]},{"location":"python/python_elegant/#counter","title":"Counter","text":"<p><code>collections.Counter</code> \u6574\u6570\u8ba1\u6570\u5668</p> <pre><code>from collections import Counter\n\nct = Counter('abbcbcbb')\n# &gt;&gt;&gt; ct=Counter({'b': 5, 'c': 2, 'a': 1})\nct.update('aaa') \n# &gt;&gt;&gt; ct=Counter({'b': 5, 'a': 4, 'c': 2})\nct.most_common(1)\n# &gt;&gt;&gt; [('b', 5)]\nsum(ct.values()) # \u6c42\u603b\u6570\n# &gt;&gt;&gt; 11\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_30","title":"\u4e0d\u53ef\u53d8\u7684\u6620\u5c04\u7c7b\u578b","text":"<p><code>types.MappingProxyType</code></p> <p>\u63d0\u4f9b\u4e00\u4e2a\u6620\u5c04\u7684\u53ea\u8bfb\u7684\u52a8\u6001\u89c6\u56fe\u3002\u4e0d\u80fd\u8fdb\u884c\u4fee\u6539\uff0c\u4f46\u662f\u5982\u679c\u539f\u6620\u5c04\u6539\u4e86\uff0c\u4f5c\u4e3a\u7684\u52a8\u6001\u89c6\u56fe MappingProxyType \u4e5f\u80fd\u770b\u89c1\u3002</p> <pre><code>from types import MappingProxyType\nd = {1:'A'}  # dict \\in mapping\nd_proxy = MappingProxyType(d)\n# &gt;&gt;&gt; d=d_proxy=mappingproxy({1: 'A'})\nd_proxy[2] = 'B'\n# !!! TypeError: 'mappingproxy' object does not support item assignment\nd[2] = 'B'\n# &gt;&gt;&gt; d=d_proxy=mappingproxy({1: 'A', 2: 'B'})\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#set","title":"set","text":"<p>Mutable + \u53bb\u91cd\uff0c \u65e0\u5e8f \u4e13\u4e3a\u68c0\u67e5\u5143\u7d20\u662f\u5426\u5b58\u5728\u505a\u8fc7\u4f18\u5316\u3002 set \u91cc\u7684\u5143\u7d20\u5fc5\u987b\u662f hashable\uff0c\u4f46 set \u672c\u8eab\u662f unhashable\u3002\u5982\u679cset \u5e95\u4e0b\u662f\u8981\u653e\u96c6\u5408\uff0c\u5fc5\u987b\u653e frozenset</p> <p>\u59ca\u59b9\u7c7b\u578b frozenset \uff1a unmutable + hashable</p> <ul> <li>init <code>s = set()</code> \u7a7a\u96c6\u5408\u5fc5\u987b\u3002 <code>s = set(iterater)</code> <code>s = {v for v in iterater}</code> &amp; <code>s = {v1, v2, ...}</code></li> <li>element level <code>s.add(e)</code> <code>s.discard(e)</code> \u4e0d\u5b58\u5728do nothing <code>s.remove(e)</code> \u4e0d\u5b58\u5728\u5c31\u62a5\u9519</li> <li>\u6570\u5b66\u8fd0\u7b97 \u540c\u6837\u5b58\u5728 in-placed \u7684\u65b9\u6cd5 <code>&amp;=</code> <code>|=</code> <code>-=</code> <code>^=</code> <code>s1 &amp; s2</code> \\(s1 \\cap s2\\) \u4ea4 <code>.__and__</code> <code>s1 | s2</code> \\(s1 \\cup s2\\) \u5e76 <code>.__or__</code> <code>s1 - s2</code> \\(s1 \\setminus s2\\) \u5dee <code>.__sub__</code> <code>s1 ^ s2</code> \\((s1 \\cup s2) - (s1 \\cap s2)\\) \u5bf9\u79f0\u5dee\u96c6 <code>.__xor__</code></li> <li>\u6bd4\u8f83\u8fd0\u7b97 \u91cd\u5199\u4e86 <code>__le__</code> <code>__lt__</code> <code>__ge__</code> <code>__gt__</code> <code>s1 &lt; s2</code> \\(s1 \\subset s2\\) <code>s.issuperset(it)</code> \u628a\u53ef\u8fed\u4ee3 it \u8f6c\u6362\u4e3a set\uff0c\u7136\u540e\u770b s \u662f\u5426\u662f\u5b83\u7684\u5b50\u96c6 <code>s1 &lt;= s2</code> \\(s1 \\subseteq s2\\)</li> </ul>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#sparse_matrix","title":"sparse_matrix","text":"","tags":["Foo","Bar"]},{"location":"python/python_elegant/#scipysparsecoo_matrix","title":"<code>scipy.sparse.coo_matrix</code>","text":"<p>\u53ea\u5b58\u50a8\u975e\u96f6\u5143\u7d20 \u4e09\u5143\u7ec4<code>(row, col, data)</code>(\u6216\u79f0\u4e3aijv format)\u7684\u5f62\u5f0f\u6765\u5b58\u50a8\u77e9\u9635\u4e2d\u975e\u96f6\u5143\u7d20\u7684\u4fe1\u606f\u3002</p> <ul> <li>\u5b9e\u9645<ul> <li>\u7528\u6765\u521b\u5efa\u77e9\u9635\uff0c\u56e0\u4e3a<code>coo_matrix</code>\u65e0\u6cd5\u5bf9\u77e9\u9635\u7684\u5143\u7d20\u8fdb\u884c\u589e\u5220\u6539\u64cd\u4f5c</li> <li>\u8f6c\u7f6e\u3001\u77e9\u9635\u8fd0\u7b97\u7b49\uff0c\u8981\u8f6c <code>csr_matrix</code>\u3001<code>csc_matrix</code></li> </ul> </li> <li>\u5b9e\u4f8b</li> <li>\u8f6c\u5316</li> </ul> <p>Python\u7a00\u758f\u77e9\u9635\u8be6\u89e3</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_31","title":"\u5806","text":"<p>\u6700\u5c0f\u7684\u5143\u7d20\u603b\u662f\u5728\u6839\u7ed3\u70b9\uff1a<code>heap[0] is smallest</code></p> <p>\u5806\u662f\u4e00\u4e2a\u4e8c\u53c9\u6811\uff0c\u5b83\u7684\u6bcf\u4e2a\u7236\u8282\u70b9\u7684\u503c\u90fd\u53ea\u4f1a\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6240\u6709\u5b69\u5b50\u8282\u70b9     <code>parent &lt;= childs</code>\u3002</p> <ul> <li> <p>\u4e00\u68f5\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u6570\u7ec4\u5bf9\u8c61 = \u5b83\u4f7f\u7528\u4e86\u6570\u7ec4\u6765\u5b9e\u73b0\uff1a</p> </li> <li> <p>\u3010\u6700\u5c0f\u5806\u3011\u4ece\u96f6\u5f00\u59cb\u8ba1\u6570\uff0c\u5bf9\u4e8e\u6240\u6709\u7684 k \uff0c\u90fd\u6709 <code>heap[k] &lt;= heap[2*k+1]</code> \u548c <code>heap[k] &lt;= heap[2*k+2]</code>\u3002 \u4e3a\u4e86\u4fbf\u4e8e\u6bd4\u8f83\uff0c\u4e0d\u5b58\u5728\u7684\u5143\u7d20\u88ab\u8ba4\u4e3a\u662f\u65e0\u9650\u5927\u3002</p> </li> </ul>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#heapqpy","title":"<code>heapq.py</code> \u5806\u961f\u5217 = \u4f18\u5148\u961f\u5217\u7b97\u6cd5","text":"<p>Heap queue algorithm (a.k.a. priority queue):</p> <p>\u6700\u5c0f\u5806</p> <p><code>heapq[0] is smallest</code></p> <ul> <li>properties<ul> <li>\u6392\u5e8f\u7a33\u5b9a\u6027\uff1a\u5177\u6709\u76f8\u540c\u7684\u4f18\u5148\u7ea7\u7684\u8bdd\u5c31\u4f1a\u6309\u4ed6\u4eec\u88ab\u63d2\u5165\u5230\u961f\u5217\u7684\u987a\u5e8f\u8fd4\u56de \u2014\u2014&gt; \u6761\u76ee\u8ba1\u6570\u53ef\u7528\u6765\u6253\u7834\u5e73\u5c40</li> <li>\u5806 pop \u64cd\u4f5c\u603b\u662f\u8fd4\u56de\u4f18\u5148\u7ea7\u6700\u9ad8</li> </ul> </li> <li>ref<ul> <li>heapq --\u5806\u961f\u5217\u7b97\u6cd5</li> </ul> </li> </ul>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#code","title":"code","text":"<p><code>heap.sort()</code> \u7ef4\u62a4\u4e86\u5806\u7684\u4e0d\u53d8\u6027</p> <p>heapq \u4e0d\u662f\u4e00\u4e2a\u7c7b\u800c\u662f\u4e00\u4e2a\u6a21\u5757</p> <pre><code>import heapq\n\nMeth:\n  - heapify(h)\n</code></pre> operations code return T(n) \u5efa\u7acb\u7a7a\u5806 <code>h = []</code> list \u27a1\ufe0f heap <code>heapify(h)</code> \u274c in-placed O(n) \u52a0\u5165\u5f39\u51fa <code>heapq.heappush(h, x)</code> \u274c O(logn) ^ <code>heapq.heappop(h)</code> \u2705 \u6700\u5c0f<code>h[0]</code>, \u7a7a\u5c31\u6709<code>IndexError</code> O(logn) ^ <code>heapq.heappushpop(h, x)</code> &lt;=&gt; <code>push+pop</code>, \u5148\u52a0x\u518d\u5f39\u51fa \u2705  &lt;= x(\u56e0\u4e3a\u5148\u52a0x) \u6bd4\u8fde\u8c03\u4e24\u4e2a\u5355\u7eaf\u51fd\u6570\u8981\u5feb ^ <code>heapq.heapreplace(h, x)</code> &lt;=&gt; <code>pop+push</code>, \u2705   x(\u56e0\u4e3a\u540e\u52a0x), \u7a7a\u5c31\u6709<code>IndexError</code> ^","tags":["Foo","Bar"]},{"location":"python/python_elegant/#basic-operaions","title":"Basic operaions","text":"","tags":["Foo","Bar"]},{"location":"python/python_elegant/#n","title":"\u67e5\u627e\u6700\u5927\u6216\u6700\u5c0f\u7684 N \u4e2a\u5143\u7d20","text":"\u7b80\u5355\u5bf9\u8c61 \u5168\u90e8\u6392\u5e8f\u6216\u67e5\u627eTop N&lt;len(lst) \u4e2a <code>sorted(lst, *, key=None, reverse=False)</code>, <code>sorted(lst)[:N]</code> \u67e5\u627eTop N&lt;&lt;len(lst) \u4e2a <code>heapq.nlargest()</code>, <code>heapq.smallest()</code> \u6700\u5927/\u6700\u5c0f <code>max(lst)</code> <code>min(lst)</code>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_32","title":"\u590d\u6742\u5bf9\u8c61","text":"<ul> <li>comparable : <code>key=lambda</code> or <code>key= itemgetter()</code></li> <li>uncmparable : <code>key=lambda</code> or <code>key= attrgetter()</code>     \u9009\u62e9\u4f7f\u7528 <code>lambda</code> \u51fd\u6570\u6216\u8005\u662f <code>attrgetter()</code> \u53ef\u80fd\u53d6\u51b3\u4e8e\u4e2a\u4eba\u559c\u597d\u3002 \u4f46\u662f\uff0c <code>attrgetter()</code> \u51fd\u6570\u901a\u5e38\u4f1a\u8fd0\u884c\u7684\u5feb\u70b9\uff0c\u5e76\u4e14\u8fd8\u80fd\u540c\u65f6\u5141\u8bb8\u591a\u4e2a\u5b57\u6bb5\u8fdb\u884c\u6bd4\u8f83\u3002\u540c\u6837\u9002\u7528\u4e8e\u50cf <code>min()</code> \u548c <code>max()</code> \u4e4b\u7c7b\u7684\u51fd\u6570</li> </ul> <p>python\u4e4b\u6392\u5e8f\u64cd\u4f5c\u53caheapq\u6a21\u5757</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_33","title":"\u5176\u4ed6\u5e38\u7528","text":"<p><code>random.choice(seq)</code> \u4ece\u4e00\u4e2a\u5e8f\u5217\u4e2d\u968f\u673a\u9009\u51fa\u4e00\u4e2a\u5143\u7d20</p> <ul> <li> <p><code>math</code> <code>.sqrt(n)</code>\\(=\\sqrt{n}\\) <code>.pow(n, a)</code> \\(=n^a\\) <code>.exp(n)</code> \\(=e^n\\) <code>.log(n, a)</code> \\(=\\log_2^n\\) <code>.fabs(n)</code> \\(\\text{float}(|n|)\\) <code>abs(n)</code> \\(=|n|\\) <code>.factorial(n)</code> \\(=n!\\)</p> <code>.ceil(f)</code> \\(=\\ge f\\) <code>.floor(f)</code> \\(=\\le f\\) <code>.trunc(f)</code> \u53ea\u8981\u6574\u6570\u90e8\u5206 3.3 4 3 3 -2.3 -2 -3 -2 </li> </ul>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_34","title":"\u5e76\u884c\u8fed\u4ee3\u5bf9\u8c61","text":"<p><code>zip(IterableA, IterableB, ...)</code> \u5e76\u884c\u591a\u4e2a\u8fed\u4ee3\u5bf9\u8c61\u8fd4\u56de\u751f\u6210\u5668\uff0c\u751f\u6210\u5143\u7ec4\u3002\u4f46\u4f1a\u5728\u6700\u77ed\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61\u8017\u5c3d\u65f6\u505c\u6b62,\u4f46\u4e0d\u7ed9\u63d0\u793a\u3002 <code>itertools.zip_longest(IterableA, IterableB, ..., fillvalue=None)</code> \u7528 fillvalue \u586b\u5145\u7f3a\u5931\u7684\u503c\uff0c\u76f4\u5230\u6700\u957f\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61\u8017\u5c3d\u3002</p> <pre><code>import itertools\nz1 = zip(range(1,4), 'ABC', 'ab')\n# &gt;&gt;&gt; z1=&lt;zip object at 0x10288bf40&gt;\nlist(z1)\n# &gt;&gt;&gt; [(1, 'A', 'a'), (2, 'B', 'b')]  # \u505c\u6b62\u4e0d\u7ed9\u63d0\u793a\n\nz2 = itertools.zip_longest(range(1,4), 'ABC', 'ab', fillvalue='?')\n# &gt;&gt;&gt; z2=itertools.zip_longest(range(1,4), 'ABC', 'ab', fillvalue='?')\nlist(z2)\n# &gt;&gt;&gt; [(1, 'A', 'a'), (2, 'B', 'b'), (3, 'C', '?')]  # \u586b\u5145\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_35","title":"\u57fa\u672c\u64cd\u4f5c","text":"","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_36","title":"\u8fd0\u7b97\u7b26","text":"<p>\u4e2d\u7f00\u8fd0\u7b97\u7b26\u7684\u57fa\u672c\u539f\u5219\u662f\u8fd4\u56de\u6765\u4e00\u4e2a\u65b0\u7684\u503c\uff0c\u800c\u4e0d\u6539\u53d8\u64cd\u4f5c\u5bf9\u8c61\u672c\u8eab\u3002</p> \u2757\u7b97\u672f\u8fd0\u7b97\u7b26 a/b a//b a%b a**b a=3,b=2 \u6574\u6570+\u5c0f\u6570 \u53ea\u8981\u6574\u6570 \u4f59\u6570 \u5e42 ^ 1.5 1 1 9 <p>\u903b\u8f91\u8fd0\u7b97\u7b26 not \u300b and \u300b  or  \u7684\u4f18\u5148\u7ea7</p> <p>\u6700\u597d\u7528\u62ec\u53f7\u62ec\u8d77\u6765 1. \u5148\u7b97 <code>not</code> 2. \u5982\u679c\u5168 <code>and</code> \u6216 \u5168 <code>or</code>,\u4ece\u5de6\u5230\u53f3 3. \u5148\u62ec <code>and</code></p> <pre><code>0 or False and 1\n# &gt;&gt;&gt; False\n# 0 or (False and 1)\n3&gt;4 and 4&gt;3 or 1==3 and 'x'=='x' or 3&gt;3\n# &gt;&gt;&gt; False\n# (3&gt;4 and 4&gt;3) or (1==3 and 'x'=='x') or 3&gt;3\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#iterator","title":"iterator \u8fed\u4ee3\u5668","text":"<p>\u5b83\u662f\u8bbf\u95ee\u5bb9\u5668\uff08\u4f8b\u5982\u5217\u8868\u3001\u5143\u7ec4\u7b49\uff09\u4e2d\u7684\u5143\u7d20\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u53ef\u4ee5\u9010\u4e2a\u8bbf\u95ee\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\uff0c\u800c\u4e0d\u5fc5\u5c06\u6574\u4e2a\u5bb9\u5668\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\u3002</p> <ul> <li>properties<ul> <li>\u60f0\u6027\u8ba1\u7b97, lazy evaluation,   \u60f0\u6027\u8ba1\u7b97\u6307\u7684\u662f\u5728\u9700\u8981\u65f6\u624d\u8fdb\u884c\u8ba1\u7b97\uff0c\u800c\u975e\u63d0\u524d\u5c06\u6240\u6709\u7684\u8ba1\u7b97\u90fd\u6267\u884c\u5b8c\u6bd5\u3002\u5bf9\u4e8e\u5927\u578b\u6570\u636e\u96c6\u5408\uff0c\u60f0\u6027\u8ba1\u7b97\u53ef\u4ee5\u8282\u7701\u5185\u5b58\u5f00\u9500\u5e76\u63d0\u9ad8\u7a0b\u5e8f\u6027\u80fd</li> <li>\u53ef\u9006\u6027, reversibility   \u53ef\u4ee5\u901a\u8fc7\u53cd\u5411\u8fed\u4ee3\u5668\uff08reverse iterator\uff09 \u6765\u9006\u5e8f\u8bbf\u95ee\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\u3002Python\u6807\u51c6\u5e93\u4e2d\u63d0\u4f9b\u4e86<code>reversed()</code>\u51fd\u6570\u7528\u4e8e\u521b\u5efa\u53cd\u5411\u8fed\u4ee3\u5668\u3002</li> </ul> </li> </ul> \u53ea\u6709data \u4e00\u4e2a\u5217\u8868 notes <code>iter()</code> \u2705 \u2705 <code>enumerate(sequence, [start=0])</code> \u274c auto_index + data \u2705 <code>zip(strict)</code> \u2705 \u274c \u591a\u4e2a 3.10\u7248\u672c\u8bbe<code>strict=True</code>\u4e3a\u4e25\u683c\u9075\u5b88\u5927\u5c0f\u76f8\u7b49 <pre><code>names = ['Alice', 'Bob', 'Charlie']\nages = [24, 50, 18]\nsexs = ['M','F', 'M']\n\n# 1. iter -&gt; data\nfor name in iter(names):\n    print(\"{}\".format(name))\n\n# 2. enumerate -&gt; (index, data)\nfor index, name in enumerate(names):\n    print('NO.{} is {}'.format(index, name))\n\n# 3. zip -&gt;\nfor (name, age, sex) in zip(names, ages, sexs):\n    print('{} - {} - {}'.format(name, age, sex))\n\n\n# 4. enumerate + zip\nfor index, (name, age, sex) in enumerate(zip(names, ages, sexs)):\n    print('NO.{} is {} - {} - {}'.format(index, name, age, sex))\n        # 0 Alice 24 M\n        # 1 Bob 50 F\n        # 2 Charlie 18 M\n</code></pre> <p>Python\u4e2d\u7684zip()\uff1a\u4ece\u591a\u4e2a\u5217\u8868\u4e2d\u83b7\u53d6\u5143\u7d20</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#itertools-module","title":"<code>itertools</code> module","text":"<p>\u8bfb\u53d6\u5927\u578b\u6587\u4ef6\u6570\u636e</p> <p>\u5f53\u6211\u4eec\u9700\u8981\u5904\u7406\u5927\u91cf\u6570\u636e\u65f6\uff0c\u5c06\u6574\u4e2a\u6570\u636e\u96c6\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83\u6216\u6548\u7387\u4f4e\u4e0b\u3002\u4f7f\u7528Python\u8fed\u4ee3\u5668\u6765\u5904\u7406\u5927\u578b\u6587\u4ef6\u6570\u636e\u975e\u5e38\u7406\u60f3\uff0c\u8fd9\u79cd\u65b9\u5f0f\u53ea\u5728\u5185\u5b58\u4e2d\u7ef4\u62a4\u5f53\u524d\u5904\u7406\u7684\u6570\u636e\u5757\uff0c\u800c\u4e0d\u9700\u8981\u4e00\u6b21\u6027\u8bfb\u53d6\u6574\u4e2a\u6587\u4ef6\u3002</p> <pre><code>with open('large_file.txt', 'r') as f:\n    for line in f:\n        process_line(line)\n</code></pre> <p>python\u8fed\u4ee3\u5668\u8be6\u89e3</p> <p>\u8fed\u4ee3\u5668\u5fc5\u987b\u5b9e\u73b0__iter__\u548c__next__\u65b9\u6cd5\uff0c\u800c\u751f\u6210\u5668\u53ea\u9700\u8981\u5b9e\u73b0\u4e00\u4e2ayield\u8bed\u53e5\u5373\u53ef\u3002 \u751f\u6210\u5668\u53ef\u4ee5\u4fdd\u5b58\u72b6\u6001\uff0c\u6bcf\u6b21\u8c03\u7528yield\u8bed\u53e5\u65f6\u4f1a\u81ea\u52a8\u4fdd\u5b58\u5f53\u524d\u7684\u5c40\u90e8\u53d8\u91cf\u548c\u6267\u884c\u4f4d\u7f6e\uff0c\u5e76\u5728\u4e0b\u4e00\u6b21\u8c03\u7528\u65f6\u6062\u590d\u6267\u884c\u72b6\u6001\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u8fed\u4ee3\u5668\u7684\u529f\u80fd\u3002 \u751f\u6210\u5668\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u751f\u6210\u5e8f\u5217\uff0c\u800c\u8fed\u4ee3\u5668\u5219\u53ef\u4ee5\u7528\u4e8e\u5404\u79cd\u6570\u636e\u7ed3\u6784\u7684\u904d\u5386\uff0c\u5305\u62ec\u5e8f\u5217\u3001\u6620\u5c04\u3001\u6587\u4ef6\u7b49</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_37","title":"\u5faa\u73af","text":"<p>\u60f3\u770b\u7d22\u5f15  <code>for idx, obj in enumerate(objs):</code></p> <pre><code>animals = ['cat', 'dog', 'monkey']\nfor idx, animal in enumerate(animals): \n    print(f'{idx} - {animal}') \n# &gt;&gt;&gt; 0 - cat\n# &gt;&gt;&gt; 1 - dog\n# &gt;&gt;&gt; 2 - monkey\n</code></pre> <p>\u770b\u6e05\u695a\u5faa\u73af\u7684\u662f\u5565</p> <pre><code>for a, b, c in ['abc', 'def', 'ghj']:\n    print(a, b, c)\n# &gt;&gt;&gt; a b c \n# &gt;&gt;&gt; d e f\n# &gt;&gt;&gt; g h j\n\"\"\"\uff01\uff01\uff01\uff01 \u800c\u4e0d\u662f a d g\n\u8fd9\u79cd\u9700\u8981 zip\n\"\"\"\nfor a, b, c in zip('abc', 'def', 'ghj'):\n    print(a, b, c)\n# &gt;&gt;&gt; a d g\n# &gt;&gt;&gt; b e h\n# &gt;&gt;&gt; c f j\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#cls","title":"\u7c7b cls","text":"<p>\u5b9e\u4f8b\u5316\u3002\u6839\u636e\u7c7b\u6765\u521b\u5efa\u5bf9\u8c61</p> <p><code>MyClass</code>: \u7c7b,\u9a7c\u5cf0\u547d\u540d\u6cd5\uff0c\u5373\u5c06\u7c7b\u540d\u4e2d\u7684 \u6bcf\u4e2a\u5355\u8bcd\u7684\u9996\u5b57\u6bcd\u90fd\u5927\u5199\uff0c\u800c\u4e0d\u4f7f\u7528\u4e0b\u5212\u7ebf\u3002 <code>myclass_1</code>: \u6839\u636e\u7c7b\u521b\u5efa\u7684\u5b9e\u4f8b\u3002\u5b9e\u4f8b\u540d\u91c7\u7528 \u5c0f\u5199\u683c\u5f0f\uff0c\u5e76\u5728\u5355\u8bcd\u4e4b\u95f4\u52a0\u4e0a\u4e0b\u5212\u7ebf\u3002</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_38","title":"\u534f\u8bae","text":"<p>\u9e2d\u5b50\u7c7b\u578b duck typing\u3002\u4e3b\u8981\u662f\u4e00\u79cd\u601d\u60f3\u3002\u4e0d\u8981\u53bb\u4e25\u683c\u9a8c\u8bc1\u662f\u4e0d\u662f\u9e2d\u5b50\uff0c\u800c\u662f\u68c0\u67e5\u6709\u6ca1\u6709\u9e2d\u5b50\u7684\u91cd\u70b9\u7279\u5f81\u548c\u884c\u4e3a\u3002\u4f55\u8c13\u91cd\u70b9\u7279\u5f81\u548c\u884c\u4e3a\uff0c\u53d6\u51b3\u4e8e\u4f60\u60f3\u4f7f\u7528\u7684\u7c7b\u578b\u7684\u6839\u672c\u7279\u5f81\u662f\u4ec0\u4e48\u3002\u5ffd\u7565\u5bf9\u8c61\u7684\u771f\u6b63\u7c7b\u522b\uff0c\u8f6c\u800c\u5173\u6ce8\u5bf9\u8c61\u53c8\u6ca1\u6709\u5b9e\u73b0\u6240\u9700\u7684 \u65b9\u6cd5 &amp; \u7b7e\u540d &amp; \u8bed\u4e49\u3002</p> <p>\u5e8f\u5217\u7c7b\u578b\uff0c\u53ea\u8981\u8fed\u4ee3\u5c31\u884c\u3002\ud83d\udff0 \u53ea\u8981\u80fd\u8fed\u4ee3\u90fd\u662f\u5e8f\u5217\u7c7b\u578b\uff0c\u800c\u4e0d\u9700\u8981\u7ee7\u627f\u4ec0\u4e48\u6216\u8005\u4ec0\u4e48\u4e25\u683c\u5b9a\u4e49\u3002 \u8bf4\u5e8f\u5217\uff0c\u662f\u56e0\u4e3a\u5b83\u7684\u884c\u4e3a\u50cf\u5e8f\u5217\u3002\u5982\u679c\u53ea\u60f3\u8fed\u4ee3\uff0c\u53ea\u9700\u8981 <code>__iter__</code> \u5c31\u884c\uff0c\u800c\u4e0d\u9700\u8981<code>__len__</code> \u591a\u4f59\u7684\u4f46\u662f\u5c5e\u4e8e\u5e8f\u5217\u7684\u884c\u4e3a\u3002</p> <p>\u767d\u9e45\u7c7b\u578b\u3002\u53ea\u8981 cls \u662f\u62bd\u8c61\u57fa\u7c7b \ud83d\udff0 cls \u7684\u5143\u7c7b\u662f <code>abc.ABCMeta</code>\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528 <code>isinstance(obj, cls)</code></p> <p>\u534f\u8bae\u3002\u662f\u4e00\u79cd\u7ea6\u5b9a\uff0c\u7528\u4e8e\u6307\u5bfc\u5bf9\u8c61\u4e4b\u95f4\u7684\u4ea4\u4e92\u548c\u884c\u4e3a\u3002Python\u5e76\u6ca1\u6709\u4e25\u683c\u7684\u63a5\u53e3\u5b9a\u4e49\uff0c\u800c\u662f\u901a\u8fc7\u534f\u8bae\u6765\u5b9e\u73b0\u63a5\u53e3\u7684\u6982\u5ff5\u3002\u534f\u8bae\u662f\u975e\u6b63\u5f0f\u7684\u63a5\u53e3\u3002\u5bf9\u8c61\u7684\u7c7b\u578b\u65e0\u5173\u7d27\u8981\uff0c\u53ea\u8981\u5b9e\u73b0\u7279\u5b9a\u7684\u534f\u8bae\u5373\u53ef\u3002 \u534f\u8bae\u662f\u52a8\u6001\u7684\uff1a\u51fd\u6570\u4e0d\u5173\u5fc3\u53c2\u6570\u7684\u7c7b\u578b\uff0c\u53ea\u8981\u6c42\u5bf9\u8c61\u5b9e\u73b0\u4e86\u90e8\u5206\u6240\u9700\u534f\u8bae\uff0c\u5373\u4f7f\u4e00\u5f00\u59cb\u5b9a\u4e49\u65f6\u6ca1\u6709\u5b9e\u73b0\uff0c\u4e5f\u53ef\u4ee5\u4e4b\u540e\u518d\u8865\u4e0a\u3002</p> <p>\u4e0d\u4e00\u5b9a\u8981\u81ea\u5df1\u5b9e\u73b0\u6240\u9700\u534f\u8bae\uff0c\u5982\u679c\u80fd\u59d4\u6258\u7ed9\u5bf9\u8c61\u7684\u5e26\u6709\u6240\u9700\u534f\u8bae\u7684\u5c5e\u6027\u4e5f\u53ef\u4ee5\u3002\u4f46\u662f\u5355\u7eaf\u59d4\u6258\u6709\u7f3a\u70b9\uff0c\u53ef\u80fd\u4f1a\u8fd4\u56de \u59d4\u6258\u7c7b\u578b\uff0c\u800c\u4e0d\u662f\u81ea\u5b9a\u4e49\u7684\u7c7b\u578b\u3002</p> <p>\u5411\u91cf\u7684\u5207\u7247\u64cd\u4f5c\u59d4\u6258\u7ed9 list \u7684\u5207\u7247\u3002\u4f46\u662f\u6709\u7f3a\u70b9\uff1a\u5207\u7247\u8fd4\u56de\u7684\u662f list \u7c7b\u578b\uff0c\u800c\u4e0d\u662f\u81ea\u5b9a\u4e49\u7684 vector \u7c7b\u578b\u3002 \u270f\ufe0f \u770b getitem</p> <pre><code>class Vector():\n\n    def __init__(self, components):\n        self._components = list(components)\n\n    def __getitem__(self, index):  # \u59d4\u6258\u7ed9 list \u7c7b\u578b\u7684 _components\n        return self._components[index]  # \u5355\u7eaf\u59d4\u6258\n\nv = Vector([0,1,2])\n# &gt;&gt;&gt; v[0]=0\nv[:]\n# &gt;&gt;&gt; [0, 1, 2]  # list not vetor\n</code></pre> <p>\u5e8f\u5217\u7c7b\u578b\u3002</p> <pre><code>classDiagram\nclass Container\nContainer: __contains__ @\nclass Iterable\nIterable: __iter__ @\nclass Sized\nSized: __len__ @\nclass Sequence\nSequence: __getitem__ @\nSequence: __contains__\nSequence: __iter__\nSequence: __reversed__\nSequence: index\nSequence: count\nclass MutableSequence\nMutableSequence: __setitem__ @\nMutableSequence: __delitem__ @\nMutableSequence: insert/append/extend\nMutableSequence: pop/remove\nMutableSequence: __iadd__\nContainer &lt;|-- Sequence\nIterable &lt;|-- Sequence\nSized &lt;|-- Sequence\nSequence &lt;|-- MutableSequence</code></pre> <p>\u5177\u4f53\u65b9\u6cd5\u548c\u62bd\u8c61\u65b9\u6cd5\u662f\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u4e2d\u7684\u4e24\u4e2a\u6982\u5ff5\uff0c\u7528\u4e8e\u63cf\u8ff0\u7c7b\u4e2d\u7684\u65b9\u6cd5\u7684\u7279\u6027\u548c\u884c\u4e3a\u3002 \u62bd\u8c61\u65b9\u6cd5 Abstract Methods\u3002(\u540e\u9762\u52a0<code>@</code>)\u5728\u7c7b\u4e2d\u58f0\u660e\u4f46\u6ca1\u6709\u5177\u4f53\u5b9e\u73b0\uff0c\u5b83\u53ea\u5305\u542b\u65b9\u6cd5\u7684\u7b7e\u540d\uff08\u8fd4\u56de\u7c7b\u578b\u3001\u65b9\u6cd5\u540d\u548c\u53c2\u6570\u5217\u8868\uff09\uff0c\u6ca1\u6709\u65b9\u6cd5\u4f53\u3002\u5b50\u7c7b\u5fc5\u987b\u5b9e\u73b0\u62bd\u8c61\u65b9\u6cd5\uff0c\u624d\u80fd\u521b\u5efa\u5bf9\u8c61\u5e76\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002\u5426\u5219\u5c31\u4f1a\u4ea7\u751f <code>NotImplentedError</code>\uff0c\u6216\u5b50\u7c7b\u4e5f\u5fc5\u987b\u58f0\u660e\u4e3a\u62bd\u8c61\u7c7b\u3002 \u5177\u4f53\u65b9\u6cd5Concrete Methods\u3002\u5728\u7c7b\u4e2d\u5b9e\u73b0\u4e86\u5177\u4f53\u529f\u80fd\u7684\u65b9\u6cd5\uff0c\u5b83\u5305\u542b\u4e86\u5177\u4f53\u7684\u4ee3\u7801\u5b9e\u73b0\u3002</p> <p>Sequence \u62bd\u8c61\u65b9\u6cd5\u6ca1\u6709 <code>__iter__</code>\u3002</p> <p>python \u5b58\u5728\u4e00\u79cd\u540e\u5907\u673a\u5236\uff1a\u5f53\u6709 <code>__getitem__</code> \u65f6\uff0cpython \u4f1a\u8c03\u7528\u5b83\uff0c\u4f20\u5165\u4ece 0 \u5f00\u59cb\u7684\u6574\u6570\u7d22\u5f15\uff0c\u5c1d\u8bd5\u8fed\u4ee3\u5bf9\u8c61\u3002\u54ea\u6015\u662f\u6ca1\u6709 <code>__iter__</code> &amp; <code>__contains__</code> python \u4e5f\u4f1a\u8bbe\u6cd5\u4f7f\u8fed\u4ee3 &amp; in \u53ef\u7528\u3002</p> <p>\u7334\u5b50\u8865\u4e01\uff1a\u8fd0\u884c\u65f6\u5b9e\u73b0\u534f\u8bae\u3002</p> <p>FrenchDeck \u7c7b\u5df2\u7ecf\u5b9a\u4e49\u597d\u4e86\uff0c\u4f46\u662f\u7a81\u7136\u60f3\u5b9e\u73b0\u53ef\u53d8\u534f\u8bae\uff0c\u5c31\u662f\u9700\u8981\u6dfb\u52a0 <code>__setitem__</code>\u65b9\u6cd5\u3002 \u270f\ufe0f \u5728\u8fd0\u884c\u65f6\u4fee\u6539\u4fee\u6539\u7c7b\u6216\u6a21\u5757\uff0c\u800c\u4e0d\u6539\u52a8\u6e90\u7801\u3002\u4f46\u662f\u5173\u952e\u662f\u8981\u548c\u6e90\u7801\u8026\u5408\u5341\u5206\u7d27\u5bc6\uff08\u5373\u77e5\u9053\u6e90\u7801\uff0c\u5e76\u5bf9\u4e0a\u6765\u5199</p> <pre><code># \u7ec8\u7aef\u53f0\u5199\ndef set_card(deck, pos, card):\n    deck._card[pos] = card\n\nFrenchDeck.__setitem__ = set_card  # \u628a\u51fd\u6570\u8d4b\u7ed9\u5c5e\u6027\n</code></pre> <pre><code>import module\nmyclass = module.MyClass()\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_39","title":"\u501f\u53e3","text":"<ul> <li>\u5bfc\u5165 \u5bfc\u5165\u6574\u4e2a\u6a21\u5757\uff0c\u518d\u4f7f\u7528\u53e5\u70b9\u8868\u793a\u6cd5\u8bbf\u95ee\u9700\u8981\u7684\u7c7b\u3002\u9700\u8981\u4ece\u4e00\u4e2a\u6a21\u5757\u4e2d\u5bfc\u5165\u5f88\u591a\u7c7b\u65f6\uff0c\u6700\u597d\u5bfc\u5165\u6574\u4e2a\u6a21\u5757\uff0c\u5e76\u4f7f\u7528 <code>module_name.class_name</code> \u8bed\u6cd5\u6765\u8bbf\u95ee\u7c7b\u3002</li> </ul> <p>\u4fee\u6539\u5c5e\u6027\u7684\u503c</p> <ul> <li>\u76f4\u63a5\u901a\u8fc7\u5b9e\u4f8b\u8fdb\u884c\u4fee\u6539</li> <li>\u901a\u8fc7\u65b9\u6cd5\u8fdb\u884c\u8bbe\u7f6e-</li> <li>\u901a\u8fc7\u65b9\u6cd5\u8fdb\u884c\u9012\u589e\uff08\u589e\u52a0\u7279\u5b9a\u7684\u503c\uff09\u3002</li> </ul>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_40","title":"\u7ee7\u627f\u7c7b","text":"<p>\u5982\u679c\u4f60\u8981\u7f16\u5199\u7684\u7c7b\u662f\u53e6\u4e00\u4e2a\u73b0\u6210\u7c7b\u7684\u7279\u6b8a\u7248\u672c\uff0c\u53ef\u4f7f\u7528\u7ee7\u627f\u3002\u4e00\u4e2a\u7c7b\u7ee7\u627f\u53e6\u4e00\u4e2a\u7c7b\u65f6\uff0c\u5b83\u5c06\u81ea\u52a8\u83b7\u5f97\u53e6\u4e00\u4e2a\u7c7b\u7684\u6240\u6709\u5c5e\u6027\u548c\u65b9\u6cd5\uff1b</p> <ul> <li>\u539f\u6709\u7684\u7c7b\u79f0\u4e3a\u7236\u7c7b\uff0c\u7236\u7c7b\u4e5f\u79f0\u4e3a\u8d85\u7c7b\uff08<code>superclass</code>\uff09</li> <li>\u65b0\u7c7b\u79f0\u4e3a\u5b50\u7c7b\u3002</li> <li>\u5b50\u7c7b\u7ee7\u627f\u4e86\u5176\u7236\u7c7b\u7684\u6240\u6709\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u540c\u65f6\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5df1\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002</li> </ul>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_41","title":"\u53ef\u7ee7\u627f\u7684\u7c7b","text":"","tags":["Foo","Bar"]},{"location":"python/python_elegant/#userdict","title":"UserDict","text":"<p>quote \u66f4\u503e\u5411\u7ee7\u627f UserDict \u800c\u4e0d\u662f dict</p> <p>dict \u4f1a\u5728\u67d0\u4e9b\u65b9\u6cd5\u7684\u5b9e\u73b0\u4e0a\u8d70\u4e00\u4e9b\u6377\u5f84\uff0c\u5982\u679c\u7ee7\u627f\u7684\u8bdd\uff0c\u53ef\u80fd\u9700\u8981\u5728\u5b50\u7c7b\u4e2d\u91cd\u5199\u8fd9\u4e9b\u65b9\u6cd5\u3002 UserDict\u3002\u628a\u6807\u51c6 dict \u7528\u7eaf python \u5b9e\u73b0\u4e86\u4e00\u904d\uff0c\u6240\u4ee5\u5c31\u4e0d\u4f1a\u9047\u5230\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>UserDict \u4e0d\u662f Dict \u7684\u5b50\u7c7b\uff0c\u4f46\u662f \u7528\u6765\u7ed9 UserDict \u6700\u7ec8\u5b58\u50a8\u6570\u636e\u7684 <code>UserDict.data</code> \u5c5e\u6027\u662f dict \u7684\u5b9e\u4f8b\u3002\u6240\u4ee5</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_42","title":"\u9b54\u6cd5\u65b9\u6cd5","text":"<p>magic method \u9b54\u6cd5\u65b9\u6cd5 dunder method \u53cc\u4e0b\u5212\u7ebf\u65b9\u6cd5\u3002\u7c7b\u4f3c\u524d\u540e\u5e26\u53cc\u4e0b\u5212\u7ebf\u7684<code>__method__():</code>\u5185\u7f6e\u51fd\u6570\u7684\u6635\u79f0\u3002\u5728\u8fd9\u4e2a\u65b9\u6cd5\u7684\u540d\u79f0\u4e2d\uff0c\u5f00\u5934\u548c\u672b\u5c3e\u5404\u6709\u4e24\u4e2a\u4e0b\u5212\u7ebf\uff0c\u8fd9\u662f\u4e00\u79cd\u7ea6\u5b9a\uff0c\u65e8\u5728\u907f\u514dPython\u9ed8\u8ba4\u65b9\u6cd5\u4e0e\u666e\u901a\u65b9\u6cd5\u53d1\u751f\u540d\u79f0\u51b2\u7a81\u3002 \u5de5\u4f5c\u65b9\u5f0f\uff1a\u5f53\u5bf9\u8c61\u63a5\u6536\u5230\u4e00\u4e2a\u6d88\u606f\uff0c\u4f46\u5728\u8be5\u5bf9\u8c61\u4e0a\u6ca1\u6709\u5bf9\u5e94\u7684\u65b9\u6cd5\u65f6\uff0c\u4f1a\u81ea\u52a8\u67e5\u627e\u5e76\u8c03\u7528\u8be5\u5bf9\u8c61\u6240\u5728\u7c7b\u4e2d\u7684\u7279\u6b8a\u65b9\u6cd5\uff0c\u4ece\u800c\u5b9e\u73b0\u5bf9\u8be5\u6d88\u606f\u7684\u5904\u7406\u3002</p> <p>\u5982min\u3001max\u3001all\u3001map\u7b49\u90fd\u662f\u7528C\u8bed\u8a00\u5b9e\u73b0\u7684\u3002\u8fd0\u7b97\u4f1a\u66f4\u5feb</p> magic meth call \u89e3\u91ca <code>__abs__(self)</code> <code>abs(myclass)</code> \u53d6\u6a21 <code>__bool__(self)</code> <code>bool(myclass)</code><code>if myclass:</code> \u5224\u65ad\u771f\u5047 <code>__call__(self, *args, **kwargs):</code> <code>mycalss(params)</code> \u53ef\u8c03\u7528\u5bf9\u8c61\u534f\u8bae ()\u64cd\u4f5c <code>__contains__(self, a)</code> <code>a in myclass</code> \u5305\u542b <code>__getitem__(self, idx):</code> <code>myclass[idx]</code> \u5e8f\u5217\u534f\u8bae[]\u64cd\u4f5c <code>__init__(self, *args, **kwargs)</code> <code>MyClass()</code>step2 \u521d\u59cb\u5316\u5b9e\u4f8b <code>__iter__(self)</code> <code>iter(myclass)</code><code>for i in myclass</code> \u8fed\u4ee3\u534f\u8bae <code>__len__(self)</code> <code>len(myclass)</code> \u957f\u5ea6 <code>__missing__</code> ? \u6620\u5c04\u627e\u4e0d\u5230\u952e <code>__new__(self)</code> <code>MyClass()</code> step1 \u65b0\u5efa\u5b9e\u4f8b <code>__repr__(self)</code> \u63a7\u5236\u53f0<code>myclass</code> \u8868\u8fbe\u662f\u4ec0\u4e48\u4e1c\u897f\u65b9\u4fbf\u8c03\u8bd5\u548c\u8bb0\u5f55\u65e5\u5fd7 <code>__setitem__(self, idx\uff0cnew):</code> <code>myclass[idx]=new</code> \u5e8f\u5217\u7c7b\u4fee\u6539 <code>__slots__</code> ? \u8282\u7701\u5185\u5b58 <code>__str__</code> <code>print(myclass)</code> <code>str(myclass)</code> \u5bf9\u7ec8\u7aef\u7528\u6237\u53cb\u597d <p>\u8fd0\u7b97\u7b26\u7684\u91cd\u8f7d\u5728\u5b83\u90a3\u4e2a\u7ae0\u8282</p> <ul> <li><code>__bool__(self)</code> \u27a1\ufe0f <code>if myclass</code> | <code>bool(myclass)</code> \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u81ea\u5df1\u5b9a\u4e49\u7684\u7c7b\u7684\u5b9e\u4f8b\u603b\u8ba4\u4e3a\u662f\u771f\uff0c\u9664\u975e\u8fd9\u4e2a\u7c7b\u5bf9<code>__bool__</code> | <code>__len__</code> \u6709\u81ea\u5df1\u7684\u5b9e\u73b0\u3002 \u56e0\u4e3a\u8fd9\u4e2a\u5224\u65ad\u771f\u5047\u4f1a\u5148\u53bb\u641c <code>__bool__</code> \u5b58\u5728\u5417\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5c31\u4f1a\u53bb\u627e <code>__len__</code>\u3002\u4e00\u822c\u9ed8\u8ba4\u6a21\u4e3a0\u5c31\u662f\u5047\u7684</li> <li> <p><code>__call__(self)</code> \u27a1\ufe0f <code>myclass()</code>     \u6210\u4e3a\u53ef\u8c03\u7528\u5bf9\u8c61\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u7c7b\u65b9\u6cd5\u7684\u5feb\u6377\u65b9\u5f0f\u3002</p> <pre><code>class MyClass():\n    def func1(self):\n        ...\n\n    def __call__(self):\n        return self.func1(self)  # mycalss() = myclass.func1()\n</code></pre> </li> <li> <p><code>__contains__(self, a)</code>\u27a1\ufe0f<code>a in myclass</code> \u5982\u679c\u6ca1\u6709\u5b9e\u73b0\uff0c<code>in</code> \u5c31\u4f1a\u6309\u987a\u5e8f\u505a\u8fed\u4ee3\u641c\u7d22</p> </li> <li><code>__getitem__(self, idx):</code> \u27a1\ufe0f <code>myclass[idx]</code> []\u64cd\u4f5c \u652f\u6301\u7684\u8bdd, \u81ea\u52a8\u652f\u6301\u5207\u7247\u64cd\u4f5c\uff0c\u53d8\u6210\u53ef\u8fed\u4ee3\u3002</li> <li><code>__len__(self)</code>\u27a1\ufe0f <code>len(myclass)</code> \u5982\u679c\u662f python \u5185\u7f6e\u7c7b\u578b\uff0cCPython \u5c31\u4f1a\u6284\u8fd1\u8def\uff0c\u5b9e\u9645\u76f4\u63a5\u8fd4\u56de PyObject \u91cc\u7684 <code>ob_size</code> \u5c5e\u6027.\u4f1a\u6bd4\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u66f4\u5feb\u3002</li> <li> <p><code>__missing__</code> \u6620\u5c04\u627e\u4e0d\u5230\u952e \u6240\u6709\u7684\u6620\u5c04\u7c7b\u578b\u5728\u5904\u7406\u627e\u4e0d\u5230\u952e\u65f6\uff0c\u90fd\u4f1a\u7275\u626f<code>.__missing__</code> \u65b9\u6cd5\u3002<code>.__missing__</code>\u4f1a\u8c03\u7528 <code>default_factory</code> \u91cc\u5b58\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\u4ea7\u751f\u9ed8\u8ba4\u503c\uff0c\u7ed9 <code>__getitem__</code> \u8fd4\u56de\u3002 \u57fa\u7c7b dict \u6ca1\u6709\u5b9a\u4e49\uff0c\u4f46\u662f\u5b83\u77e5\u9053\uff0c\u6240\u4ee5\u5982\u679c\u67d0\u4e2a\u7c7b\u7ee7\u627f\u4e86 dict\uff0c\u53c8\u662f\u5b9e\u73b0\u4e86 <code>__missing__</code> \uff0c\u90a3\u4e48\u5728 <code>__getitem__</code> \u627e\u4e0d\u5230\u952e\u65f6\uff0cpython \u4f1a\u81ea\u52a8\u8c03\u7528\u5b83\uff0c\u800c\u4e0d\u662f\u629b\u51fa  KeyError.</p> <p><code>__missing__</code> \u53ea\u4f1a\u88ab <code>__getitem__</code> \u8c03\u7528\uff0c\u5bf9 <code>.get(k)</code> &amp; <code>__contains__</code> \u6ca1\u6709\u5f71\u54cd\u3002\u6240\u4ee5</p> </li> </ul>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#example","title":"Example","text":"<p>\u4e00\u53e0\u7eb8\u724c</p> <pre><code>class FrenchDeck():\ndef __init__(self, a:int):\n      self._cards = list(range(a))\n  def __getitem__(self, idx):\n      return self._cards[idx]\n</code></pre> <p>\u4e8c\u7ef4\u5411\u91cf \u4e3a\u751f\u6210\u5b57\u8282\u5e8f\u5217\uff0c\u5c06 typecode \u8f6c\u6210\u5b57\u8282\u5e8f\u5217\uff0c\u7136\u540e\u8fed\u4ee3\u5b9e\u4f8b\u5f97\u5230\u6570\u7ec4\uff0c\u518d\u5c06\u6570\u7ec4\u8f6c\u6210\u5b57\u8282\u5e8f\u5217\u3002</p> <pre><code>from math import sqrt\nclass Vector():\n    typecode = 'd'  # \u7c7b\u5c5e\u6027\uff0c\u5728 Vector \u5b9e\u4f8b &amp; \u5b57\u8282\u5e8f\u5217\u4e4b\u95f4\u8f6c\u6362\u65f6\u4f7f\u7528\n    def __init__(self, x, y):\n        self.x, self.y = float(x), float(y)  # \u683c\u5f0f\u8f6c\u6362 \u4e3a\u7edf\u4e00 \u4e5f\u4e3a\u5c3d\u65e9\u6355\u6349\u9519\u8bef\u53c2\u6570\n    def __iter__(self):  # \u53ea\u6709\u5b9e\u73b0\u53ef\u8fed\u4ee3\uff0c\u624d\u80fd\u7c7b\u91cc\u7684\u5c5e\u6027\u62c6\u5305 *self\n        return (i for i in (self.x, self.y))\n    def __repr__(self):\n        class_name = type(self).__name__\n        return f'{class_name}({self.x}, {self.y})'\n    def __str__(self):\n        return str(tuple(self))\n    def __bytes__(self): \n        return (bytes([ord(self.typecode)]) + bytes(array(self.typecode, self)))\n    def __eq__(self, other):  # \u4e3a\u4e86\u5feb\u901f\u6bd4\u8f83\u6240\u6709\u5206\u91cf\n        return tuple(self) == tuple(other) \n    def __abs__(self):\n        return sqrt(self.x**2 + self.y**2)\n    def __bool__(self):\n        # \u6362bool \u662f\u56e0\u4e3a\u76f4\u63a5\u7684\u8bdd\u53ef\u80fd\u5c31\u4f1a\u8fd4\u56de\u771f\u7684\u5143\u7d20\u90a3\u4e00\u4e2a\u503c\uff0c\u800c\u4e0d\u662fTF\n        return bool(self.x or self.y)\n    def __format__(self, fmt_spec):\n        data = (format(c, fmt_spec) for c in self)\n        return '({0}, {1})'.format(*data)\n\nv1, v2 = Vector(3,4), Vector(0,0)\nv1\n# &gt;&gt;&gt; Vector(3.0, 4.0)\nprint(v1)\n# &gt;&gt;&gt; (3.0, 4.0)\n# &gt;&gt;&gt; abs(v1)=5.0\n# &gt;&gt;&gt; bool(v1)=True\n# &gt;&gt;&gt; abs(v2)=0.0\nbool(v2)\n# &gt;&gt;&gt; False  # \u5982\u679c\u4e0d\u662f\u91cd\u5199\u4e86bool \u5b9e\u4f8b\u5c31\u4f1a\u9ed8\u8ba4\u4e3a\u771f\nformat(v1)  # default\n# &gt;&gt;&gt; '(3.0, 4.0)'  # default\nformat(v1, '.3f')\n# &gt;&gt;&gt; '(3.000, 4.000)'  # \u5c0f\u6570\u70b9\u540e\u4e09\u4f4d\u7684\u5c0f\u6570\nformat(v1, '0.1%')\n# &gt;&gt;&gt; '(300.0%, 400.0%)'  # \u5c0f\u6570\u70b9\u540e\u4e00\u4f4d\u7684\u767e\u5206\u6570\n</code></pre> <p>general \u5411\u91cf</p> <p>\u5e8f\u5217\u7c7b\u578b\uff1a\u4e0d\u9650\u5143\u7d20\u4e2a\u6570\uff0c\u63a5\u53d7\u53ef\u8fed\u4ee3\u5bf9\u8c61 \u540c\u65f6\u7528 <code>array</code> \u5b58\uff0c\u68c0\u67e5\u7c7b\u578b \u53d7\u4fdd\u62a4\u7c7b\u578b \u4e2a\u6570\u592a\u591a\u7528 <code>...</code> \u8868\u793a</p> <pre><code>from array import array\nimport reprlib\nimport math\nimport numbers\nimport functools\nimport operator\nimport itertools\n\nclass Vector():\n    type_code = 'd'  # \u4ec0\u4e48\u7c7b\u578b\u6570\u7ec4\n    def __init__(self, components):  # \u63a5\u53d7\u53ef\u8fed\u4ee3\u5bf9\u8c61\n        self._components = array(self.type_code, components)\n\n    def __iter__(self):\n        return iter(self._components)  # \u59d4\u6258\u7ed9 array \u7684\u5b9e\u73b0\n\n    def __len__(self):\n        return len(self._components)\n\n    def __getitem__(self, index):\n        cls = type(self)  # for init\n        if isinstance(index, slice):  # \u5207\u7247\n            return cls(self._components[index])  # \u6784\u9020\u5e8f\u5217\u7c7b\u578b\n        elif isinstance(index, numbers.Integral):  # \u5355\u7d22\u5f15\n            return self._components[index]\n        else:\n            msg = f'{cls.__name__} indices must be integers'\n            raise TypeError(msg)\n\n    def __repr__(self):\n        components = reprlib.repr(self._components)  # return str\n        components = components[components.find('[') : -1]  # \u5220\u53bb\u6784\u9020\u7ec6\u8282 array \n        # reprlib.repr(array('d', [1.0, 2.0, 3.0, 4.0, 5.0, 6.0]))\n        # &gt;&gt;&gt; \"array('d', [1.0, 2.0, 3.0, 4.0, 5.0, ...])\"\n        # \u540c\u6837\u7684\u7ed3\u679c\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a1 \u76f4\u63a5\u4f20 array \u751f\u6210 str + find 2 \u53d8\u6210 list \u518d\u4f20\uff0c\u4e0d\u9700\u8981 find\n        # \u9009\u7b2c\u4e00\u79cd\u662f\u4e3a\u4e86\u51cf\u5c11 \u751f\u6210\u6570\u7ec4\u65f6\u7684\u590d\u5236\u6210\u672c\u3002\n        return f'Vector({components})'  # \u53ea\u663e\u793a \u7c7b\u578b &amp; \u6570\u503c\n\n    def __str__(self):\n        return str(tuple(self))\n\n    def __bytes__(self):\n        return (bytes(ord(self.type_code)) + bytes(self._components))\n\n    def __hash__(self):\n        hashes = map(hash, self._components)\n        return functools.reduce(operator.xor, hashes, 0)\n\n    def __eq__(self, other):\n        return len(self) == len(other) and all (a==b for a, b in zip(self, other))\n\n    def __abs__(self):\n        return math.sqrt(sum(x ** 2 for x in self))\n\n    def __neg__(self):\n        return Vector(-x for x in self)\n\n    def __pos__(self):\n        # return Vector(+x for x in self)  # Wrong\n        return Vector(self)\n\n    def __add__(self, other):\n        paris = itertools.zip_longest(self, other, fillvalue=0.0)\n        return Vector(map(add, pairs))\n\n    def __radd__(self, other):\n        return self + other  # \u59d4\u6258\u7ed9 add \u56e0\u4e3a\u6570\u503c\u76f8\u52a0\u4e0d\u8bb2\u6c42\u987a\u5e8f\n\n    def __bool__(self):\n        return all (self)\n\nv = Vector([1,2,3,4,5,6])\n# &gt;&gt;&gt; v=Vector([1.0, 2.0, 3.0, 4.0, 5.0, ...])\nv2 = Vector([0, 0 ,0, 0, 0 ,0])\nbool(v2)\n# &gt;&gt;&gt; False\nv == v2\n# &gt;&gt;&gt; True\nv[:2]\nVector([1.0, 2.0])\nv['a']\n# &gt;&gt;&gt; TypeError: Vector indices must be integers\n</code></pre> <p><code>__missing__</code> \u5f53\u5b57\u5178\u91cc\u5b58\u653e\u7684\u952e\u6709\u82f1\u6587 &amp; \u6570\u5b57\u65f6\uff0c\u4e3a\u4e86\u4fdd\u6301\u4e00\u81f4\u6027\uff0c\u5728\u5b58\u5165\u65f6\u5e0c\u671b\u5c06\u6240\u6709\u7684\u952e\u90fd\u8f6c\u6210 str\u3002\u4f46\u662f\u5728\u67e5\u8be2\u7684\u65f6\u5019\uff0c\u4e3a\u4e86\u65b9\u4fbf\u67e5\u8be2\uff0c\u7528\u6570\u5b57\u505a\u952e\u4e5f\u53ef\u4ee5\u3002<code>d[13]=d['13']</code>\uff0c\u4f46\u662f\u5b58\u7684\u65f6\u5019\u662f str\uff0c\u6ce8\u5b9a\u4e0d\u4f1a\u627e\u5230\uff0c\u6240\u4ee5\u5728 <code>__missing__</code> \u91cc\u8fdb\u884c\u518d\u8f6c str \u518d\u67e5\u8be2\u3002</p> <pre><code>from collections import UserDict\nclass StrKeyDict(UserDict):\n    def __missing__(self, k):\n        if isinstance(k, str):\n            raise KeyError(key)\n        return self[str(key)]\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#init","title":"init","text":"<p><code>__init__(self, *args, **kwargs)</code> \u27a1\ufe0f <code>myclass = MyClass(params)</code> \u6839\u636e\u7c7b\u521b\u5efa\u65b0\u5b9e\u4f8b\u65f6\uff0cPython\u90fd\u4f1a\u81ea\u52a8\u8fd0\u884c\u5b83\u3002 \u4e0d\u7528\u663e\u5f0f\u5730\u5305\u542breturn\u8bed\u53e5\uff0c\u4f46Python\u81ea\u52a8\u8fd4\u56de\u4e00\u4e2a\u8868\u793a <code>NewClass</code> \u7684\u5b9e\u4f8b</p> <p>\u5e8f\u5217\u7c7b\u578b\u7684\u6784\u9020\u6700\u597d\u63a5\u53d7\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\u53c2\u6570</p> <p>\u521b\u5efa\u5b50\u7c7b\u65f6\uff0c\u7236\u7c7b\u5fc5\u987b\u5305\u542b\u5728\u5f53\u524d\u6587\u4ef6\u4e2d\uff0c\u4e14\u4f4d\u4e8e\u5b50\u7c7b\u524d\u9762\u3002\u5b50\u7c7b\u5fc5\u987b\u5728\u62ec\u53f7\u5185\u6307\u5b9a\u7236\u7c7b\u7684\u540d\u79f0</p> <ul> <li><code>super()</code> \u662f\u4e00\u4e2a\u7279\u6b8a\u51fd\u6570\uff0c\u5e2e\u52a9 Python \u5c06\u7236\u7c7b\u548c\u5b50\u7c7b\u5173\u8054\u8d77\u6765\u3002\u8fd9\u884c\u4ee3\u7801\u8ba9 Python \u8c03\u7528 <code>NewClass</code> \u7684\u7236\u7c7b\u7684\u65b9\u6cd5<code>__init__()</code>\uff0c\u8ba9 <code>NewClass</code> \u5b9e\u4f8b\u5305\u542b\u7236\u7c7b\u7684\u6240\u6709\u5c5e\u6027</li> </ul> <pre><code>    def SuperClass():\n\n        def __init__(self, attr1):\n            self.attr1 = attr1\n\n\n    def NewClass(SuperClass):\n\n        def __init__(self, attr1, attr2):\n            super().__init__(attr1)\n            self.attr2 = attr2\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_43","title":"\u79c1\u6709\u5c5e\u6027","text":"<p>1\ufe0f\u20e3 \u9075\u5faa python \u7684\u8bbe\u5b9a <code>__</code>\u4e24\u4e2a\u524d\u5bfc\u7ebf(\u5c3e\u5df4\u6ca1\u6709\u6216\u6700\u591a\u4e00\u4e2a)\u6807\u8bb0\u5c5e\u6027\u4e3a\u79c1\u6709\u7684\u3002 \u540d\u79f0\u6539\u5199\uff0cname mangling\u3002\u4e3a\u4e86\u907f\u514d\u610f\u5916\u8bbf\u95ee(\u4f46\u662f\u5982\u679c\u7528\u6237\u77e5\u9053\u4e86\u79c1\u6709\u5c5e\u6027\u4e5f\u4e0d\u80fd\u9632\u6b62\u7528\u6237\u4fee\u6539\u3002) python \u4f1a\u81ea\u52a8\u628a\u8fd9\u79cd\u7684\u5c5e\u6027\u540d\u5b58\u5165\u5b9e\u4f8b\u7684 <code>__dict__</code> \u5c5e\u6027\u4e2d\uff0c\u800c\u4e14\u4f1a\u5728\u524d\u9762\u52a0\u4e0a\u201d\u4e00\u4e2a\u4e0b\u5212\u7ebf+\u7c7b\u540d\u201c <code>_MyClass</code> \u53d8\u6210 <code>_MyClass__private</code>\u3002 2\ufe0f\u20e3 \u9075\u5faa\u79c1\u4e0b\u7ea6\u5b9a\u4fd7\u6210\u7684\u8bbe\u5b9a <code>_</code>\u4e00\u4e2a\u524d\u5bfc\u7ebf\u3002\u6807\u8bb0\u4e3a\u53d7\u4fdd\u62a4\u7684 python \u4e0d\u4f1a\u5bf9\u8fd9\u79cd\u7684\u5c5e\u6027\u8fdb\u884c\u7279\u6b8a\u5904\u7406\u3002</p> <p>\u5176\u5b9e\u4e0d\u80fd\u5b9e\u73b0\u771f\u6b63\u7684\u79c1\u6709\u548c\u4e0d\u53ef\u53d8\u3002</p> <pre><code>class Vector():\n    def __init__(self, x, y):\n        self.__x = x  # \u4e24\u4e2a\u4e0b\u5212\u7ebf\u6807\u8bb0\u4e3a \u79c1\u6709\u5c5e\u6027\n        self.__y = y\n\n    @property  # \u628a\u8bfb\u503c\u65b9\u6cd5\u6807\u8bb0\u4e3a\u7279\u6027\n    def x(self):  # \u8bfb\u503c\u65b9\u6cd5\u540d\u79f0 x(self) =&gt; \u516c\u5f00\u5c5e\u6027 self.x\n        return self.__x\n\n    @property\n    def yy(self):  # \u8bfb\u503c\u65b9\u6cd5\u540d\u79f0 yy(self) =&gt; \u516c\u5f00\u5c5e\u6027 self.yy\n        return self.__y\nv1 = Vector(1,1)\nv1.__dict__\n# &gt;&gt;&gt; {'_Vector__x': 1, '_Vector__y': 1}\nv1._Vector__x = 2  # \u77e5\u9053\u4e4b\u540e\u6545\u610f\u4fee\u6539\n# &gt;&gt;&gt; v1 = (2, 1) \n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#call","title":"call","text":"<p>\u5bf9\u8c61\u4e5f\u53ef\u4ee5\u6210\u4e3a\u51fd\u6570\u7c7b\u5bf9\u8c61\u3002\u5b9e\u73b0 <code>__call__</code></p> <pre><code>class NormClass():\n    def __init__(self):\n        self.a = 1\n\nclass FuncClass():\n    def __init__(self):\n        self.a = 1\n    def __call__(self):\n        self.a = 2\n\nnorm, func = NormClass(), FuncClass()\n# &gt;&gt;&gt; norm.a = norm.b =1\ncallable(nor)\n# &gt;&gt;&gt; False\ncallable(func)\n# &gt;&gt;&gt; True\nfunc()\n# &gt;&gt;&gt; func.a =2\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#getitem","title":"getitem","text":"<p>\u5207\u7247 slice\u3002</p> <p>\u5982\u679c\u5207\u7247\u4f20\u5165\u4e0d\u5408\u683c\uff1a\u4e00\u822c\u8fd4\u56de <code>msg = f'{cls.__name__} indices must be integers'</code></p> <p>!!!  warning \"\u5982\u679c\u5355\u4e2a\u7d22\u5f15\uff0c\u5c31\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5143\u7d20\uff0c\u5143\u7d20\u7c7b\u578b\u3002 \u4e00\u822c\u5207\u7247\u4e4b\u540e\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b50\u5e8f\u5217\uff0c\u5e8f\u5217\u7684\u7c7b\u578b\"     \u5982\u679c\u6709\u5e95\u5c42\u5e8f\u5217\u7c7b\u578b\uff0c\u53ef\u4ee5\u59d4\u6258\uff0c\u4f46\u4e0d\u80fd\u5355\u7eaf\u59d4\u6258\u7ed9\u5177\u6709\u5e8f\u5217\u534f\u8bae\u7684\u5c5e\u6027\uff0c\u9700\u8981 \u989d\u5916\u5904\u7406\u4e00\u4e0b     \u5982\u679c\u6ca1\u6709\u5e95\u5c42\u7684\u5e8f\u5217\u7c7b\u578b\uff0c\u53ef\u4ee5\u7528 <code>slice</code> \u8fdb\u884c\u64cd\u4f5c\u3002\uff08\u53c2\u89c1\u5411\u91cf\u7c7b\u578b\uff09</p> <p>\u5207\u7247\u539f\u7406</p> <p>\u5355\u4e2a\u5207\u7247\u8fd4\u56de <code>silce(start, stop, step)</code>; \u591a\u4e2a\u5207\u7247(\u6709 <code>,</code> )\u8fd4\u56de <code>tuple(slice)</code> slice\u3002\u5185\u7f6e\u7c7b\u3002\u6709\u4e2a\u5c5e\u6027 <code>.indices(len)-&gt;(start, stop, stride)</code> \u7ed9\u5b9a\u957f\u5ea6 len \u7684\u5e8f\u5217\uff0c\u8ba1\u7b97 S \u8868\u793a\u7684\u6269\u5c55\u5207\u7247\u7684\u8d77\u59cb &amp; \u7ed3\u5c3e &amp; \u6b65\u4f10\uff0c\u4f7f\u5176\u4e0d\u8d85\u51fa\u5217\u8868\u5e8f\u5217\u957f\u5ea6&amp;\u8f6c\u6362\u8d1f\u6570\u3002</p> <pre><code>class Seq():\n    def __getitem__(self, index):\n        return index\ns = Seq()\n# &gt;&gt;&gt; s[1] =1 \u5355\u7d22\u5f15\u5c31\u662f\u60f3\u8981\u7684\u7d22\u5f15\n# &gt;&gt;&gt; s[:]=slice(None, None, None)\n# &gt;&gt;&gt; s[1:4:2]=slice(1, 4, 2)\n# &gt;&gt;&gt; s[1:4, 9]=(slice(1, 4, None), 9)\n# &gt;&gt;&gt; s[1:4, 5:7]=(slice(1, 4, None), slice(5, 7, None))\nslice(-3, None, None).indices(5)\n# &gt;&gt;&gt; (2, 5, 1)\n</code></pre> <p>\u52a8\u6001\u5b58\u53d6\u3002</p> <p>\u5982\u679c\u5e8f\u5217\u91cc\u6709\u592a\u591a\u5206\u91cf\uff0c\u4e3a\u4e86\u65b9\u4fbf\u8bbf\u95ee\uff0c\u901a\u8fc7\u5355\u5b57\u6bcd\u8bbf\u95ee\u524d\u51e0\u4e2a\u5206\u91cf\u3002</p> <p>\u5c5e\u6027\u67e5\u627e\u5931\u8d25\u540e\uff0c\u89e3\u91ca\u5668\u4f1a\u8c03\u7528</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#setitem","title":"setitem","text":"<p><code>__setitem__(self, idx, new):</code> \u27a1\ufe0f <code>myclass[idx]=new</code> []\u4fee\u6539 \u5728\u4e0d\u7834\u574f\u7c7b\u7684\u5c01\u88c5\u6027\u7684\u540c\u65f6\uff0c\u5bf9\u5e8f\u5217\u7c7b\u8fdb\u884c\u4fee\u6539\u3002</p> <p>\u968f\u673a\u6253\u4e71 shuffle \u9700\u8981\u8c03\u8f6c\u5e8f\u5217\u4e2d\u5143\u7d20\u7684\u4f4d\u7f6e\uff0c\u5373\u53ef\u53d8\u534f\u8bae\uff0c\u9700\u8981<code>__setitem__</code></p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#iterableobject","title":"IterableObject \u53ef\u8fed\u4ee3\u5bf9\u8c61","text":"<p>\u5982\u679c\u6211\u4eec\u53ef\u4ee5\u4ece\u4e2d\u83b7\u53d6\u8fed\u4ee3\u5668\uff0c\u5219\u8be5\u5bf9\u8c61\u79f0\u4e3a iterable \u7684\u3002 \u53ea\u8981\u5bf9\u8c61\u662f\u53ef\u8fed\u4ee3\u7684, \u5c31\u53ef\u4ee5\u6267\u884c==\u5206\u89e3\u64cd\u4f5c==</p> <p>IterableObject \u5fc5\u987b\u5b9e\u73b0\u4e24\u4e2a\u7279\u6b8ameth:</p> <ol> <li>\u652f\u6301\u534f\u8bae\uff08\u4e8c\u9009\u4e00\u6ee1\u8db3\u5373\u53ef\uff09</li> <li>\u8fed\u4ee3\u534f\u8bae\uff0citeration protocol\uff0c<code>__iter__(self)</code>  \u5e76\u8fd4\u56de<code>self</code></li> <li>\u5e8f\u5217\u534f\u8bae\uff0csequence protocol <code>__getitem__()</code></li> <li> <p><code>__next __(self)</code>, \u9010\u4e2a\u8bbf\u95ee\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\u3002</p> <p><code>StopIteration</code> \u5f02\u5e38</p> <p>\u8d85\u51fa\u8303\u56f4</p> </li> </ol> <pre><code>class Users:\n  def __init__(self, data):\n    self.data = data\n    self.index = 0 \n\n  def __iter__(self):\n    \"\"\"\n    #@summary: \u521d\u59cb\u5316\u4e00\u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61\n    #@call: iter(users)\n    \u901a\u5e38\u53ea\u4f1a\u8fd4\u56deself\uff0c\u5b83\u6301\u6709\u5f53\u524d\u5b9e\u4f8b\n    \"\"\"    \n    return self\n\n  def __next__(self):\n    \"\"\"\n    #@summary: \u9010\u4e2a\u8bbf\u95ee\u5bb9\u5668\u4e2d\u7684\u5143\u7d20.\n    #@call: next(Iterator)\n    # for\u5faa\u73af\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u4e0d\u65ad\u8bbf\u95ee\u4e0b\u4e00\u4e2a\uff0c\u5f53\u6ca1\u6709\u7684\u65f6\u5019\u4f1a StopIteration Error\n    \"\"\"\n    if self.index &lt; len(self.data):\n      value = self.data[self.index]\n      self.index += 1\n      return value\n    else:\n      raise StopIteration\n    ... \n\n&gt;&gt;&gt; users = Users(data)\n&gt;&gt;&gt; users_iterator = iter(users)\n&gt;&gt;&gt; for user in users_iterator:\n&gt;&gt;&gt;    ...\n&gt;&gt;&gt; for i in range(len(users_iterator)):\n&gt;&gt;&gt;    user = next(users_iterator)\n</code></pre> <p>\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u8d4b\u503c</p> <p>\u4e0d\u9700\u8981\u6216\u8005\u4e0d\u5b9a\u91cf\u7684\u65f6\u5019, <code>*variables</code>\u53ef\u5728\u5f00\u5934\u4e5f\u53ef\u5728\u7ed3\u5c3e</p> <pre><code>&gt;&gt;&gt; lst = [1, 2, 3, 4]\n&gt;&gt;&gt; *dontneed, a, b = lst\n# dontneed=[1, 2], a=3, b=4\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_44","title":"\u5b57\u7b26\u4e32\u8868\u73b0\u5f62\u5f0f","text":"<p>\u5b57\u7b26\u4e32\u8868\u73b0\u5f62\u5f0f\u3002\u628a\u4e00\u4e2a\u5bf9\u8c61\u7528\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8868\u8fbe\u51fa\u6765\u3002\u8fd4\u56de\u7684\u5e94\u8be5\u662f\u5b57\u7b26\u4e32\u3002</p> <ul> <li><code>__repr__(self)</code> \u2194\ufe0f \u63a7\u5236\u53f0<code>myclass</code>  | <code>repr(myclass)</code> \u4fbf\u4e8e\u5f00\u53d1\u8005\u7406\u89e3\u3002\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\u5e94\u8be5\u51c6\u786e\u3001\u65e0\u6b67\u4e49\u3001\u5e76\u4e14\u5c3d\u53ef\u80fd\u8868\u8fbe\u51fa\u5982\u4f55\u7528\u8fd9\u4e2a\u4ee3\u7801\u521b\u5efa\u51fa\u8fd9\u4e2a\u88ab\u6253\u5370\u7684\u5bf9\u8c61\u3002\u65b9\u4fbf\u8c03\u8bd5\u548c\u8bb0\u5f55\u65e5\u5fd7</li> <li><code>__str__(self)</code> \u2194\ufe0f <code>print(myclass)</code> | <code>str(myclass)</code> \u4fbf\u4e8e\u7528\u6237\u7406\u89e3\u3002</li> <li><code>__bytes__(self)</code> \u2194\ufe0f <code>bytes()</code> \u83b7\u53d6\u5bf9\u8c61\u7684\u5b57\u8282\u5e8f\u5217\u8868\u73b0\u5f62\u5f0f\u3002</li> <li><code>__format__(self, format_spec)</code> \u2194\ufe0f <code>format(obj, format_spec)</code> | <code>str.format()</code> <code>format_spec</code> \u683c\u5f0f\u8bf4\u660e\u7b26\u53f7 <code>'.4f'</code> \u4f7f\u7528\u7279\u6b8a\u7684\u683c\u5f0f\u663e\u793a\u5bf9\u8c61\u7684\u5b57\u7b26\u4e32\u8868\u73b0\u5f62\u5f0f\u3002 \u5982\u679c\u6ca1\u6709\u5b9a\u4e49<code>__format__</code>, <code>format()</code> \u4f1a\u627e<code>__str__</code>\uff0c\u4f46\u4e0d\u80fd\u4f20\u5165 format_spec\uff0c\u5426\u5219\u5c31\u4f1a <code>TypeError</code></li> </ul> <p>\u5982\u679c\u975e\u8981\u4e8c\u8005\u9009\u5176\u4e00\u6765\u5b9e\u73b0\uff0c<code>__repr__</code> \u662f\u66f4\u597d\u7684\u9009\u62e9\u3002\u56e0\u4e3a\u5f53\u6ca1\u6709 <code>__str__</code> \u65f6\uff0c \u89e3\u91ca\u5668\u4f1a\u627e <code>__repr__</code></p> <p>\u683c\u5f0f\u89c4\u8303\u5fae\u8bed\u8a00 format_spec\u3002\u6307\u5bfc\u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u3002</p> <p>int \uff1a<code>bedoxXn</code> ; float\uff1a<code>eEfFgGcn</code>\uff1b str\uff1a<code>s</code> \u81ea\u5b9a\u4e49\u683c\u5f0f\u4ee3\u7801\u5c3d\u91cf\u907f\u514d\u4f7f\u7528\u5df2\u6709\u7684\uff0c\u800c\u4e0d\u81f3\u4e8e\u4f7f\u522b\u7684\u8bfb\u8005\u56f0\u60d1\u3002</p> <p><code>'b'</code> \u4e8c\u8fdb\u5236 int &amp; <code>'x'</code> \u5341\u516d\u8fdb\u5236 int <code>'f'</code> \u5c0f\u6570\u5f62\u5f0f float <code>'.4f'</code> &amp; <code>'%'</code> \u767e\u5206\u6570\u5f62\u5f0f float</p> <p>\u5173\u4e8e\u663e\u793a\u4e0a</p> <ul> <li>\u5982\u679c\u5206\u91cf\u592a\u591a\uff0c\u8003\u8651\u7528 <code>...</code> \u8868\u793a\u622a\u65ad\u90e8\u5206\uff0c\u800c\u4e0d\u9700\u8981\u5c55\u5f00\u5f88\u591a\u7684\u6570\u636e\u5360\u636e\u89c6\u7a97\uff0c\u540c\u65f6\u63d0\u9192\u4e0d\u6b62\u5c55\u73b0\u8fd9\u51e0\u884c. <code>reprlib.repr(data)</code> \u8d85\u8fc76\u4e2a\u5143\u7d20\uff0c\u7528\u7701\u7565\u53f7\u4ee3\u66ff\u3002\u7528\u4e8e\u751f\u6210\u5927\u578b\u7ed3\u6784\u6216\u9012\u5f52\u7ed3\u6784\u7684\u5b89\u5168\u8868\u73b0\u5f62\u5f0f\uff0c\u9650\u5236\u5b57\u7b26\u4e32\u8f93\u51fa\u957f\u5ea6\u3002</li> </ul> <p><pre><code>import reprlib\nreprlib.repr([1,2,3,4,5,6,7,8])\n# &gt;&gt;&gt; '[1, 2, 3, 4, 5, 6, ...]'\nreprlib.repr([1,2,3])\n# &gt;&gt;&gt; '[1, 2, 3]'\n</code></pre> - \u91cd\u70b9\u662f\u5728\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u6784\u9020\u7ec6\u8282\u3002\u5728\u663e\u793a\u4e0a\u53ef\u4ee5\u7b80\u5316\uff0c\u53ea\u51fa\u73b0\u5185\u5bb9\u3002</p> <p><code>Vector(1, 2)</code> &amp; <code>Vector(array('d', [1, 2]))</code> array \u662f\u5b9e\u73b0\u7ec6\u8282\uff0c\u4e0d\u9700\u8981\u5c55\u793a\u4ee5\u514d\u590d\u6742\u3002</p> <p>\u4e8c\u7ef4\u5411\u91cf</p> <pre><code>class Vector():\n    ...\n    def __abs__(self):\n        \"\"\" \u6a21 \"\"\"\n    def __angle__(self):\n        \"\"\" \u89d2\u5ea6 \"\"\"\n    def __format__(self, fmt_spec=''):\n        if fmt_spc.endswith('p'):  # \u6781\u5750\u6807\n            fmt_spec = fmt_spec[:-1]\n            coords = (abs(self), self.angle())\n            outer_fmt = '&lt;{},{}&gt;'\n        else:  # \u76f4\u89d2\u5750\u6807\n            coords = self\n            outer_fmt = '({},{})'\n        data = (format(item, fmt_spec) for item in coords)\n        return outer_fmt.format(*data)\n\nv = Vector(1, 1)\nformat(v, '.3ep')\n# &gt;&gt;&gt; '&lt;1.414e+00, 7.854e-01&gt;'\nformat(v, '.5fp')\n# &gt;&gt;&gt; '&lt;1.41421, 0.78540&gt;'\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_45","title":"\u91cd\u8f7d\u8fd0\u7b97\u7b26","text":"<p>\u91cd\u8f7d\u8fd0\u7b97\u7b26\u662f\u4e3a\u4e86\u8ba9\u81ea\u5b9a\u4e49\u5bf9\u8c61\u4f7f\u7528 \u4e2d\u7f00\u8fd0\u7b97\u7b26 <code>+ |</code> &amp; \u4e00\u5143\u8fd0\u7b97\u7b26 <code>- ~</code></p> <p>\u4e2d\u7f00\u8fd0\u7b97\u7b26\u7684\u57fa\u672c\u539f\u5219\u662f\u521b\u5efa\u5e76\u8fd4\u56de\u7c7b\u578b\u5408\u9002\u7684\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\uff0c\u800c\u4e0d\u6539\u53d8\u64cd\u4f5c\u5bf9\u8c61\u672c\u8eab\u3002\u53ea\u6709\u589e\u91cf\u8d4b\u503c\u53ef\u80fd\u4fee\u6539\u7b2c\u4e00\u4e2a\u64cd\u4f5c\u5bf9\u8c61 \u4e0d\u80fd\u91cd\u8f7d\u5185\u7f6e\u7c7b\u578b\u7684\u8fd0\u7b97\u7b26  \u4e0d\u80fd\u65b0\u5efa\u8fd0\u7b97\u7b26\uff0c\u53ea\u80fd\u91cd\u8f7d\u3002 \u4e0d\u80fd\u91cd\u8f7d <code>is and or not</code>  \u5f53\u5e8f\u5217\u8fdb\u884c\u6309\u5143\u7d20\u8fd0\u7b97\uff0c\u8981\u5904\u7406\u5e8f\u5217\u957f\u5ea6\u4e0d\u4e00\u7684\u60c5\u51b5\u3002\uff08\u8fed\u4ee3\u591a\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61<code>itertools.zip_longest(.., fillvalue=None)</code>\uff09</p> magic \u8fd0\u7b97\u7b26 meaning <code>__add__(self, other)</code> <code>a+b</code> \u76f8\u52a0\u5e8f\u5217\u4e00\u822c\u62fc\u63a5 <code>__mul__(self, other)</code> <code>a*b</code> \u6807\u91cf\u79ef\u76f8\u4e58\u5e8f\u5217\u4e00\u822c\u590d\u5236 <code>__neg__(self)</code> <code>-a</code> \u4e00\u5143\u53d6\u53cd <code>__pos__(self)</code> <code>+a</code> \u4e00\u5143\u53d6\u6b63 \u901a\u5e38 <code>x==+x</code> <code>__invert__(self)</code> <code>~a</code> \u5bf9\u6574\u6570\u6309\u4f4d\u53d6\u53cd <p><code>i</code> \u5c31\u5730\u8fd0\u7b97\uff0c\u589e\u91cf\u8d4b\u503c\u53ef\u80fd\u4fee\u6539\u7b2c\u4e00\u4e2a\u64cd\u4f5c\u5bf9\u8c61  <code>r</code> \u53cd\u5411\u8fd0\u7b97\uff0c\u53f3\u4f4d</p> <p><code>__radd___</code> \u662f <code>__add__</code> \u7684 \u53cd\u5c04 reflected | \u53cd\u5411 reversed</p> <p><code>__add__(a,b) = a+b</code> \u5de6\u4f4d &amp; <code>__iadd__(a,b)= a+=b</code> &amp; <code>__radd__(a,b) = b+a</code> \u53f3\u4f4d</p> <p>\u7279\u6b8a\u7684\u5206\u914d\u673a\u5236\u3002</p> <p></p> <p>\u7b97 <code>a+b</code>\uff0ca\u5de6b\u53f3\u3002\u5148\u627e a \u6709\u6ca1\u6709\u5de6\u52a0b(1.\u6709\u6ca1\u6709\u5de6\u52a0\uff1b2.\u80fd\u4e0d\u80fd\u5de6\u52a0b)\uff0c\u4e0d\u80fd\u7684\u8bdd\u518d\u627eb\u6709\u6ca1\u6709\u53f3\u52a0a(1.\u6709\u6ca1\u6709\u53f3\u52a0\uff1b2.\u80fd\u4e0d\u80fd\u53f3\u52a0a)</p> <p><code>x==+x</code> \u7684\u7279\u6b8a\u60c5\u51b5:\u5f53\u7cbe\u5ea6\u4e0d\u4e00\u6837\u7684\u65f6\u5019\u4f1a <code>False</code></p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#hash","title":"hash","text":"<p>\u53ef\u6563\u5217\u7c7b\u578b hashable\u3002\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u662f\u53ef\u6563\u5217\u7684\uff0c\u90a3\u4e48\u5728\u8fd9\u4e2a\u5bf9\u8c61\u751f\u547d\u5468\u671f\u4e2d\uff0c\u5b83\u7684\u6563\u5217\u503c\u662f\u4e0d\u53d8\u7684\uff0c\u800c\u4e14\u8fd9\u4e2a\u5bf9\u8c61\u9700\u8981\u5b9e\u73b0 <code>.__hash__()</code> &amp; <code>.__eq__()</code> \u3002\u56e0\u4e3a<code>hash()</code> \u65b9\u6cd5\u53ef\u4ee5\u4f5c\u7528\u4e8e\u5bf9\u8c61\u4e0a\uff0c\u5e76\u4e14\u5982\u679c\u4e24\u4e2a\u53ef\u6563\u5217\u7684\u5bf9\u8c61\u662f\u76f8\u7b49\uff0c\u90a3\u4e48\u6563\u5217\u503c\u4e00\u5b9a\u662f\u4e00\u6837\u3002</p> <p>\u76ee\u7684\uff1a \u5bf9\u8c61\u4e0d\u53ef\u4fee\u6539\u3002\u5c06\u81ea\u5b9a\u4e49\u7c7b\u91cc\u7684 <code>__init__</code> \u91cc\u7684\u5143\u7d20\u8bbe\u4e3a\u53ea\u8bfb\u6a21\u5f0f \u6563\u5217\u503c\u552f\u4e00\u3002\u63a8\u8350\u4f7f\u7528\u4f4d\u8fd0\u7b97\u7b26\u5f02\u6216 <code>^</code> \u6df7\u5408\u4e2a\u5206\u91cf\u7684\u6563\u5217\u503c</p> <ol> <li><code>__</code></li> </ol> <pre><code>class Vector():\n    def __init__(self, x, y):\n        self.__x = x  # \u4e24\u4e2a\u4e0b\u5212\u7ebf\u6807\u8bb0\u4e3a \u79c1\u6709\u5c5e\u6027\n        self.__y = y\n\n    @property  # \u628a\u8bfb\u503c\u65b9\u6cd5\u6807\u8bb0\u4e3a\u7279\u6027\n    def x(self):  # \u8bfb\u503c\u65b9\u6cd5\u540d\u79f0 x(self) =&gt; \u516c\u5f00\u5c5e\u6027 self.x\n        return self.__x\n\n    @property\n    def yy(self):  # \u8bfb\u503c\u65b9\u6cd5\u540d\u79f0 yy(self) =&gt; \u516c\u5f00\u5c5e\u6027 self.yy\n        return self.__y\n\n    def __iter__(self):\n        return (i for i in (self.x, self.yy))\n\n    def __hash__(self):  # \u5f02\u6216 '^' \u6df7\u5408\u4e2a\u5206\u91cf\u7684\u6563\u5217\u503c\n        return hash(self.x) ^ hash(self.yy)\n\n    def __eq__(self, other):\n        return tuple(self) == tuple(other)\n\n    def __repr__(self):\n        return f'({self.x}, {self.yy})'\n\nset([Vector(1,1), Vector(1,1), Vector(1,2)])\n# &gt;&gt;&gt; {(1, 1), (1, 2)}\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_46","title":"\u4e00\u4e9b\u4f18\u5316","text":"<p>\u5982\u679c\u6570\u767e\u4e07\u4e2a\u6570\u503c\uff0c\u4f7f\u7528 numpy</p> <p><code>__slots__</code> \u8282\u7701\u7a7a\u95f4\uff0c\u5efa\u8bae\u50a8\u5b58\u6570\u767e\u4e07\uff08\u800c\u4e0d\u662f\u51e0\u5343\uff09\u4f7f\u7528\uff0c\u800c\u4e14\u5185\u5b58\u4e25\u91cd\u4e0d\u8db3\u65f6\u3002 \u4e3a\u63d0\u9ad8\u8bbf\u95ee\u901f\u5ea6\uff0cpython \u5728\u5b9e\u4f8b\u4e2d\u5c06\u5c5e\u6027\u5b58\u8fdb dict\uff0c\u4f46\u6d88\u8017\u5927\u91cf\u5185\u5b58\u3002\u4f7f\u7528 <code>__slots__</code>\uff0cpython \u5728\u5b9e\u4f8b\u4e2d\u5c06\u5c5e\u6027\u5b58\u8fdb tuple\uff0c \u8282\u7701\u5185\u5b58\u3002\uff08\u6709\u70b9\u50cf namedtuple\uff0c\u544a\u8bc9 python \u8fd9\u4e2a\u7c7b\u4e2d\u6240\u6709\u7684\u5b9e\u4f8b\u5c5e\u6027\u90fd\u5728\u8fd9\u91cc\uff09</p> <p>!!! warning \u3010\u526f\u4f5c\u7528\u3011\u5728\u7c7b\u4e2d\u5b9a\u4e49\u4e86 <code>__slots__</code> \u5916\uff0c\u5b9e\u4f8b\u4e2d\u4e0d\u5141\u8bb8 <code>__slots__</code> \u5b58\u50a8\u540d\u79f0\u4ee5\u5916\u7684\u5c5e\u6027\u3002</p> <pre><code>class Vector():\n    __slots__ = ('x', 'y')  # \u7531\u5b57\u7b26\u4e32\u7ec4\u6210\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u5404\u4e2a\u5143\u7d20\u8868\u793a\u5c5e\u6027\n    # __slots__ = ('__x', '__y')\n\n    def __init__(self, x, y):\n        ...\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_47","title":"\u91cd\u5199","text":"<p>\u5bf9\u4e8e\u7236\u7c7b\u7684\u65b9\u6cd5\uff0c\u53ea\u8981\u5b83\u4e0d\u7b26\u5408\u5b50\u7c7b\u6a21\u62df\u7684\u5b9e\u7269\u7684\u884c\u4e3a\uff0c\u90fd\u53ef\u5bf9\u5176\u8fdb\u884c\u91cd\u5199\u3002\u4e3a\u6b64\uff0c\u53ef\u5728\u5b50\u7c7b\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u8fd9\u6837\u7684\u65b9\u6cd5\uff0c\u5373\u5b83\u4e0e\u8981\u91cd\u5199\u7684\u7236\u7c7b\u65b9\u6cd5\u540c\u540d\u3002\u8fd9\u6837\uff0cPython\u5c06\u4e0d\u4f1a\u8003\u8651\u8fd9\u4e2a\u7236\u7c7b\u65b9\u6cd5\uff0c\u800c\u53ea\u5173\u6ce8\u4f60\u5728\u5b50\u7c7b\u4e2d\u5b9a\u4e49\u7684\u76f8\u5e94\u65b9\u6cd5</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#re","title":"Re","text":"<ul> <li><code>flags=0</code> \u7528\u4e8e\u63a7\u5236\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5339\u914d\u65b9\u5f0f\uff0c\u5982\uff1a\u662f\u5426\u533a\u5206\u5927\u5c0f\u5199\uff0c\u591a\u884c\u5339\u914d\u7b49\u7b49<ul> <li>re.I \u5ffd\u7565\u5927\u5c0f\u5199</li> <li>re.X \u4e3a\u4e86\u589e\u52a0\u53ef\u8bfb\u6027\uff0c\u5ffd\u7565\u89c4\u5219\u8868\u8fbe\u5f0f\u4e2d\u7684\u7a7a\u767d\u548c\u6ce8\u91ca\uff0c\u5e76\u5141\u8bb8\u4f7f\u7528 \u2019#\u2019 \u6765\u5f15\u5bfc\u4e00\u4e2a\u6ce8\u91ca\u3002\u8fd9\u6837\u53ef\u4ee5\u8ba9\u4f60\u628a\u89c4\u5219\u5199\u5f97\u66f4\u7f8e\u89c2\u4e9b\u3002</li> </ul> </li> </ul> symbol meaning special usage <code>\\D</code> \u4efb\u4f55\u975e\u5341\u8fdb\u5236\u6570\u5b57\u7684\u5b57\u7b26 <code>re.sub(r'\\D', '', string)</code> \u53ea\u4fdd\u7559\u5341\u8fdb\u5236\u6570\u5b57 <code>[0-9-]+</code> 0-9 \u8fd8\u6709<code>-</code>\u53f7, <code>+</code>\uff1a\u4e0d\u6b62\u4e00\u4e2a <code>re.match('[0-9-]+', string)</code> \u63d0\u53d6\u7684\u4ec5\u5305\u542b\u6570\u5b57\u548c-\u7684\u7535\u8bdd\u53f7\u7801 <ul> <li> <p><code>re.match(pattern, string, flags=0)</code></p> <ul> <li>\u4ece\u5b57\u7b26\u4e32\u7684\u8d77\u59cb\u4f4d\u7f6e\u5339\u914d\u4e00\u4e2a\u6a21\u5f0f</li> <li>\u6210\u529f <code>return &lt;re.Match object; span=(0, end_idx), match=pattern&gt;</code><ul> <li><code>&lt;re.Match object&gt;.group()</code> \u8fd4\u56de\u6b63\u5219\u5339\u914d\u7684\u5b57\u7b26\u4e32</li> <li><code>&lt;re.Match object&gt;.start()</code>, <code>&lt;re.Match object&gt;.end()</code></li> <li><code>&lt;re.Match object&gt;.span()</code>: (start, end)</li> <li>\u4e0d\u662f\u8d77\u59cb\u4f4d\u7f6e\u5339\u914d\u6210\u529f <code>return None</code></li> </ul> </li> </ul> </li> <li> <p><code>re.sub(pattern, repl, string, count=0, flags=0)</code></p> <ul> <li><code>count=0</code>: \u6a21\u5f0f\u5339\u914d\u540e\u66ff\u6362\u7684\u6700\u5927\u6b21\u6570\uff0c\u9ed8\u8ba4 0 \u8868\u793a\u66ff\u6362\u6240\u6709\u7684\u5339\u914d\u3002</li> </ul> </li> </ul>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_48","title":"\u7528\u6237\u4ea4\u4e92","text":"","tags":["Foo","Bar"]},{"location":"python/python_elegant/#input","title":"Input","text":"<p>input \u63a5\u6536\u540e\u5b57\u7b26\u4e32\u6027\u8d28</p> <pre><code>a = input('plz input a number:')\n# &gt;&gt;&gt; plz input a number: 9\n# &gt;&gt;&gt; a = '9'\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_49","title":"\u8bfb\u7167\u7247","text":"<pre><code>from PIL import Image\nimg = Image.open(image_path) # PIL.....\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#output","title":"output  \u683c\u5f0f\u5316\u8f93\u51fa","text":"<ul> <li> <p>print</p> <ul> <li><code>end = '\\n'</code></li> <li><code>sep = ''</code></li> </ul> <pre><code>print(\"aaaa\",end='')\nprint(\"bbbb\",end='&amp;')\nprint(\"cccc\",end='@')\n# &gt;&gt;&gt; aaaabbbb&amp;cccc@\nprint('a', 'b', sep='__', end = '@')\n# &gt;&gt;&gt; a__b@\n</code></pre> </li> <li> <p>str.format</p> </li> <li>f-string Python3.6 \u65b0\u589e\u4e86\u4e00\u79cd f-\u5b57\u7b26\u4e32\u683c\u5f0f\u5316\uff0c\u4e5f\u53ef\u4ee5\u5199\u6210print(f\"\u8bad\u7ec3\u6570\u636e\u96c6\u7684\u957f\u5ea6\u4e3a:{train_data_size}\")</li> </ul>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_50","title":"\u8bfb\u5199\u6587\u4ef6","text":"","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_51","title":"\u6587\u4ef6\u8def\u5f84","text":"<pre><code>import os\nfiles_lst = os.listdir('dirctory_path')\n</code></pre> <p>\u6587\u4ef6\u5185\u5bb9\u5206\u7c7b</p> <p>\u6587\u4ef6\u64cd\u4f5c\u5206\u7c7b</p> <code>r</code>\u53ea\u8bfb <code>w</code>\u53ea\u5199 <code>a</code>\u53ea\u8ffd\u52a0\u5199 <code>+</code> \u6587\u4ef6\u4e0d\u5b58\u5728 \u274c \u6307\u9488 \u5f00\u5934 <p>\u7559\u610f\u6307\u9488</p> <p>\u5199\u5b8c\u518d\u8bfb\u5c31\u4f1a\u8bfb\u4e0d\u51fa\u4e1c\u897f</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#txt","title":"txt","text":"<p>read(), readline(), readlines()</p> <code>read(limit)</code>limit:int \u9650\u5236\u8bfb\u7684\u5185\u5b58\u5b57\u8282 <code>readline()</code> <code>readlines()</code> \u8bfb\u53d6 \u5168\u90e8 \u9010\u884c \u5168\u90e8 \u8fd4\u56de str str list \u6bcf\u4e00\u884c\u5206\u79bb \u274c \u2714 \u2714 notes \u5168\u90e8\u8bfb\u53d6\u7684\u9700\u8981\u8003\u8651\u5185\u5b58 ^ <code>readlines()</code>\u6bd4<code>readline()</code>\u5feb <pre><code>\"\"\"1.txt\naaa\nbbb\n\n\n\"\"\"\nwith open('1.txt', 'r', encoding='utf-8') as f:\n    res = f.read()  # \u8bfb\u5168\u90e8\n# &gt;&gt;&gt; 'aaa\\nbbb\\n\\n'\n\nwith open('1.txt', 'r', encoding='utf-8') as f:\n    res = []\n    line =  f.readline()  # \u7b2c\u4e00\u884c\n    while line is not None and line != '':\n        res.append(line)\n        line =  f.readline()  # \u9010\u884c\u8bfb\u53d6\n# &gt;&gt;&gt; ['aaa\\n', 'bbb\\n', '\\n']\n\nwith open('1.txt', 'r', encoding='utf-8') as f:\n    res = f.readlines()\n# &gt;&gt;&gt; ['aaa\\n', 'bbb\\n', '\\n']\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#json","title":"json","text":"<pre><code>import json\ntry:\n    with open(json_path, 'r', encoding='utf-8') as f:\n        data_dict = json.load(f)\nexcept FileNotFoundError:\n    print(f'{json_path} doesnt exist.')\n    return ''\n\nwith open('./built-in.json', 'w', encoding='utf-8') as f:\n    json.dump(res, f, indent=4, ensure_ascii=False)\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_52","title":"\u5feb\u901f\u5e8f\u5217","text":"<ul> <li><code>pickle</code> \u5feb\u901f\u5e8f\u5217\u5316\u6570\u5b57\u7c7b\u578b\u3002\u53ef\u4ee5\u5904\u7406\u51e0\u4e4e\u6240\u6709\u7684\u7c7b\u578b\u3002</li> </ul>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_53","title":"\u6d4b\u8bd5","text":"","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_54","title":"\u65f6\u95f4","text":"<p>\u7b80\u5355\u611f\u89c9\u65f6\u95f4\u53ef\u7528time\uff0c\u4f46\u662f\u5bf9\u4f18\u5316\u6765\u8bf4\uff0c\u5f97\u770bquota\uff0c\u770b\u54ea\u90e8\u5206\u5360\u6bd4\u6bd4\u8f83\u660e\u663e\uff0c\u5982\u679c\u662f\u90a3\u4e9b\u5916\u8c03\u7684\u51fd\u6570\u6bd4\u8f83\u660e\u663e\u7684\u8bdd\uff0c\u90a3\u4e5f\u6728\u6709\u529e\u6cd5\u3002</p> <p>\u52a0\u8f7d\u6a21\u578b\u5c3d\u91cf\u5728\u5916\u90e8\u4e00\u6b21\u52a0\u8f7d\uff0cload\u662f\u6bd4\u8f83\u6162\u7684\uff0c\u4e0d\u8981\u6bcf\u6b21\u8c03\u6bcf\u6b21\u90fd\u52a0\u8f7d\u3002</p>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#time","title":"time","text":"<pre><code>import time\n\nstart = time.time()\nmain()\nprint(time.time()-start)  # \u79d2\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#cprofile-pstats","title":"<code>cProfile</code> + <code>pstats</code>","text":"<code>cProfile</code> \u7ed3\u679c\u5217 \u610f\u601d ncalls \u8c03\u7528\u6b21\u6570 tottime \u5728\u6307\u5b9a\u51fd\u6570\u4e2d\u6d88\u8017\u7684\u603b\u65f6\u95f4\uff08\u4e0d\u5305\u62ec\u8c03\u7528\u5b50\u51fd\u6570\u7684\u65f6\u95f4\uff09 percall = tottime / ncalls cumtime \u6307\u5b9a\u7684\u51fd\u6570\u53ca\u5176\u6240\u6709\u5b50\u51fd\u6570\uff08\u4ece\u8c03\u7528\u5230\u9000\u51fa\uff09\u6d88\u8017\u7684\u603b\u65f6\u95f4\u3002 percall = cumtime / ncalls, \u51fd\u6570\u8fd0\u884c\u4e00\u6b21\u7684\u5e73\u5747\u65f6\u95f4 filename \u51fd\u6570\u540d <code>pstats</code> \u51fd\u6570 \u610f\u601d strip_dirs() \u79fb\u9664\u4e86\u6240\u6709\u6a21\u5757\u540d\u79f0\u4e2d\u7684\u591a\u4f59\u8def\u5f84 sort_stats(key) \u5bf9key\u5217==\u964d\u5e8f==\u6392\u5e8f print_stats(n) \u6253\u5370\u7edf\u8ba1\u6570\u636e , default n = all print_callers(n) \u6bcf\u4e2a\u88ab\u5217\u51fa\u7684\u51fd\u6570\u7684\u8c03\u7528\u65b9\u5217\u8868 , default n = all <ol> <li> <p>step1</p> main.py<pre><code>def run():\n    pass\n\nif __name__ == '__main__':\n    for i in rang(10):\n        run()\n</code></pre> </li> <li> <p>python -m cProfile -o output_file main.py</p> </li> <li> <p><code>-o</code> \u5c06\u7ed3\u679c\u5199\u5165\u6587\u4ef6</p> </li> <li> <p>step3</p> analysis.py<pre><code>import pstats\nfrom pstats import SortKey\np = pstats.Stats('./output_file')\n\n# \u6309\u4e00\u4e2a\u51fd\u6570\u4e2d\u7684\u7d2f\u8ba1\u65f6\u95f4\u5bf9\u6027\u80fd\u5206\u6790\u6570\u636e\u8fdb\u884c\u6392\u5e8f,\u6253\u5370\u591a\u768430\u884c\np.sort_stats(SortKey.CUMULATIVE).print_stats(30)\n# \u6bcf\u4e2a\u51fd\u6570\u8017\u8d39\u7684\u65f6\u95f4\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u6253\u5370\u524d\u5341\u4e2a\u51fd\u6570\u7684\u7edf\u8ba1\u6570\u636e \np.sort_stats(SortKey.TIME).print_stats(10)\n# \u4ee5\u65f6\u95f4\u4e3a\u4e3b\u952e\uff0c\u5e76\u4ee5\u7d2f\u8ba1\u65f6\u95f4\u4e3a\u6b21\u952e\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u6253\u537010\u6761\np.sort_stats(SortKey.TIME, SortKey.CUMULATIVE).print_stats(.5)\n</code></pre> </li> </ol>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#error","title":"Error","text":"<pre><code>graph LR\n\ntry --No_error--&gt; else --&gt; finally\ntry --except\u6709\u7684error--&gt; except --&gt; finally\ntry --except\u6ca1\u6709\u7684error --&gt;A{\u62a5\u9519} --&gt; finally</code></pre> <pre><code>def numb(a):\n    try:\n        a = int(a)\n    except (ValueError, OverflowError):\n        print(f'{a} is not valid') \n    else:\n        print(a)\n    finally:\n        print(\"It is over.\")\n\nnumb(2.1)\n# &gt;&gt;&gt; 2\n# &gt;&gt;&gt; It is over.\nnumb('a')\n# &gt;&gt;&gt; a is not valid\n# &gt;&gt;&gt; It is over.\n</code></pre> <p>NotImplementedError \u672a\u5b9e\u73b0\u7236\u7c7b\u63a5\u53e3\u91cd\u5199</p> <p>\u5728\u7ee7\u627f\u7684\u65f6\u5019\uff0c\u7236\u7c7b\u6709\u53ef\u80fd\u7559\u4e0b\u63a5\u53e3\u9700\u8981\u5b50\u7c7b\u53bb\u91cd\u5199\uff0c\u4f46\u5b50\u7c7b\u5e76\u6ca1\u6709\u91cd\u5199. Sol: \u91cd\u5199\u65b9\u6cd5</p> <pre><code>class Parent():\n    def talk(self):\n        rasie NotImplementedError(\"\u6ca1\u6709\u91cd\u5199talk\u65b9\u6cd5\")  # \u5b9e\u73b0\u539f\u7406\n\nclass Children(Parent):\n    pass\na = Children()\na.talk()\n# &gt;&gt;&gt; NotImplementedError: \u6ca1\u6709\u91cd\u5199talk\u65b9\u6cd5\n\nclass TrueChildren(Parent):\n    def talk(self):\n        print(\"aaaaa\")\nb = TrueChildren()\nb.talk()\n# &gt;&gt;&gt; aaaaa\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/python_elegant/#_55","title":"\u5b57\u7b26\u4e32\u76f8\u5173","text":"<p>UnicodeEncodeError\u3002\u9009\u5b9a\u7684\u7f16\u7801\u65b9\u5f0f\u4e0d\u80fd\u7f16\u7801\u8fd9\u4e2a\u5b57\u7b26\u3002 UnicodeDecodeError\u3002\u9009\u5b9a\u7684\u89e3\u7801\u65b9\u5f0f\u4e0d\u80fd\u89e3\u7801\u8fd9\u4e2a\u5b57\u7b26\u3002</p> <p>\u6587\u672c\u5b58\u53d6\u4e71\u7801\u95ee\u9898</p> <ul> <li>\u5b58\u4e71\u4e86\uff0c\u7f16\u7801\u683c\u5f0f\u5e94\u8be5\u8bbe\u7f6e\u6210\u652f\u6301\u6587\u672c\u5185\u5b57\u7b26\u4e32\u7684\u683c\u5f0f\u3002\u65e5\u6587\u5c31\u4e0d\u8981\u7528 gbk</li> <li>\u53d6\u4e71\u4e86\uff0c\u7f16\u7801\u683c\u5f0f\u5e94\u8be5\u5bf9\u5e94\u8be5\u6587\u4ef6\u5b58\u5165\u786c\u76d8\u7684\u683c\u5f0f</li> </ul> <p><code>string.encode(encoding, errors='strict')</code> &amp; <code>string.decode(encoding, errors='strict')</code> \u270f\ufe0f  \u6307\u5b9a errors \u53c2\u6570</p> <ul> <li><code>='strict'</code> \u629b\u51fa Error</li> <li><code>='ignore'</code> \u5ffd\u7565\u8df3\u8fc7\u5b57\u7b26</li> <li><code>='replace'</code> \u66ff\u6362\u6210\u5b98\u65b9\u6307\u5b9a\u7b26\u53f7\uff0c\u8868\u793a\u672a\u77e5\u5b57\u7b26 en\uff1a? &amp; de: \ufffd (U+FFFD)</li> </ul> <pre><code>'\u554a'.encode('shift-jis', errors='replace')\n# &gt;&gt;&gt; b'?'\nb'\\xe9'.decode('utf-8', errors='replace')\n# &gt;&gt;&gt; '\ufffd'\n</code></pre> <p>SyntaxError\u3002\u4f7f\u7528\u9884\u671f\u4ee5\u4e4b\u5916\u7684\u7f16\u7801\u8bb0\u8f7d\u6a21\u5757\u3002 \u270f\ufe0f \u5728\u6587\u4ef6\u9876\u90e8\u6dfb\u52a0 coding \u6ce8\u91ca</p> <pre><code># coding: gbk\n</code></pre>","tags":["Foo","Bar"]},{"location":"python/pytorch/","title":"pytorch","text":""},{"location":"python/pytorch/#configuration","title":"Configuration","text":""},{"location":"python/pytorch/#pytorch_1","title":"pytorch \u5b89\u88c5","text":"<ol> <li>\u662f\u5426\u6709\u663e\u5361\u9a71\u52a8</li> </ol> <p><code>\u4efb\u52a1\u7ba1\u7406\u5668</code> \u770b GPU \u4e00\u822c\u662f NVIDIA \u7684\u3002</p> <ol> <li>pytorch downlaod</li> <li>pytorch V.S.cuda \u67e5\u663e\u5361\u51b3\u5b9apytorch     nvidia-smi  cmds\u67e5\u770b\u663e\u5361\u60c5\u51b5</li> <li>pytorch V.S.python \u67e5pytorch \u51b3\u5b9apython\u865a\u62df\u73af\u5883     conda create -n env_name python=? </li> <li> <p>\u67e5\u67b6\u6784</p> \u67e5\u770b\u67b6\u6784<pre><code>import platfrorm\nprint(platform.uname()[4])\n#&gt;&gt;&gt; arm64\n</code></pre> </li> </ol> <p> </p> <ol> <li> <p>check</p> \u68c0\u67e5\u5b89\u88c5\u6210\u529f<pre><code>import torch\n\nprint(torch.__version__)\nprint(torchvision.__version__)\n\nprint(torch.cuda.is_available()) # windows\nprint(torch.backends.mps.is_available()) # mac\n# &gt;&gt;&gt; True : ok\n</code></pre> </li> </ol> <p><code>torch.cuda.is_avaliable()</code> -&gt; False</p> <ol> <li>\u68c0\u67e5 platform \u662f\u54ea\u4e2a</li> <li>\u68c0\u67e5 gpu \u662f\u5426\u652f\u6301cuda</li> <li>\u68c0\u67e5\u663e\u5361\u9a71\u52a8\u7248\u672c</li> <li>\u68c0\u67e5\u66f4\u65b0\u662f\u5426\u6210\u529f</li> </ol>"},{"location":"python/pytorch/#concept","title":"concept","text":""},{"location":"python/pytorch/#autograd","title":"Autograd","text":"<p>Conceptually, autograd records a graph recording all of the operations that created the data as you execute operations, giving you a directed acyclic graph whose leaves are the input tensors and roots are the output tensors. By tracing this graph from roots to leaves, you can automatically compute the gradients using the chain rule.</p>"},{"location":"python/pytorch/#locally-disable-gradient-computation","title":"locally disable gradient computation","text":""},{"location":"python/pytorch/#_1","title":"\u5b8c\u6574\u7684","text":"<p>\u521d\u6b65\u68c0\u67e5\u6a21\u578b\u662f\u5426\u6709\u5199\u9519</p> <pre><code>model = MyModel()\ninput = torch.ones(batch, input_size)\noutput = model(input)\nprint(output.shape())\n</code></pre>"},{"location":"python/pytorch/#cpu-gpu","title":"cpu &amp; gpu","text":"<p>\u8981\u653e\u8fdbgpu\u7684\u662f</p> <ol> <li>model</li> <li>\u635f\u5931\u51fd\u6570</li> <li>\u6570\u636e\uff08X\uff0clabel\uff09</li> </ol> <p>\u4f7f\u7528\u65b9\u6cd5</p> <pre><code>\"\"\"\n    :meth1: .cuda()\n    \u4f46\u8981\u6ce8\u610f gpu \u662f\u5426\u53ef\u7528\n\"\"\"\nif torch.cuda.is_available():\n    model = model.cuda()\n    loss_fn = loss_fn.cuda()\n\nfor data in dataloader:\n    imgs, targets = data\n    if torch.cuda.is_available():\n        imgs, targets = imgs.cuda(), targets.cuda()\n\n\"\"\"\n    :meth2: .to(device)\n\"\"\"\ndevice = torch.device('cuda' if torch.cuda.is_available() else 'cpu')\n\nmodel.to(device)\nloss_fn.to(device)\n\nfor data in dataloader:\n    imgs, targets = data\n    imgs, targets = imgs.to(device), target.to(device)\n</code></pre>"},{"location":"python/pytorch/#gpu","title":"\u591agpu","text":"<ol> <li> <p>\u9009\u62e9\u4e00\u4e2a\u8fd0\u884c</p> <pre><code>device = torch.device('cuda') # default = \u7b2c\u4e00\u5757\ndevice = torch.device('cuda:0') # \u7b2c\u4e00\u5757\ndevice = torch.device('cuda:1') # \u7b2c\u4e8c\u5757\n</code></pre> </li> <li> <p>\u591agpu\u8fd0\u884c</p> </li> </ol>"},{"location":"python/pytorch/#_2","title":"\u8bad\u7ec3\u548c\u6d4b\u8bd5\u7684\u4e0d\u540c","text":"<p>\u5f53\u4e0d\u6d89\u53ca\u8bad\u7ec3\u65f6\uff1a <code>with torch.no_grad():</code></p> <p>\u53cd\u5411\u4f20\u64ad\u7684\u65f6\u5019\u9700\u8981 tensor \u7684 <code>requires_grad=True</code> \u624d\u80fd\u81ea\u52a8\u6c42\u5bfc\uff0c\u4ece\u800c\u4f18\u5316\u53c2\u6570\u3002\u8fd9\u5176\u4e2d\u6d89\u53ca ==\u6c42\u5bfc\u56fe==\u5373\u5185\u5b58\u7684\u6d88\u8017 \u4f46\u662f\u8bad\u7ec3\u7684\u65f6\u5019\u4e0d\u9700\u8981\u6c42\u5bfc\uff0c\u5728<code>with torch.no_grad():</code>\u4e0b\uff0c\u6240\u6709\u8ba1\u7b97\u5f97\u51fa\u7684tensor\u7684requires_grad\u90fd\u81ea\u52a8\u8bbe\u7f6e\u4e3aFalse\u3002 \u3010pytorch\u7cfb\u5217\u3011 with torch.no_grad():\u7528\u6cd5\u8be6\u89e3</p> <p><code>model.train()</code> &amp; <code>model.eval()</code></p> <p>class:<code>Dropout</code>, :class:<code>BatchNorm</code>, etc. - <code>model.train()</code> \u5199\u5728\u6a21\u578b\u8bad\u7ec3\u524d - <code>model.eval()</code>==<code>module.train(False)</code> \u5199\u5728\u6a21\u578b\u6d4b\u8bd5\u524d <pre><code>for i in range(epoch):\n    model.train()\n    for data in traning_loader:\n        ...\n\n    model.eval()\n    for data in testing_loader:\n        ...\n</code></pre></p> <pre><code>def train(self: T, mode: bool = True) -&gt; T:\n    \"\"\"\n    \u628a\u6a21\u578b\u8c03\u5230 training mode.\n\n    Args:\n        - mode: Bool\n            default = True = \u8bad\u7ec3\u6a21\u5f0f\n            - False = \u6d4b\u8bc4\u6a21\u5f0f\n    \"\"\"\n        ... \n    return self\n\n def eval(self: T) -&gt; T:\n    \"\"\"\n    \u628a\u6a21\u578b\u8c03\u5230 evaluation mode\n    \"\"\"\n    return self.train(False)\n</code></pre>"},{"location":"python/pytorch/#data","title":"Data","text":""},{"location":"python/pytorch/#tensor","title":"Tensor","text":""},{"location":"python/pytorch/#class-dataset","title":"class DataSet","text":"<p>\u5b98\u65b9 <code>torch.utils.data.DataSet</code></p> <p>\u4e00\u4e2a\u865a\u62df\u7684\u7c7b\uff0cAll datasets that represent a map from keys to data samples - \u6240\u6709\u7684 dataset \u90fd\u5fc5\u987b\u7ee7\u627f\u5b83    1. \u5fc5\u987b\u91cd\u5199 <code>__getitem__</code>    2. \u9009\u62e9\u91cd\u5199 <code>__len__</code>    3. \u5982\u679c key/indice \u4e0d\u662f int\uff0c\u5bf9\u5e94\u7684 DataLoader \u4e5f\u5927\u6539</p> <pre><code>class Dataset(Generic[T_co]):\n    \"\"\"\n    \u8bbe\u7acb\u6570\u636e\u96c6\uff0c\u5305\u62ec key/indice(default int)\u3001data\u3001label\n    \u8981\u80fd\u901a\u8fc7 key/indice \u6765\u8bbf\u95ee\u5bf9\u5e94\u7684 data \u548c label\n    \u5982\u679c key/indice \u4e0d\u662f int\uff0c\u5bf9\u5e94\u7684 DataLoader \u4e5f\u8981\u5927\u6539\n    \"\"\"\n\n    def __getitem__(self, index) -&gt; T_co:\n        raise NotImplementedError\n\n    def __add__(self, other: 'Dataset[T_co]') -&gt; 'ConcatDataset[T_co]':\n        return ConcatDataset([self, other])\n\n    # No `def __len__(self)` default?\n    # See NOTE [ Lack of Default `__len__` in Python Abstract Base Classes ]\n    # in pytorch/torch/utils/data/sampler.py\n</code></pre>"},{"location":"python/pytorch/#datalodar","title":"Datalodar","text":"<p><code>torch.utils.data.DataLoader</code></p> <p>constructs a index sampler that yields integral indices</p> <p>Epoch: \u6240\u6709\u8bad\u7ec3\u6837\u672c\u90fd\u4ee5\u8f93\u5165\u5230\u6a21\u578b\u4e2d\uff0c\u79f0\u4e3a\u4e00\u4e2aEpoch Iteration: \u4e00\u6279\u6837\u672c\u8f93\u5165\u5230\u6a21\u578b\u4e2d\uff0c\u4e3a\u4e00\u4e2aIteration Batchsize: \u6279\u5927\u5c0f\uff0c\u4e3b\u8981\u662f\u51b3\u5b9a\u4e00\u4e2aEpoch\u6709\u591a\u5c11\u4e2aIteration</p> <p>\u6837\u672c81\uff0c Batchsize=8;</p> <p>1 Epoch = 10  drop_last=True 1 Epoch = 11  drop_last=False</p> <pre><code>class DataLoader(Generic[T_co]):\n    \"\"\"\n    \u201c\u62bd\u6837\u5f0f\u201d\u5730\u5c11\u91cf batch \u52a0\u8f7d\u6570\u636e\uff0c\u96c6 \u201c\u6570\u636e\u96c6 dataset\u201d\uff0c \u201c\u62bd\u6837 sampler\u201d\uff0c\n    \u201c\u8fed\u4ee3\u5668 iterator\u201d \u4e8e\u4e00\u4f53\u3002\u53ef\u4ee5 \u5355\u6216\u8005\u591a\u8fdb\u7a0b \u6765\u52a0\u8f7d\n\n    Args:\n        - dataset: torch.DataSet\n        - batch_size: Optional[int] = samples per batch \n            default = 1\n        - shuffle: Optional[bool] = \u5728\u6bcf\u4e2a epoch \u5f00\u59cb\u7684\u65f6\u5019\uff0c\u5bf9\u6570\u636e\u8fdb\u884c\u91cd\u65b0\u6392\u5e8f\n            default = False\n        - sampler: Union[Sampler, Iterable, None] = \u81ea\u5b9a\u4e49\u4ece\u6570\u636e\u96c6\u4e2d\u53d6\u6837\u672c\u7684\u7b56\u7565\n            default = None\n            \u6839\u636e dataset \u7684\u6027\u8d28\u6765\u51b3\u5b9a\n            \u548c shuffle \u4e92\u65a5\n        - batch_sampler: Union[Sampler[Sequence], Iterable[Sequence], None] \n            =  \u4e0esampler\u7c7b\u4f3c\uff0c\u8fd4\u56de batch \u7684 indice\n            default = None\n            \u548c batch_size, shuffle, sampler, drop_last \u4e92\u65a5\n        - num_workers: int = \u6709\u591a\u5c11\u4e2a\u5b50\u8fdb\u7a0b\n            default = 0 \u53ea\u6709 main process\n        - drop_last: bool = \u9664\u4e0d\u5c3d\u65f6\u5019\uff0c\u8981\u4e0d\u8981\u7684\u6700\u540e\u4e00\u4e2a batch\n            default = False\n        - generator: torch.Generator\n            default = None\n\n    Warning:\n        - iterable-style datasets are incompatible with custom samplers first\n        - \u8bbe\u7f6e\u4e86 batch_sampler\uff0c\u90a3\u4e48batch_size,shuffle,sampler,drop_last \n        \u5c31\u4e0d\u80fd\u518d\u5236\u5b9a\u4e86\n    \"\"\"\n    ...\n\n    def __init__(\n        self, dataset: Dataset[T_co], batch_size: Optional[int] = 1,\n        shuffle: Optional[bool] = None, \n        sampler: Union[Sampler, Iterable, None] = None,\n        batch_sampler: Union[Sampler[Sequence],Iterable[Sequence], None] = None,\n        num_workers: int = 0, collate_fn: Optional[_collate_fn_t] = None,\n        pin_memory: bool = False, drop_last: bool = False,\n        timeout: float = 0, \n        worker_init_fn: Optional[_worker_init_fn_t] = None,\n        multiprocessing_context=None, generator=None,\n        *, prefetch_factor: Optional[int] = None,\n        persistent_workers: bool = False,\n        pin_memory_device: str = \"\"):\n        ...\n\n    def __len__(self) -&gt; int:\n        \"\"\"\n        Warning:\n            - `IterableDataset` \u4f1a \u4e0d\u6b63\u786e \uff01\uff01\uff01\n            - Cannot statically verify that dataset is Sized\n            - \u5f80\u4e0a\u53d6\u6574\uff0c \u8003\u8651 droplast\n        \"\"\"\n        if self._dataset_kind == _DatasetKind.Iterable:\n\n            length = self._IterableDataset_len_called = len(self.dataset)  \n            # type: ignore[assignment, arg-type]\n            if self.batch_size is not None:  \n                # IterableDataset doesn't allow custom sampler or batch_sampler\n                from math import ceil\n                if self.drop_last:\n                    length = length // self.batch_size\n                else:\n                    length = ceil(length / self.batch_size)\n            return length\n        else:\n            return len(self._index_sampler)   \n        ...\n</code></pre>"},{"location":"python/pytorch/#nn","title":"nn","text":""},{"location":"python/pytorch/#_3","title":"\u4e00\u4e9b\u57fa\u672c\u7684\u4e1c\u897f","text":""},{"location":"python/pytorch/#containers-nn","title":"<code>Containers</code>  \u8d1f\u8d23 nn \u6846\u67b6\u7684\u6784\u5efa","text":""},{"location":"python/pytorch/#module-nn-base-class","title":"<code>Module</code> \u6240\u6709 NN \u7684 base class","text":"<p>\u53ef\u4ee5\u5305\u62ec\u5176\u4ed6\u7684 module. Modules can also contain other Modules, allowing to nest them in a tree structure.</p> <p>\u6240\u6709 NN \u6a21\u578b\u90fd\u8981 \u7ee7\u627f subclass \u5b83\uff0c\u5e76\u4e14\u8981\u5148 \u7236\u7c7b\u7684 init</p> <pre><code>import torch.nn as nn\nimport torch.nn.functional as F\n\nclass MyModel(nn.Module):\n    def __init__(self):\n        super().__init__()\n        self.conv1 = nn.Conv2d(1, 20, 5)\n        self.conv2 = nn.Conv2d(20, 20, 5)\n\n    def forward(self, x):\n        x = F.relu(self.conv1(x))\n        return F.relu(self.con2(x))\n\nmymodel = MyModel()\ny = mymodel(x)\n</code></pre> <pre><code>class Module:\n    \"\"\"\n    \u6240\u6709 nn \u6a21\u578b\u7684 base class \u90fd\u8981\u7ee7\u627f\u5b83\n    \"\"\"\n    ...\n\n    def __init__(self, *args, **kwargs) -&gt; None:\n        \"\"\"\n        Initializes internal Module state, shared by both nn.Module and ScriptModule.\n\n        Warning:\n            - \u5982\u679c\u6539\u5c5e\u6027 \u6700\u597d\u7528 `` super().__setattr__('a', a) ``\n                \u800c\u4e0d\u662f `` self.a = a `` \u9632\u6b62 Module.__setattr__ overhead\n        \"\"\"\n        ... \n</code></pre>"},{"location":"python/pytorch/#sequential-transformscompose","title":"<code>Sequential</code> \u7c7b<code>transforms.Compose</code>\u7684\u7528\u6cd5\uff0c\u6a21\u578b\u8fdb\u4e00\u6b65\u5c01\u88c5","text":"<p><code>torch.nn.Sequential</code>\u548c <code>torch.nn.ModuleList</code> \u7684\u533a\u522b</p> <ul> <li><code>torch.nn.ModuleList</code> \u5c31\u662f\u771f\u7684\u4e00\u4e2a\u50a8\u5b58\u6a21\u578b\u7684list</li> </ul> <p>```python hlines=\"18 31 35 36 37 45\" class Sequential(Module):     \"\"\"     \u6a21\u578b\u7684\u5e8f\u5217\u5c01\u88c5\uff0c\u8f93\u5165\u4f1a\u6309\u5e8f\u7ecf\u8fc7\u91cc\u9762\u7684\u6bcf\u4e00\u4e2a\u6a21\u578b\uff0c\u6700\u540e\u8fdb\u884c\u8f93\u51fa\u3002     \u628a\u6240\u6709\u7684\u6a21\u578b\u90fd\u5c01\u88c5 as a single module      \u5982\u679c\u4e0d\u7528 OrderedDict, \u90a3\u4e48 str(index) \u4f5c\u4e3a key     \u53ef\u4ee5\u901a\u8fc7 index \u4e5f\u53ef\u4ee5\u901a\u8fc7 key \u6765 access</p> <pre><code>Meth:\n    - .pop(key)\n    - .append()\n    - .extend(Sequential)\n    - .insert(index, Module)\n    - del(model)\n    - = model1 + model 2\n\nExample:\n    &gt;&gt;&gt; # \u6309\u987a\u5e8f\u7ecf\u8fc7 Conv2d(1,20,5) - ReLU - Conv2d(20,64,5) - ReLU\n    &gt;&gt;&gt; model = nn.Sequential(\n            nn.Conv2d(1,20,5),\n            nn.ReLU(),\n            nn.Conv2d(20,64,5),\n            nn.ReLU())\n    &gt;&gt;&gt; print(model)\n    # Sequential(\n        (0): Conv2d(1, 20, kernel_size=(5, 5), stride=(1, 1))\n        (1): ReLU()\n        (2): Conv2d(20, 64, kernel_size=(5, 5), stride=(1, 1))\n        (3): ReLU())\n    &gt;&gt;&gt; print(model[-1])\n    # ReLU()\n    &gt;&gt;&gt; model.pop(-1) # \u548c stack \u4e0d\u4e00\u6837\uff0c\u5fc5\u987b\u4f20 index \u6216 key\n    # ReLU()\n    &gt;&gt;&gt; print(model)\n    # Conv2d(20, 64, kernel_size=(5, 5), stride=(1, 1))\n    &gt;&gt;&gt; model[-1] = ReLU()\n    &gt;&gt;&gt; del(model[0])\n    &gt;&gt;&gt; model.append(Liner(10, 3)\n    # Sequential(\n        (0): ReLU()\n        (1): ReLU()\n        (2): Linear(10, 3)     \n    -------------------------------------------\n    &gt;&gt;&gt; # Using Sequential with OrderedDict.\n    &gt;&gt;&gt; from collections import OrderedDict\n    &gt;&gt;&gt; model = nn.Sequential(OrderedDict([ \n            ('conv1', nn.Conv2d(1,20,5)),\n            ('relu1', nn.ReLU()),\n            ('conv2', nn.Conv2d(20,64,5)),\n            ('relu2', nn.ReLU())\n            ]))\n    &gt;&gt;&gt; print(model)\n    # Sequential(\n        (conv1): Conv2d(1, 20, kernel_size=(5, 5), stride=(1, 1))\n        (relu1): ReLU()\n        (conv2): Conv2d(20, 64, kernel_size=(5, 5), stride=(1, 1))\n        (relu2): ReLU())\n\"\"\"\n...\n\ndef __init__(self, *args):\n    super().__init__()\n    if len(args) == 1 and isinstance(args[0], OrderedDict):\n        for key, module in args[0].items():\n            self.add_module(key, module)\n    else:\n        for idx, module in enumerate(args):\n            self.add_module(str(idx), module)\n\ndef __setitem__(self, idx: int, module: Module) -&gt; None:\n    \"\"\" model[idx] = Linear(in, out) \"\"\"\n    key: str = self._get_item_by_idx(self._modules.keys(), idx)\n    return setattr(self, key, module)\n\ndef __delitem__(self, idx: Union[slice, int]) -&gt; None:\n    \"\"\" del(model[idx]) \"\"\"\n    if isinstance(idx, slice):\n        for key in list(self._modules.keys())[idx]:\n            delattr(self, key)\n    else:\n        key = self._get_item_by_idx(self._modules.keys(), idx)\n        delattr(self, key)\n    # To preserve numbering\n    str_indices = [str(i) for i in range(len(self._modules))]\n    self._modules = OrderedDict(list(zip(str_indices, self._modules.values())))\n\ndef __add__(self, other) -&gt; 'Sequential':\n    \"\"\" model = model1 + model2 \"\"\"\n    if isinstance(other, Sequential):\n        ret = Sequential()\n        for layer in self:\n            ret.append(layer)\n        for layer in other:\n            ret.append(layer)\n        return ret\n    else:\n        raise ValueError('add operator supports only objects '\n                         'of Sequential class, but {} is given.'.format(\n                             str(type(other))))\n\ndef pop(self, key: Union[int, slice]) -&gt; Module:\n    \"\"\" model.pop(key) \"\"\"\n    v = self[key]\n    del self[key]\n    return v\n\n...\n\ndef forward(self, input):\n    for module in self:\n        input = module(input)\n    return input\n\ndef append(self, module: Module) -&gt; 'Sequential':\n    \"\"\" module.append(nn.Module) \"\"\"\n    self.add_module(str(len(self)), module)\n    return self\n\ndef insert(self, index: int, module: Module) -&gt; 'Sequential':\n    \"\"\" model.insert(nn.Module)\"\"\"\n    if not isinstance(module, Module):\n        raise AssertionError(\n            'module should be of type: {}'.format(Module))\n    n = len(self._modules)\n    if not (-n &lt;= index &lt;= n):\n        raise IndexError(\n            'Index out of range: {}'.format(index))\n    if index &lt; 0:\n        index += n\n    for i in range(n, index, -1):\n        self._modules[str(i)] = self._modules[str(i - 1)]\n    self._modules[str(index)] = module\n    return self\n\ndef extend(self, sequential) -&gt; 'Sequential':\n    \"\"\" model.extend(model1) \"\"\"\n    for layer in sequential:\n        self.append(layer)\n    return self\n</code></pre> <p>``` </p>"},{"location":"python/pytorch/#nnxxx-nnfunctionalxxx","title":"nn.xxx &amp; nn.functional.xxx","text":"<p><code>python from torch import nn from torch.nn inport Functional as F  layer_nn = nn.conv2d(...) layer_F = F.conv2d(...)</code></p>"},{"location":"python/pytorch/#liner","title":"Liner","text":"<pre><code>class Linear(Module):\n    \"\"\"\n    h = W^Tx+b\n\n    Args:\n        - in_features: Int = \u5165\n        - out_features: Int = \u51fa\n        - bias: Bool\n            default = True\n\n    Attributes:\n        - weight: tensor[in_features, out_features]\n        - bias: tensor[1]\n\n    Examples::\n        &gt;&gt;&gt; m = nn.Linear(20, 30)\n        &gt;&gt;&gt; input = torch.randn(128, 20)\n        &gt;&gt;&gt; output = m(input)\n        &gt;&gt;&gt; print(output.size())\n        #res: torch.Size([128, 30])\n    \"\"\"\n\n    ...\n</code></pre>"},{"location":"python/pytorch/#conv","title":"Conv","text":"\\[ \\mathcal{U}(-\\sqrt{k}, \\sqrt{k}) \\\\ k = \\frac{groups}{C_\\text{in} * \\prod_{i=0}^{1}\\text{kernel\\_size}[i]} \\] \\[ \\text{out}(N_i, C_{\\text{out}_j}) = \\text{bias}(C_{\\text{out}_j}) + \\sum_{k = 0}^{C_{\\text{in}} - 1} \\text{weight}(C_{\\text{out}_j}, k) \\star \\text{input}(N_i, k) \\\\\\begin{cases} N&amp;\\text{batch size}\\\\ C&amp;\\text{channel}\\\\H&amp;\\text{height}\\\\W&amp;\\text{width}\\\\\\end{cases}\\\\ H_{out} = \\left\\lfloor\\frac{H_{in}  + 2 \\times \\text{padding}[0] - \\text{dilation}[0]         \\times (\\text{kernel\\_size}[0] - 1) - 1}{\\text{stride}[0]} + 1\\right\\rfloor\\\\ W_{out} = \\left\\lfloor\\frac{W_{in}  + 2 \\times \\text{padding}[1] - \\text{dilation}[1]         \\times (\\text{kernel\\_size}[1] - 1) - 1}{\\text{stride}[1]} + 1\\right\\rfloor \\] <p>input size</p> <p>nn \u53ef\u4ee5[B, C, H, W] \u6216 [C, H, W] functional \u53ea\u53ef\u4ee5 [B, C, H, W]</p> <pre><code>class Conv2d(_ConvNd):\n    \"\"\"\n    nn.Conv2d\n\n    Args:\n        - in_channels: int = C_{in} = \u8f93\u5165\u7684\u901a\u9053\u6570\n        - out_channels: int = C_{out} = \u8f93\u51fa\u7684\u901a\u9053\u6570 \n        - kernel_size: Union[int. tuple(int)] (int or tuple) = \u5377\u79ef\u6838\u5927\u5c0f\n        - stride: Union[int, tuple(int)] = \u4f4d\u79fb\u91cf \n            default = 1\n            - int = \u7ad6\u76f4\u65b9\u5411 = \u6c34\u5e73\u65b9\u5411\n        - padding: Union[int, tuple(int), str\\in{{'valid', 'same'}}] = \u586b\u5145 input \u56fe\u50cf\n            default = 0\n            - int = \u7ad6\u76f4\u65b9\u5411 = \u6c34\u5e73\u65b9\u5411\n            - 'valid' = no padding\n            - 'same' = \u4f7f\u5f97 input\u2018shape = output\u2019shape\n        - dilation: Union[int, tuple(int)]= \u586b\u5145 kernel \u5377\u79ef\u6838,  Spacing between kernel elements\n            default = 1 = no space\n            \u8be6\u770b\u7406\u8bba\u90e8\u5206\n        - bias: bool \u53ef\u5b66\u4e60\u7684\u504f\u7f6e\n            default: ``True``\n\n    Shape:\n        - Input = (N, C_{in}, H_{in}, W_{in}) \u6216 (C_{in}, H_{in}, W_{in})\n        - Output = (N, C_{out}, H_{out}, W_{out}) \u6216 (C_{out}, H_{out}, W_{out})\n\n    Attributes:\n        - weight: Tensor[...] = \u5b66\u4e60\u51fa\u6765\u7684\u5377\u79ef\u6838 kernel\n            \u8be6\u770b\u7406\u8bba\u90e8\u5206\n        - bias: Tensor[out_channels] = \u5b66\u4e60\u51fa\u6765\u7684\u504f\u7f6e\n            \u9700\u8981 bias := True  \n            \u8be6\u770b\u7406\u8bba\u90e8\u5206\n\n    Examples:\n        &gt;&gt;&gt; # non-square kernels and unequal stride and with padding and dilation\n        &gt;&gt;&gt; m = nn.Conv2d(16, 33, (3, 5), stride=(2, 1), padding=(4, 2), dilation=(3, 1))\n        &gt;&gt;&gt; input = torch.randn(20, 16, 50, 100)\n        &gt;&gt;&gt; output = m(input)\n    \"\"\"\n\n    def __init__(\n        self,\n        in_channels: int,\n        out_channels: int,\n        kernel_size: _size_2_t,\n        stride: _size_2_t = 1,\n        padding: Union[str, _size_2_t] = 0,\n        dilation: _size_2_t = 1,\n        groups: int = 1,\n        bias: bool = True,\n        padding_mode: str = 'zeros',  # TODO: refine this type\n        device=None,\n        dtype=None\n    ) -&gt; None:\n        ...\n        super().__init__(\n            in_channels, out_channels, kernel_size_, stride_, padding_, dilation_,\n            False, _pair(0), groups, bias, padding_mode, **factory_kwargs)\n\n    ...\n</code></pre> <pre><code>conv2d = _add_docstr(\n    torch.conv2d,\n    \"\"\"\n    nn.funcational.conv2d\n\n    conv2d(input, weight, bias=None, stride=1, padding=0, dilation=1, groups=1) -&gt; Tensor\n\n    Args:\n        - input: Tensor[minibatch, in_channels, in_H , in_W] \n        - weight: Tensor[out_channels, ?, ke_H, ke_W] = \u5377\u79ef\u6838\n        - bias: Union[Tensor[out_channels], None] \n        - stride: Union[Int, Tuple(Int, Int)]\n            default =  1\n        - padding: Union[Int, Tuple(Int, Int), Str{'valid', 'same'}]\n            default = 0\n            - 'valid' = no padding\n            - 'same' = \n        - dilation: Union[Int, Tuple(Int, Int)] the spacing between kernel elements.\n            default = 1\n\n    Examples::\n\n        &gt;&gt;&gt; # With square kernels and equal stride\n        &gt;&gt;&gt; filters = torch.randn(8, 4, 3, 3)\n        &gt;&gt;&gt; inputs = torch.randn(1, 4, 5, 5)\n        &gt;&gt;&gt; F.conv2d(inputs, filters, padding=1)\n    \"\"\"\n)  \n...\n</code></pre>"},{"location":"python/pytorch/#pool","title":"Pool","text":"<pre><code>class MaxPool2d(_MaxPoolNd):\n    \"\"\"\n    2D \u6700\u5927\u6c60\u5316\n\n    Shape:\n        - input = [N, C, in_H, in_W] \u6216 [C, in_H, in_W]\n        - ouptput = [N, C, out_H, out_W] \u6216 [C, in_H, in_W]\n        - kernel = [ke_H, ke_W]\n        \u516c\u5f0f\u8be6\u770b\u7406\u8bba\u90e8\u5206\n\n    Args:\n        - kernel_size: Union[Int, Tuple(Int, Int)]\n        - stride: Union[Int, Tuple(Int, Int)] \n            default = kernel_size !!!\n        - padding: Union[Int, Tuple(Int, Int)] = \u586b\u5145\u8d1f\u65e0\u7a77\n            \u7528\u6765\u9488\u5bf9\u9664\u4e0d\u5c3d\u7684\u60c5\u51b5\uff0c\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u5230\u53d6\u503c\uff08MaxPool\uff09\n        - dilation: Union[Int, Tuple(Int, Int)] = controls the stride of elements in the window\n        - return_indices: Bool = \u8fd4\u56de MaxPool \u4e2d\u88ab\u53d6\u503c\u7684\u7d22\u5f15\n            default =\n        - ceil_mode: Bool = \u8981\u4e0d\u8981\u8fb9\u754c\u6599\n            default = False\n            - False = `floor` = \u4e0d\u8981\u8fb9\u89d2\u6599\n            - True = `ceil` = \u8981\u8fb9\u89d2\u6599 go off-bounds\n            \u5e94\u5bf9\u9664\u4e0d\u5c3d\u7684\u60c5\u51b5\uff0c \u8be6\u770b\u7406\u8bba\u90e8\u5206\n\n    Examples:\n        &gt;&gt;&gt; # pool of non-square window\n        &gt;&gt;&gt; m = nn.MaxPool2d((3, 2), stride=(2, 1))\n        &gt;&gt;&gt; input = torch.randn(20, 16, 50, 32)\n        &gt;&gt;&gt; output = m(input)\n    \"\"\"\n\n    ...\n\n    def forward(self, input: Tensor):\n        return F.max_pool2d(input, self.kernel_size, self.stride,\n                            self.padding, self.dilation, ceil_mode=self.ceil_mode,\n                            return_indices=self.return_indices)\n</code></pre>"},{"location":"python/pytorch/#activation","title":"activation","text":"<p>non-inpalce  shape\uff1a[B, *] \u9664\u4e86\u5fc5\u987bbatchsize\uff0c\u540e\u9762 size \u90fd\u968f\u4fbf</p>"},{"location":"python/pytorch/#softmax","title":"softmax","text":"\\[ \\text{Softmax}(x_{i}) = \\frac{\\exp(x_i)}{\\sum_j \\exp(x_j)} \\] <ul> <li>\u5982\u679c\u662f\u7a00\u758f\u5411\u91cf sparse vector\uff08\u53ea\u4f20\u9012\u975e0\u7684\u503c\uff09\uff0c\u90a3\u4e9b\u672a\u4f20\u9012\u7684=\u539f\u672c\u662f0\u7684 \u5728 softmax \u91cc \u770b\u4f5c \\(-\\inf\uff0c\\rightarrow \\text{softmax}(-\\inf)\\rightarrow0\\)</li> </ul> <pre><code>class Softmax(Module):\n    \"\"\"\n    \u5c06\u67d0\u4e00\u7ef4\u7684\u503c \u6620\u5c04\u5230[0, 1] &amp; sum=1\u3002\n\n    Shape:\n        \u90fd\u53ef\u4ee5\n\n    Args:\n        - dim: Int = \u8981\u8fdb\u884c softmax \u7684\u7ef4\u5ea6\n            default = \n\n    Examples::\n        &gt;&gt;&gt; one, zerp = nn.Softmax(dim=1), nn.Softmax(dim=0)\n        &gt;&gt;&gt; input = torch.tensor([[-1., -1.],[2., 2.]])\n        &gt;&gt;&gt; y1, y0 = one(input), zero(input)\n        # y1 = tensor([[0.5, 0.5], [0.5, 0.5]])\n        # y0 = tensor([[0.0474, 0.0474], [0.9526, 0.9526]])\n    \"\"\"\n    ...\n</code></pre>"},{"location":"python/pytorch/#relu-rectified-linear-unit","title":"ReLU, rectified linear unit","text":"<p>$$ \\text{ReLU}(x) = (x)^+ = \\max(0, x) $$ </p> <pre><code>class ReLU(Module):\n    \"\"\"\n    \u5bf9\u4e8e0\u4ee5\u4e0b\u622a\u65ad\n\n    Args:\n        - inplace:Bool = \u539f\u5730\u5b9e\u73b0\n            default = False\n\n    Shape:\n        \u90fd\u53ef\u4ee5\n\n    Examples::\n        &gt;&gt;&gt; m = nn.ReLU()\n        &gt;&gt;&gt; input = torch.tensor([[-1., -1.],[2., 2.]])\n        &gt;&gt;&gt; output = m(input)\n        # output: tensor([[0., 0.], [2., 2.]])\n    \"\"\"\n    ...\n</code></pre>"},{"location":"python/pytorch/#sigmoid","title":"Sigmoid","text":"<p>$$ \\text{Sigmoid}(x) = \\sigma(x) = \\frac{1}{1 + \\exp(-x)} $$ </p> <pre><code>class Sigmoid(Module):\n    \"\"\"\n    \u9010\u5143\u7d20\uff0c\u6620\u5c04\u52300-1 \uff0c\u9760\u8fd10\u53d8\u5316\u5927\uff0c\u5426\u5219\u53d8\u5316\u7f13\u6162\n\n    Shape:\n        \u90fd\u53ef\u4ee5\n\n    Examples:\n        &gt;&gt;&gt; m = nn.Sigmoid()\n        &gt;&gt;&gt; input = torch.tensor([[-1., -1.],[2., 2.]])\n        &gt;&gt;&gt; output = m(input)\n        # output: tensor([[0.2689, 0.2689], [0.8808, 0.8808]])\n    \"\"\"\n    ...\n</code></pre>"},{"location":"python/pytorch/#normalization","title":"Normalization","text":""},{"location":"python/pytorch/#droupout","title":"Droupout","text":"<p>\u5982\u679c\u7279\u5f81\u56fe\u4e2d\u7684\u76f8\u90bb\u50cf\u7d20\u5177\u6709\u5f88\u5f3a\u7684\u76f8\u5173\u6027 (\u5219 i.i.d. dropout \u4e0d\u4f1a\u4f7f\u6fc0\u6d3b\u6b63\u5219\u5316\uff0c\u5426\u5219\u53ea\u4f1a\u5bfc\u81f4\u6709\u6548\u5b66\u4e60\u7387\u4e0b\u964d\u3002</p> <p>\u5fc5\u987b\u6709batch\uff01\uff01\uff01</p> <pre><code>class Dropout1d(_DropoutNd):\n    \"\"\"\n    \u968f\u673a\u53d60\uff0c\u589e\u5f3a feature maps \u7684\u72ec\u7acb\u6027\uff0c\u9632\u6b62\u8fc7\u62df\u5408\u3002\n    \u6982\u7387 p \u4f2f\u52aa\u5229\u91c7\u6837\n\n    Args:\n        - p: Optional[Float] \n        - inplace:bool \n            default = False \n\n    Shape:\n        - Input: [B, C, L] \u6216 [C, L] \n            \u5377\u79ef\u7684\u65f6\u5019\uff1ann.Conv1d: 1D-tensor\n        - Output: [B, C, L] \u6216 [C, L]\n\n    Examples::\n        &gt;&gt;&gt; m = nn.Dropout1d(p=0.2)\n        &gt;&gt;&gt; input = torch.randn(20, 16, 32)\n        &gt;&gt;&gt; output = m(input)\n    \"\"\"\n    ...\n\nclass Dropout2d(_DropoutNd):\n    \"\"\"\n    \u968f\u673a\u53d60\uff0c\u589e\u5f3a feature maps \u7684\u72ec\u7acb\u6027\uff0c\u9632\u6b62\u8fc7\u62df\u5408\u3002\n    \u6982\u7387 p \u4f2f\u52aa\u5229\u91c7\u6837\n\n    Args:\n        - p: Optional[Float] \n        - inplace:bool \n            default = False \n\n    Shape:\n        - Input: [B, C, H, W] \u6216 [B, C, L] \n            \u5377\u79ef\u7684\u65f6\u5019\uff1ann.Conv1d: 2D-tensor\n        - Output: [B, C, H, W] \u6216 [B, C, L] \n\n    Examples::\n        &gt;&gt;&gt; m = nn.Dropout2d(p=0.2)\n        &gt;&gt;&gt; input = torch.randn(20, 16, 32, 32)\n        &gt;&gt;&gt; output = m(input)\n    \"\"\"\n    ...\n</code></pre>"},{"location":"python/pytorch/#flatten","title":"<code>flatten</code>","text":"<pre><code>class Flatten(Module):\n    \"\"\"\n    \u7ed9\u5b9a\u7ef4\u5ea6\u5c55\u5e73\u5411\u91cf\n\n    Args:\n        - start_dim: Int = \u5f00\u59cb\u7684\u7ef4\u5ea6\n            default = 1\n        - end_dim: Int  = \u7ed3\u675f\u7684\u7ef4\u5ea6\n            default = -1\n        default \u5c31\u662f [B, H, W, ...] -&gt; [B, H*W*...], \u6700\u5916\u5c42\u4e0d\u4f1a\u88ab\u5c55\u5e73\n\n    Examples::\n        &gt;&gt;&gt; input = torch.randn(32, 1, 5, 5)\n        &gt;&gt;&gt; m = nn.Flatten() # \u9ed8\u8ba4 0B \u9664\u5916\n        &gt;&gt;&gt; output = m(input)\n        torch.Size([32, 25])\n        &gt;&gt;&gt; m = nn.Flatten(0, 2) # \u81ea\u5b9a\u4e49\uff1a\u6700\u91cc\u9762\u9664\u5916\n        &gt;&gt;&gt; output = m(input)\n        torch.Size([160, 5])\n        &gt;&gt;&gt; m = nn.Flatten(0, -1) # \u5168\u5c55\u5e73\n    \"\"\"\n    ...\n</code></pre>"},{"location":"python/pytorch/#torchnnloss-torchoptim","title":"<code>torch.nn.</code>Loss &amp; <code>torch.Optim</code>","text":"<pre><code>model = # \u5b9a\u4e49\u6a21\u578b\nloss_fn = # \u5b9a\u4e49 loss \u7b97\u6cd5\noptimizer = # \u5b9a\u4e49 \u68af\u5ea6\u8fed\u4ee3 \u7684\u7b97\u6cd5\n\"\"\" basic \"\"\"\nfor input, target in dataset:\n    output = model(input) \n    loss = loss_fn(output, target) # \u7b97 loss\n    optimizer.zero_grad() # \u6e05\u7a7a\u4e0a\u4e00\u8f6e\u7b97\u51fa\u6765\u7684\u7684\u68af\u5ea6\uff0c\u5426\u5219\u68af\u5ea6\u4f1a\u7d2f\u79ef \n    loss.backward() # \u901a\u8fc7 \u53cd\u5411\u4f20\u64ad \u8ba1\u7b97\u65b0\u4e00\u8f6e\u68af\u5ea6\n    optimizer.step() # \u6839\u636e\u7b97\u51fa\u6765\u7684\u68af\u5ea6 \u66f4\u65b0\u53c2\u6570\n</code></pre> <pre><code>from torch import nn\nfrom torch.optim import SGD\n\nmodel = nn.Sequential(\n    Linear(10, 32),\n    ReLU(),\n    Linear(32, 3)\n)\nloss_fn = nn.L1Loss()\noptimizer = SGD(model.parameters(), lr=0.01, momentum=0.9)\n\n\"\"\" whole batch \u6574\u4e00\u4e2a\"\"\"\nfor i in range(epoch):\n    loss_epoch = 0\n    for x, y in dataloader:\n        y_hat = model(x)\n        loss_epoch += loss_fn(y, y_hat)\n\n    optimizer.zero_grad()\n    loss_epoch.backward()\n    loss_epoch.step()\n\n\"\"\" mini-batch \"\"\" \n</code></pre>"},{"location":"python/pytorch/#torchoptim","title":"<code>torch.optim</code>","text":"<p>\u6784\u5efa\u4e00\u4e2a\u4f18\u5316\u5668\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u5c06\u4fdd\u6301\u5f53\u524d\u72b6\u6001\uff0c\u5e76\u5c06\u6839\u636e\u8ba1\u7b97\u7684\u68af\u5ea6\u66f4\u65b0\u53c2\u6570\u3002</p> <p>\\(\\text{Minimize} f(\\theta)\\)</p> <p><code>maximize = False(default)</code>\\(\\iff g_t\\leftarrow=-\\nabla f(\\theta)\\) \\(\\(\\begin{aligned} &amp;\\textbf{\u5173\u4e8e\u68af\u5ea6\uff1a}\\nabla \u662f\u4e0a\u5347\u7684\u65b9\u5411\\\\[-1em] &amp;\\rule{110mm}{0.4pt}\\\\ &amp;\\textbf{input}:     \\theta_0 \\text{ (params)}, \\:     f(\\theta) \\text{ (objective)}, \\: \\textit{maximize}\\\\[-1em] &amp;\\rule{110mm}{0.4pt}\\\\ &amp;\\hspace{5mm}\\textbf{if} \\: \\textit{maximize}\\iff \\text{Maximize }f(\\theta)\\\\ &amp;\\hspace{10mm}g_t \\leftarrow  +\\nabla_\\theta f(\\theta)\\\\ &amp;\\hspace{5mm}\\textbf{else}\\iff \\text{Minimize}f(\\theta)\\\\ &amp;\\hspace{10mm}g_t \\leftarrow -\\nabla_\\theta f(\\theta)\\\\[-1em] &amp;\\rule{110mm}{0.4pt} \\end{aligned}\\)\\)</p> <p>Nesterov momentum</p> <p>is based on the formula from <code>On the importance of initialization and momentum in deep learning</code>__.</p>"},{"location":"python/pytorch/#adam","title":"Adam","text":"<pre><code>class Adam(Optimizer):\n    \"\"\"\n    Args:\n        - params: iterable = \u9700\u8981\u8fed\u4ee3\u7684\u53c2\u6570\n        -  lr: Float &gt;0 = \u5b66\u4e60\u7387\n            default = 1e-3\n        - betas: Tuple(Float, Float)\\in[0, 1)\n            default = (0.9, 0.999)\n    \"\"\"\n    def __init__(self, params, lr=1e-3, betas=(0.9, 0.999), eps=1e-8,\n                 weight_decay=0, amsgrad=False, *, foreach: Optional[bool] = None,\n                 maximize: bool = False, capturable: bool = False,\n                 differentiable: bool = False, fused: Optional[bool] = None):\n        ...\n\n    ...\n</code></pre>"},{"location":"python/pytorch/#sgd","title":"SGD \u968f\u673a\u68af\u5ea6\u4e0b\u964d","text":"<p>SGD, Stochastic Gradient Descent(optionally with momentum)</p> <pre><code>class SGD(Optimizer):\n    \"\"\"\n    \u968f\u673a\u68af\u5ea6\u4e0b\u964d\n\n    Args:\n        - params: iterable = \u8981\u8fed\u4ee3\u7684\u53c2\u6570\n        - lr: Float &gt;0  = \u5b66\u4e60\u7387\n        - momentum: Optional(Int) &gt;0 = \u51b2\u91cf\n            default = 0\n    \"\"\"\n    def __init__(self, params, lr=required, momentum=0, dampening=0,\n                 weight_decay=0, nesterov=False, *, maximize: bool = False, \n                 foreach: Optional[bool] = None, differentiable: bool = False):\n        ...\n\n    ...\n</code></pre>"},{"location":"python/pytorch/#adagrad","title":"Adagrad, \u81ea\u9002\u5e94\u968f\u673a\u68af\u5ea6\u4e0b\u964d","text":"<pre><code>class Adagrad(Optimizer):\n    \"\"\"\n    Adaptive Stochastic Gradient\n\n    Args:\n        - params: iterable = \u8981\u8fed\u4ee3\u7684\u53c2\u6570\n        - lr: Float &gt;0  = \u5b66\u4e60\u7387\n            default = 1e-2\n        - lr_decay: Float &gt;0 \n            default = 0\n    \"\"\"\n    def __init__(self, params, lr=1e-2, lr_decay=0, weight_decay=0,\n        initial_accumulator_value=0,eps=1e-10, foreach: Optional[bool] = None,\n        *, maximize: bool = False,differentiable: bool = False,):\n        ...\n\n    ...\n</code></pre>"},{"location":"python/pytorch/#torchnnloss","title":"<code>torch.nn.</code>Loss","text":""},{"location":"python/pytorch/#l1loss-mae","title":"L1Loss, MAE","text":"\\[ \\text{MAE} = \\ell(f)= \\begin{cases}\\mathbb{E}\\vert\\hat{y_i}-y_i\\vert\\in\\R&amp;\\text{reduction=mean} \\\\ \\Vert\\hat{y}-y\\Vert_1\\in\\R&amp;\\text{reduction=sum}\\\\\\vert\\hat{y}-y\\vert\\in\\R^n&amp;\\text{reduction=none} \\end{cases} \\] <pre><code>class L1Loss(_Loss):\n    \"\"\"\n    the mean absolute error (MAE)\n\n    Args:\n        - reduction: Optional[Str{'none', 'mean', 'sum}] \n            default = 'mean'\n\n    Examples::\n        &gt;&gt;&gt; loss = nn.L1Loss()\n        &gt;&gt;&gt; y = torch.randn(3, 5, requires_grad=True)\n        &gt;&gt;&gt; pred = torch.randn(3, 5)\n        &gt;&gt;&gt; l = loss(pred, y) # \u8ba1\u7b97 loss\n        &gt;&gt;&gt; output.backward() # \u56de\u6eaf \n    \"\"\"\n    ...\n</code></pre>"},{"location":"python/pytorch/#mse","title":"MSE","text":"\\[ \\text{MSE} = \\ell(f)= \\begin{cases}\\mathbb{E}(\\hat{y_i}-y_i)^2\\in\\R&amp;\\text{reduction=mean} \\\\ \\Vert\\hat{y}-y\\Vert_2\\in\\R&amp;\\text{reduction=sum}\\\\(\\hat{y}-y)^2\\in\\R^n&amp;\\text{reduction=none} \\end{cases} \\] <pre><code>class MSELoss(_Loss):\n    \"\"\"\n    mean squared error (squared L2 norm) \n\n    Args:\n        - reduction: Optional[Str{'none', 'mean', 'sum}] \n            default = 'mean'\n\n    Examples::\n        &gt;&gt;&gt; loss = nn.MSELoss()\n        &gt;&gt;&gt; input = torch.randn(3, 5, requires_grad=True)\n        &gt;&gt;&gt; target = torch.randn(3, 5)\n        &gt;&gt;&gt; output = loss(input, target)\n        &gt;&gt;&gt; output.backward()\n    \"\"\"\n    ...\n</code></pre>"},{"location":"python/pytorch/#celoss","title":"CELoss","text":"<p><code>torch.nn.CrossEntropyLoss()</code></p> <p>= <code>torch.nn.LogSoftmax</code> + <code>torch.nn.NLLLoss</code> softmax \u975e\u8d1f\u5316\u5f52\u4e00\u5316 + \u4ea4\u53c9\u71b5</p> \\[\\begin{align}\\ell(f) &amp;=w_{y^_}  * - \\log \\cfrac{\\exp(\\hat{y}^_)}{\\sum_C \\exp(\\hat{y})}\\cdot \\mathbb{1}\\{y^* \\neq \\text{ignore\\_index}\\}\\\\&amp;=w_{y^*}  * -\\text{softmax}(\\hat{y}) \\qquad\\text{ \u4e0d\u5728\u5ffd\u7565} \\end{align}   \\\\ \\ell(x, y) = \\begin{cases}               \\sum_{n=1}^N \\frac{1}{\\sum_{n=1}^N w_{y_n} \\cdot \\mathbb{1}\\{y_n \\not= \\text{ignore\\_index}\\}} l_n, &amp;                \\text{if reduction} = \\text{`mean';}\\\\                 \\sum_{n=1}^N l_n,  &amp;                 \\text{if reduction} = \\text{`sum'.}             \\end{cases}\\\\\\ell(x, y) = L = \\{l_1,\\dots,l_N\\}^\\top, \\quad           l_n = - \\sum_{c=1}^C w_c \\log \\frac{\\exp(x_{n,c})}{\\sum_{i=1}^C \\exp(x_{n,i})} y_{n,c} \\] <pre><code>class CrossEntropyLoss(_WeightedLoss):\n    \"\"\"\n    cross entropy loss, \u4e8c\u5206\u7c7b\u6216\u591a\u5206\u7c7b\u5f88\u6709\u7528\uff0c\u5c24\u5176\u662f\u7c7b\u522b\u4e0d\u5e73\u8861\n\n    Warning:\n        - \u8f93\u5165\u4e0d\u5fc5\u5148\u7ecf\u8fc7 softmax\uff08\u4fdd\u8bc1\u90fd\u4e3a\u6b63\u4e14\u603b\u548c=1\u3002\n            \u56e0\u4e3a\u8fd9\u91cc\u4f1a\u5305\u62ec\u8fd9\u4e2a\u64cd\u4f5c = softmax-&gt;max-&gt;\n\n    Shape\n        - input: [C] \u6216 [B, C] \u6216  = \u9884\u6d4b\u7684\uff0c\u539f\u59cb\u7684\u4e0d\u5fc5\u7ecf\u8fc7 softmax\n            C: #class\n        - target: [1] \u6216 [B] = \u771f\u5b9e\u7684\uff0c\u7c7b\u522b\uff0cclass indices\n        - output: \n            - 'none' : [1], [B]\n            - 'mean', 'sum' : Int \u6216 [1]\n\n    Args:\n        - weight: optional(Tensor[C]) = \u6743 \n        - ignore_index: Optional[int] = \u5ffd\u7565\u7684\u7c7b\u522b\n            \u53ea\u6709\u5728 target \u653e\u7684\u662f\u6b63\u786e\u7684**\u7c7b\u522b(1, 2, ..)**\u624d\u8d77\u6548\n            \u7b97 avg \u65f6\u5019 ignore \u4e5f \u4e0d\u7b97\u9664\u6570\n        - reduction: Optional[Str{'none', 'mean', 'sum}] \n            default = 'mean'\n        - label_smoothing: Optional[Float] \\in [0.0, 1.0]. \n            - default = 0.0 = no smoothing. \n            \u770b\u8bba\u6587\uff1a`Rethinking the Inception Architecture for Computer Vision`\n            a mixture of the original ground truth and a uniform distribution\n\n    Examples::\n        &gt;&gt;&gt; # Example of target with class indices\n        &gt;&gt;&gt; loss = nn.CrossEntropyLoss()\n        &gt;&gt;&gt; input = torch.randn(3, 5, requires_grad=True)\n        &gt;&gt;&gt; target = torch.empty(3, dtype=torch.long).random_(5)\n        # tensor([4, 3, 1])\n        &gt;&gt;&gt; output = loss(input, target)\n        -----------------------------------------------------------\n        &gt;&gt;&gt; # Example of target with class probabilities\n        &gt;&gt;&gt; input = torch.randn(3, 5, requires_grad=True)\n        &gt;&gt;&gt; target = torch.randn(3, 5).softmax(dim=1)\n        # tensor([[0.1190, 0.3896, 0.3429, 0.0254, 0.1231],\n        #           [0.0963, 0.0300, 0.3308, 0.1970, 0.3459],\n        #           [0.0920, 0.2793, 0.1674, 0.4453, 0.0159]])\n        &gt;&gt;&gt; output = loss(input, target)\n    \"\"\"\n    ...\n</code></pre>"},{"location":"python/pytorch/#save-load","title":"Save &amp; Load","text":"<p><code>AttributeError: Can't get attribute 'MyModel' on &lt;module '__main__' from 'xxx.py'&gt;</code></p> <p>\u81ea\u5b9a\u4e49\u7684\u6a21\u578b \u5fc5\u987b\u5148import\u8fdb\u6765\uff0c\u5426\u5219\u5c31\u4f1a\u52a0\u8f7d\u4e0d\u4e86</p> <pre><code>vgg16 = torchvision.models.vgg16()\nclass MyModel(nn.Module):\n    def __init__(self):\n        super.__init__()\n        self.linear1 = nn.Linear(4, 2)\n        self.sigmoid1 = nn.Sigmoid()\n    ... \n</code></pre> <pre><code>\"\"\" \n    :meth1: \u6574\u4e2a\u6a21\u578b\u4fdd\u5b58\n1. \u5185\u5b58\u8f83\u5927\n2. \u5728\u81ea\u8bbe architecture \u7684\u65f6\u5019\u9700\u8981import\n3. \u5982\u679c\u91cc\u9762\u6709 GPU tensors, \u5c31\u4f1a\u81ea\u52a8\u4e0a\u4f20\u5230 GPU\u4e0a\n    To avoid GPU RAM surge\n        first, torch.load(.., map_location='cpu')\n        then,  torch.load_state_dict(...)\n\"\"\"\n\ntorch.save(vgg16, './models/vgg16.pth') # save\nvgg16 = torch.load('./models/vgg16.pth') # load\n------------------------------------------\n\nmymodel = MyModel()\ntorch.save(mymodel, './models/mymodel.pth') # save\n\nfrom models import MyModel # \u52a0\u8f7d\u7684\u65f6\u5019\u5fc5\u987b\u5bfc\u5165\u6216\u8005\u590d\u5236\u81ea\u5b9a\u4e49\u7684\u7c7b # load\nmodel = torch.load('./models/mymodel.pth') \n\n&gt;&gt;&gt; print(torch.load('./models/mymodel.pth'))\n# MyModel(\n#  (linear): Linear(in_features=4, out_features=2, bias=True)\n#  (sigmoid): Sigmoid())\n</code></pre> <pre><code>\"\"\"\n    :meth2: \u4ee5\u5b57\u5178\u5f62\u5f0f\u53ea\u4fdd\u5b58\u53c2\u6570\n1. \u5185\u5b58\u8f83\u5c0f\uff0c\u5b98\u65b9\u63a8\u8350\n2. \u52a0\u8f7d\u65f6\u9700\u8981\u91cd\u65b0init model\uff0c\u7136\u540e\u628a\u4fdd\u5b58\u7684\u53c2\u6570\u4f20\u8fdb\u53bb\n\"\"\"\n\nvgg16 = torchvision.models.vgg16()\ntorch.save(vgg16.state_dict(), './models/vgg16_state.pth') # save\n\nvgg16 = torchvision.models.vgg16()\nvgg16.load_state_dict(torch.load('./models/vgg16_state.pth')) # load\n\nmymodel = MyModel()\ntorch.save(mymodel.state_dict(), './models/mymodel_state.pth')\n\nfrom models import MyModel\nmymodel = Mymodel()\nmymode.load_state_dict('./models/mymodel_state.pth')\n\n\n&gt;&gt;&gt; print(torch.load('./mymodel_state.pth'))\n# OrderedDict([\n#   ('linear.weight', tensor([[ 0.1370, -0.0558, -0.0024, -0.2526],\n#                             [-0.2042, -0.1686, -0.1526, -0.3912]])), \n#   ('linear.bias', tensor([0.1713, 0.4829]))])\n&gt;&gt;&gt; print(model)\n# MyModel(\n#  (linear): Linear(in_features=4, out_features=2, bias=True)\n#  (sigmoid): Sigmoid()) \n</code></pre>"},{"location":"python/pytorch/#representation","title":"representation","text":""},{"location":"python/pytorch/#utilstensorboard","title":"<code>utils.tensorboard</code>","text":"<p>\u76ee\u524d\u8fd8\u662f\u8981\u5148\u4e0b\u8f7d tensorflow</p> <p><code>TensorFlow installation not found - running with reduced feature set.</code></p> <p>jupyter \u4f7f\u7528 tensorboard</p> <p><pre><code>%load_ext tensorboard # \u52a0\u8f7d\u6269\u5c55\n%tensorboard --logdir runs # \u8fd0\u884c \n</code></pre> [\u5728jupyter lab\u4e2d\u4f7f\u7528tensorboard\u62a5\u9519 UsageError: Line magic function <code>%tensorboard</code> not found.]</p> <ul> <li> <p>SummaryWriter</p> <pre><code>writer = SummaryWriter()\n\nwriter.add_image('my_image', img, 0)\n\nfor i in range(100):\n    writer.add_scalar('y=2x', i * 2, i)\n\nwriter close()\n</code></pre> <p>source code</p> <pre><code>class SummaryWriter:\n    \"\"\"\n    \u76f4\u63a5\u5728 log_dir \u91cc\u5199 Tensorboard \u8981\u7528\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u5728 training loop \u91cc\u76f4\u63a5 call\uff0c\u800c\u4e0d\u7528\u51cf\u7f13\u8bad\u7ec3\u7684\u901f\u5ea6\u3002\n\n    Args:\n        - log_dir: str = \u5b58\u653e\u7684\u6587\u4ef6\u5939\u76ee\u5f55\u3002\n            Default = runs/**CURRENT_DATETIME_HOSTNAME**.\n            Notes\uff1a\u5bf9\u6bcf\u6b21 experiment pass in 'runs/exp1', 'runs/exp2', etc.\n        - comment: str = \u53ea\u7ed9\u9ed8\u8ba4\u7684 log_dir \u6dfb\u52a0\u540e\u7f00\n            Notes\uff1alog_dir \u6539\u4e86\u8fd9\u4e2a\u5c31\u6ca1\u7528\n    Examples:\n        &gt;&gt;&gt; writer = SummaryWriter()\n         # folder location: runs/May04_22-14-54_s-MacBook-Pro.local/\n\n        &gt;&gt;&gt; # using the specified folder name.\n        &gt;&gt;&gt; writer = SummaryWriter(\"my_experiment\")\n        # folder location: my_experiment\n\n        &gt;&gt;&gt; # with comment appended.\n        &gt;&gt;&gt; writer = SummaryWriter(comment=\"LR_0.1_BATCH_16\")\n        # folder location: runs/May04_22-14-54_s-MacBook-Pro.localLR_01_BATCH_16/\n\n    \"\"\"\n\n    def __init__(\n        self,\n        log_dir=None,\n        comment=\"\",\n        purge_step=None,\n        max_queue=10,\n        flush_secs=120,\n        filename_suffix=\"\",\n    ):\n        ...\n\n    def add_image(\n        self, tag, \n        img_tensor, \n        global_step=None, \n        walltime=None, \n        dataformats=\"CHW\" ):\n        \"\"\"\n        \u5199\u56fe\u7247\uff0c \u9700\u8981 ``pillow`` \u5305\n\n        Args:\n            - tag: str =  \u540d\u5b57\n            - img_tensor: Union[torch.Tensor, numpy.ndarray, string,blobname = Image data\n            - dataformats: str = \u683c\u5f0f\uff1aCHW, HWC, HW, WH, etc.\n        \"\"\"\n        ...\n\n    def add_scalar(\n        self,\n        tag,\n        scalar_value,\n        global_step=None,\n        walltime=None,\n        new_style=False,\n        double_precision=False,\n    ):\n        \"\"\" \n        \u753b\u6298\u7ebf\u56fe\n\n        Args:\n            - tag: str = \u540d\u5b57\n            - scalar_value: Optional[float or string/blobname] =  y \u8f74\n            - global_step: int = x \u8f74\uff0c\u4e00\u822c\u662f gloabl step \u7528\u4f5c\u753b\u8fed\u4ee3\u7684\u53d8\u5316\n        \"\"\"\n</code></pre> </li> </ul> <p><code>No dashboards are active for the current data set.</code></p> <p>\u5173\u4e8e\u89e3\u51b3Tensorboard\u51fa\u73b0No dashboards are active for the current data set.\u95ee\u9898</p>"},{"location":"python/pytorch/#cv","title":"CV","text":"<ul> <li>torchvion.</li> </ul>"},{"location":"python/pytorch/#transforms","title":"transforms","text":"<p>\u4e00\u5b9a\u8981\u5173\u6ce8 compose \u7684\u8f93\u5165\u548c\u8f93\u51fa\uff0c\u8981\u76f8\u4e92\u8854\u63a5\u5339\u914d</p> <p>torchvision \u662f\u7528\u6765\u5904\u7406==\u56fe\u50cf==\u7684</p> <pre><code>class Compose:\n    \"\"\"\n    \u7528\u6765 compose transform\uff0c \u628a\u597d\u51e0\u4e2a trabsform process \u7ec4\u88c5\u6210\u4e00\u4e2a composer\n\n    Args:\n        - transforms: List[transform\u7684\u7c7b]\n\n    Example:\n        &gt;&gt;&gt; trans = transforms.Compose([\n        &gt;&gt;&gt;     transforms.CenterCrop(10),  # \u4e2d\u5fc3\u5207\u5272\n        &gt;&gt;&gt;     transforms.PILToTensor(), # \u53d8\u6210tensor\n        &gt;&gt;&gt;     transforms.ConvertImageDtype(torch.float), # tensor dtyte\n        &gt;&gt;&gt; ])\n        &gt;&gt;&gt; img_trans = trans(img)\n    \"\"\"\n\n    def __init__(self, transforms):\n        if not torch.jit.is_scripting() and not torch.jit.is_tracing():\n            _log_api_usage_once(self)\n        self.transforms = transforms\n    def __call__(self, img):\n        \"\"\"\n        \u9010\u5c42\u53bb\u8fc7\n        \"\"\"\n        for t in self.transforms:\n            img = t(img)\n        return img\n\n    ... \nclass ToTensor:\n    \"\"\"\n    \u8f6c PIL Image \u6216\u8005 ndarray \u53d8\u6210 FloatTensor\uff0c\u5e76\u4e14 \u628a\u503c\u81ea\u52a8\u6620\u5c04\u523001\u533a\u95f4\u3002\n    (H x W x C) [0, 255] -&gt; (C x H x W)[0.0, 1.0]\n    \u8f6c target/label \u4e3a LongTensor\n    \u7528 PIL.Image.open(img_path)-&gt;PIL.image, cv2.imread(img_path)-&gt; numpy.ndarrary \u90fd\u884c\n\n    - other cases: \u4e0d\u7f29\u653e\n        - PIL Image \u662f\u5176\u5b83 (L, LA, P, I, F, RGB, YCbCr, RGBA, CMYK, -    - ndarray \u662f\u5176\u5b83 (np.uint8)\n    \"\"\"\n\n    def __init__(self) -&gt; None:\n        _log_api_usage_once(self)\n\n    def __call__(self, pic): \n        \"\"\"\n        Args:\n            - pic: Union[PIL Image, numpy.ndarray]\n\n        Returns:\n            Tensor: torch.FloatTensor\n\n        Examples:\n            &gt;&gt;&gt; img = Image.open(img_path)\n            &gt;&gt;&gt; img2tensor = transforms.ToTensor()\n            &gt;&gt;&gt; tensor_img = img2tensor(img)\n        \"\"\"\n        return F.to_tensor(pic)\n    ...\n\nclass Normalize(torch.nn.Module):\n    \"\"\"\n    \u5bf9 img Tensor \u5728\u6bcf\u4e2a channel \u6b63\u6001\u6807\u51c6\u5316\uff0c\u9ed8\u8ba4 non-inplace\n    ``output[channel] = (input[channel] - mean[channel]) / std[channel]``\n\n    Args:\n        - mean: sequence = Sequence of means for each channel.\n        - std: sequence =  Sequence of standard deviations for each channel.\n        - inplace: bool = False, \u662f\u5426 inplace\n\n    Examples:\n        &gt;&gt;&gt; trans_norm = transforms.Normalize([mean]*channel, [std]*channel)\n        &gt;&gt;&gt; img_norm = trans_norm.forward(img_tensor)\n    \"\"\"\n\n    def __init__(self, mean, std, inplace=False):\n        super().__init__()\n        _log_api_usage_once(self)\n        self.mean = mean\n        self.std = std\n        self.inplace = inplace\n\n    def forward(self, tensor: Tensor) -&gt; Tensor:\n        \"\"\"\n        Args:\n            - tensor: Tensor\n\n        Returns:\n            - Tensor: \u5f52\u4e00\u5316\u4e4b\u540e\u7684 img\n        \"\"\"\n        return F.normalize(tensor, self.mean, self.std, self.inplace)\n    ...\n\nclass Resize(torch.nn.Module):\n    \"\"\"\n    Resize the input image to the given size.\n\n    Warning:\n        \u6839\u636e\u8f93\u5165\u7684\u4e0d\u4e00\u6837\uff0c\u5728 downsampling \u65f6 PIL Image \u548c Tensor \u7684 interpolation \u6709\u4e0d\u4e00\u6837\u3002\n        \uff1a\u5efa\u8bae\uff1a\u7528\u540c\u4e00\u4e2a input dtype \u8fdb\u884c\uff0c\u4e0d\u8981\u6df7\u7528\n\n    Args:\n        - size: Union[sequence, int]: = Optional[(h, w), size] \n            - sequence = (h, w) \u6309\u4f4d\u7f6e\u5339\u914d\n            - int = size \u77ed\u8fb9\u53d8\u6210size\uff0c\u957f\u8fb9\u6309\u957f\u77ed\u8fb9\u7684\u6bd4\u4f8b\u7f29\n                if h &gt; w , (h, w) = (size * h/w, size)\n\n    Example:\n        &gt;&gt;&gt; trans_resize = transforms.resize((heiht, width))\n        &gt;&gt;&gt; img_resize = trans_resize(img)\n    \"\"\"\n\n    def __init__(self, size, interpolation=InterpolationMode.BILINEAR, max_size=None, antialias=\"warn\"):\n        ...\n\n    def forward(self, img):\n        \"\"\"\n        Args:\n            - img: Optional[PIL Image, Tensor]\n\n        Returns:\n            Optional[PIL Image, Tensor]\n        \"\"\"\n        return F.resize(img, self.size, self.interpolation, self.max_size, self.antialias)\n    ...\n\n\n    class RandomCrop(torch.nn.Module):\n        \"\"\"\n        \u968f\u673a\u88c1\u526a\n\n        Args:\n            - size: Union[sequence, int]\n                - sequence = (h, w) -&gt; (h, w)\n                - int = size  -&gt; (size, size) \u6b63\u65b9\u5f62\u88c1\u526a\n\n            - padding: Union[int, sequence, None] = \u5728\u5404 border \u4e0a\u53ef\u9009\u7684 pad\n                - None(default) \n                - int = \u56db\u6761\u8fb9\u90fd\u586b\u4e00\u6837\n                - sequence[int]*2 = [left&amp;right, top&amp;bottom]\n                - sequence[int]*4 = [left, top, right, bottom] \u987a\u65f6\u9488\n\n            - pad_if_needed: boolean = \u4e3a\u4e86\u907f\u514d\u88c1\u526a\u5b8c\u4e0d\u5408 expected size  \n        \"\"\"\n\n        def __init__(self, size, padding=None, pad_if_needed=False, fill=0, padding_mode=\"constant\"):\n            ...\n\n        def forward(self, img):\n            \"\"\"\n            Args:\n                - img:  Union[PIL.Image, Tensor]\n\n            Returns:\n                Union[PIL.Image, Tensor]\n            \"\"\"\n            ...\n</code></pre>"},{"location":"python/pytorch/#models","title":"models","text":"<p>\u73b0\u5728\u63d0\u4f9b\u7684\u662f \u53ef\u4ee5\u81ea\u7531\u5730\u5c06==\u9884\u8bad\u7ec3\u7684 weights== \u52a0\u8f7d\u5230\u6a21\u578b\u4e0a\u3002\uff08<code>pretrained=True</code>\u88ab\u820d\u7528\uff09</p> <p>\u5982\u679c\u9700\u8981\u9884\u8bad\u7ec3\u7684\uff0c\u63a8\u8350\u4f7f\u7528\u6307\u5b9a\u7248\u672c\uff0c\u56e0\u4e3a\u8fd8\u63d0\u4f9b\u4e86\u6bcf\u79cd\u6743\u91cd\u5bf9\u5e94\u7684\u7684\u56fe\u50cf\u9884\u5904\u7406\u7684\u64cd\u4f5c\u3002</p> <pre><code>from torchvision.models import resnet50, ResNet50_Weights\n\n\"\"\"\nver | accu    | name\nOld | 76.130% | ResNet50_Weights.IMAGENET1K_V1\nNew | 80.858% | ResNet50_Weights.IMAGENET1K_V2\n\"\"\"\n\n# \u76f4\u63a5\u770b\u6307\u5b9a\u7248\u672c\nresnet50(weights=ResNet50_Weights.IMAGENET1K_V1)\nresnet50(weights=ResNet50_Weights.IMAGENET1K_V2)\n\n# \u5b57\u7b26\u4e32, \u9ed8\u8ba4\u662f\u54ea\u4e2a\u5c31\u5f97\u770b\u6587\u6863\nresnet50(weights='IMAGENET1K_V2')\nresnet50(weights='DEFAULT') # = pretrained=True\nresnet50(weights=None) # = pretrained=False\n</code></pre> <p>\u9884\u5904\u7406\u56fe\u50cf</p> <p>\u5728\u4f7f\u7528\u9884\u8bad\u7ec3\u6a21\u578b\u4e4b\u524d\uff0c\u5fc5\u987b==\u9884\u5904\u7406\u56fe\u50cf==\uff08\u4ee5\u6b63\u786e\u7684\u5206\u8fa8\u7387/\u63d2\u503c\u8c03\u6574\u5927\u5c0f\uff0c\u5e94\u7528\u63a8\u7406\u53d8\u6362\uff0c\u91cd\u65b0\u7f29\u653e\u503c\u7b49\uff09 \u73b0\u5728\u7edf\u4e00\u63d0\u4f9b\u4e86\u3002</p> <pre><code>weights = ResNet50_Weights.DEFAULT\npreprocess = weights.transforms() # Weight Transforms \u521d\u59cb\u5316\nimg_transformed = preprocess(img) # \u9884\u5904\u7406\u56fe\u50cf\n</code></pre>"},{"location":"python/pytorch/#vgg16","title":"vgg16","text":"<p>Very Deep Convolutional Networks for Large-Scale Image Recognition</p> <pre><code>VGG(\n  (features): Sequential(\n    (0): Conv2d(3, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n    (1): ReLU(inplace=True)\n    (2): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n    (3): ReLU(inplace=True)\n    (4): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)\n    (5): Conv2d(64, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n    (6): ReLU(inplace=True)\n    (7): Conv2d(128, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n    (8): ReLU(inplace=True)\n    (9): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)\n    (10): Conv2d(128, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n    (11): ReLU(inplace=True)\n    (12): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n    (13): ReLU(inplace=True)\n    (14): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n    (15): ReLU(inplace=True)\n    (16): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)\n    (17): Conv2d(256, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n    (18): ReLU(inplace=True)\n    (19): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n    (20): ReLU(inplace=True)\n    (21): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n    (22): ReLU(inplace=True)\n    (23): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)\n    (24): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n    (25): ReLU(inplace=True)\n    (26): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n    (27): ReLU(inplace=True)\n    (28): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n    (29): ReLU(inplace=True)\n    (30): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)\n  )\n  (avgpool): AdaptiveAvgPool2d(output_size=(7, 7))\n  (classifier): Sequential(\n    (0): Linear(in_features=25088, out_features=4096, bias=True)\n    (1): ReLU(inplace=True)\n    (2): Dropout(p=0.5, inplace=False)\n    (3): Linear(in_features=4096, out_features=4096, bias=True)\n    (4): ReLU(inplace=True)\n    (5): Dropout(p=0.5, inplace=False)\n    (6): Linear(in_features=4096, out_features=1000, bias=True)\n  )\n)\n</code></pre> <pre><code>@register_model()\n@handle_legacy_interface(weights=(\"pretrained\", VGG16_Weights.IMAGENET1K_V1))\ndef vgg16(*, weights: Optional[VGG16_Weights] = None, progress: bool = True, **kwargs: Any) -&gt; VGG:\n    \"\"\"\n    VGG-16 \n\n    Args:\n        - weights: Optional(torchvision.models.VGG16_Weights, None) = \u662f\u5426\u4f7f\u7528\u9884\u8bad\u7ec3\u7684\u53c2\u6570\n            default = None\n        - progress: Optional(Bool =  displays a progress bar of the download to stderr. \n            default = True.\n    \"\"\"\n    weights = VGG16_Weights.verify(weights)\n    return _vgg(\"D\", False, weights, progress, **kwargs)\n</code></pre>"},{"location":"utils/","title":"\u6742","text":""},{"location":"utils/#_2","title":"\u597d\u7528\u7684\u7f51\u7ad9","text":"<ul> <li>readmedium</li> <li>Tables Generator</li> </ul>"},{"location":"utils/PPT/","title":"microsoft","text":""},{"location":"utils/PPT/#ppt","title":"PPT","text":"<p>\u6839\u636e\u4e0d\u540c\u7684\u573a\u666f\u9009\u62e9\uff0c\u8981\u8003\u8651\u4e92\u52a8\u65b9\u5f0f\u3001\u5236\u4f5c\u96be\u5ea6\u3001\u662f\u5426\u9700\u8981\u70ab\u9177\u7684\u52a8\u753b\u6548\u679c\u3002 \u2022\u76f4\u63a5\u5728\u5206\u6790\u5de5\u5177\u91cc\u8bb2\u89e3\uff08Tableau\uff09 \u2022 \u5728\u5e7b\u706f\u7247\u91cc\u8bb2\u89e3\uff08PowerPoint\uff09</p> <p></p> <p>\u4e00\u6b21\u5448\u73b0\u592a\u591a\u7684\u4fe1\u606f\u4e0d\u5bb9\u6613\u7a81\u51fa\u91cd\u70b9\u3002\u901a\u8fc7\u5206\u6b65\u5448\u73b0\uff0c\u8ba9\u89c2\u4f17\u5173\u6ce8\u5f53\u524d\uff0c\u4e5f\u65b9\u4fbf\u6807\u6ce8\u3002\u5bf9\u4e8e\u6ca1\u6709\u6765\u73b0\u573a\u7684\u7528\u6237\uff0c\u9605\u8bfb\u6700\u540e\u4e00\u9875\u5c31\u597d\uff08\u6700\u4e3a\u8be6\u7ec6\u5b8c\u6574\uff09\u53ef\u4ee5\u53d1\u5e03\u5230Tableau Server\uff0c\u4ee5\u65b9\u4fbf\u7528\u6237\u81ea\u52a9\u7684\u63a2\u7d22\u6316\u6398</p> <p>\u4f7f\u7528\u8868\u683c\u65f6\u9700\u8981\u6ce8\u610f\u7ed3\u6784\u4e0e\u5448\u73b0\u903b\u8f91\uff0c\u5e76\u53ef\u4ee5\u4f5c\u4e3a\u53ef\u89c6\u5316\u5206\u6790\u7684\u4e00\u79cd\u8865\u5145\u3002 </p> <p>SCQA\uff1a\u6784\u5efa\u6c9f\u901a\u6c1b\u56f4\uff08Situation\uff09\uff0c\u6307\u51fa\u51b2\u7a81\uff08Complication\uff09\u548c\u7591\u95ee\uff08Question\uff09\uff0c\u63d0\u4f9b\u89e3\u51b3\u65b9\u6848\uff08Answer\uff09</p> <ul> <li>Situation \u60c5\u5883\uff1a\u63d0\u4f9b\u4e8b\u4ef6\u80cc\u666f\uff0c\u6784\u5efa\u4e0e\u53d7\u4f17\u5171\u540c\u8ba4\u77e5\uff08\u60c5\u611f\uff09\u7684\u57fa\u7840\u8d77\u70b9\uff0c\u83b7\u5f97\u7406\u89e3\u4e0e\u5171\u8bc6</li> <li>Complication\uff5cConflict \u969c\u788d/\u51b2\u7a81\uff1a\u63cf\u8ff0\u969c\u788d\u4e0e\u51b2\u7a81\uff0c\u8ba9\u53d7\u4f17\u8ba4\u8bc6\u5230\u5b58\u5728\u6270\u4e71\u7a33\u5b9a\u7684\u95ee\u9898</li> <li>Question \u63d0\u95ee\uff1a\u9488\u5bf9C\uff0c\u63d0\u51fa\u4e00\u4e2a\u95ee\u9898</li> <li>Answer \u56de\u7b54\uff1a\u89e3\u51b3\u95ee\u9898\uff0c\u63d0\u4f9b\u514b\u670dC\u7684\u7b54\u6848</li> </ul> <p>\u9152\u5e97\u8ba2\u5355 \uff08S\uff09 2020\u5f00\u5e74\u4ee5\u6765\uff0c\u9152\u5e97\u8ba2\u5355\u4e00\u5982\u65e2\u5f80\u7a33\u6b65\u53d1\u5c55 \uff08C\uff09\u7968\u52a1\u5904\u7406\u56e2\u961f\u6709\u4eba\u79bb\u804c\u5bfc\u81f4\u4eba\u624b\u9010\u6e10\u5403\u7d27\uff0c\u516d\u6708\u4ee5\u540e\uff0c\u8ba2\u5355\u91cf\u589e\u52a0\u660e\u663e\uff0c\u6211\u4eec\u56e2\u961f\u5df2\u7ecf\u8fdb\u4e86\u5168\u529b\u52a0\u73ed\u52a0\u70b9\uff0c\u4ecd\u7136\u5f25\u8865\u4e0d\u4e0a\u8fd9\u4e2a\u9010\u6e10\u653e\u5927\u7684\u7f3a\u53e3\u3002\u73b0\u5728\uff0c\u8fd9\u5df2\u7ecf\u5f71\u54cd\u4e86\u516c\u53f8\u7684\u4e1a\u7ee9\u548c\u5ba2\u6237\u4f53\u9a8c \uff08Q\uff09\u6211\u4eec\u7a76\u7adf\u600e\u6837\u624d\u80fd\u89e3\u51b3\u8fd9\u4e2a\u8ba2\u5355\u5904\u7406\u7684\u7f3a\u53e3\u95ee\u9898\u5462\uff1f \uff08A\uff09\u5e0c\u671b\u603b\u516c\u53f8\u80fd\u591f\u589e\u52a0\u8ba2\u5355\u5904\u7406\u90e8\u95e8\u7684\u4eba\u624b</p> <p></p> <p>\u9009\u5b9appt\u4e3b\u9898\u5b57\u4f53\u53ef\u5728\u9ed8\u8ba4\u5b57\u4f53\u4e0a\u66f4\u6362\uff0c\u8fd9\u6837\u66f4\u5feb\u3002</p> <p>PPT\uff08PowerPoint\uff09\u66f4\u6539\u9ed8\u8ba4\u7b49\u7ebf\u5b57\u4f53</p>"},{"location":"utils/PPT/#excel","title":"Excel","text":"<pre><code>let\n    fileContent = File.Contents(\"C:\\Users\\zxouyang\\Downloads\\yue_test.json\"),\n    json = Json.Document(fileContent),\n    table = Table.FromList(json, Splitter.SplitByNothing(), null, null, ExtraValues.Error),\n    expandedTable = Table.ExpandRecordColumn(table, \"Column1\", {\"src\", \"tgt\"})\nin\n    expandedTable\n</code></pre>"},{"location":"utils/git/","title":"Git","text":""},{"location":"utils/git/#background","title":"Background","text":"<ul> <li>\u5408\u4f5c\u6a21\u5f0f<ul> <li> <p>Collocated Contributor Repositories: (Fork and Pull)</p> <ul> <li>team members (Developers) pull the latest code from a central shared repository to theirown private repository.</li> <li>make their changes locally, \u7136\u540e <code>git push &lt;local_main&gt;:&lt;remote_subbranch&gt;</code> \u6765 share changes\uff0c\u4f46\u662f\u6ca1\u6709\u6743\u9650\u53bb push \u5230 <code>remote_main</code>\uff0c</li> <li> <p>project maintainers \u5c31\u53ef\u4ee5 accepted and pulled\uff0c<code>git merge &lt;subbranch&gt;</code>\u5230 project main.</p> </li> <li> <p>Repos are on a centralized host.</p> <ul> <li>Single Repository, Shared Maintenance: (Shared Repo)</li> </ul> </li> <li>\u6bcf\u4e00\u4e2a team member \u90fd\u662f project maintainer\uff0c\u53ef\u4ee5\u76f4\u63a5 make changes <code>git push &lt;local_main&gt;:&lt;remote_main&gt;</code>\u3002</li> <li>Relies on policies to restrict access to the main project branch</li> </ul> </li> </ul> </li> </ul>"},{"location":"utils/git/#software-contiguration-managementscm","title":"\u8f6f\u4ef6\u914d\u7f6e\u7ba1\u7406, Software Contiguration Management,SCM","text":"<p>\u901a\u8fc7\u6267\u884c\u7248\u672c\u63a7\u5236\u3001\u53d8\u66f4\u63a7\u5236\u7684\u89c4\u7a0b\uff0c\u4ee5\u53ca\u4f7f\u7528\u5408\u9002\u7684\u914d\u7f6e\u7ba1\u7406\u8f6f\u4ef6\uff0c\u6765\u4fdd\u8bc1\u6240\u6709\u914d\u7f6e\u9879\u7684\u5b8c\u6574\u6027\u548c\u53ef\u8ddf\u8e2a\u6027\u3002\u914d\u7f6e\u7ba1\u7406\u662f\u5bf9\u5de5\u4f5c\u6210\u679c(\u6e90\u7801\u6587\u4ef6\u3001\u9700\u6c42\u6587\u6863\u3001\u8bbe\u8ba1\u6587\u6863\uff0c\u5f00\u53d1\u6587\u6863)\u7684\u4e00\u79cd\u6709\u6548\u4fdd\u62a4\u3002</p> <ul> <li>\u96c6\u4e2d\u7248\u672c\u63a7\u5236\u7cfb\u7edf</li> </ul> <p>\u662f\u653e\u5728\u4e2d\u592e\u670d\u52a1\u5668\u4e0a\uff0c\u6bcf\u6b21\u53ea\u80fd\u7531\u4e00\u4e2a\u4eba\u53bb\u9501\u5b9a\u670d\u52a1\u5668\u6587\u4ef6\u7684\u53bb\u7528</p> <pre><code>- doc-level\u9501\uff0c\n- row-level\u9501\uff0c\u540e\u8005\u5c31\u662f\u9700\u8981\u63d0\u524d\u5206\u914d\u597d\u884c\u6570\uff0c\u7136\u540e\u8fdb\u884c\u6bd4\u5bf9\u5408\u5e76\uff0c\u63d0\u9ad8\u4e86\u591a\u4eba\u534f\u4f5c\u6c34\u5e73\u3002\u5982\u679c\u662f\u540c\u6837\u5bf9\u4e00\u884c\uff0c\u90a3\u4e5f\u6ca1\u8f99\uff0c\u90a3\u4e5f\u53ea\u80fd\u662f\u9501\u4f4f\u4e0d\u7ed9\u522b\u4eba\u7528\uff09\uff0c\u5728\u9501\u5b9a\u671f\u95f4\u5176\u4ed6\u4eba\u662f\u4e0d\u80fd\u8fdb\u884c\u4fee\u6539\u7684\uff0c\u53ea\u80fd\u67e5\u770b\u3002\n\u4e00\u65e6\u670d\u52a1\u5668\u53d1\u751f\u6545\u969c\u6216\u8005\u635f\u574f\uff0c\u5c31\u4f1a\u4e22\u5931\n</code></pre>"},{"location":"utils/git/#git-client-tool","title":"git client tool","text":"<ul> <li>Git Bash<ul> <li>Download for macOS</li> <li><code>brew install git</code></li> <li><code>git --version</code></li> </ul> </li> <li>Github Desktop \u3010</li> <li>sourcetree</li> </ul>"},{"location":"utils/git/#mac","title":"mac","text":""},{"location":"utils/git/#zsh","title":"zsh","text":"<p>\u628a\u5982\u4e0b\u4ee3\u7801\u6dfb\u52a0\u81f3\u4f60\u7684 <code>~/.zshrc</code> \u6587\u4ef6\u4e2d\uff0c\u5c31\u53ef\u4ee5\u5728\u53f3\u4fa7\u663e\u793a\u5206\u652f\u540d\u79f0</p> <pre><code>autoload -Uz vcs_info\nprecmd_vcs_info() { vcs_info }\nprecmd_functions+=( precmd_vcs_info )\nsetopt prompt_subst\nRPROMPT=\\$vcs_info_msg_0_\n# PROMPT=\\$vcs_info_msg_0_'%# '\nzstyle ':vcs_info:git:*' formats '%b'\n</code></pre> <ul> <li>\u5728\u5176\u5b83\u73af\u5883\u4e2d\u4f7f\u7528 Git - Zsh \u4e2d\u7684 Git</li> </ul>"},{"location":"utils/git/#_1","title":"\u5de5\u4f5c\u6d41\u7a0b\u539f\u7406","text":""},{"location":"utils/git/#_2","title":"\u56db\u5927\u533a\u57df","text":"<ul> <li> <p>3\u4e2a\u672c\u5730\u533a\u57df</p> <ul> <li> <p>\u5de5\u4f5c\u533a, Working Directory</p> <ul> <li>\u7528\u6237\u5de5\u4f5c\u7684\u5730\u65b9\uff0c\u653e\u4ee3\u7801\u6587\u4ef6\u7684\u5730\u65b9\u3002</li> <li>\u9700\u8981\u5f80 repository \u91cc\u653e\u6587\u4ef6\uff0c\u5c31\u8981\u5148\u5728\u5de5\u4f5c\u533a\u91cc\u653e\u6587\u4ef6\u3002Git \u4f1a\u81ea\u52a8\u68c0\u6d4b\u8fd9\u91cc\u7684\u6587\u4ef6\u53d8\u5316\u60c5\u51b5\u3002  </li> </ul> </li> <li> <p>\u5f53 repository \u91cc\u6709\u5f88\u591a branches\uff0c\u5de5\u4f5c\u533a\u4f1a\u81ea\u52a8\u662f\u6240\u9009 branch \u7684\u5de5\u4f5c\u5730\u65b9\u3002      </p> </li> <li> <p>\u6682\u5b58\u533a, Staging Area :</p> <ul> <li>\u5b58\u653e\u4e34\u65f6\u7684\u6539\u52a8, working directory \u91cc\u6709\u4fee\u6539\u7684\u6587\u4ef6\u9700\u8981\u5148 <code>git add file_name</code> \u63d0\u4ea4\u5230 staging area\uff0c\u7136\u540e\u518d<code>git commit -m &lt;message&gt;</code> \u653e\u5230 local repository \u91cc\uff0c\u7136\u540e\u5c31\u4f1a\u4ea7\u751f\u4e00\u4e2a\u7248\u672c\u53f7\u6587\u4ef6\u3002  </li> </ul> </li> <li> <p>\u4e8b\u5b9e\u4e0a\u5b83\u53ea\u662f\u4e00\u4e2a\u6587\u4ef6, \u4fdd\u5b58\u5373\u5c06\u63d0\u4ea4\u7684\u6587\u4ef6\u5217\u8868\u4fe1\u606f\u3002</p> </li> <li>Git \u76ee\u5f55\uff0c .git directory, Respository<ul> <li>\u5b89\u5168\u5b58\u653e\u6570\u636e\u7684\u4f4d\u7f6e, \u8fd9\u91cc\u9762\u6709\u63d0\u4ea4\u5230\u6240\u6709\u7248\u672c\u7684\u6570\u636e\u3002\u901a\u8fc7\u8fd9\u4e2a\u5b9e\u73b0\u4e07\u4e00\u8fdc\u7a0b\u6302\u4e86\uff0c\u600e\u4e48\u5728 local \u7aef\u7ee7\u7eed\u64cd\u4f5c</li> <li>HEAD file \u6307\u5411\u6700\u65b0\u653e\u5165\u4ed3\u5e93\u7684\u7248\u672c</li> <li>heads dir \u91cc\u662f\u6bcf\u4e2a\u5206\u652f\u6307\u5411\u7684\u6700\u65b0\u7248\u672c</li> <li>objects dir \u91cc\u662f\u6240\u6709\u7248\u672c\u7684\u4fee\u6539\u60c5\u51b5</li> </ul> </li> <li>1\u4e2a\u8fdc\u7a0b\u533a\u57df</li> <li>\u8fdc\u7a0b\u5e93\uff0cRemote<ul> <li>\u6258\u7ba1\u4ee3\u7801\u7684\u670d\u52a1\u5668\uff0c\u4ece local repository \u63a8\u9001\u6587\u4ef6\u5230\u8fdc\u7a0b\u5e93\u9700\u8981 <code>git push</code>, \u4ece\u8fdc\u7a0b\u5e93\u62c9\u53d6\u6587\u4ef6\u6765\u66f4\u65b0 repository \u9700\u8981 <code>git pull</code></li> </ul> </li> </ul> </li> </ul>"},{"location":"utils/git/#details","title":"details","text":"<ul> <li> <p>\u7248\u672c\u53f7</p> <ul> <li>SHA-1 \u52a0\u5bc6\uff0c \u7528\u6765 merge \u65f6\u907f\u514d conflict</li> <li>\u517140\u4f4d\uff0c\u524d\u4e24\u4f4d2\u5b9a\u4f4d <code>objects</code> \u91cc\u7684 dir name\uff0c\u540e38\u4f4d\u5b9a\u4f4d file name</li> <li> <p>\u67e5\u770b\u7248\u672c\u53f7\u6587\u4ef6\u4e0d\u80fd\u76f4\u63a5\u624b\u52a8\u6253\u5f00\uff0c\u9700\u8981\u7528git bash\u6253\u5f00</p> <ul> <li><code>git cat-file -p &lt;version&gt;</code><ul> <li><code>-p</code> \u53cb\u597d\u5730\u67e5\u770b</li> <li>\u4f46\u662f\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u4f1aerror <code>Not a valid object name 636a7d6c4e21df81163ad4616e301e86ca000f</code></li> </ul> </li> </ul> </li> <li> <p>\u5185\u5bb9\u662f\u5f53\u524d\u63d0\u524d\u4fe1\u606f\u7684    </p> </li> </ul> </li> </ul>"},{"location":"utils/git/#git-command","title":"git command","text":""},{"location":"utils/git/#_3","title":"\u521d\u59cb\u5316","text":""},{"location":"utils/git/#local-init","title":"\u672c\u5730\u65b0\u5efa\u4e00\u4e2a local init","text":"<p><code>git init</code></p> <pre><code>mkdir local_init\ncd local_init\ngit init\nls\n</code></pre> <p>\u6b64\u65f6\u5c31\u4f1a\u51fa\u73b0\u4e00\u4e2a .git \u7684\u9690\u85cf directory\uff0c\u8fd9\u5c31\u662f local repository\u3002 \u4ee5\u540e\u6240\u6709\u7684 git \u64cd\u4f5c\u5386\u53f2\u63d0\u4ea4\u8bb0\u5f55\u4fe1\u606f\u5168\u90fd\u5728\u6b64, \u53ea\u8981\u8fd9\u4e2a\u6587\u4ef6\u5939\u8fd8\u5b58\u5728, \u5c31\u53ef\u4ee5\u8bb0\u4f4f\u6211\u4eec\u6240\u6709\u7684 git \u64cd\u4f5c\u3002 </p> <p>\u5728 local init \u65b0\u5efa\u7684 repository \u662f\u6ca1\u6709\u4efb\u4f55\u7684\u63d0\u4ea4\u6587\u4ef6\uff0c\u6240\u4ee5\u4e5f\u6ca1\u6709 default \u7684 branch \u6587\u4ef6\u3002</p> <ul> <li>heads  directory \u91cc\u6ca1\u6709\u6587\u4ef6\uff0c\u54ea\u6015 HEAD \u91cc\u6307\u5411 main \u6216\u8005master\u3002</li> <li>objects directory \u91cc\u6ca1\u6709\u6587\u4ef6\uff0c\u56e0\u4e3a\u6ca1\u6709\u7248\u672c\u3002</li> <li>\u6240\u4ee5\u7528 <code>git branch -m branch1</code> \u4e5f\u6ca1\u6709\u7528\uff0c\u56e0\u4e3ahead\u91cc\u4f9d\u65e7\u6ca1\u6709\u6587\u4ef6\u3002  </li> </ul>"},{"location":"utils/git/#gui-init","title":"GUI init","text":"<p>\u9664\u4e86 local init \u91cc\u7684\u4e1c\u897f\uff0c\u8fd8\u4f1a\u81ea\u52a8 initial commit</p> <ul> <li>\u751f\u6210 <code>.git</code>, <code>.gitattribute</code></li> <li>\u53ef\u4ee5\u81ea\u9009\u8981\u4e0d\u8981\u5e26\u4e0a <code>readme.md</code></li> <li>heads  directory \u91cc\u6709\u6587\u4ef6\uff0c\u662f default branch (main \u6216\u8005 master\uff0c\u81ea\u5df1\u8bbe)\uff0c\u91cc\u9762\u6307\u5411\u7684\u5c31\u662f initial commit \u7684\u7248\u672c\u6587\u4ef6</li> <li>objects directory \u6709\u6587\u4ef6\uff0c\u5305\u62ec initial commit \u8fd9\u4e2a\u7248\u672c\u6587\u4ef6</li> <li>\u6240\u4ee5\u7528 <code>git branch -m branch1</code> \u5c31\u6709\u7528\uff0c\u800c\u4e14\u53ef\u4ee5\u9009\u62e9branch\u3002</li> </ul> <p></p>"},{"location":"utils/git/#git-config","title":"git config \u914d\u7f6e","text":"<ul> <li> <p>\u67e5\u770b git \u914d\u7f6e <code>git config --list</code></p> <pre><code>$ git config --list\n# \u63d0\u4ea4\u4ee3\u7801\u65f6\u7684\u7528\u6237\u4fe1\u606f \nuser.name= \nuser.email=\n...\n</code></pre> </li> <li> <p>\u8bbe\u7f6e\u63d0\u4ea4\u4ee3\u7801\u65f6\u7684\u7528\u6237\u4fe1\u606f</p> </li> </ul> <pre><code># 1. usrname\ngit config --global user.name \"yourUserName\"\n\n# 2. useremail\ngit config --gloabl user.email \"yourEmail\"\n\n# 3. \u6ca1\u6709 `global` \u53ea\u5bf9\u5f53\u524d\u4ed3\u5e93\u751f\u6548 \n</code></pre> <ul> <li>\u4fee\u6539 git \u914d\u7f6e\u6587\u4ef6</li> </ul> <pre><code># 1. \u9488\u5bf9\u5f53\u524d\u4ed3\u5e93\n$ git config -e \n\n# 2. \u9488\u5bf9 local \u6240\u6709\u4ed3\u5e93\n$ git config -e --global \n</code></pre>"},{"location":"utils/git/#_4","title":"\u65e5\u5e38\u64cd\u4f5c","text":""},{"location":"utils/git/#_5","title":"\u63d0\u4ea4\u4ee3\u7801","text":""},{"location":"utils/git/#_6","title":"\u57fa\u672c\u6d41\u7a0b","text":"<ol> <li> <p>working dir -&gt; staging area <code>git add</code></p> <pre><code># 1. \u8be5\u547d\u4ee4\u53ef\u4ee5\u5c06\u6587\u4ef6\u6dfb\u52a0\u5230\u6682\u5b58\u533a\n$ git add [file1] [file2] ...\n\n# 2. \u6dfb\u52a0\u6307\u5b9a\u76ee\u5f55\u5230\u6682\u5b58\u533a\n$ git add [dir]\n\n# 3. \u6dfb\u52a0\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u4ef6\u8fdb\u5165\u6682\u5b58\u533a\n$ git add .\n\n# 4. \u6dfb\u52a0\u5f53\u524d\u76ee\u5f55\u4e0b\u7279\u5b9a\u683c\u5f0f\u8fdb\u5165\u6682\u5b58\u533a.\n$ git add *.py\n</code></pre> </li> <li> <p>staging area -&gt; local repository    <code>git commit -m &lt;message&gt;</code></p> </li> <li> <p>local respository -&gt; remote    <code>git push origin &lt;local_branch&gt; : &lt;remote_branch&gt;</code></p> </li> <li><code>origin</code> :</li> <li><code>local_branch</code> working dir \u7684 branch</li> <li><code>remote_branch</code> \u4f60\u8981 push \u7684\u90a3\u4e2a repository \u7684\u90a3\u4e2a branch</li> </ol>"},{"location":"utils/git/#_7","title":"\u4e00\u4e9b\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u7528\u5230\u7684\u67e5\u770b\u6307\u4ee4","text":"<ul> <li>\u67e5\u770b\u5728\u4f60\u4e0a\u6b21\u63d0\u4ea4\u4e4b\u540e\u662f\u5426\u6709\u5bf9\u6587\u4ef6\u8fdb\u884c\u518d\u6b21\u4fee\u6539  <code>git status</code><ul> <li><code>nothing to commit</code> \u76ee\u524d\u300c\u6c92\u6709\u6771\u897f\u53ef\u4ee5\u63d0\u4ea4\u300d</li> <li><code>Untracked files</code> \u6240\u6709\u6587\u4ef6\u90fd\u662f\u5f53\u524d\u6ca1\u6709\u88ab\u52a0\u5165\u8fc7branch\u7684\u6587\u4ef6\uff0c\u4e5f\u6ca1\u6709\u88ab <code>git add</code> \u653e\u8fdb staging area</li> <li><code>Changes not staged for commit</code> \u6539\u8fc7\uff0c\u6ca1\u6709\u88ab <code>git add</code> \u653e\u8fdb staging area</li> <li><code>Changes to be committed</code> \u6539\u8fc7\uff0c\u5df2\u7ecf\u653e\u8fdb staging area\u3002</li> <li><code>Unmerged paths</code> \u51b2\u7a81\u7684\u6587\u4ef6\u3002\u5728\u6587\u4ef6\u4e2d\u628a\u51b2\u7a81\u90fd\u4fdd\u7559\u4e0b\u6765\u4e86\uff0c\u5e76\u9700\u8981\u81ea\u5df1\u624b\u52a8\u5904\u7406\u3002</li> </ul> </li> <li>\u6bd4\u8f83\u6587\u4ef6\u5728\u6682\u5b58\u533a\u548c\u5de5\u4f5c\u533a\u7684\u5dee\u5f02\uff0c\u5df2\u7ecf\u5199\u5165\u6682\u5b58\u533a\u548c\u5df2\u7ecf\u88ab\u4fee\u6539\u4f46\u5c1a\u672a\u5199\u5165\u6682\u5b58\u533a\u6587\u4ef6\u7684\u533a\u522b  <code>git diff</code></li> <li>\u67e5\u770b\u6682\u5b58\u533a\u7684\u6587\u4ef6  <code>git ls-files</code><ul> <li>\u53ef\u9009\u53c2\u6570:<ul> <li><code>-d</code>: \u663e\u793a\u5220\u9664\u7684\u6587\u4ef6</li> <li><code>-m</code>: \u663e\u793a\u88ab\u4fee\u6539\u8fc7\u7684\u6587\u4ef6</li> <li><code>-o</code>: \u663e\u793a\u6ca1\u6709\u88ab git \u8ddf\u8e2a\u8fc7\u7684\u6587\u4ef6</li> </ul> </li> </ul> </li> <li> <p>\u67e5\u770b\u6682\u5b58\u533a\u6587\u4ef6\u4e2d\u7684\u5185\u5bb9 <code>git cat-file -p</code></p> <ul> <li>\u5982\u679c error\uff0c \u53ef\u4ee5\u770b\u770b <code>git ls-files</code> \u5728\u4e0d\u5728\u6682\u5b58\u533a\u91cc</li> </ul> </li> <li> <p>\u7ed9\u7248\u672c\u6587\u4ef6\u6253\u6807\u7b7e</p> </li> </ul> <p></p>"},{"location":"utils/git/#_8","title":"\u4e00\u4e9b\u64cd\u4f5c","text":"<ul> <li> <p>\u5220\u9664\u6587\u4ef6 <code>git rm</code></p> <pre><code># 1. \u5c06\u6587\u4ef6\u4ece\u6682\u5b58\u533a\u548c\u5de5\u4f5c\u533a\u4e2d\u5220\u9664\n# \u53ef\u4ee5\u52a0\u4e0a -f, \u8868\u793a\u5f3a\u5236\u5220\u9664\u4e4b\u524d\u4fee\u6539\u8fc7\u800c\u4e14 add \u5230\u6682\u5b58\u533a\u7684\u6587\u4ef6\n$ git rm [-f] &lt;file&gt;\n\n# 2. \u5c06\u6587\u4ef6\u4ece\u6682\u5b58\u533a\u5220\u9664\uff0c\u5728\u5de5\u4f5c\u533a\u4fdd\u7559\n$ git rm --cached &lt;file&gt;\n</code></pre> </li> </ul>"},{"location":"utils/git/#_9","title":"\u5206\u652f\u64cd\u4f5c","text":"<ul> <li>\u67e5\u770b\u5206\u652f <code>git branch -a</code></li> <li>\u521b\u5efa\u65b0\u5206\u652f <code>git checkout -b &lt;new_branch&gt;</code></li> </ul> <pre><code># 1. \u521b\u5efa\u5206\u652f,\u6ce8\u610f\u65b0\u5206\u652f\u521b\u5efa\u540e\u4e0d\u4f1a\u81ea\u52a8\u5207\u6362\u4e3a\u5f53\u524d\u5206\u652f\n$ git branch &lt;new_branch&gt;\n\n# 2. \u57fa\u4e8e\u5f53\u524d\u5206\u652f\u521b\u5efa\u4e00\u4e2a\u65b0\u5206\u652f,\u5e76\u8fdb\u884c\u5207\u6362\n$ git checkout -b &lt;new_branch&gt;\n\n# 3. \u57fa\u4e8e\u6307\u5b9a\u5206\u652f\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5206\u652f,\u5e76\u8fdb\u884c\u5207\u6362\n$ git checkout -b &lt;new_branch&gt; &lt;given_brach&gt;\n\n# 4. \u521b\u5efa\u8fdc\u7a0b\u5206\u652f(\u672c\u5730\u5206\u652fpush\u5230\u8fdc\u7a0b)\uff1a\n$ git push origin &lt;remote_branch&gt;\n</code></pre> <ul> <li> <p>\u5207\u6362\u5206\u652f <code>git checkout</code></p> <pre><code># 1. \u5207\u6362\u5206\u652f\n$ git checkout &lt;branch&gt;\n\n# 2. \u5207\u6362\u5230\u4e0a\u4e00\u4e2a\u5206\u652f\n$ git checkout -\n\n# 3. \u5207\u6362 commit version\n$ git log # \u67e5\u770b\u7248\u672c\u53f7\n$ git checkout &lt;SHA&gt;\n</code></pre> <p> </p> <p>Git \u5207\u6362\u5206\u652f - \u5220\u9664\u5206\u652f</p> </li> </ul> <pre><code># 1. local : \u53ea\u80fd\u5220\u9664\u5df2\u7ecf\u53c2\u4e0e\u4e86\u5408\u5e76\u7684\u5206\u652f\uff0c\u5bf9\u4e8e\u672a\u6709\u5408\u5e76\u7684\u5206\u652f\u662f\u65e0\u6cd5\u5220\u9664\u7684\n$ git branch -d &lt;local_branch&gt;\n\n# 2. local : \u60f3\u5f3a\u5236\u5220\u9664\u4e00\u4e2a\u5206\u652f\n$ git branch -D &lt;local_branch&gt;\n\n# 3. \u5220\u9664\u8fdc\u7a0b\u5206\u652f\n$ git push origin :heads/&lt;_remote_branch&gt;\n</code></pre>"},{"location":"utils/git/#43","title":"4.3 \u66f4\u65b0\u64cd\u4f5c","text":"<p>@TODO</p>"},{"location":"utils/git/#_10","title":"\u5408\u5e76\u64cd\u4f5c","text":"<ol> <li>\u5148\u5207\u6362\u5230\u8981\u5408\u5e76\u7684\u4e3b\u5206\u652f <code>git checkout master</code></li> <li>\u9009\u62e9\u8981\u5408\u5e76\u7684\u53e6\u5916\u4e00\u4e2a branch `git merge"},{"location":"utils/git/#_11","title":"\u5408\u5e76\u51b2\u7a81","text":"<p>\u5408\u5e76\u4ee3\u7801\u51fa\u73b0\u51b2\u7a81\u63d0\u793a\u3002 \u8fd9\u4e2a\u65f6\u5019\u4e0d\u53ef\u4ee5\u8fdb\u884c\u4efb\u4f55\u5206\u652f\u5207\u6362\u548ccommit\u64cd\u4f5c\uff0c\u9700\u8981\u6309\u7167\u63d0\u793a\u5c06\u51b2\u7a81\u89e3\u51b3\u3002</p> <pre><code># \u51b2\u7a81\u63d0\u793a \nAuto-merging README.md\nCONFLICT (content): Merge conflict in README.md\nAutomatic merge failed; fix conflicts and then commit the result.\n</code></pre> <p> </p> <ol> <li> <p>\u67e5\u770b\u51b2\u7a81\u6587\u4ef6\u5185\u5bb9</p> <pre><code>$ vim README.md\n1111\n2222\n&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD \n3333 \n=======\n3344\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature/hotfix-002\n</code></pre> </li> <li> <p>\u4ece <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code> \u5f00\u59cb, \u5230 <code>=======</code> \u90fd\u662f\u4e3b\u5206\u652f\u5df2\u7ecf\u5b58\u5728\u7684\u5185\u5bb9\u3002</p> </li> <li> <p>\u4ece <code>=======</code> \u5f00\u59cb, \u5230 <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt; branch</code> \u90fd\u662f merge \u8fc7\u6765\u7684\u5206\u652f\u7684\u5185\u5bb9\u3002</p> </li> <li> <p>\u89e3\u51b3\u51b2\u7a81\uff0c\u89c6\u60c5\u51b5\u4fdd\u7559(\u5220\u9664)\u8bb0\u5f55</p> </li> <li>\u51b2\u7a81\u89e3\u51b3\u5b8c\u6210\u4e4b\u540e, \u518d\u6b21\u63d0\u4ea4\u4ee3\u7801    <code>git commit</code></li> </ol>"},{"location":"utils/git/#_12","title":"\u6682\u5b58\u4ee3\u7801\u4fdd\u62a4\u73b0\u573a","text":"<p>\u9879\u76ee\u7ecf\u7406\u63d0\u4e86\u4e00\u4e2a\u65b0\u7684\u9700\u6c42, \u5f00\u53d1\u5c31\u9700\u8981\u4ece master \u5206\u652f\u8fc1\u51fa\u4e00\u4e2a\u65b0\u7684\u5206\u652f\u8fdb\u884c\u529f\u80fd\u5f00\u53d1(\u4f8b\u5982\u8fc1\u51fa\u65b0\u5206\u652f\u4e3adev), \u5982\u679c\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u751f\u4ea7\u4e0a\u6709\u7d27\u6025 bug \u9700\u8981\u4fee\u590d, \u5c31\u53ef\u4ee5\u7528\u5230 <code>git stash</code> \u4e86\u3002 \u8fd9\u79cd\u60c5\u51b5\u4e00\u822c\u662f\u51fa\u73b0\u5728\u4f60\u6b63\u5728\u5b8c\u6210\u4e00\u4e2a\u529f\u80fd\uff0c\u4f46\u662f\u5ffd\u7136\u7ebf\u4e0a\u53d1\u73b0\u4e86\u4e00\u4e2aBug\uff0c\u5fc5\u987b\u9a6c\u4e0a\u5f00\u4e00\u4e2a\u65b0\u7684\u5206\u652f\u6765\u4fee\u590dbug\uff0c\u4f46\u662f\u73b0\u5728\u7684\u529f\u80fd\u6ca1\u5199\u5b8c\u4e0d\u6253\u7b97\u63d0\u4ea4(commit)\uff0c\u73b0\u5728\u600e\u4e48\u529e\uff1f\uff1f</p> <p>\u4e3a\u4ec0\u4e48\u8981\u6682\u5b58\uff0c\u800c\u4e0d\u7528\u76f4\u63a5\u5728\u81ea\u5df1\u7684 local repository commit</p> <p>commit \u9700\u8981\u5199 message\u3002\u4e00\u822c message \u90fd\u662f\u5199 \u201c\u5b8c\u6210xx\u529f\u80fd\uff0c\u4fee\u6539xx\u529f\u80fd\u201d\uff0c \u5982\u679c\u8fd9\u6837\u5199\u4f46\u662f\u5176\u5b9e\u505a\u5230\u4e00\u534a\u5c31\u4f1a\u6709\u6b67\u4e49\u3002\u5982\u679c\u4e0d\u8fd9\u6837\u5199\uff0c\u4ea4\u4ee3\u81ea\u5df1\u7684\u5de5\u4f5c\u8fdb\u5ea6\uff0c\u4e5f\u884c\u3002\u4f46\u662f\u4e00\u65e6 push \u7684\u8bdd\u5c31\u4f1a\u628a\u8be5 branch \u7684\u6240\u6709 commit \u90fd push \u5230 shared repository\u3002\u90a3\u4e48 messages \u90fd public \u4e86\u3002</p> <p><code>git stash</code> \u53ef\u4ee5\u5c06\u73b0\u5728\u7684 \u5de5\u4f5c\u533a\u5168\u90e8\u7684\u4fee\u6539\u3001\u65b0\u589e\u3001\u5220\u9664\u7b49\u64cd\u4f5c\uff0c\u5168\u90e8\u4fdd\u5b58\u8d77\u6765\u3002</p> <p><code>git stash</code> \u7684\u5e38\u7528\u547d\u4ee4:</p> <ol> <li><code>git stash save 'save message'</code>: \u6267\u884c\u5b58\u50a8\u65f6, \u6dfb\u52a0\u5907\u6ce8, \u65b9\u4fbf\u67e5\u627e, \u5f53\u7136\u53ea\u6267\u884c <code>git stash</code> \u4e5f\u662f\u53ef\u4ee5\u7684, \u4f46\u67e5\u627e\u65f6\u4e0d\u65b9\u4fbf\u3002</li> <li><code>git stash list</code>: \u67e5\u770b stash \u4e86\u54ea\u4e9b\u5b58\u50a8\u3002</li> <li><code>git stash show</code>: \u663e\u793a\u505a\u4e86\u54ea\u4e9b\u6539\u52a8, \u9ed8\u8ba4 show \u7b2c\u4e00\u4e2a\u5b58\u50a8, \u5982\u679c\u8981\u663e\u793a\u5176\u4ed6\u7684\u5b58\u50a8, \u540e\u9762\u52a0 <code>stash@{$num}</code>, \u6bd4\u5982\u7b2c\u4e8c\u4e2a: <code>git stash show stash@{1}</code></li> <li><code>git stast show -p</code>: \u663e\u793a\u7b2c\u4e00\u4e2a\u5b58\u50a8\u7684\u6539\u52a8, \u5982\u679c\u60f3\u663e\u793a\u5176\u4ed6\u5b58\u50a8, \u5219: <code>git stash show stash@{$num} -p</code>, \u6bd4\u5982\u7b2c\u4e8c\u4e2a: <code>git stash show stash@{1} -p</code></li> <li><code>git stash apply</code>: \u5e94\u7528\u67d0\u4e2a\u5b58\u50a8, \u4f46\u4e0d\u4f1a\u628a\u5b58\u50a8\u4ece\u5b58\u50a8\u5217\u8868\u4e2d\u5220\u9664, \u9ed8\u8ba4\u4f7f\u7528\u7b2c\u4e00\u4e2a\u5b58\u50a8, \u5373 <code>stash@{0}</code>, \u5982\u679c\u8981\u662f\u7528\u5176\u4ed6, \u5219: <code>git stash apply stash@{$num}</code>, \u6bd4\u5982\u7b2c\u4e8c\u4e2a: <code>git stash apply stash@{1}</code></li> <li><code>git stash pop</code>: \u6062\u590d\u4e4b\u524d\u7f13\u5b58\u7684\u5de5\u4f5c\u76ee\u5f55, \u5c06\u7f13\u5b58\u5217\u8868\u4e2d\u5bf9\u5e94\u7684 stash \u5220\u9664, \u5e76\u5c06\u5bf9\u5e94\u4fee\u6539\u5e94\u7528\u5230\u5f53\u524d\u7684\u5de5\u4f5c\u76ee\u5f55\u4e0b, \u9ed8\u8ba4\u4e3a\u7b2c\u4e00\u4e2a stash, \u5373 <code>stash@{0}</code>, \u5982\u679c\u8981\u5e94\u7528\u5e76\u5220\u9664\u5176\u4ed6 stash, \u5219: <code>git stash pop stash@{$num}</code>, \u6bd4\u5982\u5e94\u7528\u5e76\u5220\u9664\u7b2c\u4e8c\u4e2a: <code>git stash pop stash@{1}</code></li> <li><code>git stash drop stash@{num}</code>: \u4e22\u5f03 <code>stash@{num}</code> \u5b58\u50a8, \u4ece\u5217\u8868\u4e2d\u5220\u9664\u8fd9\u4e2a\u5b58\u50a8</li> <li><code>git stash clear</code>: \u5220\u9664\u6240\u6709\u7f13\u5b58\u7684 stash</li> </ol> <p>\u5f00\u59cb\u6a21\u62df\u73b0\u573a</p> <pre><code># git \u521d\u59cb\u5316\n$ cd .. &amp;&amp; rm -rf git-study &amp;&amp; mkdir git-study &amp;&amp; cd git-study &amp;&amp; git init\n$ echo 'file1 init' &gt; file1.txt\n$ echo 'file2 init' &gt; file2.txt\n$ git add .\n$ git commit -m 'change: add file1 &amp; file2'\n[master (root-commit) 525c358] change: add file1 &amp; file2\n 2 files changed, 2 insertions(+)\n create mode 100644 file1.txt\n create mode 100644 file2.txt\n\n# \u7136\u540e\u4ece master \u5206\u652f\u521b\u5efa\u4e24\u4e2a\u65b0\u7684 feature \u5206\u652f\n$ git branch feature1\n$ git branch feature2\n\n# checkout feature1, \u4fee\u6539 file1.txt, \u5e76\u5728 feature1 \u4e0a\u521b\u5efa\u4e24\u6b21\u63d0\u4ea4\n$ git checkout feature1\n$ echo 'add file1.txt code 1' &gt;&gt; file1.txt\n$ git add file1.txt\n$ git commit -m 'change file1 no.1'\n$ echo 'add file2.txt code 2' &gt;&gt; file1.txt\n$ git add file1.txt\n$ git commit -m 'change file1 no.2'\n# \u76ee\u524d feature1 \u4e0a\u7684\u6539\u52a8\u5185\u5bb9\n$ cat file1.txt\nfile1 init\nadd file1.txt code 1\nadd file2.txt code 2\n$ cat file2.txt\nfile2 init\n\n# checkout feature2, \u4fee\u6539 file2.tx\n$ git checkout feature2\n$ echo 'add file2.txt code 1' &gt;&gt; file2.txt\n$ git add file2.txt\n$ git commit -m 'change file2 no.1'\n# \u76ee\u524d feature2 \u4e0a\u7684\u6539\u52a8\u5185\u5bb9\n$ cat file1.txt\nfile1 init\n$ cat file2.txt\nfile2 init\nadd file2.txt code 1\n\n# \u5047\u8bbe\u4e0d\u5c0f\u5fc3\u5c06 feature2 \u5408\u5e76\u5230\u4e86 feature1, \u5e76\u5728 feature1 \u7ee7\u7eed\u8fdb\u884c\u4e86\u4ee3\u7801\u5f00\u53d1\u5e76\u63d0\u4ea4\n$ git checkout feature1\n$ git merge feature2\n$ echo 'add file1.txt no.3 &amp; code end' &gt;&gt; file1.txt\n$ git add file1.txt\n$ git commit -m 'change file1 no.3'\n# \u6b64\u65f6 feature1 \u4e0a\u6240\u6709\u6587\u4ef6\u7684\u5185\u5bb9\n$ cat file1.txt\nfile1 init\nadd file1.txt code 1\nadd file2.txt code 2\nadd file1.txt no.3 &amp; code end\n$ cat file2.txt\nfile2 init\nadd file2.txt code 1\n\n# \u6b64\u65f6\u6211\u4eec\u53d1\u73b0\u4e86\u4e0d\u5c0f\u5fc3 merge \u8fdb\u6765\u7684 feature2, \u800c\u4e14\u5728\u8fd9\u57fa\u7840\u4e0a\u6211\u4eec\u8fd8\u6709\u65b0\u7684 commit, \u5982\u679c\u6211\u4eec\u60f3\u5c06 merge \u5254\u9664, \u53ef\u4ee5\u505a\u5982\u4e0b\u64cd\u4f5c\n# \u5148\u67e5\u770b\u9700\u8981\u8fd8\u539f commit \u7684\u7248\u672c\u53f7\n$ git log --oneline\n8a1454f (HEAD -&gt; feature1) change file1 no.3\n422a454 Merge branch 'feature2' into feature1\n4978e2c (feature2) change file2 no.1\nee4a50e change file1 no.2\ndc397c1 change file1 no.1\n525c358 (master) change: add file1 &amp; file2\n# \u5176\u4e2d, 422a454 \u5c31\u662f\u8bef\u5408\u5e76\u7684 commitid\n# \u76ee\u524d\u6211\u4eec\u9700\u8981\u505a\u7684\u5c31\u662f\u64a4\u9500\u5df2\u63d0\u4ea4\u7684 commit, \u56de\u6eda\u5230 feature2 \u8bef\u5408\u5e76\u5230 feature1 \u5206\u652f\u7684 commit \u7248\u672c\u3002\n$ git reset --mixed 422a454\nUnstaged changes after reset:\nM  file1.txt\n$ git log --oneline\n422a454 (HEAD -&gt; feature1) Merge branch 'feature2' into feature1\n4978e2c (feature2) change file2 no.1\nee4a50e change file1 no.2\ndc397c1 change file1 no.1\n525c358 (master) change: add file1 &amp; file2\n$ git diff file1.txt\ndiff --git a/file1.txt b/file1.txt\nindex 4a1ca46..6954af7 100644\n--- a/file1.txt\n+++ b/file1.txt\n@@ -1,3 +1,4 @@\n file1 init\n add file1.txt code 1\n add file2.txt code 2\n+add file1.txt no.3 &amp; code end   ## \u53ef\u4ee5\u770b\u89c1, feature1 \u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u5df2\u7ecf\u662f\u672a\u6682\u5b58\u72b6\u6001\u4e86\n# \u6b64\u65f6, \u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528 git stash, \u5c06\u64a4\u9500\u7684\u4ee3\u7801\u5b58\u50a8\u8d77\u6765, \n$ git stash save 'save file1.txt reset code'\nSaved working directory and index state On feature1: save file1.txt reset code\n# \u67e5\u770b stash \u5217\u8868\n$ git stash list\nstash@{0}: On feature1: save file1.txt reset code\n# \u67e5\u770b status, \u53ef\u4ee5\u770b\u89c1\u5728\u5de5\u4f5c\u7a7a\u95f4\u5df2\u7ecf\u6ca1\u6709\u4e86\n$ git status \nOn branch feature1\nnothing to commit, working tree clean\n\n# \u7136\u540e\u518d\u64a4\u9500 merge \u76f8\u5173\u7684\u4fe1\u606f\n$ git reset --hard HEAD~\n# \u518d\u67e5\u770b\u6b64\u65f6\u672c\u5730\u7684\u6587\u4ef6\u5185\u5bb9\n$ cat file1.txt\nfile1 init\nadd file1.txt code 1\nadd file2.txt code 2\n$ cat file2.txt\nfile2 init\n\n# \u63a5\u4e0b\u6765\u6062\u590d feature1 \u4e0a\u88ab\u64a4\u9500\u7684\u4ee3\u7801\n$ git stash list\nstash@{0}: On feature1: save file1.txt reset code\n$ git stash apply stash{0}\nOn branch feature1\nChanges not staged for commit:\n  (use \"git add &lt;file&gt;...\" to update what will be committed)\n  (use \"git restore &lt;file&gt;...\" to discard changes in working directory)\n  modified:   file1.txt\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\n# \u6b64\u65f6\u4ee3\u7801\u5c31\u6062\u590d\u56de\u6765\u4e86\n$ cat file1.txt\nfile1 init\nadd file1.txt code 1\nadd file2.txt code 2\nadd file1.txt no.3 &amp; code end\n</code></pre> <p>\u8bf4\u660e: git stash\u4f1a\u8d2e\u5b58\u53ca\u4e0d\u4f1a\u8d2e\u5b58\u7684\u6587\u4ef6\u8303\u56f4</p> <ul> <li>\u4f1a\u8d2e\u5b58:<ul> <li>\u6dfb\u52a0\u5230\u6682\u5b58\u533a\u7684\u4fee\u6539\uff08staged changes\uff09</li> <li>git\u8ddf\u8e2a\u7684\u4f46\u5e76\u672a\u6dfb\u52a0\u5230\u6682\u5b58\u533a\u7684\u4fee\u6539\uff08unstaged changes\uff09</li> </ul> </li> <li>\u4e0d\u4f1a\u8d2e\u5b58:<ul> <li>\u5728\u5de5\u4f5c\u76ee\u5f55\u4e2d\u65b0\u7684\u6587\u4ef6\uff08untracked files\uff09</li> <li>\u88ab\u5ffd\u7565\u7684\u6587\u4ef6\uff08ignored files\uff09</li> </ul> </li> </ul> <p>\u5f53\u7136, \u5982\u679c\u4ec5\u4ec5\u9700\u8981 \u5220\u9664\u67d0\u4e2a commit, \u5176\u5b9e\u6709\u66f4\u597d\u7684\u65b9\u6cd5</p> <pre><code># \u5047\u8bbe, \u5f53\u524d\u5df2\u7ecf\u5230\u4e86 git commit -m 'change file1 no.3', \u5f53\u524d log \n$ git log\ncommit 3e6be928866581f1779bb0f0e84d29d068d698e8 (HEAD -&gt; feature1)\nAuthor: kino &lt;kino@gmail.com&gt;\nDate:   Thu Nov 24 23:30:31 2022 +0800\n\n    change file1 no.3\n\ncommit ef733ffec4e80ed851f353f2d8b2dba46b831bb6\nMerge: 5e96765 7d9cebd\nAuthor: kino &lt;kino@gmail.com&gt;\nDate:   Thu Nov 24 23:30:29 2022 +0800\n\n    Merge branch 'feature2' into feature1\n...\n\n# \u6211\u4eec\u53ef\u4ee5\u76f4\u63a5 git revert \u6307\u5b9a\u7684 commit, \u4f8b\u5982 \u4e0a\u9762 merge \u7684 commit id \u662f ef733ffec4e80ed851f353f2d8b2dba46b831bb6\n$ git revert -i ef733ffec4e80ed851f353f2d8b2dba46b831bb6 -m 1\n# \u6ce8\u610f, \u5df2\u7ecf\u8981\u52a0\u4e0a -m 1, \u5426\u5219\u4f1a\u62a5\u5982\u4e0b\u9519:\n#   error: commit ef733ffec4e80ed851f353f2d8b2dba46b831bb6 is a merge but no -m option was given.\n#   fatal: revert failed\n# \u5728\u8fd9\u91cc\u89e3\u91ca\u4e0b -m 1 \u7684\u542b\u4e49:\n#   \u4ece\u4e0a\u9762\u7684 git log \u53ef\u4ee5\u770b\u89c1 \"Merge: 5e96765 7d9cebd\" \u7684\u4fe1\u606f, \u8fd9\u4ee3\u8868\u7740, \u672c\u6b21 merge \u662f\u4f7f\u7528\u5f53\u524d\u5206\u652f\u7684 5e96765(commit) \u548c feature2 \u5206\u652f\u7684 7d9cebd(commit) \u5408\u5e76\u800c\u6765, \u6211\u4eec\u53ef\u4ee5\u505a\u4e00\u4e0b\u9a8c\u8bc1:\n#     # \u9996\u5148 cat-file 5e96765\n#     $ git cat-file -p 5e96765\n#     tree fa6ff2fd55be9834b45f0be9d347b1670594ed17\n#     parent d27c172b6e876938eb39094801ca5e436a30b3c3\n#     author kino &lt;kino@gmail.com&gt; 1669303829 +0800\n#     committer kino &lt;kino@gmail.com&gt; 1669303829 +0800\n#     change file1 no.2\n#    # \u7136\u540e\u53d6 tree \u7684 id \u7ee7\u7eed\u67e5\u770b, \u53ef\u4ee5\u770b\u5230, \u8fd9\u4e2a tree \u8bb0\u5f55\u8be5 commit \u7684\u4e24\u4e2a\u6587\u4ef6\n#    $ git cat-file -p fa6ff2fd55be9834b45f0be9d347b1670594ed17\n#    100644 blob 4a1ca461271ec4e0041822373470703dca5d0626  file1.txt\n#    100644 blob 18ffc0add953f06f00be32437b9f79e09af27d32  file2.txt\n#    # \u7136\u540e\u53d6 file2.txt \u7684 id \u7ee7\u7eed\u67e5\u770b, \u53ef\u4ee5\u770b\u5230, \u8fd9\u4e2a tree \u8bb0\u5f55 \u8be5 file2.txt \u7684\u5185\u5bb9\u4e3a: file2 init\n#    $ git cat-file -p 18ffc0add953f06f00be32437b9f79e09af27d32\n#    file2 init\n#    # \u7136\u540e\u6211\u4eec\u518d cat-file 7d9cebd\n#    tree 1b5c42acd113046ec223223affe7b3ef579a293b\n#    parent 9acd7882175075c0f3e2f44dfa0d91f3d0a673d1\n#    author kino &lt;kino@gmail.com&gt; 1669303829 +0800\n#    committer kino &lt;kino@gmail.com&gt; 1669303829 +0800\n#    change file2 no.1\n#    # \u7136\u540e\u53d6 tree \u7684 id \u7ee7\u7eed\u67e5\u770b, \u53ef\u4ee5\u770b\u5230, \u8fd9\u4e2a tree \u8bb0\u5f55\u8be5 commit \u7684\u4e24\u4e2a\u6587\u4ef6\n#    git cat-file -p 1b5c42acd113046ec223223affe7b3ef579a293b\n#    100644 blob 0c481f7fe4602d041634c353e31846bf1b638c37  file1.txt\n#    100644 blob c6b0b29e598db81ef8e54ec955df78cfac4ae316  file2.txt\n#    # \u7136\u540e\u53d6 file2.txt \u7684 id \u7ee7\u7eed\u67e5\u770b, \u53ef\u4ee5\u770b\u5230, \u8fd9\u4e2a tree \u8bb0\u5f55 \u8be5 file2.txt \u7684\u5185\u5bb9\n#    git cat-file -p c6b0b29e598db81ef8e54ec955df78cfac4ae316\n#    file2 init\n#    add file2.txt code 1\n# \u7531\u6b64\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u7ed3\u8bba, 5e96765 \u5c31\u662f feature1 \u5728 Merge \u4e4b\u524d\u7684\u72b6\u6001, \u800c 7d9cebd \u5c31\u662f feature2 \u5728 Merge \u4e4b\u524d\u7684\u72b6\u6001\u3002\n# \u56e0\u4e3a \u4e00\u4e2a Merge \u8bb0\u5f55\u4e86\u4e24\u4e2a\u5206\u652f\u7684 commit \u4fe1\u606f, \u6240\u4ee5, \u5728 revert merge \u7684\u65f6\u5019,\u9700\u8981\u660e\u786e\u7684\u652f\u51fa, \u8981revert \u5230\u54ea\u4e2acommit, \u56e0\u4e3a\u6211\u4eec\u662f\u60f3\u53d6\u6d88 feature2 \u91cc\u9762\u7684\u5185\u5bb9, \u6240\u4ee5\u5c31\u662f -m 1 \n\n# ok, \u56de\u5230\u6b63\u9898, git revert \u4e4b\u540e, \u6211\u4eec\u518d\u67e5\u770b log\n$ git log --oneline\nb4dde93 (HEAD -&gt; feature1) Revert \"Merge branch 'feature2' into feature1\"\n3e6be92 change file1 no.3\nef733ff Merge branch 'feature2' into feature1\n5e96765 change file1 no.2\n7d9cebd (feature2) change file2 no.1\nd27c172 change file1 no.1\n9acd788 (master) change: add file1 &amp; file2\n# \u7136\u540e\u67e5\u770b file2.txt\n$ cat file2.txt\nfile2 init\n</code></pre>"},{"location":"utils/git/#git_1","title":"\u4e94\u3001git \u9ad8\u7ea7\u64cd\u4f5c","text":""},{"location":"utils/git/#51-git","title":"5.1 git \u64a4\u9500\u64cd\u4f5c","text":"<p>disk:</p> command description \u67e5\u770b\u4fee\u6539 <code>git diff</code> \u67e5\u770b\u72b6\u6001 <code>git status</code> -&gt; <code>Changes not staged for comit</code> \u64a4\u9500\u6587\u4ef6\u4fee\u6539 <code>git checkout &lt;change_file&gt;  or git restore &lt;change_file&gt;</code> \u63d0\u4ea4\u6682\u5b58\u533a git add  <p>\u6682\u5b58\u533a:</p> command description \u67e5\u770b\u72b6\u6001 <code>git status</code> -&gt; <code>Changes to be committed(\u7eff\u8272)</code> \u4ece\u6682\u5b58\u533a\u79fb\u9664\uff0c\u4f46\u4fdd\u7559\u786c\u76d8\u4e0a\u7684\u4fee\u6539 <code>git reset &lt;change_file&gt;</code> or <code>git restore --staged &lt;change_file&gt;</code> \u4ece\u6682\u5b58\u533a\u79fb\u9664\uff0c\u4e0d\u4fdd\u7559\u786c\u76d8\u4e0a\u7684\u4fee\u6539 <code>git checkout HEAD &lt;change_file&gt;</code> \u63d0\u4ea4\u672c\u5730git <code>git commit</code> <p>local:</p> command description \u64a4\u9500commit(\u4fdd\u7559\u78c1\u76d8\u4e0a\u7684\u4fee\u6539\u548c\u6682\u5b58\u533a\u8bb0\u5f55) <code>git reset --soft HEAD~1</code> \u64a4\u9500commit(\u6e05\u9664\u6682\u5b58\u533a\u8bb0\u5f55, \u53ea\u4fdd\u7559\u78c1\u76d8\u4e0a\u7684\u4fee\u6539) <code>git reset HEAD~1</code> == <code>git reset --mixed HEAS~1</code> \u64a4\u9500commit(\u6e05\u9664\u6682\u5b58\u533a\u8bb0\u5f55, \u6e05\u9664\u78c1\u76d8\u4e0a\u7684\u4fee\u6539) <code>git reset --hard HEAD~1</code> \u751f\u6210\u65b0\u7684<code>commitId</code>,\u5c06\u4e0a\u4e00\u4e2a<code>commit+</code>\u7684\u5185\u5bb9\u53d8\u6210<code>commit-</code> <code>git revert HEAD</code> \u63d0\u4ea4\u8fdc\u7aefgit <code>git push</code> <p><code>git reset</code> &amp; <code>git revert</code>:</p> <ol> <li><code>git reset</code>: \u53ea\u80fd\u56de\u5230\u4e4b\u524d\u67d0\u4e00\u4e2acommit\u7684\u72b6\u6001\u3002</li> <li><code>git revert</code>:\u64a4\u9500\u4e2d\u95f4\u4efb\u610f\u4e00\u4e2acommit\u3002<code>git revert 70a0;(git revert HEAD~1)</code></li> </ol> <p>\u5982\u679c\u64cd\u4f5c\u9879\u76ee\u7684\u5206\u652f\u662f\u516c\u5171\u5206\u652f\uff0c\u53ea\u80fd\u901a\u8fc7 <code>git revert</code> \u751f\u6210\u4e00\u4e2a\u65b0\u7684 commitId\uff0c\u4ece\u8fd9\u4e2a\u7ed3\u679c\u4e0a\u64a4\u9500\u6211\u4eec\u4e4b\u524d\u7684\u4fee\u6539\u3002</p> <ol> <li><code>git revert HEAD</code></li> <li><code>git push</code></li> </ol> <p>\u5982\u679c\u64cd\u4f5c\u9879\u76ee\u7684\u5206\u652f\u662f\u4e2a\u4eba\u5206\u652f\uff0c\u53ef\u4ee5\u901a\u8fc7<code>git reset</code>\u64a4\u9500\u6211\u4eec\u4e4b\u524d\u7684\u4fee\u6539</p> <ol> <li><code>git reset --hard HEAD~1</code></li> <li><code>git push -f</code></li> </ol>"},{"location":"utils/git/#52-git-commit","title":"5.2 git \u627e\u56de\u4e22\u5931\u6587\u4ef6(commit\u4e86)","text":"<p>\u6062\u590d\u56e0\u4e3a\u6267\u884c <code>git reset --hard COMMITID</code> \u4e22\u5931\u7684\u6587\u4ef6</p> <pre><code># \u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\u9879\u76ee\n$ cd .. &amp;&amp; rm -rf git-study &amp;&amp; mkdir git-study &amp;&amp; cd git-study &amp;&amp; git init\n$ echo 'master message 1' &gt;&gt; master_1.txt\n$ git add master_1.txt\n$ git commit -m 'first commit'\n$ echo 'master message 2' &gt;&gt; master_2.txt\n$ git add master_2.txt\n$ git commit -m 'No.2 commit'\n\n# \u5728\u8fd9\u4e24\u6b21commit\u7684\u57fa\u7840\u4e0a, reset \u5230\u7b2c\u4e00\u6b21(first commit)\u4e0a\n$ git log   # \u83b7\u53d6\u7b2c\u4e00\u6b21commitid\n$ git reset --hard 4a9bcb880db85a1ca77807dea9b3adce29dc4fda\n# \u518d\u6b21\u67e5\u770b log \u4fe1\u606f, \u6b64\u65f6\u53ef\u4ee5\u770b\u89c1\u53ea\u6709\u4e00\u6b21commit\u4e86, \u7b2c\u4e8c\u6b21 commit(No.2 commit) \u5df2\u7ecf\u4e22\u5931\n$ git log -n 2\n</code></pre> <p>git \u63d0\u4f9b\u4e86 <code>git reflog</code> \u7528\u6765\u8bb0\u5f55\u4f60\u7684\u6bcf\u4e00\u6b21\u6539\u53d8\u76ee\u5f55\u6811\u7684\u547d\u4ee4\uff0c\u4f7f\u7528\u597d\u4ed6\u5c31\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u6062\u590d\u4f60\u7684\u63d0\u4ea4\uff1a</p> <pre><code>4a9bcb8 (HEAD -&gt; master) HEAD@{0}: reset: moving to 4a9bcb880db85a1ca77807dea9b3adce29dc4fda\n80258ce HEAD@{1}: commit: No.2 commit\n4a9bcb8 (HEAD -&gt; master) HEAD@{2}: commit (initial): first commit\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\u6700\u4e0a\u9762\u4e00\u6761\u8bb0\u5f55\u662f\u5c06 HEAD \u91cd\u65b0\u6307\u5411\u7b2c\u4e00\u6b21\u7684commit\u4e86, \u540c\u65f6\u4e5f\u6709\u663e\u793a\u7b2c\u4e8c\u6b21 commit \u7684 commitid, \u6709\u4e86\u8fd9\u4e2a commitid, \u5c31\u53ef\u4ee5\u56de\u6eda\u4e86\u3002</p> <pre><code>$ git reset --hard 80258ce\nHEAD is now at 80258ce No.2 commit\n$ git log\ncommit 80258ce0146f373d15a1991d61af4061687782bc (HEAD -&gt; master)\nAuthor: kino &lt;kino@gmail.com&gt;\nDate:   Thu Nov 24 02:26:10 2022 +0800\n\n    No.2 commit\n\ncommit 4a9bcb880db85a1ca77807dea9b3adce29dc4fda\nAuthor: kino &lt;kino@gmail.com&gt;\nDate:   Thu Nov 24 02:25:06 2022 +0800\n\n    first commit\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230, commit \u5df2\u88ab\u627e\u56de.</p> <p>\u4f46\u662f\u901a\u5e38\u60c5\u51b5\u4e0b, \u53ef\u80fd\u4f1a\u51fa\u73b0\u5728 <code>git reset</code> \u4e4b\u540e, \u8fd8\u6709\u65b0\u7684 commit, \u5982\u679c\u76f4\u63a5 <code>reset</code> \u6062\u590d\u7684 commit, \u80af\u5b9a\u4f1a\u9020\u6210\u65b0\u7684 commit \u53c8\u4e22\u5931, \u6240\u4ee5\u5982\u679c\u6211\u4eec\u53ea\u662f\u60f3\u6062\u590d\u8fd9\u4e2a\u4e00\u4e2a commit, \u53ef\u4ee5\u4f7f\u7528 <code>git cherry-pick commitid</code> \u6765\u5355\u72ec\u5c06\u8fd9\u4e2a commitid \u6062\u590d\u5230\u5f53\u524d\u5206\u652f\u6216\u8005\u7528 <code>git merge</code> \u6765\u505a\u5408\u5e76</p> <pre><code>$ git cherry-pick 04b0396\n[master fbf401a] No.2 commit\n Date: Thu Nov 24 02:38:14 2022 +0800\n 1 file changed, 1 insertion(+)\n create mode 100644 master_2.txt\n\n$ git log\ncommit fbf401a96bd9831c18ed02e9ee852cef8111ccb1 (HEAD -&gt; master)\nAuthor: kino &lt;kino@gmail.com&gt;\nDate:   Thu Nov 24 02:38:14 2022 +0800\n\n    No.2 commit\n\ncommit 1b5bfdb36ad01fb86d94b76654347f5de5475f37\nAuthor: kino &lt;kino@gmail.com&gt;\nDate:   Thu Nov 24 02:38:05 2022 +0800\n\n    first commit\n</code></pre>"},{"location":"utils/git/#53-git-commit","title":"5.3 git \u627e\u56de\u4e22\u5931\u6587\u4ef6(\u672acommit,\u4f46\u6dfb\u52a0\u6682\u5b58\u533a\u4e86)","text":"<p>\u5982\u679c\u53ea <code>git add</code> \u4e86\u6ca1\u6709 <code>git commit</code>(\u5982\u679c\u8fde <code>git add</code>\u90fd\u6ca1\u6709, \u90a3\u53ea\u80fd\u627e\u78c1\u76d8\u6570\u636e\u6062\u590d\u7684\u65b9\u5f0f\u4e86), \u8fd9\u5c31\u4e0d\u662f\u4ec5\u4ec5\u4e00\u4e2a <code>git reflog</code> \u5c31\u80fd\u627e\u56de\u7684\u4e86\u3002</p> <pre><code>$ cd .. &amp;&amp; rm -rf git-study &amp;&amp; mkdir git-study &amp;&amp; cd git-study &amp;&amp; git init\n$ echo 'master message 1' &gt;&gt; master_1.txt\n$ git add master_1.txt\n$ git commit -m 'first commit'\n$ echo 'master message 2' &gt;&gt; master_2.txt\n$ git add master_2.txt\n$ git commit -m 'No.2 commit'\n$ echo 'master message 3' &gt;&gt; master_3.txt\n$ git add .\n\n# \u67e5\u770b log\n$ git log -n 2\n# \u53d6\u6700\u65b0\u7684\u4e00\u6b21 commit id\n$ git reset --hard ee614a48f753479a111723ae7ad926e0750ffa6c\n# \u67e5\u770b status\n$ git status \nOn branch master\nnothing to commit, working tree clean\n# \u67e5\u770b\u672c\u5730\u6587\u4ef6\ntotal 16\n-rw-r--r--  1 kino  staff    17B 11 24 02:43 master_1.txt\n-rw-r--r--  1 kino  staff    17B 11 24 02:43 master_2.txt\n# \u53ef\u4ee5\u770b\u89c1\u6587\u4ef6\u5df2\u7ecf\u4e22\u4e86\n</code></pre> <p>git \u63d0\u4f9b\u4e86 <code>git fsck --lost-found</code> \u547d\u4ee4, \u4ed6\u4f1a\u901a\u8fc7\u4e00\u4e9b\u795e\u5947\u7684\u65b9\u5f0f\u628a\u5386\u53f2\u64cd\u4f5c\u8fc7\u7684\u6587\u4ef6\u4ee5\u67d0\u79cd\u7b97\u6cd5\u7b97\u51fa\u6765\u52a0\u5230.git/lost-found\u6587\u4ef6\u5939\u91cc\uff0c\u8f93\u51fa\u7684\u8bb0\u5f55\u5c31\u50cf\u4e0b\u9762\u8fd9\u4e2a\u6837\u5b50\u3002</p> <pre><code>\u276f git fsck --lost-found\nChecking object directories: 100% (256/256), done.\ndangling blob adbd4c8bf64367fb685336a67f02c5716dc47d73\n</code></pre> <p>\u8fd9\u91cc\u8fd4\u56de\u7684\u7b2c\u4e00\u884c\u5e26\u6709 <code>blob</code> \u7684\u4fe1\u606f\uff0c\u6211\u4eec\u53ef\u4ee5\u7528 <code>git show</code>\u6765\u67e5\u770b\u91cc\u9762\u7684\u5185\u5bb9</p> <pre><code>$ git show adbd4c8bf64367fb685336a67f02c5716dc47d73\nmaster message 3\n\n# \u6bd4\u5982\u53ef\u4ee5\u5c06\u5185\u5bb9\u8ffd\u52a0\u5230\u65b0\u6587\u4ef6\u4e2d \n$ git show adbd4c8bf64367fb685336a67f02c5716dc47d73 &gt; master_3.txt\n</code></pre> <p>\u5c0f\u8bb0: \u5982\u679c\u4f60\u7684\u63d0\u4ea4\u8bb0\u5f55\u591a\u7684\u8bdd, <code>git fsck --lost-found</code> \u53ef\u4ee5\u770b\u89c1\u5f88\u591a\u5185\u5bb9, \u5982\u4e0b</p> <pre><code>$ git fsck --lost-found\nChecking object directories: 100% (256/256), done.\nChecking objects: 100% (35559/35559), done.\ndangling blob 601e8abff177a0b2f8a31944654c0cdf0dd1f197\ndangling tree 6c247c35ae51aa86736f745802bb59b97b6598ee\ndangling blob 7a379e6f07391f3bca1fbcc076fcde8f719ffb69\ndangling blob c66fa02bf74853789b63615a80998b3fbd3d8823\ndangling blob 4996ec43a907f8f6312c3bf137e2f76c7f4c9c9c\ndangling commit 69a110054ca792e6b1060d20ec24ddc9710ada4d\ndangling blob 87ed1263b56d0a98cd163440f872f135a34b61da\ndangling blob aff0bc224d142929e3f82b8855dd1e97d8b3635b\ndangling blob eef114f8614a15a11ccfbb7cf5e34302072176e1\ndangling blob b50db5dad43e13fde45141039f684be48e293739\ndangling blob 820f0136b61394e482fd18e28a7ba81fbb31f688\ndangling blob 2d26cd809139b86218d3460c85baed90d018f007\ndangling blob 603ca9d770947939d8da7ff3aef3775bb27c427e\ndangling blob e54821ed942c6582d01f60b6715e16301cdcfc4d\ndangling blob e06be73bb272c7837ab38226c1c1bb13f845574e\ndangling blob 399aede4e687465bf7c895251bef685b0de089b6\ndangling blob 5ea2239d63a9a119a54a52fde6ebf208a940832a\ndangling blob 35ab95c7faf42b7dbbf4e0992527c719ffd4acbd\ndangling blob 9bb609de693b78eb1dc0e3dca7a9d684effd3f4a\ndangling blob aac499592477199b2630791aecde2db8a608dfa9\ndangling commit 10c581dcdf08ea1bed594a359e09698afd4f794e\ndangling blob 06eb7790a9f71bf796749940102030c6e9503022\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\u8fd9\u91cc\u6709<code>blob</code>\u3001<code>commit</code>\u3001<code>tree</code>\u7c7b\u578b\u7684\u6570\u636e\uff0c\u5176\u5b9e\u8fd8\u6709<code>tag</code>\u7b49\u7c7b\u578b\u7684, \u8fd9\u91cc\u9700\u8981\u4e86\u89e3\u4e0b git \u7684\u5e95\u5c42\u5b58\u50a8</p> <ul> <li><code>commit</code> \u6570\u636e\u7ed3\u6784\u5728\u6bcf\u6b21\u63d0\u4ea4\u4e4b\u540e\u90fd\u4f1a\u751f\u6210\u4e00\u4e2a, \u5f53\u6211\u4eec\u8fdb\u884c <code>commit</code> \u4e4b\u540e, \u9996\u5148\u4f1a\u521b\u5efa\u4e00\u4e2a <code>commit</code> \u7ec4\u4ef6, \u4e4b\u540e\u521b\u5efa\u4e00\u4e2a <code>tree</code> \u7ec4\u4ef6, \u628a\u6240\u6709\u7684\u6587\u4ef6\u4fe1\u606f\u90fd\u5b58\u5728\u91cc\u9762, \u6bcf\u4e2a <code>blob</code> \u90fd\u4ee3\u8868\u4e00\u4e2a\u6587\u4ef6, \u90fd\u53ef\u4ee5\u5728 <code>tree</code> \u91cc\u9762\u627e\u5230\u3002</li> <li><code>blob</code> \u7ec4\u4ef6\u5e76\u4e0d\u4f1a\u5bf9\u6587\u4ef6\u4fe1\u606f\u8fdb\u884c\u5b58\u50a8, \u800c\u662f\u53ea\u5bf9\u6587\u4ef6\u7684\u5185\u5bb9\u8fdb\u884c\u8bb0\u5f55, \u6587\u4ef6\u4fe1\u606f\u5b58\u50a8\u5728 <code>tree</code> \u91cc.</li> </ul>"},{"location":"utils/git/#54","title":"5.4 \u7ec8\u6781\u5927\u62db","text":"<p>\u5982\u679c 5.3 \u5e76\u6ca1\u6709\u627e\u5230\u4f60\u60f3\u8981\u7684\u5185\u5bb9, \u90a3\u53ea\u80fd\u518d\u53bb\u770b\u770b\u6700\u8fd1\u4fee\u6539\u7684\u6587\u4ef6\u4e86</p> <pre><code>$ find .git/objects -type f | xargs ls -lt | sed 3q\n-r--r--r--  1 kino  staff   33 11 24 02:43 .git/objects/ad/bd4c8bf64367fb685336a67f02c5716dc47d73\n-r--r--r--  1 kino  staff   33 11 24 02:43 .git/objects/cc/6e4eeea4f70e784fade7a18bdba6c28f7642e8\n-r--r--r--  1 kino  staff   33 11 24 02:43 .git/objects/24/b6cb352efeff7a2b24b99e8ff814ab1fc2a2fd\n</code></pre> <p>\u4f7f\u7528 <code>git cat-file -t commitid</code> \u53ef\u4ee5\u770b\u89c1\u662f\u4ec0\u4e48\u7c7b\u578b\u7684</p> <pre><code>$ git cat-file -t adbd4c8bf64367fb685336a67f02c5716dc47d73\nblob\n\n$ git cat-file -t cc6e4eeea4f70e784fade7a18bdba6c28f7642e8\nblob\n\n$ git cat-file -t 24b6cb352efeff7a2b24b99e8ff814ab1fc2a2fd\nblob\n</code></pre> <p>\u518d\u4f7f\u7528 <code>git cat-file -p commitid</code> \u67e5\u770b\u5185\u5bb9</p> <pre><code>$ git cat-file -p adbd4c8bf64367fb685336a67f02c5716dc47d73\nmaster message 3\n\n$ git cat-file -p cc6e4eeea4f70e784fade7a18bdba6c28f7642e8\nmaster message 2\n\n$ git cat-file -p 24b6cb352efeff7a2b24b99e8ff814ab1fc2a2fd\nmaster message 1\n</code></pre>"},{"location":"utils/git/#55-git-commit","title":"5.5 git \u8fc1\u79fb(\u4fdd\u7559 commit)","text":""},{"location":"utils/git/#551-clone","title":"5.5.1 clone \u539f\u6765\u7684\u9879\u76ee","text":"<pre><code>git clone --bare git://github.com/username/project.git\n</code></pre>"},{"location":"utils/git/#552-gitlab","title":"5.5.2 \u63a8\u9001\u5230\u65b0\u7684gitlab","text":"<pre><code>cd project\ngit push --mirror git@example.com/username/newproject.git\n</code></pre> <p>\u4f1a\u63d0\u793a\u6ca1\u6709\u6743\u9650, \u5728gitlab\u4e2d\u628a\u9879\u76ee\u7684\u6743\u9650\u4fdd\u62a4\u5173\u6389\u5c31\u597d\u4e86</p>"},{"location":"utils/git/#553-gitlab","title":"5.5.3 \u672c\u5730\u4ee3\u7801\u66f4\u6362gitlab\u5730\u5740","text":"<pre><code>git remote set-url origin git@example.com/username/newproject.git\n</code></pre>"},{"location":"utils/git/#56-git-rebase","title":"5.6 git rebase","text":"<p>\u51c6\u59074\u4e2a\u573a\u666f:</p> <ul> <li>merge \u65f6\u53ea\u6709\u4e00\u4e2a\u5206\u652f\u53d8\u66f4</li> <li>merge \u65f6\u4e24\u4e2a\u5206\u652f\u6709\u53d8\u66f4</li> <li>rebase \u65f6\u53ea\u6709\u4e00\u4e2a\u5206\u652f\u53d8\u66f4</li> <li>rebase \u65f6\u4e24\u4e2a\u5206\u652f\u6709\u53d8\u66f4</li> </ul>"},{"location":"utils/git/#561-merge","title":"5.6.1 merge \u65f6\u53ea\u6709\u4e00\u4e2a\u5206\u652f\u53d8\u66f4","text":"<pre><code>rm -rf first-project &amp;&amp; mkdir first-project &amp;&amp; cd first-project\ngit init\necho \"c0\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"init\"\n\n## \u521b\u5efa\u4e00\u4e2a\u5206\u652f\ngit checkout -b feature\n\n## \u5728 master \u4e0a\u6dfb\u52a0\u4e24\u4e2a commit\ngit checkout main\necho \"c1\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c1 commit\"\n\necho \"c2\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c2 commit\"\n\n## feature \u5408\u5e76 master \u65b0\u589e\u8bb0\u5f55\ngit checkout feature\ngit merge main\n\n## \u67e5\u770b\u65e5\u5fd7, \u53ef\u4ee5\u770b\u89c1 feature \u5206\u652f\u4e0a\u5df2\u7ecf\u6709\u4e86 master \u7684\u4e24\u4e2a\u63d0\u4ea4\u4e86\ngit log --graph --pretty=oneline --abbrev-commit\n* c001f6f (HEAD -&gt; feature, main) c2 commit\n* a4d98be c1 commit\n* 7171bfa init\n\ncat README.md\nc0\nc1\nc2\n</code></pre>"},{"location":"utils/git/#562-merge","title":"5.6.2 merge \u65f6\u4e24\u4e2a\u5206\u652f\u6709\u53d8\u66f4","text":"<pre><code>rm -rf first-project &amp;&amp; mkdir first-project &amp;&amp; cd first-project\ngit init\necho \"c0\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"init\"\n\n## \u521b\u5efa\u4e24\u4e2a\u5206\u652f\ngit checkout -b feature1\ngit checkout -b feature2\n\n## \u5728 feature1 \u4e0a\u6dfb\u52a0\u4e24\u4e2a commit\ngit checkout feature1\necho \"c1\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c1 commit\"\n\necho \"c2\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c2 commit\"\n\n## \u5728 feature2 \u4e0a\u6dfb\u52a0\u4e24\u4e2a commit\ngit checkout feature2\necho \"c3\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c3 commit\"\n\necho \"c4\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c4 commit\"\n\n## \u5728 feature1 \u4e0a\u6dfb\u52a0\u4e00\u4e2a commit\ngit checkout feature1\necho \"c5\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c5 commit\"\n\n## \u67e5\u770b\u4e24\u4e2a\u5206\u652f\u7684commit\u65f6\u95f4\ngit log feature1\ncommit a16e20a00329b0a60cbf8f541ff999e065a907b0 (HEAD -&gt; feature1)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:17:13 2023 +0800\n\n    c5 commit\n\ncommit bddb67864d6a8e5923618564304090a869dedf68\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:17:02 2023 +0800\n\n    c2 commit\n\ncommit 4a0978f9892241abd481251ed96f5a7b92199011\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:16:58 2023 +0800\n\n    c1 commit\n\ncommit cde011b84e70d5dfbd966b91f5d9ab0aeefff25a (master)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:16:49 2023 +0800\n\n    init\n\ngit log feature2\ncommit 02f337014fa6acbdcbcf79d4ecd6668cdd37d6cb (feature2)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:17:09 2023 +0800\n\n    c4 commit\n\ncommit e4567ef53ad207ea88cc042140183f8e047a5b69\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:17:06 2023 +0800\n\n    c3 commit\n\ncommit cde011b84e70d5dfbd966b91f5d9ab0aeefff25a (master)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:16:49 2023 +0800\n\n    init\n\n## \u53ef\u4ee5\u770b\u89c1, feature2 \u4e0a\u7684\u4e24\u4e2a commit \u65f6\u95f4\u665a\u4e8e feature1 \u7684 c2/c3 commit, \u4f46\u662f\u53c8\u65e9\u4e8e feature1 \u4e0a\u7684 c5 commit\n## \u73b0\u5728\u5c06 feature1 \u5408\u5e76\u5230 feature2\ngit checkout feature2\ngit merge feature1\n## \u51b2\u7a81\u63d0\u793a\nAlready on 'feature2'\nAuto-merging README.md\nCONFLICT (content): Merge conflict in README.md\nAutomatic merge failed; fix conflicts and then commit the result.\n## \u89e3\u51b3\u51b2\u7a81\nvim README.md\ngit add .\ngit commit \n\n## \u518d\u6b21\u67e5\u770bfeature2\u7684\u63d0\u4ea4\u8bb0\u5f55, \u53d1\u73b0\u591a\u51fa\u6765\u4e86\u4e00\u4e2a commit:faaa86d914cce98ab6dd6159ff76a4fe351f809e\n## \u5e76\u4e14\u65f6\u95f4\u987a\u5e8f\u662f\u6309\u4e24\u4e2a\u5206\u652f\u7684\u65f6\u95f4\u6392\u597d\u5e8f\u7684(\u5408\u5e76\u540e\u65f6\u95f4\u6709\u5e8f\u672a\u88ab\u6253\u4e71)\ncommit 6f9869531606418e4c40fabb9cfaabfa1425545a (HEAD -&gt; feature2)\nMerge: 02f3370 a16e20a\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:20:13 2023 +0800\n\n    Merge branch 'feature1' into feature2\n\ncommit a16e20a00329b0a60cbf8f541ff999e065a907b0 (feature1)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:17:13 2023 +0800\n\n    c5 commit\n\ncommit 02f337014fa6acbdcbcf79d4ecd6668cdd37d6cb\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:17:09 2023 +0800\n\n    c4 commit\n\ncommit e4567ef53ad207ea88cc042140183f8e047a5b69\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:17:06 2023 +0800\n\n    c3 commit\n\ncommit bddb67864d6a8e5923618564304090a869dedf68\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:17:02 2023 +0800\n\n    c2 commit\n\ncommit 4a0978f9892241abd481251ed96f5a7b92199011\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:16:58 2023 +0800\n\n    c1 commit\n\ncommit cde011b84e70d5dfbd966b91f5d9ab0aeefff25a (master)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:16:49 2023 +0800\n\n    init\n</code></pre>"},{"location":"utils/git/#563-rebase","title":"5.6.3 rebase \u65f6\u53ea\u6709\u4e00\u4e2a\u5206\u652f\u53d8\u66f4","text":"<p>rebase \u5206\u652f\u672a\u4f5c\u51facommit</p> <pre><code>rm -rf first-project &amp;&amp; mkdir first-project &amp;&amp; cd first-project\ngit init\necho \"c0\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"init\"\n\n## \u521b\u5efa\u4e00\u4e2a\u5206\u652f\ngit checkout -b feature\n\n## \u5728 master \u4e0a\u6dfb\u52a0\u4e24\u4e2a commit\ngit checkout master\necho \"c1\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c1 commit\"\n\necho \"c2\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c2 commit\"\n\n## feature \u5408\u5e76 master \u65b0\u589e\u8bb0\u5f55\ngit checkout feature\ngit rebase master\n\n## \u67e5\u770b\u65e5\u5fd7, \u53ef\u4ee5\u770b\u89c1 feature \u5206\u652f\u4e0a\u5df2\u7ecf\u6709\u4e86 master \u7684\u4e24\u4e2a\u63d0\u4ea4\u4e86, \u5e76\u4e14\u6307\u9488feature\u548cmaster\u540c\u65f6\u6307\u5411HEAD\ngit log --graph --pretty=oneline --abbrev-commit\n* 715cf72 (HEAD -&gt; feature, master) c2 commit\n* 5f626b8 c1 commit\n* 6a2e050 init\n</code></pre>"},{"location":"utils/git/#564-rebase","title":"5.6.4 rebase \u65f6\u4e24\u4e2a\u5206\u652f\u6709\u53d8\u66f4","text":"<p>rebase \u5206\u652f\u4f5c\u51facommit</p> <pre><code>rm -rf first-project &amp;&amp; mkdir first-project &amp;&amp; cd first-project\ngit init\necho \"c0\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"init\"\n\n## \u521b\u5efa\u4e00\u4e2a\u5206\u652f\ngit checkout -b feature\n## \u5728 feature \u4e0a\u6dfb\u52a0\u4e00\u4e2a commit\necho \"c3\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c3 commit\"\n\n## \u5728 master \u4e0a\u6dfb\u52a0\u4e24\u4e2a commit\ngit checkout master\necho \"c1\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c1 commit\"\n\necho \"c2\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c2 commit\"\n\n## \u67e5\u770b feature \u5206\u652f\u7684log\ngit log feature\ncommit d97013d9428e61d4d97ebe6a67b5c27d1b98c7cb (HEAD -&gt; feature)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:26:59 2023 +0800\n\n    c3 commit\n\ncommit fb9a4a69bbb4d187f0f3a94dbf0cb2938f114e62\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:26:55 2023 +0800\n\n    init\n\n## \u67e5\u770b master \u5206\u652f\u7684log\ngit log master\ncommit 0ec71a9b42831756babb31aba75d56e0e73a6c68 (master)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:27:10 2023 +0800\n\n    c2 commit\n\ncommit fdf2a2ec1967c0f29e60d65fa285f627e2cd6767\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:27:07 2023 +0800\n\n    c1 commit\n\ncommit fb9a4a69bbb4d187f0f3a94dbf0cb2938f114e62\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:26:55 2023 +0800\n\n    init\n\n## \u53ef\u4ee5\u770b\u89c1 feature \u5206\u652f\u4e0a\u7684 c3 commit \u65f6\u95f4\u65e9\u4e8e master \u5206\u652f\u7684 c1/c2 commit\n## feature \u5408\u5e76 master \u65b0\u589e\u8bb0\u5f55\ngit checkout feature\ngit rebase master\n## \u63d0\u793a\u6709\u51b2\u7a81, \u89e3\u51b3\u51b2\u7a81\nvim README.md\ngit add README.md\ngit rebase --continue\n## \u518d\u6b21\u67e5\u770b feature \u5206\u652f\u7684 log, \u53d1\u73b0 c3 commit \u65f6\u95f4\u65e9\u4e8e master \u5206\u652f\u7684 c1/c2 commit, \u4f46\u662f\u6392\u5728\u4e86\u6700\u540e\u9762(\u6ca1\u6309\u65f6\u95f4\u6392\u5e8f)\n## \u5e76\u4e14, c3 commit \u7684 commit id \u5df2\u7ecf\u53d8\u4e86.\n## rebase \u539f\u7406: \u4e00\u6b21 rebase \u4e2d, \u4f1a\u62ff\u5230 \u5f53\u524d\u5206\u652f\u6700\u65b0\u7684 commit\u3001\u88ab rebase \u5206\u652f\u6700\u65b0\u7684 commit\u3001\u4ee5\u53ca\u5b83\u4eec\u6700\u8fd1\u7684\u4e00\u4e2a\u7236commit,\n##     \u7136\u540e\u5c06\u5f53\u524d\u5206\u652f \u4ece\u7236commit\u5230\u5f53\u524d\u6700\u65b0commit \u79fb\u52a8\u5230\u88ab rebase \u5206\u652f\u6700\u65b0\u4ee3\u7801\u4e4b\u540e(\u6b64\u65f6\u88ab\u79fb\u52a8\u8fc7\u6765\u7684commit\u662f\u5c5e\u4e8e\u88ab\u91cd\u65b0commit\u4e86, \u548c\u539f\u6765\u7684\u5df2\u7ecf\u4e0d\u4e00\u6837\u4e86)\n##     \u6700\u540e\u5c06\u5f53\u524d\u5206\u652f\u7684\u6307\u9488\u79fb\u52a8\u5230\u6700\u8fd1\u7684\u5730\u65b9.\ncommit e5fd30e03a32d1a902895dfa8ec51e50ba02bd41 (HEAD -&gt; feature)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:26:59 2023 +0800\n\n    c3 commit\n\ncommit 0ec71a9b42831756babb31aba75d56e0e73a6c68 (master)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:27:10 2023 +0800\n\n    c2 commit\n\ncommit fdf2a2ec1967c0f29e60d65fa285f627e2cd6767\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:27:07 2023 +0800\n\n    c1 commit\n\ncommit fb9a4a69bbb4d187f0f3a94dbf0cb2938f114e62\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Thu Apr 6 23:26:55 2023 +0800\n\n    init\n\n## \u67e5\u770b feature \u7684log, \u4e5f\u80fd\u5f97\u51fa\u4e0a\u9762\u8bf4\u7684\u539f\u7406\n* e5fd30e (HEAD -&gt; feature) c3 commit\n* 0ec71a9 (master) c2 commit\n* fdf2a2e c1 commit\n* fb9a4a6 init\n</code></pre>"},{"location":"utils/git/#565-rebase","title":"5.6.5 rebase \u603b\u7ed3","text":"<p>rebase \u7684\u65f6\u5019, \u627e\u5230\u5f53\u524d\u5206\u652f\u548c\u88abrebase\u5206\u652f\u7684\u7236commit, \u7136\u540e\u627e\u5230\u5f53\u524d\u5206\u652f\u5728\u7236commit\u4e4b\u540e\u6240\u6709\u7684commit\u8bb0\u5f55, \u628a\u8fd9\u4e9b commit \u8bb0\u5f55\u79fb\u52a8\u5230\u88ab rebase \u5206\u652f\u4e0a\u53bb, \u8fd9\u4e9b commit \u8bb0\u5f55\u5df2\u7ecf\u4e0d\u662f\u539f\u6765\u7684 commit \u4e86(\u56e0\u4e3a commit id \u5df2\u7ecf\u6539\u53d8\u4e86)\u3002\u6216\u8005\u901a\u4fd7\u6765\u8bf4: rebase \u5c31\u662f\u88abrebase\u5206\u652f\u63d2\u5165\u5230\u5f53\u524d\u5206\u652f\u4e4b\u524d, \u4f8b\u5982: \u4ece master checkout \u4e00\u4e2a feature \u7528\u4f5c\u5f00\u53d1, \u5f00\u53d1\u4e00\u6bb5\u65f6\u95f4\u4e4b\u540e, \u6709\u4eba\u7ed9 master \u63d0\u4ea4\u4ee3\u7801\u4e86(\u5982fixbug), \u90a3\u4e48\u6211\u4eec\u5e94\u8be5 rebase master \u5230\u5f53\u524d\u5206\u652f, \u5f53 master \u6700\u65b0\u7684\u4ee3\u7801\u653e\u5230 feature \u6700\u524d\u9762.</p> <p>\u6839\u636e\u4e0a\u9762\u8bf4\u7684, rebase \u662f\u5c06 \u88abrebase \u5206\u652f\u7684commit \u653e\u5230\u6700\u524d\u9762, \u6240\u4ee5\u5728\u540e\u7eed\u5f00\u53d1\u4e2d, \u5982\u679c feature \u5206\u652f\u9700\u8981\u56de\u9000\u7248\u672c, \u90a3\u4e48\u8fd9\u5c06\u5f88\u597d\u8ffd\u6eaf\u4ee3\u7801; \u5982\u679c\u6211\u4eec\u4f7f\u7528 merge \u5c06master \u63d0\u4ea4\u7684\u4ee3\u7801\u5408\u5e76\u5230 feature \u5206\u652f, \u90a3\u56de\u9000\u7248\u672c\u5c31\u53ef\u4ee5\u80fd\u628a\u522b\u4eba\u63d0\u4ea4\u7684\u4ee3\u7801\u4e5f\u5220\u6389\u4e86.</p> <p>\u540c\u6837\u7684, \u56e0\u4e3a rebase \u4f1a\u8ba9\u5f53\u524d\u5206\u652f\u7684 commit \u91cd\u65b0\u751f\u6210, \u8fd9\u4f1a\u6539\u53d8\u5206\u652f\u7684\u5386\u53f2, \u5728 push \u5230\u8fdc\u7a0b\u5206\u652f\u7684\u65f6\u5019, \u4f1a\u63d0\u793a\u4f60\u7684\u4ee3\u7801\u548c\u8fdc\u7a0b\u5206\u652f\u4e0d\u4e00\u81f4, \u8fd9\u5c31\u9700\u8981\u5f3a\u5236 push \u4e86(<code>git push --force-with-lease origin mybranch</code>), \u6240\u4ee5, \u5343\u4e07\u4e0d\u8981\u5728\u516c\u5171\u5206\u652f\u4e0a\u4f7f\u7528 rebase, \u5386\u53f2\u88ab\u6253\u4e71\u662f\u4e00\u4ef6\u5f88\u4e25\u91cd\u7684\u4e8b\u60c5!!!</p> <ol> <li>\u5728\u516c\u5171\u5206\u652f\u4e0a\u4e0d\u8981\u4f7f\u7528 rebase, \u5e94\u8be5\u7528 merge;</li> <li>\u529f\u80fd\u5206\u652f\u4e0a, \u53ef\u4ee5\u9009\u62e9 rebase(\u4e0d\u4ecb\u610f\u65f6\u95f4\u987a\u5e8f, \u628a\u81ea\u5df1\u7684 commit \u9876\u5230\u6700\u540e).</li> </ol>"},{"location":"utils/git/#566-rebase","title":"5.6.6 rebase \u7684\u547d\u4ee4\u884c\u64cd\u4f5c","text":"<p>\u5f00\u542f\u547d\u4ee4\u884c\u64cd\u4f5c</p> <pre><code>git rebase -i your_commit_id\n</code></pre> <p>\u5982</p> <pre><code>git rebase -i HEAD~3\n</code></pre> <p>\u4e4b\u540e\u4f1a\u63d0\u793a\u5f88\u591a\u4fe1\u606f</p> <pre><code>### \u53ef\u4ee5\u9009\u62e9\u7684\u64cd\u4f5c\n# Commands:\n### p: \u9009\u62e9\u4e00\u4e2a\u63d0\u4ea4\u5e76\u4e14\u5e94\u7528\u5b83: pick 111111e c1 first-commit -&gt; \u6539\u53d8\u5206\u652f\u7684 commit \u4fe1\u606f\u4e3a first-commit,\u5176commit id \u662f 111111e\n# p, pick &lt;commit&gt; = use commit\n# r, reword &lt;commit&gt; = use commit, but edit the commit message\n# e, edit &lt;commit&gt; = use commit, but stop for amending\n# s, squash &lt;commit&gt; = use commit, but meld into previous commit\n# f, fixup [-C | -c] &lt;commit&gt; = like \"squash\" but keep only the previous\n#                    commit's log message, unless -C is used, in which case\n#                    keep only this commit's message; -c is same as -C but\n#                    opens the editor\n# x, exec &lt;command&gt; = run command (the rest of the line) using shell\n# b, break = stop here (continue rebase later with 'git rebase --continue')\n# d, drop &lt;commit&gt; = remove commit\n# l, label &lt;label&gt; = label current HEAD with a name\n# t, reset &lt;label&gt; = reset HEAD to a label\n# m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]\n# .       create a merge commit using the original merge commit's\n# .       message (or the oneline, if no original merge commit was\n# .       specified); use -c &lt;commit&gt; to reword the commit message\n#\n# These lines can be re-ordered; they are executed from top to bottom.\n#\n# If you remove a line here THAT COMMIT WILL BE LOST.\n#\n# However, if you remove everything, the rebase will be aborted.\n#\n</code></pre> <p>\u5047\u8bbe\u73b0\u5728\u6709\u5982\u4e0b commit \u8bb0\u5f55</p> <pre><code>cd ..\nrm -rf first-project &amp;&amp; mkdir first-project &amp;&amp; cd first-project\ngit init\necho \"c0\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"init\"\n\necho \"c1\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c1 commit\"\n\necho \"c2\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c2 commit\"\n\necho \"c3\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c3 commit\"\n\necho \"c4\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c4 commit\"\n\necho \"c5\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c5 commit\"\n\ngit log\ncommit 84a6eefbec1d95b74f75b2f4ce290291bf70ac7d (HEAD -&gt; master)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 00:16:51 2023 +0800\n\n    c5 commit\n\ncommit f7dfd4a23515f8b4c5f35df7f10a0436887de8b9\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 00:16:50 2023 +0800\n\n    c4 commit\n\ncommit 9cbec48fce6bf102dc9160a2c60fb04d8038de14\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 00:16:50 2023 +0800\n\n    c3 commit\n\ncommit 1d316c48f7879387bee619f68de1c1d635d01350\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 00:16:50 2023 +0800\n\n    c2 commit\n\ncommit 3e477718c5c4a00bc708e4e413e79104651e784b\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 00:16:50 2023 +0800\n\n    c1 commit\n\ncommit e8e267817444fb8601ddd76ac98af570cfb546eb\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 00:16:50 2023 +0800\n\n    init\n</code></pre>"},{"location":"utils/git/#squash","title":"squash","text":"<p>\u6211\u60f3\u8981\u5c06 c4 commit \u548c c3 commit \u5408\u5e76\u6210\u4e00\u4e2acommit</p> <pre><code>git rebase -i e8e267817444fb8601ddd76ac98af570cfb546eb\npick 3e47771 c1 commit\npick 1d316c4 c2 commit\npick 9cbec48 c3 commit\nsquash f7dfd4a c4 commit\npick 84a6eef c5 commit\n\n## \u4fee\u6539\u5408\u5e76\u7684commit\u4fe1\u606f\n\n## \u67e5\u770b log\ncommit 779c9bf0f7503a0b7020a447666c7ef3c241b884 (HEAD -&gt; master)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 00:19:01 2023 +0800\n\n    c5 commit\n\ncommit 0e4b3536cb998f3ffab91746954366915d9eb360\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 00:19:01 2023 +0800\n\n    c3 commit\n    c4 commit\n\ncommit 348af55dbbb9472ca132ff6ad0aa159efe9d6fca\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 00:19:01 2023 +0800\n\n    c2 commit\n\ncommit 282990a0baf322e25c49c0245fecb9ff4bd0bab6\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 00:19:01 2023 +0800\n\n    c1 commit\n\ncommit 0ac0f9228c9be4b02632e01849036d8eeee73378\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 00:19:01 2023 +0800\n\n    init\n\n## \u67e5\u770b 0e4b353 \u53d8\u66f4\u4e86\u54ea\u4e9b\u4e1c\u897f, \u53ef\u4ee5\u770b\u89c1, \u672c\u6b21 commit, \u4fee\u6539\u4e86 README.md \u6587\u4ef6, \u6dfb\u52a0\u4e86 c3/c4 \u4e24\u884c\u4ee3\u7801\ncommit 0e4b3536cb998f3ffab91746954366915d9eb360\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 00:19:01 2023 +0800\n\n    c3 commit\n    c4 commit\n\ndiff --git a/README.md b/README.md\nindex c3f2bc9..d226868 100644\n--- a/README.md\n+++ b/README.md\n@@ -1,3 +1,5 @@\n c0\n c1\n c2\n+c3\n+c4\n</code></pre>"},{"location":"utils/git/#fixup","title":"fixup","text":"<p>\u4e5f\u53ef\u4ee5\u4f7f\u7528 fixup \u4ee3\u66ff squash, fixup \u4e0d\u4f1a\u4fdd\u7559\u5408\u5e76\u7684\u7684\u63d0\u4ea4\u4fe1\u606f, \u53ef\u4ee5\u4f7f\u7528\u6b64\u64cd\u4f5c\u5c06\u4e00\u4e2a\u5c0f\u7684\u63d0\u4ea4\u5408\u5e76\u5230\u4e4b\u524d\u7684\u63d0\u4ea4\u4e2d</p> <pre><code>git rebase -i 0ac0f9228c9be4b02632e01849036d8eeee73378\npick fdf2a2e c1 commit\npick 0ec71a9 c2 commit\npick e5fd30e c3 commit\nfixup 69799d0 c4 commit\npick cb1017b c5 commit\n</code></pre>"},{"location":"utils/git/#edit","title":"edit","text":"<p>\u5f53\u7136\u8fd8\u53ef\u4ee5\u4fee\u6539 commit \u4fe1\u606f</p> <pre><code>git rebase -i 0ac0f9228c9be4b02632e01849036d8eeee73378\npick fdf2a2e c1 commit\npick 0ec71a9 c2 commit\npick e5fd30e c3 commit\nedit 69799d0 c4 commit\npick cb1017b c5 commit\n\n# \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5f00\u59cb\u64cd\u4f5c(\u53ef\u4ee5\u6267\u884c\u591a\u6b21)\ngit commit --amend\n## \u586b\u5199 commit \u4fe1\u606f\n## \u4fee\u6539\u5230\u6ee1\u610f\u4e4b\u540e, \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u751f\u6548\ngit rebase --continue\n</code></pre>"},{"location":"utils/git/#reword","title":"reword","text":"<p>\u4fee\u6539 commit \u4fe1\u606f\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 reword, \u8fd9\u5c06\u76f4\u63a5\u5f00\u59cb\u4fee\u6539</p> <pre><code>git rebase -i 0ac0f9228c9be4b02632e01849036d8eeee73378\npick fdf2a2e c1 commit\npick 0ec71a9 c2 commit\npick e5fd30e c3 commit\nreword 69799d0 c4 commit\npick cb1017b c5 commit\n</code></pre>"},{"location":"utils/git/#drop","title":"drop","text":"<p>\u9664\u6b64\u4e4b\u5916, \u8fd8\u53ef\u4ee5\u5220\u9664\u67d0\u4e2a commit</p> <pre><code>git rebase -i 0ac0f9228c9be4b02632e01849036d8eeee73378\npick fdf2a2e c1 commit\npick 0ec71a9 c2 commit\npick e5fd30e c3 commit\ndrop 69799d0 c4 commit\npick cb1017b c5 commit\n</code></pre>"},{"location":"utils/git/#57-cherry-pick","title":"5.7 cherry-pick","text":"<p><code>git cherry-pick</code> \u547d\u4ee4\u7528\u4e8e\u5c06\u6307\u5b9a\u7684\u63d0\u4ea4\uff08commit\uff09\u5e94\u7528\u4e8e\u5f53\u524d\u5206\u652f\u3002\u8fd9\u4e2a\u547d\u4ee4\u53ef\u4ee5\u65b9\u4fbf\u5730\u5c06\u5176\u4ed6\u5206\u652f\u6216\u8005\u63d0\u4ea4\u7684\u4fee\u6539\u5e94\u7528\u5230\u5f53\u524d\u5206\u652f\u4e2d\uff0c\u800c\u65e0\u9700\u5c06\u6574\u4e2a\u5206\u652f\u5408\u5e76\u3002</p> <pre><code>rm -rf first-project &amp;&amp; mkdir first-project &amp;&amp; cd first-project\ngit init\necho \"c0\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"init\"\n\n## \u521b\u5efa\u4e24\u4e2a\u5206\u652f\ngit checkout -b feature1\ngit checkout -b feature2\n\n## \u5728 feature1 \u4e0a\u6dfb\u52a0\u4e24\u4e2a commit\ngit checkout feature1\necho \"c1\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c1 commit\"\n\necho \"c2\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c2 commit\"\n\n## \u5728 feature2 \u4e0a\u6dfb\u52a0\u4e24\u4e2a commit\ngit checkout feature2\necho \"c3\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c3 commit\"\n\necho \"c4\" &gt;&gt; README.md\ngit add README.md\ngit commit -m \"c4 commit\"\n\ngit log feature1\ncommit 762ae4b983da0bff873877779cd74e1aa8d10f88 (feature1)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 01:07:24 2023 +0800\n\n    c2 commit\n\ncommit 32fd3337cdf54589d9e6c46626886cd3c8936fa1\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 01:07:24 2023 +0800\n\n    c1 commit\n\ncommit 526925ca652065f75129e49f25090d58d33ce31f (master)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 01:07:24 2023 +0800\n\n    init\n\ngit log feature2\ncommit f956ab14791d3d3718a57ddd8f062178f808cf44 (HEAD -&gt; feature2)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 01:07:24 2023 +0800\n\n    c4 commit\n\ncommit b0666c02180c1bddf60190e14bb9391379b54598\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 01:07:24 2023 +0800\n\n    c3 commit\n\ncommit 526925ca652065f75129e49f25090d58d33ce31f (master)\nAuthor: kino &lt;kinoxyz1@gmail.com&gt;\nDate:   Fri Apr 7 01:07:24 2023 +0800\n\n    init\n</code></pre> <p>\u73b0\u5728\u8bb2 feature1 \u5206\u652f\u4e0a\u7684 762ae4b983da0bff873877779cd74e1aa8d10f88 \u5e94\u7528\u5230 feature2 \u4e0a</p> <pre><code>git checkout feature2\ngit cherry-pick 762ae4b983da0bff873877779cd74e1aa8d10f88\n</code></pre> <p>\u5982\u679c\u6709\u51b2\u7a81, \u9700\u8981\u89e3\u51b3\u51b2\u7a81\u540e, \u4f7f\u7528 <code>git add</code> \u6dfb\u52a0\u5230\u6682\u5b58\u533a, \u7136\u540e\u4f7f\u7528 <code>git cherry-pick --continue</code> \u7ee7\u7eed cherry-pick \u64cd\u4f5c, \u76f4\u5230\u5b8c\u6210.</p> <p>\u6ce8\u610f: \u4f7f\u7528 <code>git cherry-pick</code> \u547d\u4ee4\u5c06\u63d0\u4ea4\u5e94\u7528\u5230\u5f53\u524d\u5206\u652f\u65f6\uff0c\u4e5f\u53ef\u80fd\u4f1a\u5f15\u5165\u65b0\u7684\u95ee\u9898\uff0c\u56e0\u6b64\u5728\u4f7f\u7528\u8be5\u547d\u4ee4\u65f6\u9700\u8981\u8c28\u614e\u3002</p>"},{"location":"utils/git/#_13","title":"\u516d\u3001\u53c2\u4e0e\u5f00\u6e90\u9879\u76ee","text":"<p>\u8fd9\u91cc\u6211\u4eec\u4ee5\u888b\u9f20\u4e91\u7684 chunjun \u505a\u793a\u4f8b, \u9996\u5148\u6211\u4eec\u9700\u8981 fork \u8be5\u9879\u76ee\u3002</p> <p></p> <p>\u7136\u540e\u5c31\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u4ed3\u5e93\u4e2d\u770b\u5230 chunjun \u9879\u76ee\u4e86</p> <p></p> <p>clone \u6211\u4eec\u4ed3\u5e93\u4e2d\u7684 chunjun \u9879\u76ee</p> <pre><code>git clone https://github.com/your-github-name/chunjun.git\n</code></pre> <p>\u6dfb\u52a0\u8fdc\u7a0b\u5206\u652f</p> <pre><code>git remote add upstream https://github.com/DTStack/chunjun.git\n</code></pre> <p>\u6dfb\u52a0\u4e86\u4e4b\u540e\u53ef\u4ee5\u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93</p> <pre><code>git remote -v \norigin  https://github.com/your-github-name/chunjun.git (fetch)\norigin  https://github.com/your-github-name/chunjun.git (push)\nupstream    https://github.com/DTStack/chunjun.git (fetch)\nupstream    https://github.com/DTStack/chunjun.git (push)\n</code></pre> <p>\u4e0d\u8bba\u662f\u51c6\u5907\u5f00\u53d1\u4e00\u4e2a\u65b0\u529f\u80fd\uff0c\u8fd8\u662f\u51c6\u5907\u63d0\u4ea4\u4e00\u4e2a pr\uff0c\u90fd\u9700\u8981\u4f18\u5148\u66f4\u65b0\u8fdc\u7a0b\u5206\u652f\u5230\u672c\u5730, \u4f8b\u5982, \u73b0\u5728\u4f60\u9700\u8981\u57fa\u4e8emaster\u5f00\u53d1\u4e00\u4e2a\u65b0\u7684\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u505a\u5982\u4e0b\u64cd\u4f5c</p> <pre><code># \u53ef\u4ee5\u4f7f\u7528\ngit pull \n# \u6216\u8005\u4f7f\u7528\ngit fetch upstream -p\ngit rebase upstream/master\n\n# \u7136\u540e\u57fa\u4e8e master \u521b\u5efa\u4e00\u4e2a feature \u5206\u652f(\u4e00\u822c\u65b0\u529f\u80fd\u9700\u8981\u5148\u5199issue\u548c\u793e\u533a\u540c\u5b66\u8ba8\u8bba\u8be5\u529f\u80fd\uff0c\u6bd4\u5982\u548c\u4f5c\u8005\u8ba8\u8bba\u4f60\u7684\u60f3\u6cd5\u662f\u5426\u80fd\u5e26\u6765\u597d\u7684\u6548\u679c\u3001\u4ee5\u53ca\u8be5\u529f\u80fd\u662f\u5426\u53ef\u884c)\ngit checkout -b feature_your-issueid\n</code></pre> <p>\u7b49\u4f60\u5f00\u53d1\u5b8c\u529f\u80fd\uff0c\u5e76\u4e14\u5b8c\u6210\u6d4b\u8bd5\u4e4b\u540e\uff0c\u53ef\u4ee5\u63d0\u4ea4\u4ee3\u7801, \u6ce8\u610f\u8fd9\u91cc\u5148\u4e0d\u8981\u76f4\u63a5push</p> <pre><code>git add .\ngit commit -m \"your-commit-message\"\n</code></pre> <p>\u6b64\u65f6\u4f60\u5f00\u53d1\u4e00\u4e2a\u529f\u80fd\u53ef\u80fd\u8017\u65f61h\uff0c\u671f\u95f4\u5df2\u7ecf\u6709\u5176\u4ed6\u540c\u5b66\u63d0\u4ea4\u4e86\u4ee3\u7801\uff0c\u6240\u4ee5\u4f60\u8fd8\u9700\u8981\u4fdd\u6301\u6700\u65b0\u4ee3\u7801,</p> <pre><code>git fetch upstream\ngit rebase upstream/feature_your-issueid\n</code></pre> <p>rebase \u4e4b\u540e\u53ef\u80fd\u4f1a\u6709\u6587\u4ef6\u51b2\u7a81\uff0c\u9700\u8981\u6309\u9700\u89e3\u51b3\u51b2\u7a81\uff0c\u5c06\u6240\u6709\u51b2\u7a81\u90fd\u89e3\u51b3\u4e4b\u540e\u518d\u6267\u884c</p> <pre><code>git add .\ngit rebase --continue\n</code></pre> <p>\u770b\u5230\u63d0\u793a <code>rebase successful</code> \u4e4b\u7c7b\u7684\u5c31\u8868\u793a\u51b2\u7a81\u89e3\u51b3\u5b8c\u6210\u4e86\uff0c\u7136\u540e\u5c31\u63d0\u4ea4\u5230\u4f60\u7684github \u4ed3\u5e93\u4e2d(\u6ce8\u610f\u4e0d\u662fupstream), rebase \u4e4b\u540e\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u63a8\u9001, \u9700\u8981 <code>git push -f</code> \u5f3a\u5236\u63a8\u9001\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u6709\u98ce\u9669, \u64cd\u4f5c\u524d\u8bf7\u4ed4\u7ec6\u68c0\u67e5\u4ee5\u907f\u514d\u51fa\u73b0\u65e0\u5173\u4ee3\u7801\u88ab\u5f3a\u5236\u8986\u76d6\u7684\u95ee\u9898, \u5177\u4f53\u98ce\u9669\u53ef\u4ee5\u770b 5.6 rebase \u76f8\u5173\u7684\u89e3\u91ca\u3002</p> <pre><code>git push origin feature_your-issueid\n</code></pre> <p>\u7136\u540e\u6309\u9875\u9762\u63d0\u793a\uff0c\u63d0\u4ea4pr</p>"},{"location":"utils/hadoop/","title":"(Apache \u57fa\u91d1\u4f1a\u7684) Hadoop","text":"<p>Hadoop \u662f\u4e00\u4e2a \u5b9e\u73b0\u4e86mapreduce\u7b97\u6cd5 \u7684\u5f00\u6e90\u7684\u5206\u5e03\u5f0f\u5e76\u884c\u7f16\u7a0b\u6846\u67b6\u3002open-source implementation of frameworks for reliable, scalable, distributed computing and data storage.</p> <p>Goals/Requirements:</p> <ol> <li>Abstract with high scalability and availability \u5b83\u662f\u4e00\u4e2a\u9ad8\u53ef\u6269\u5c55\u6027\u548c\u53ef\u7528\u6027\u6846\u67b6</li> <li>Facilitate the storage and processing of large and/or rapidly growing data sets \u5bf9\u5927\u6570\u636e\u8fdb\u884c\u50a8\u5b58\u548c\u5904\u7406<ul> <li>\u5927\u6570\u636e\u5305\u62ec \u7ed3\u6784\u5316\u548c\u975e\u7ed3\u6784\u5316 Structured and non-structured data</li> <li>Process\u4e2d\uff1aMove computation rather than data \u66f4\u591a\u7684\u8fd8\u662f\u6570\u636e\u7684\u79fb\u52a8\u8bfb\u53d6</li> </ul> </li> <li>Use commodity hardware with little redundancy \u5c31\u662f\u8bf4\u90a3\u79cd\u6700\u57fa\u672c\u914d\u7f6e\u7684\u6807\u914d\u51fa\u552e\u7684\u4e1c\u897f\uff0c\u56e0\u4e3a\u4e0d\u52a0\u4efb\u4f55\u914d\u7f6e\u5c31\u662f\u6807\u51c6\u6709\u4e00\u5b9a\u80fd\u529b\u4f46\u662f\u4e0d\u8d35<ul> <li>Simple programming models</li> </ul> </li> <li>Fault-tolerance \u5bb9\u9519\u6027\u662f\u6700\u91cd\u8981\u7684</li> </ol>"},{"location":"utils/hadoop/#architecture","title":"architecture","text":"<p>Hadoop Ecosystem\uff1a Hadoop Common\u3002 A set of components and interfaces for distributed file systems and general I/O; \u7ec4\u4ef6\u548c\u63a5\u53e3 Hadoop Distributed File System, HDFS\u3002 A distributed file system that runs on large clusters of commodity machines; \u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf Hadoop MapReduce\u3002A distributed data processing model and execution environment that runs on large clusters of commodity machines;</p> <p>Hadoop Framework\uff1a HBase\u3002A distributed, column-oriented database. Table storage for semi-structured data</p> <ul> <li>Row/column store</li> <li>Billions of rows/millions on columns</li> <li>Column-oriented - nulls are free</li> <li>Untyped - stores byte</li> </ul> <p>Zookeeper\u3002Coordinating distributed applications\u3002</p> <p>Pig\u3002High-level language for data analysis</p> <ul> <li>Expresses sequences of MapReduce jobs</li> <li>Data model: nested \u201cbags\u201d of items</li> <li>Provides relational (SQL) operators (JOIN, GROUP BY, etc.)</li> <li>Easy to plug in Java functions</li> </ul> <p>Hive\u3002SQL-like Query language and Meta-store</p> <ul> <li>Used for majority of Facebook jobs</li> <li>\u201cRelational database\u201d built on Hadoop</li> <li>Maintains list of table schemas</li> <li>SQL-like query language (HiveQL)</li> <li>Can call Hadoop Streaming scripts from HiveQL</li> <li>Supports table partitioning, clustering, complex data types, some optimizations</li> </ul> <p>Mahout\u3002Machine learning</p> <p> </p>"},{"location":"utils/hadoop/#hadoop-distributed-file-system","title":"Hadoop Distributed File System","text":"<p>Problems and Solutions of HDFS.</p> <ul> <li>Data is too big to store on one machine \ud83d\udca1HDFS: store the data on multiple machines</li> <li>High end machines are too expensive \ud83d\udca1HDFS: Run on commodity hardware</li> <li>Many commodig hardnare will fail occasional \ud83d\udca1HDFS: Intelligent enaugh to handle harduard failure</li> <li>How to handle date on failed hardward \ud83d\udca1HDFS: Data replication</li> </ul> <p>Goals of HDFS:</p> <ul> <li>Verg Large Distributed File System Scalability 10K nodes, 100 million files, 10PB</li> <li>Assumes Commodity Hardware Failure Tolerane<ul> <li>Files ane replicated to handle hardware  failures</li> <li>Detect failures and recover from them</li> </ul> </li> <li>Optimized from Batch Processing High Throughaut<ul> <li>Data locations exposed so that computations can move to where data resides</li> <li>Provide very high aggregate bandwidth</li> </ul> </li> <li>With interfaces to move application operation closer to data to reduce data communication costs</li> <li>HDFS is designed to just work, to process Large data sets with write-once-read-many (WORM) semantics. it's not for low latency access</li> <li>Can be built out of commodity hardware</li> </ul> <p>Distributed, with some centralization</p> <p>A Hadoop Cluster includes a single master and multiple slave nodes.</p> <p>Main nodes run TaskTracker TT to accept and reply to MapReduce tasks, and also\u00a0DataNode DN\u00a0to store needed blocks closely as possible Central control node runs\u00a0NameNode\u00a0to keep track of HDFS directories &amp; files, and JobTrack to dispatch compute tasks to\u00a0TaskTracker. When you create a MapReduce job, at the very beginning, you have to seek the metadata from Namenode. Normally the namenode will maintain the metadata into his main memory, so we can search. You can retrieve the metadata immediately because everything is on the main memory. Normally on one namenode okay. Main nodes of cluster are where most of the computational power and storage of the system lies</p> <ul> <li>No need for RAID on normal nodes (Raid is a very expensive storage system supporting parallel IO operations.)</li> <li>Data Coherency\u00a0Write-once-read-many (WORM) access model\u00a0Client can only append (not override) to existing files</li> </ul> <p> </p>"},{"location":"utils/hadoop/#architecture_1","title":"Architecture","text":"\u4ece\u67b6\u6784\u4f4d\u7f6e\u5206 Central Control Node The Master NameNode keep track of HDFS directories &amp; files, Central manager for the file system Namespace ^ JobTracker dispatch compute tasks to\u00a0TaskTracker, Central manager for running MapReduce jobs The Slaves Main nodesTaskTracker, TT accept and reply to MapReduce tasks. accept and run map, reduce and shuffle ^ DataNode, DN store needed blocks closely as possible \u4ece\u529f\u80fd\u5206 Store Data NameNode metadata, Transaction log, ^ DataNode, DN actual data MapReduce Engine JobTracker splits up data into smaller tasks(\u201cMap\u201d) sends it to the TaskTracker process in each node ^ TaskTracker, TT reports back to the JobTracker node;reports on job progress;sends data (\u201cReduce\u201d) or requests new jobs"},{"location":"utils/hadoop/#datanode-dn","title":"DataNode, DN","text":"<ul> <li>Individual machines in the cluster</li> <li>Typically 2 level architecture. \u4e24\u5c42\u67b6\u6784</li> <li>30-40 nodes/rack. \u4e00\u4e2arack\u91cc30-40\u4e2anodes</li> <li>Nodes are commodity PCs. \u90fd\u662f\u5546\u54c1PC</li> <li>Uplink from one rack is 3-4 gigabit.\u00a0rack\u4e4b\u95f4\u4e92\u4f20\u662f3-4\u5343\u5146</li> <li>Rack-internal is 1 gigabit. rack\u5185\u90e8\u7684nodes \u662f1\u5343\u5146</li> <li>Can run on any underlying filesystem (ext3/4, NTFS, etc) \u53ef\u4ee5\u5728\u4efb\u4f55\u5e95\u5c42\u5e73\u53f0\u4e0a\u4f7f\u7528</li> </ul> <p>with Client:</p> <ul> <li>Serves data and metadata to Clients</li> <li>Periodically sends a report of all existing blocks to the NameNode \u544a\u8bc9NameNode\u81ea\u5df1\u5b58\u4e86\u5565\u6570\u636e</li> </ul> <p>Store:</p> <ul> <li>actual data in the local file system(e.g. ext3) \u5728\u672c\u5730\u50a8\u5b58\u5b9e\u9645\u6570\u636e</li> <li>Stores metadata of local block (e.g. CRC)</li> <li>NameNode replicates blocks 2x in local rack, 1x elsewhere. \u5173\u4e8e\u81ea\u5df1\u8fd9\u4e00\u53f0rack\u7684local data\u4f1a\u5728\u81ea\u5df1\u8fd9\u5b58\u4e24\u4efd\u5907\u4efd\uff0c\u4e00\u4efd\u5728\u522b\u7684rack\u90a3\u91cc\uff0c\u7531NameNode\u8bb0\u5f55</li> </ul> <p>with others DN:</p> <ul> <li>Forwards data to other specified DataNodes</li> </ul>"},{"location":"utils/hadoop/#namenode","title":"NameNode","text":"<ul> <li>Single Namespace for entire cluster</li> <li>The server holding the NameNode instance is quite crucial, as there is only one. \u975e\u5e38\u91cd\u8981\u53ea\u6709\u4e00\u4e2a</li> </ul> <p>Store:</p> <ul> <li>metadata for the files \u50a8\u5b58\u5143\u6570\u636e<ul> <li>like the directory structure of a typical FS(file system). \uff0c\u6bd4\u5982\u8bf4data\u7684\u7f16\u53f7\u548cdata\u7684\u50a8\u5b58\u4f4d\u7f6e\u3002\u4e0d\u50a8\u5b58data\uff0c\u800c\u662fdata\u7684\u642c\u8fd0\u5de5\uff0c\u77e5\u9053\u5728\u54ea\u91cc\u7136\u540e\u642c\u5230DataNode</li> <li>The entire metadata is in main memory</li> <li>No demand paging of metadata</li> <li>List of files, List of Blocks for each file, List of DataNodes for each block, File attributes, e.g., creation time, replication factor</li> </ul> </li> <li>Transaction log for file deletes/adds, etc.<ul> <li>Does not use transactions for whole blocks or file streams, only metadata. \u6587\u4ef6\u5220\u9664/\u6dfb\u52a0\u7b49\u7684\u4e8b\u52a1\u65e5\u5fd7\u3002\u4e0d\u5c06\u4e8b\u52a1\u7528\u4e8e\u6574\u4e2a\u5757\u6216\u6587\u4ef6\u6d41\uff0c\u4ec5\u4f7f\u7528\u5143\u6570\u636e\u3002\u7c7b\u4f3c\u5783\u573e\u6876\uff0c\u5728\u5143\u6570\u636e\u90a3\u91cc\u6807\u64cd\u4f5c\uff0c\u610f\u4e49\u4e0atransaction\uff0c\u4f46\u5b9e\u9645\u50a8\u5b58\u4e0a\u8fd8\u662f\u90a3\u6837</li> </ul> </li> </ul> <p>with client:</p> <ul> <li>is responsible for maintaining the file namespace and directing clients to datanodes;</li> </ul> <p>with DataNode:</p> <ul> <li>Maps a file name to a set of blocks</li> <li>Maps a block to the DataNodes where it resides</li> <li>Handles creation of more replica blocks when necessary after a DataNode failure\u3002<ul> <li>Replication Engine for Blocks</li> <li>\u5f53\u67d0\u4e2aDataNode\u6302\u4e86\u4e4b\u540e\u5c31\u642c\u8fd0data\u2014\u2014\u521b\u5efa\u526f\u672c\uff0c\u786e\u4fdddata\u6709\u5b9a\u91cf\u7684replications in DataNode</li> </ul> </li> <li>Cluster Configuration Management</li> </ul>"},{"location":"utils/hadoop/#strategy","title":"Strategy","text":""},{"location":"utils/hadoop/#block-placement-data-pipeline","title":"Block Placement - Data Pipeline","text":"<ul> <li>Large blocks stored across a cluster \u6bcf\u4e00\u4e2afile\u90fd\u88ab\u5206\u6210\u5f88\u591a\u4e2ablock\u50a8\u5b58\u5728\u4e00\u4e2a\u96c6\u7fa4<ul> <li>Individual files are broken into blocks of a fixed size (64MB by default);</li> <li>Blocks are stored across a cluster of one or more machines;</li> <li>High degree of data replication on multiple DataNodes \u6bcf\u5757\u90fd\u88ab\u9ad8\u5ea6\u590d\u5236\u50a8\u5b58\u5728\u4e0d\u540cDataNode\u4e0a</li> <li>\u81f3\u5c11\u4e09\u4efd (3x by default)\u00a0\uff1a1st on local node\uff1b2nd on a remote rack\uff1b3rd on the same remote rack\uff1bAdditional replicas are randomly placed</li> </ul> </li> <li>Blocks are moved primarily across DataNodes \u5757\u7684\u5907\u4efd\u7684\u5199\u5165\u4e3b\u8981\u9760DN\u4e4b\u95f4\u4f20\u9012<ul> <li>client\u00a0retires\u00a0a\u00a0list\u00a0of\u00a0DataNodes\u00a0on\u00a0which\u00a0to\u00a0place replicas\u00a0of\u00a0a\u00a0block\u00a0from\u00a0NameNodes</li> <li>Client writes block to the first DataNode</li> <li>The first DataNode forwards the data to the next node in the</li> <li>When all replicas are written, the Client moves on to write the next block in file</li> </ul> </li> </ul> <ul> <li>Nearest replicas are retrieved by Client in network \u5ba2\u6237\u7aef\u68c0\u7d22\u6700\u8fd1\u5907\u4efd\u7684\u4f4d\u7f6e\uff0c\u901a\u8fc7\u7f51\u7edc\u76f4\u63a5\u8bbf\u95ee<ul> <li>Client\u00a0connects\u00a0to\u00a0NN to\u00a0request\u00a0to\u00a0read data</li> <li>NN\u00a0tells client\u00a0whichDNS to find the\u00a0data block</li> <li>Client\u00a0read\u00a0blocks\u00a0of\u00a0nearest\u00a0replica\u00a0directly from\u00a0DNS</li> <li>In\u00a0case\u00a0of\u00a0node failures.\u00a0clients\u00a0connects\u00a0to\u00a0another DN\u00a0that\u00a0severs\u00a0the\u00a0missing\u00a0block</li> <li>Client accesses data directly from DataNode<ul> <li>why not\u00a0ask clients to\u00a0read blocks through NN?<ul> <li>present\u00a0NN\u00a0from\u00a0being\u00a0the\u00a0bottleneck\u00a0of\u00a0the\u00a0cluster</li> <li>Allow HDFS to scale to\u00a0large number of concurrent clients</li> <li>Spreadthe data\u00a0traffic\u00a0across\u00a0the\u00a0cluster</li> </ul> </li> </ul> </li> </ul> </li> </ul>"},{"location":"utils/hadoop/#mapreduce","title":"Mapreduce","text":"<p>\u56e0\u4e3a Targeted towards many reads of filestreams, Writes are more costly \u9488\u5bf9\u5728data process \u8bfb\u6bd4\u5199\u66f4\u91cd\u8981 MapReduce is very good at dealing with warm proper property: Read once and write once and read many times right.</p> <ul> <li>Written in Java, also supports Python and Ruby</li> </ul> <p>Fine-grained Map and Reduce tasks:</p> <ul> <li>Improved load balancing</li> <li>Faster recovery from failed tasks</li> </ul>"},{"location":"utils/hadoop/#parallelism-in-hadoop","title":"Parallelism in Hadoop","text":"<ol> <li>multi-threaded\uff1f No need to handle multi-threaded code Each Mapper / Reducer is typically single threaded Allows for restarting of failed jobs Runs entirely independent of each other in separate JVMs (Java Virtual Machines)</li> </ol>"},{"location":"utils/hadoop/#load-balancing","title":"Load Balancing","text":"<p>Goal: % disk full on DataNodes should be similar \u4e0d\u8d85\u8fc7balance\u7684\u65f6\u5019\uff1a\u5c31\u52a0\u66f4\u591a Mappers/Reducers!</p> <p>Map:</p> <p>Usually as many as the number of HDFS blocks being processed, this is the default, else the number of maps can be specified as a hint. The number of maps can also be controlled by specifying the minimum split size. The actual sizes of the map inputs are computed by:\u00a0\\(\\max(\\min(\\text{\\#block},\\cfrac{data}{\\#maps}), min\\_split\\_size\\)</p> <p>Reduces:</p> <p>Unless the amount of data being processed is small 0.95num_nodesmapred.TaskTracker.tasks.maximum What happens if the number of reducers is less than the distinct of number keys? The total running time is dominated by Reducer who deals with most intermediate pairs Solution: use domain knowledge to decide the partitioning scheme \u5230\u4e86\u9700\u8981\u52a0DataNode\u7684\u65f6\u5019\uff1a</p> <p>Usually run when new DataNodes are added</p> <p>Cluster is online when Rebalancer is active</p> <p>Rebalancer is throttled to avoid network congestion</p>"},{"location":"utils/hadoop/#locality-optimization-local","title":"Locality Optimization, local \u4f18\u5316","text":"<p>Because some of machines are very busy, I cannot assign so many reduced to you the whole job, right? So this system level optimization should be considered locality optimization.</p> <p>Problem\uff1aFor large data, bandwidth to data is a problem for\u00a0Batch Processing By one reading, everything will be transferred from disc into the main memory. So this server time are expensive Solution\uff1aMap-Reduce + HDFS is a very effective with the Master scheduling policy</p> <p>Master scheduling policy:</p> <ul> <li>Map-Reduce queries HDFS for locations of input data</li> <li>Map tasks scheduled so HDFS input block replicas are on the same machine or the same rack</li> <li>Map tasks are scheduled close to the inputs when possible</li> </ul> <p>Benefits:</p> <ul> <li>Thousands of machines read input at local disk speed\uff0c<ul> <li>It's not random access partial from here, partial from there, take a lot of time, it's everything is already local localised on the same place and you just by once reading everything can be available.</li> </ul> </li> <li>Provides very high aggregate bandwidth</li> <li>Eliminate network bottleneck \u6d88\u9664\u7f51\u7edc\u901f\u5ea6\u74f6\u9888 Bandwideh at Different Lenels Process on the same node Different nodes on the same rack Nodes on different racks in the same data center( cluster) Nodes in different centers</li> </ul>"},{"location":"utils/hadoop/#fault-tolerance","title":"Fault Tolerance","text":"<p>\u9996\u5148\u660e\u786e\u4e00\u70b9\uff1aFailure is norm, not an exception</p> <p>\u6211\u4eec\u91c7\u53d6\u7684\u662f\u5206\u5e03\u5f0f\u7cfb\u7edf\uff0c\u8fd9\u4e48\u591a\u53f0PC\u90fd\u540c\u65f6\u90fd\u4e0d\u51fa\u95ee\u9898\u6982\u7387\u4e3a0\uff0c\u54ea\u6015\u4e00\u53f0\u62a5\u9519\u6982\u7387\u6781\u5c0f\u3002\u6240\u4ee5\u6211\u4eec\u4e00\u5b9a\u8981\u505a\u597d\u786e\u4fdd Fault Tolerance \u7684\u5de5\u4f5c\uff0c\u5305\u62ec:</p> <ol> <li>replication \u6709\u5907\u4efd</li> <li>checksum \u65f6\u523b\u68c0\u67e5\u662f\u5426\u51fa\u9519</li> <li>Data transfer bandwidth is critical (location of data) \u6570\u636e\u4f20\u8f93\u5e26\u5bbd\u81f3\u5173\u91cd\u8981\uff08\u6570\u636e\u4f4d\u7f6e\uff09</li> </ol> <p>Automatic re-execution on failure\u00a7\u00a0In a large cluster, some nodes are always slow or flaky</p> <p>Framework re-executes failed tasks</p> Failure Failure Recovery Worker failure Detect DataNode failure via periodic heartbeats Detect Data correctness via Checksums Re-execute in-progress map/reduce tasks Master failure Resume from Execution Log <p>Worker failure:</p> <p>DataNode failure</p> <p>Detect via periodic heartbeats</p> <p>DataNodes send heartbeats a Block Report from\u00a0each\u00a0DataNode to the NameNode. Once every 3 seconds via a TCP handshake</p> <p>Recover.</p> <p>Chooses new DataNodes for new replicas Balances disk usage Balances communication traffic to DataNodes</p> <p>Data correctness</p> <p>Detect via Checksums</p> <p>Client computes checksum per 512 bytes.\u00a0\u00a0DataNode stores the checksum</p> <p>Master failure:</p> <p>\u5c5e\u4e8e Single point of failure \u5355\u70b9\u6545\u969c Transaction Log stored in multiple directories: A directory on the local file system A directory on a remote file system (NFS/CIFS) Need to develop a real HA (high availability) solution</p> <p>*Secondary NameNode*</p> <p>\u540c\u6b65\u904b\u884c The other can be replaced immediately without interrupting.</p> <ul> <li>Copies FSImage and Transaction Log from NamNnode to a temporary directory</li> <li>Merges FSImage and Transaction Log into a new FSImage in temporary directory</li> <li>Uploads new FSImage to the NameNode\u00a7\u00a0Transaction Log on NameNode is purged</li> </ul> <p> </p>"},{"location":"utils/html_css/","title":"HTML &amp; CSS \u4e00\u4e9b\u7528\u8fc7\u7684\u90e8\u4ef6","text":""},{"location":"utils/html_css/#grid","title":"Grid","text":"<p>\u8fd9\u4e2a grid \u7684\u90e8\u4ef6\u80fd\u5b9e\u73b0 \u628a\u9875\u9762\u5206\u6210\u51e0\u4e2a\u7f51\u683c\uff0c\u7136\u540e\u5e76\u6392\u5c55\u793a</p> code<pre><code>&lt;div class=\"grid\" style=\"grid-template-columns: repeat(3, 1fr) !important;\" markdown&gt;\n&lt;figure markdown=\"span\" style=\"grid-column-start: 1; grid-column-end: 3;\"&gt;![](./pics/LSTM_3.webp)&lt;/figure&gt;\n&lt;p style=\"grid-column-start: 3; grid-column-end: 4;\"&gt;\u5c55\u793a\u6548\u679c\uff1a\u5de6\u56fe\u53f3\u5b57\uff0c\u5206\u4e863\u683c\uff0c\u5de6\u56fe\u53602\uff0c \u53f3\u5b57\u53601&lt;/p&gt;\n&lt;/div&gt;\n</code></pre> <p>\u5c55\u793a\uff1a</p> <p>\u5c55\u793a\u6548\u679c\uff1a\u5de6\u56fe\u53f3\u5b57\uff0c\u5206\u4e863\u683c\uff0c\u5de6\u56fe\u53602\uff0c \u53f3\u5b57\u53601</p> <p>\u53ef\u80fd\u7528\u5230\u7684\u94fe\u63a5\uff1a</p> <ul> <li>grid-template-columns</li> </ul>"},{"location":"utils/linux%20copy/","title":"linux","text":"<p>P</p> <ul> <li><code>clear</code> \u6e05\u7a7a\u5f53\u524d\u754c\u9762</li> </ul>"},{"location":"utils/linux%20copy/#_1","title":"\u67e5\u770b","text":"<ul> <li> <p><code>pwd</code> \u73b0\u5728\u5728\u54ea</p> </li> <li> <p><code>ls</code> \u5f53\u4e0b\u76ee\u5f55\u91cc\u6709\u4ec0\u4e48 <code>ls /tmp</code> <code>ls -al</code></p> </li> <li><code>cat &lt;file_name&gt;</code> \u67e5\u770b\u6587\u4ef6\u5185\u5bb9 <code>cat output.txt</code>     &gt; <code>cat test_1.txt test_2.txt test_3.txt</code> \u8fde\u7eed\u67e5\u770b\u4e09\u4e2atxt\u7684\u5185\u5bb9\uff0cone after the other, as a single block of text     &gt; <code>cat t*</code> \u67e5\u770b\u6240\u6709\u4ee5t\u5f00\u5934\u7684\u6587\u4ef6</li> </ul>"},{"location":"utils/linux%20copy/#-","title":"\u79fb\u52a8 - \u5230\u8fbe\u5730\u5740","text":"<p>!!! p \u201c/\u201d\u00a0directory is sometimes referred to as the root directory</p> <ul> <li>cd <code>cd ..</code> \u4e0a\u4e00\u5c42 <code>cd</code> \u5355\u7eaf\u7684cd\u662f\u56de\u5230home directory <code>cd ../ ..</code> \u56de\u5230\u4e0a\u5c42\u7684\u4e0a\u5c42 <code>cd /home/</code></li> <li><code>mv &lt;file_name&gt; &lt;directory&gt;</code> \u5c06\u6587\u4ef6\u79fb\u52a8\u5230directory. \u8bb0\u5f97<code>ls</code> confirm     &gt; <code>mv file_1.txt dir1</code></li> <li><code>cp &lt;file1_name&gt; &lt;copy_name&gt;</code> \u590d\u5236\u526f\u672c</li> </ul>"},{"location":"utils/linux%20copy/#-_1","title":"\u521b\u5efa -\u5220\u9664","text":"<ul> <li><code>mkdir &lt;file_name_1&gt;, &lt;file_name_2&gt;, \u2026</code> \u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u521b\u5efa\u591a\u4e2a\u76ee\u5f55 \u6ce8\u610f\u5982\u679c\u662f\u5199\u7684\u662f\u6bd4\u8f83\u957f\u7684\u8def\u5f84\uff0c\u5c31\u4f1a\u90fd\u521b\u5efa\u51fa\u6765     &gt; <code>mkdir /tmp/tutorial</code> \u521b\u5efa\u4e86tmp\uff0c\u518d\u5728tmp\u4e0b\u521b\u5efatutorial     <code>mkdir dir1 dir2 dir3</code> \u8fde\u521b\u4e09\u4e2adirectory</li> <li><code>cat &gt; &lt;new_file.txt&gt;</code> \u521b\u5efa\u65b0\u7684\u6587\u6863</li> </ul> <ul> <li><code>rm &lt;file1_name&gt; &lt;file2_name&gt;</code> \u8fde\u7eed\u5220\u9664\u591a\u4e2a\u6587\u6863     &gt; <code>rm *.txt</code> \u5220\u9664\u5168\u90e8txt\u6587\u6863     &gt; <code>rm test1.txt</code></li> <li><code>rm -r &lt;directory_name&gt;</code> \u5220\u9664\u6574\u4e2a\u6587\u4ef6\u5939without confirmation</li> </ul> <p>!!! danger \u5220\u9664\u7684\u6587\u4ef6\u662f\u4e0d\u4f1a\u653e\u8fdb\u5783\u573e\u7bb1\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\u5220\u9664\u4e4b\u540e\u4e0d\u80fd\u627e\u5230</p>"},{"location":"utils/linux%20copy/#_2","title":"\u7f16\u8f91\u4fdd\u5b58","text":"<p>\u5173\u952e\u662f <code>&gt; &lt;output_file_name&gt;</code> </p> <p>\u589e\u52a0 appending file\uff1a <code>&gt;&gt; &lt;output_file_name&gt;</code></p> <p><code>ls &gt; output.txt</code> \u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2aoutput\u7684txt \u50a8\u5b58file list\u7684\u5185\u5bb9</p> <ul> <li> <p>cat: (short for concatenate) command is one of the most frequently used commands on Linux <code>cat t* &gt; combine.txt</code> \u5c06\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u4ee5t\u5f00\u5934\u7684\u6587\u4ef6\u5408\u5e76\u751f\u6210combine.txt</p> </li> <li> <p><code>echo \u201cI ve append a new line\u201d &gt;&gt; combine.txt</code> \u5728combine.txt\u91cc\u65b0\u589e\u4e00\u4e32\u6587\u5b57</p> </li> <li> <p><code>mv &lt;file_name&gt; &lt;file_new_name&gt;</code> \u91cd\u547d\u540d</p> </li> </ul>"},{"location":"utils/linux%20copy/#_3","title":"\u8f6f\u4ef6","text":"<p><code>apt-get update</code> \u66f4\u65b0Update the software sources <code>apt-get install &lt;software_name&gt;</code> \u4e0b\u8f7d</p> <p><code>apt-get install vim</code> \u4e0b\u8f7dvim \u7f16\u8f91\u5668</p>"},{"location":"utils/linux/","title":"Linux\u57fa\u7840\u547d\u4ee4","text":""},{"location":"utils/linux/#linux_1","title":"Linux\u7684\u76ee\u5f55\u7ed3\u6784","text":"<ul> <li><code>/</code>\uff0c\u6839\u76ee\u5f55\u662f\u6700\u9876\u7ea7\u7684\u76ee\u5f55\u4e86</li> <li>Linux\u53ea\u6709\u4e00\u4e2a\u9876\u7ea7\u76ee\u5f55\uff1a<code>/</code></li> <li>\u8def\u5f84\u63cf\u8ff0\u7684\u5c42\u6b21\u5173\u7cfb\u540c\u6837\u9002\u7528<code>/</code>\u6765\u8868\u793a</li> <li>/home/itheima/a.txt\uff0c\u8868\u793a\u6839\u76ee\u5f55\u4e0b\u7684home\u6587\u4ef6\u5939\u5185\u6709itheima\u6587\u4ef6\u5939\uff0c\u5185\u6709a.txt</li> </ul>"},{"location":"utils/linux/#ls","title":"ls\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u5217\u51fa\u6587\u4ef6\u5939\u4fe1\u606f</p> <p>\u8bed\u6cd5\uff1a<code>ls [-l -h -a] [\u53c2\u6570]</code></p> <ul> <li>\u53c2\u6570\uff1a\u88ab\u67e5\u770b\u7684\u6587\u4ef6\u5939\uff0c\u4e0d\u63d0\u4f9b\u53c2\u6570\uff0c\u8868\u793a\u67e5\u770b\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55</li> <li>-l\uff0c\u4ee5\u5217\u8868\u5f62\u5f0f\u67e5\u770b</li> <li>-h\uff0c\u914d\u5408-l\uff0c\u4ee5\u66f4\u52a0\u4eba\u6027\u5316\u7684\u65b9\u5f0f\u663e\u793a\u6587\u4ef6\u5927\u5c0f</li> <li>-a\uff0c\u663e\u793a\u9690\u85cf\u6587\u4ef6</li> </ul>"},{"location":"utils/linux/#_1","title":"\u9690\u85cf\u6587\u4ef6\u3001\u6587\u4ef6\u5939","text":"<p>\u5728Linux\u4e2d\u4ee5<code>.</code>\u5f00\u5934\u7684\uff0c\u5747\u662f\u9690\u85cf\u7684\u3002</p> <p>\u9ed8\u8ba4\u4e0d\u663e\u793a\u51fa\u6765\uff0c\u9700\u8981<code>-a</code>\u9009\u9879\u624d\u53ef\u67e5\u770b\u5230\u3002</p>"},{"location":"utils/linux/#pwd","title":"pwd\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u5c55\u793a\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55</p> <p>\u8bed\u6cd5\uff1a<code>pwd</code></p>"},{"location":"utils/linux/#cd","title":"cd\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u5207\u6362\u5de5\u4f5c\u76ee\u5f55</p> <p>\u8bed\u6cd5\uff1a<code>cd [\u76ee\u6807\u76ee\u5f55]</code></p> <p>\u53c2\u6570\uff1a\u76ee\u6807\u76ee\u5f55\uff0c\u8981\u5207\u6362\u53bb\u7684\u5730\u65b9\uff0c\u4e0d\u63d0\u4f9b\u9ed8\u8ba4\u5207\u6362\u5230<code>\u5f53\u524d\u767b\u5f55\u7528\u6237HOME\u76ee\u5f55</code></p>"},{"location":"utils/linux/#home","title":"HOME\u76ee\u5f55","text":"<p>\u6bcf\u4e00\u4e2a\u7528\u6237\u5728Linux\u7cfb\u7edf\u4e2d\u90fd\u6709\u81ea\u5df1\u7684\u4e13\u5c5e\u5de5\u4f5c\u76ee\u5f55\uff0c\u79f0\u4e4b\u4e3aHOME\u76ee\u5f55\u3002</p> <ul> <li> <p>\u666e\u901a\u7528\u6237\u7684HOME\u76ee\u5f55\uff0c\u9ed8\u8ba4\u5728\uff1a<code>/home/\u7528\u6237\u540d</code></p> </li> <li> <p>root\u7528\u6237\u7684HOME\u76ee\u5f55\uff0c\u5728\uff1a<code>/root</code></p> </li> </ul> <p>FinalShell\u767b\u9646\u7ec8\u7aef\u540e\uff0c\u9ed8\u8ba4\u7684\u5de5\u4f5c\u76ee\u5f55\u5c31\u662f\u7528\u6237\u7684HOME\u76ee\u5f55</p>"},{"location":"utils/linux/#_2","title":"\u76f8\u5bf9\u8def\u5f84\u3001\u7edd\u5bf9\u8def\u5f84","text":"<ul> <li>\u76f8\u5bf9\u8def\u5f84\uff0c\u975e<code>/</code>\u5f00\u5934\u7684\u79f0\u4e4b\u4e3a\u76f8\u5bf9\u8def\u5f84</li> </ul> <p>\u76f8\u5bf9\u8def\u5f84\u8868\u793a\u4ee5<code>\u5f53\u524d\u76ee\u5f55</code>\u4f5c\u4e3a\u8d77\u70b9\uff0c\u53bb\u63cf\u8ff0\u8def\u5f84\uff0c\u5982<code>test/a.txt</code>\uff0c\u8868\u793a\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u5185\u7684test\u6587\u4ef6\u5939\u5185\u7684a.txt\u6587\u4ef6</p> <ul> <li>\u7edd\u5bf9\u8def\u5f84\uff0c\u4ee5<code>/</code>\u5f00\u5934\u7684\u79f0\u4e4b\u4e3a\u7edd\u5bf9\u8def\u5f84</li> </ul> <p>\u7edd\u5bf9\u8def\u5f84\u4ece<code>\u6839</code>\u5f00\u59cb\u63cf\u8ff0\u8def\u5f84</p>"},{"location":"utils/linux/#_3","title":"\u7279\u6b8a\u8def\u5f84\u7b26","text":"<ul> <li><code>.</code>\uff0c\u8868\u793a\u5f53\u524d\uff0c\u6bd4\u5982./a.txt\uff0c\u8868\u793a\u5f53\u524d\u6587\u4ef6\u5939\u5185\u7684<code>a.txt</code>\u6587\u4ef6</li> <li><code>..</code>\uff0c\u8868\u793a\u4e0a\u7ea7\u76ee\u5f55\uff0c\u6bd4\u5982<code>../</code>\u8868\u793a\u4e0a\u7ea7\u76ee\u5f55\uff0c<code>../../</code>\u8868\u793a\u4e0a\u7ea7\u7684\u4e0a\u7ea7\u76ee\u5f55</li> <li><code>~</code>\uff0c\u8868\u793a\u7528\u6237\u7684HOME\u76ee\u5f55\uff0c\u6bd4\u5982<code>cd ~</code>\uff0c\u5373\u53ef\u5207\u56de\u7528\u6237HOME\u76ee\u5f55</li> </ul>"},{"location":"utils/linux/#mkdir","title":"mkdir\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u521b\u5efa\u6587\u4ef6\u5939</p> <p>\u8bed\u6cd5\uff1a<code>mkdir [-p] \u53c2\u6570</code></p> <ul> <li>\u53c2\u6570\uff1a\u88ab\u521b\u5efa\u6587\u4ef6\u5939\u7684\u8def\u5f84</li> <li>\u9009\u9879\uff1a-p\uff0c\u53ef\u9009\uff0c\u8868\u793a\u521b\u5efa\u524d\u7f6e\u8def\u5f84</li> </ul>"},{"location":"utils/linux/#touch","title":"touch\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u521b\u5efa\u6587\u4ef6</p> <p>\u8bed\u6cd5\uff1a<code>touch \u53c2\u6570</code></p> <ul> <li>\u53c2\u6570\uff1a\u88ab\u521b\u5efa\u7684\u6587\u4ef6\u8def\u5f84</li> </ul>"},{"location":"utils/linux/#cat","title":"cat\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u67e5\u770b\u6587\u4ef6\u5185\u5bb9</p> <p>\u8bed\u6cd5\uff1a<code>cat \u53c2\u6570</code></p> <ul> <li>\u53c2\u6570\uff1a\u88ab\u67e5\u770b\u7684\u6587\u4ef6\u8def\u5f84</li> </ul>"},{"location":"utils/linux/#more","title":"more\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u67e5\u770b\u6587\u4ef6\uff0c\u53ef\u4ee5\u652f\u6301\u7ffb\u9875\u67e5\u770b</p> <p>\u8bed\u6cd5\uff1a<code>more \u53c2\u6570</code></p> <ul> <li>\u53c2\u6570\uff1a\u88ab\u67e5\u770b\u7684\u6587\u4ef6\u8def\u5f84</li> <li>\u5728\u67e5\u770b\u8fc7\u7a0b\u4e2d\uff1a<ul> <li><code>\u7a7a\u683c</code>\u952e\u7ffb\u9875</li> <li><code>q</code>\u9000\u51fa\u67e5\u770b</li> </ul> </li> </ul>"},{"location":"utils/linux/#cp","title":"cp\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u590d\u5236\u6587\u4ef6\u3001\u6587\u4ef6\u5939</p> <p>\u8bed\u6cd5\uff1a<code>cp [-r] \u53c2\u65701 \u53c2\u65702</code></p> <ul> <li>\u53c2\u65701\uff0c\u88ab\u590d\u5236\u7684</li> <li>\u53c2\u65702\uff0c\u8981\u590d\u5236\u53bb\u7684\u5730\u65b9</li> <li>\u9009\u9879\uff1a-r\uff0c\u53ef\u9009\uff0c\u590d\u5236\u6587\u4ef6\u5939\u4f7f\u7528</li> </ul> <p>\u793a\u4f8b\uff1a</p> <ul> <li>cp a.txt b.txt\uff0c\u590d\u5236\u5f53\u524d\u76ee\u5f55\u4e0ba.txt\u4e3ab.txt</li> <li>cp a.txt test/\uff0c\u590d\u5236\u5f53\u524d\u76ee\u5f55a.txt\u5230test\u6587\u4ef6\u5939\u5185</li> <li>cp -r test test2\uff0c\u590d\u5236\u6587\u4ef6\u5939test\u5230\u5f53\u524d\u6587\u4ef6\u5939\u5185\u4e3atest2\u5b58\u5728</li> </ul>"},{"location":"utils/linux/#mv","title":"mv\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u79fb\u52a8\u6587\u4ef6\u3001\u6587\u4ef6\u5939</p> <p>\u8bed\u6cd5\uff1a<code>mv \u53c2\u65701 \u53c2\u65702</code></p> <ul> <li>\u53c2\u65701\uff1a\u88ab\u79fb\u52a8\u7684</li> <li>\u53c2\u65702\uff1a\u8981\u79fb\u52a8\u53bb\u7684\u5730\u65b9\uff0c\u53c2\u65702\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u8fdb\u884c\u6539\u540d</li> </ul>"},{"location":"utils/linux/#rm","title":"rm\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u5220\u9664\u6587\u4ef6\u3001\u6587\u4ef6\u5939</p> <p>\u8bed\u6cd5\uff1a<code>rm [-r -f] \u53c2\u6570...\u53c2\u6570</code></p> <ul> <li>\u53c2\u6570\uff1a\u652f\u6301\u591a\u4e2a\uff0c\u6bcf\u4e00\u4e2a\u8868\u793a\u88ab\u5220\u9664\u7684\uff0c\u7a7a\u683c\u8fdb\u884c\u5206\u9694</li> <li>\u9009\u9879\uff1a-r\uff0c\u5220\u9664\u6587\u4ef6\u5939\u4f7f\u7528</li> <li>\u9009\u9879\uff1a-f\uff0c\u5f3a\u5236\u5220\u9664\uff0c\u4e0d\u4f1a\u7ed9\u51fa\u786e\u8ba4\u63d0\u793a\uff0c\u4e00\u822croot\u7528\u6237\u4f1a\u7528\u5230</li> </ul> <p>rm\u547d\u4ee4\u5f88\u5371\u9669\uff0c\u4e00\u5b9a\u8981\u6ce8\u610f\uff0c\u7279\u522b\u662f\u5207\u6362\u5230root\u7528\u6237\u7684\u65f6\u5019\u3002</p>"},{"location":"utils/linux/#which","title":"which\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u67e5\u770b\u547d\u4ee4\u7684\u7a0b\u5e8f\u672c\u4f53\u6587\u4ef6\u8def\u5f84</p> <p>\u8bed\u6cd5\uff1a<code>which \u53c2\u6570</code></p> <ul> <li>\u53c2\u6570\uff1a\u88ab\u67e5\u770b\u7684\u547d\u4ee4</li> </ul>"},{"location":"utils/linux/#find","title":"find\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u641c\u7d22\u6587\u4ef6</p> <p>\u8bed\u6cd51\u6309\u6587\u4ef6\u540d\u641c\u7d22\uff1a<code>find \u8def\u5f84 -name \u53c2\u6570</code></p> <ul> <li>\u8def\u5f84\uff0c\u641c\u7d22\u7684\u8d77\u59cb\u8def\u5f84</li> <li>\u53c2\u6570\uff0c\u641c\u7d22\u7684\u5173\u952e\u5b57\uff0c\u652f\u6301\u901a\u914d\u7b26*\uff0c \u6bd4\u5982\uff1a<code>*</code>test\u8868\u793a\u641c\u7d22\u4efb\u610f\u4ee5test\u7ed3\u5c3e\u7684\u6587\u4ef6</li> </ul>"},{"location":"utils/linux/#grep","title":"grep\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u8fc7\u6ee4\u5173\u952e\u5b57</p> <p>\u8bed\u6cd5\uff1a<code>grep [-n] \u5173\u952e\u5b57 \u6587\u4ef6\u8def\u5f84</code></p> <ul> <li>\u9009\u9879-n\uff0c\u53ef\u9009\uff0c\u8868\u793a\u5728\u7ed3\u679c\u4e2d\u663e\u793a\u5339\u914d\u7684\u884c\u7684\u884c\u53f7\u3002</li> <li>\u53c2\u6570\uff0c\u5173\u952e\u5b57\uff0c\u5fc5\u586b\uff0c\u8868\u793a\u8fc7\u6ee4\u7684\u5173\u952e\u5b57\uff0c\u5e26\u6709\u7a7a\u683c\u6216\u5176\u5b83\u7279\u6b8a\u7b26\u53f7\uff0c\u5efa\u8bae\u4f7f\u7528\u201d\u201d\u5c06\u5173\u952e\u5b57\u5305\u56f4\u8d77\u6765</li> <li>\u53c2\u6570\uff0c\u6587\u4ef6\u8def\u5f84\uff0c\u5fc5\u586b\uff0c\u8868\u793a\u8981\u8fc7\u6ee4\u5185\u5bb9\u7684\u6587\u4ef6\u8def\u5f84\uff0c\u53ef\u4f5c\u4e3a\u5185\u5bb9\u8f93\u5165\u7aef\u53e3</li> </ul> <p>\u53c2\u6570\u6587\u4ef6\u8def\u5f84\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u7ba1\u9053\u7b26\u7684\u8f93\u5165</p>"},{"location":"utils/linux/#wc","title":"wc\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u7edf\u8ba1</p> <p>\u8bed\u6cd5\uff1a<code>wc [-c -m -l -w] \u6587\u4ef6\u8def\u5f84</code></p> <ul> <li>\u9009\u9879\uff0c-c\uff0c\u7edf\u8ba1bytes\u6570\u91cf</li> <li>\u9009\u9879\uff0c-m\uff0c\u7edf\u8ba1\u5b57\u7b26\u6570\u91cf</li> <li>\u9009\u9879\uff0c-l\uff0c\u7edf\u8ba1\u884c\u6570</li> <li>\u9009\u9879\uff0c-w\uff0c\u7edf\u8ba1\u5355\u8bcd\u6570\u91cf</li> <li>\u53c2\u6570\uff0c\u6587\u4ef6\u8def\u5f84\uff0c\u88ab\u7edf\u8ba1\u7684\u6587\u4ef6\uff0c\u53ef\u4f5c\u4e3a\u5185\u5bb9\u8f93\u5165\u7aef\u53e3</li> </ul> <p>\u53c2\u6570\u6587\u4ef6\u8def\u5f84\uff0c\u53ef\u4f5c\u4e3a\u7ba1\u9053\u7b26\u7684\u8f93\u5165</p>"},{"location":"utils/linux/#_4","title":"\u7ba1\u9053\u7b26|","text":"<p>\u5199\u6cd5\uff1a<code>|</code></p> <p>\u529f\u80fd\uff1a\u5c06\u7b26\u53f7\u5de6\u8fb9\u7684\u7ed3\u679c\uff0c\u4f5c\u4e3a\u7b26\u53f7\u53f3\u8fb9\u7684\u8f93\u5165</p> <p>\u793a\u4f8b\uff1a</p> <p><code>cat a.txt | grep itheima</code>\uff0c\u5c06cat a.txt\u7684\u7ed3\u679c\uff0c\u4f5c\u4e3agrep\u547d\u4ee4\u7684\u8f93\u5165\uff0c\u7528\u6765\u8fc7\u6ee4<code>itheima</code>\u5173\u952e\u5b57</p> <p>\u53ef\u4ee5\u652f\u6301\u5d4c\u5957\uff1a</p> <p><code>cat a.txt | grep itheima | grep itcast</code></p>"},{"location":"utils/linux/#echo","title":"echo\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u8f93\u51fa\u5185\u5bb9</p> <p>\u8bed\u6cd5\uff1a<code>echo \u53c2\u6570</code></p> <ul> <li>\u53c2\u6570\uff1a\u88ab\u8f93\u51fa\u7684\u5185\u5bb9</li> </ul>"},{"location":"utils/linux/#_5","title":"`\u53cd\u5f15\u53f7","text":"<p>\u529f\u80fd\uff1a\u88ab\u4e24\u4e2a\u53cd\u5f15\u53f7\u5305\u56f4\u7684\u5185\u5bb9\uff0c\u4f1a\u4f5c\u4e3a\u547d\u4ee4\u6267\u884c</p> <p>\u793a\u4f8b\uff1a</p> <ul> <li>echo `pwd`\uff0c\u4f1a\u8f93\u51fa\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55</li> </ul>"},{"location":"utils/linux/#tail","title":"tail\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u67e5\u770b\u6587\u4ef6\u5c3e\u90e8\u5185\u5bb9</p> <p>\u8bed\u6cd5\uff1a<code>tail [-f] \u53c2\u6570</code></p> <ul> <li>\u53c2\u6570\uff1a\u88ab\u67e5\u770b\u7684\u6587\u4ef6</li> <li>\u9009\u9879\uff1a-f\uff0c\u6301\u7eed\u8ddf\u8e2a\u6587\u4ef6\u4fee\u6539</li> </ul>"},{"location":"utils/linux/#head","title":"head\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u67e5\u770b\u6587\u4ef6\u5934\u90e8\u5185\u5bb9</p> <p>\u8bed\u6cd5\uff1a<code>head [-n] \u53c2\u6570</code></p> <ul> <li>\u53c2\u6570\uff1a\u88ab\u67e5\u770b\u7684\u6587\u4ef6</li> <li>\u9009\u9879\uff1a-n\uff0c\u67e5\u770b\u7684\u884c\u6570</li> </ul>"},{"location":"utils/linux/#_6","title":"\u91cd\u5b9a\u5411\u7b26","text":"<p>\u529f\u80fd\uff1a\u5c06\u7b26\u53f7\u5de6\u8fb9\u7684\u7ed3\u679c\uff0c\u8f93\u51fa\u5230\u53f3\u8fb9\u6307\u5b9a\u7684\u6587\u4ef6\u4e2d\u53bb</p> <ul> <li><code>&gt;</code>\uff0c\u8868\u793a\u8986\u76d6\u8f93\u51fa</li> <li><code>&gt;&gt;</code>\uff0c\u8868\u793a\u8ffd\u52a0\u8f93\u51fa</li> </ul>"},{"location":"utils/linux/#vi","title":"vi\u7f16\u8f91\u5668","text":""},{"location":"utils/linux/#_7","title":"\u547d\u4ee4\u6a21\u5f0f\u5feb\u6377\u952e","text":""},{"location":"utils/linux/#_8","title":"\u5e95\u7ebf\u547d\u4ee4\u5feb\u6377\u952e","text":""},{"location":"utils/linux/#_9","title":"\u547d\u4ee4\u7684\u9009\u9879","text":"<p>\u6211\u4eec\u5b66\u4e60\u7684\u4e00\u7cfb\u5217Linux\u547d\u4ee4\uff0c\u5b83\u4eec\u6240\u62e5\u6709\u7684\u9009\u9879\u90fd\u662f\u975e\u5e38\u591a\u7684\u3002</p> <p>\u6bd4\u5982\uff0c\u7b80\u5355\u7684ls\u547d\u4ee4\u5c31\u6709\uff1a-a -A -b -c -C -d -D -f -F -g -G -h -H -i -I -k -l -L -m -n -N -o -p -q -Q -r-R -s -S -t -T -u -U -v -w -x -X -1\u7b49\u9009\u9879\uff0c\u53ef\u4ee5\u53d1\u73b0\u9009\u9879\u662f\u6781\u5176\u591a\u7684\u3002</p> <p>\u8bfe\u7a0b\u4e2d\uff0c \u5e76\u4e0d\u4f1a\u5c06\u5168\u90e8\u7684\u9009\u9879\u90fd\u8fdb\u884c\u8bb2\u89e3\uff0c\u5426\u5219\uff0c\u4e00\u4e2als\u547d\u4ee4\u5c31\u53ef\u80fd\u8bb2\u89e32\u5c0f\u65f6\u4e4b\u4e45\u3002</p> <p>\u8bfe\u7a0b\u4e2d\uff0c\u4f1a\u5bf9\u5e38\u89c1\u7684\u9009\u9879\u8fdb\u884c\u8bb2\u89e3\uff0c \u8db3\u591f\u6ee1\u8db3\u7edd\u5927\u591a\u6570\u7684\u5b66\u4e60\u3001\u5de5\u4f5c\u573a\u666f\u3002</p>"},{"location":"utils/linux/#_10","title":"\u67e5\u770b\u547d\u4ee4\u7684\u5e2e\u52a9","text":"<p>\u53ef\u4ee5\u901a\u8fc7\uff1a<code>\u547d\u4ee4 --help</code>\u67e5\u770b\u547d\u4ee4\u7684\u5e2e\u52a9\u624b\u518c</p> <p></p>"},{"location":"utils/linux/#_11","title":"\u67e5\u770b\u547d\u4ee4\u7684\u8be6\u7ec6\u624b\u518c","text":"<p>\u53ef\u4ee5\u901a\u8fc7\uff1a<code>man \u547d\u4ee4</code>\u67e5\u770b\u67d0\u547d\u4ee4\u7684\u8be6\u7ec6\u624b\u518c</p> <p></p>"},{"location":"utils/linux/#linux_2","title":"Linux\u5e38\u7528\u64cd\u4f5c","text":""},{"location":"utils/linux/#_12","title":"\u8f6f\u4ef6\u5b89\u88c5","text":"<ul> <li>CentOS\u7cfb\u7edf\u4f7f\u7528\uff1a<ul> <li>yum [install remove search] [-y] \u8f6f\u4ef6\u540d\u79f0<ul> <li>install \u5b89\u88c5</li> <li>remove \u5378\u8f7d</li> <li>search \u641c\u7d22</li> <li>-y\uff0c\u81ea\u52a8\u786e\u8ba4</li> </ul> </li> </ul> </li> <li>Ubuntu\u7cfb\u7edf\u4f7f\u7528<ul> <li>apt [install remove search] [-y] \u8f6f\u4ef6\u540d\u79f0<ul> <li>install \u5b89\u88c5</li> <li>remove \u5378\u8f7d</li> <li>search \u641c\u7d22</li> <li>-y\uff0c\u81ea\u52a8\u786e\u8ba4</li> </ul> </li> </ul> </li> </ul> <p>yum \u548c apt \u5747\u9700\u8981root\u6743\u9650</p>"},{"location":"utils/linux/#systemctl","title":"systemctl","text":"<p>\u529f\u80fd\uff1a\u63a7\u5236\u7cfb\u7edf\u670d\u52a1\u7684\u542f\u52a8\u5173\u95ed\u7b49</p> <p>\u8bed\u6cd5\uff1a<code>systemctl start | stop | restart | disable | enable | status \u670d\u52a1\u540d</code></p> <ul> <li>start\uff0c\u542f\u52a8</li> <li>stop\uff0c\u505c\u6b62</li> <li>status\uff0c\u67e5\u770b\u72b6\u6001</li> <li>disable\uff0c\u5173\u95ed\u5f00\u673a\u81ea\u542f</li> <li>enable\uff0c\u5f00\u542f\u5f00\u673a\u81ea\u542f</li> <li>restart\uff0c\u91cd\u542f</li> </ul>"},{"location":"utils/linux/#_13","title":"\u8f6f\u94fe\u63a5","text":"<p>\u529f\u80fd\uff1a\u521b\u5efa\u6587\u4ef6\u3001\u6587\u4ef6\u5939\u8f6f\u94fe\u63a5\uff08\u5feb\u6377\u65b9\u5f0f\uff09</p> <p>\u8bed\u6cd5\uff1a<code>ln -s \u53c2\u65701 \u53c2\u65702</code></p> <ul> <li>\u53c2\u65701\uff1a\u88ab\u94fe\u63a5\u7684</li> <li>\u53c2\u65702\uff1a\u8981\u94fe\u63a5\u53bb\u7684\u5730\u65b9\uff08\u5feb\u6377\u65b9\u5f0f\u7684\u540d\u79f0\u548c\u5b58\u653e\u4f4d\u7f6e\uff09</li> </ul>"},{"location":"utils/linux/#_14","title":"\u65e5\u671f","text":"<p>\u8bed\u6cd5\uff1a<code>date [-d] [+\u683c\u5f0f\u5316\u5b57\u7b26\u4e32]</code></p> <ul> <li> <p>-d \u6309\u7167\u7ed9\u5b9a\u7684\u5b57\u7b26\u4e32\u663e\u793a\u65e5\u671f\uff0c\u4e00\u822c\u7528\u4e8e\u65e5\u671f\u8ba1\u7b97</p> </li> <li> <p>\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\uff1a\u901a\u8fc7\u7279\u5b9a\u7684\u5b57\u7b26\u4e32\u6807\u8bb0\uff0c\u6765\u63a7\u5236\u663e\u793a\u7684\u65e5\u671f\u683c\u5f0f</p> <ul> <li>%Y   \u5e74%y   \u5e74\u4efd\u540e\u4e24\u4f4d\u6570\u5b57 (00..99)</li> <li>%m   \u6708\u4efd (01..12)</li> <li>%d   \u65e5 (01..31)</li> <li>%H   \u5c0f\u65f6 (00..23)</li> <li>%M   \u5206\u949f (00..59)</li> <li>%S   \u79d2 (00..60)</li> <li>%s   \u81ea 1970-01-01 00:00:00 UTC \u5230\u73b0\u5728\u7684\u79d2\u6570</li> </ul> </li> </ul> <p>\u793a\u4f8b\uff1a</p> <ul> <li>\u6309\u71672022-01-01\u7684\u683c\u5f0f\u663e\u793a\u65e5\u671f</li> </ul> <p></p> <ul> <li>\u6309\u71672022-01-01 10:00:00\u7684\u683c\u5f0f\u663e\u793a\u65e5\u671f</li> </ul> <p></p> <ul> <li>-d\u9009\u9879\u65e5\u671f\u8ba1\u7b97</li> </ul> <p></p> <pre><code>- \u652f\u6301\u7684\u65f6\u95f4\u6807\u8bb0\u4e3a\uff1a\n\n  ![image-20221027220449312](https://image-set.oss-cn-zhangjiakou.aliyuncs.com/img-out/2022/10/27/20221027220449.png)\n</code></pre>"},{"location":"utils/linux/#_15","title":"\u65f6\u533a","text":"<p>\u4fee\u6539\u65f6\u533a\u4e3a\u4e2d\u56fd\u65f6\u533a</p> <p></p>"},{"location":"utils/linux/#ntp","title":"ntp","text":"<p>\u529f\u80fd\uff1a\u540c\u6b65\u65f6\u95f4</p> <p>\u5b89\u88c5\uff1a<code>yum install -y ntp</code></p> <p>\u542f\u52a8\u7ba1\u7406\uff1a<code>systemctl start | stop | restart | status | disable | enable ntpd</code></p> <p>\u624b\u52a8\u6821\u51c6\u65f6\u95f4\uff1a<code>ntpdate -u ntp.aliyun.com</code></p>"},{"location":"utils/linux/#ip","title":"ip\u5730\u5740","text":"<p>\u683c\u5f0f\uff1aa.b.c.d</p> <ul> <li>abcd\u4e3a0~255\u7684\u6570\u5b57</li> </ul> <p>\u7279\u6b8aIP\uff1a</p> <ul> <li>127.0.0.1\uff0c\u8868\u793a\u672c\u673a</li> <li>0.0.0.0<ul> <li>\u53ef\u4ee5\u8868\u793a\u672c\u673a</li> <li>\u4e5f\u53ef\u4ee5\u8868\u793a\u4efb\u610fIP\uff08\u770b\u4f7f\u7528\u573a\u666f\uff09</li> </ul> </li> </ul> <p>\u67e5\u770bip\uff1a<code>ifconfig</code></p>"},{"location":"utils/linux/#_16","title":"\u4e3b\u673a\u540d","text":"<p>\u529f\u80fd\uff1aLinux\u7cfb\u7edf\u7684\u540d\u79f0</p> <p>\u67e5\u770b\uff1a<code>hostname</code></p> <p>\u8bbe\u7f6e\uff1a<code>hostnamectl set-hostname \u4e3b\u673a\u540d</code></p>"},{"location":"utils/linux/#vmwareip","title":"\u914d\u7f6eVMware\u56fa\u5b9aIP","text":"<ol> <li> <p>\u4fee\u6539VMware\u7f51\u7edc\uff0c\u53c2\u9605PPT\uff0c\u56fe\u592a\u591a</p> </li> <li> <p>\u8bbe\u7f6eLinux\u5185\u90e8\u56fa\u5b9aIP</p> </li> </ol> <p>\u4fee\u6539\u6587\u4ef6\uff1a<code>/etc/sysconfig/network-scripts/ifcfg-ens33</code></p> <p>\u793a\u4f8b\u6587\u4ef6\u5185\u5bb9\uff1a</p> <pre><code>TYPE=\"Ethernet\"\nPROXY_METHOD=\"none\"\nBROWSER_ONLY=\"no\"\nBOOTPROTO=\"static\" # \u6539\u4e3astatic\uff0c\u56fa\u5b9aIP\nDEFROUTE=\"yes\"\nIPV4_FAILURE_FATAL=\"no\"\nIPV6INIT=\"yes\"\nIPV6_AUTOCONF=\"yes\"\nIPV6_DEFROUTE=\"yes\"\nIPV6_FAILURE_FATAL=\"no\"\nIPV6_ADDR_GEN_MODE=\"stable-privacy\"\nNAME=\"ens33\"\nUUID=\"1b0011cb-0d2e-4eaa-8a11-af7d50ebc876\"\nDEVICE=\"ens33\"\nONBOOT=\"yes\"\nIPADDR=\"192.168.88.131\" # IP\u5730\u5740\uff0c\u81ea\u5df1\u8bbe\u7f6e\uff0c\u8981\u5339\u914d\u7f51\u7edc\u8303\u56f4\nNETMASK=\"255.255.255.0\" # \u5b50\u7f51\u63a9\u7801\uff0c\u56fa\u5b9a\u5199\u6cd5255.255.255.0\nGATEWAY=\"192.168.88.2\"  # \u7f51\u5173\uff0c\u8981\u548cVMware\u4e2d\u914d\u7f6e\u7684\u4e00\u81f4\nDNS1=\"192.168.88.2\"  # DNS1\u670d\u52a1\u5668\uff0c\u548c\u7f51\u5173\u4e00\u81f4\u5373\u53ef\n</code></pre>"},{"location":"utils/linux/#ps","title":"ps\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u67e5\u770b\u8fdb\u7a0b\u4fe1\u606f</p> <p>\u8bed\u6cd5\uff1a<code>ps -ef</code>\uff0c\u67e5\u770b\u5168\u90e8\u8fdb\u7a0b\u4fe1\u606f\uff0c\u53ef\u4ee5\u642d\u914dgrep\u505a\u8fc7\u6ee4\uff1a<code>ps -ef | grep xxx</code></p>"},{"location":"utils/linux/#kill","title":"kill\u547d\u4ee4","text":""},{"location":"utils/linux/#nmap","title":"nmap\u547d\u4ee4","text":""},{"location":"utils/linux/#netstat","title":"netstat\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u67e5\u770b\u7aef\u53e3\u5360\u7528</p> <p>\u7528\u6cd5\uff1a<code>netstat -anp | grep xxx</code></p>"},{"location":"utils/linux/#ping","title":"ping\u547d\u4ee4","text":"<p>\u6d4b\u8bd5\u7f51\u7edc\u662f\u5426\u8054\u901a</p> <p>\u8bed\u6cd5\uff1a<code>ping [-c num] \u53c2\u6570</code></p> <p></p>"},{"location":"utils/linux/#wget","title":"wget\u547d\u4ee4","text":""},{"location":"utils/linux/#curl","title":"curl\u547d\u4ee4","text":""},{"location":"utils/linux/#top","title":"top\u547d\u4ee4","text":"<p>\u529f\u80fd\uff1a\u67e5\u770b\u4e3b\u673a\u8fd0\u884c\u72b6\u6001</p> <p>\u8bed\u6cd5\uff1a<code>top</code>\uff0c\u67e5\u770b\u57fa\u7840\u4fe1\u606f</p> <p>\u53ef\u7528\u9009\u9879\uff1a</p> <p></p> <p>\u4ea4\u4e92\u5f0f\u6a21\u5f0f\u4e2d\uff0c\u53ef\u7528\u5feb\u6377\u952e\uff1a</p> <p></p>"},{"location":"utils/linux/#_17","title":"\u8d44\u6e90\u76f8\u5173","text":"<p>\u663e\u793a\u6839\u76ee\u5f55\u4e0b\u6bcf\u4e2a\u6587\u4ef6\u548c\u76ee\u5f55\u7684\u78c1\u76d8\u4f7f\u7528\u7a7a\u95f4 <code>du</code> (disk usage)</p> <p><code>df [-k]</code> \u9ed8\u8ba4\u4ee5\u5343\u5b57\u8282\u4e3a\u5355\u4f4d\u663e\u793a\u78c1\u76d8\u7a7a\u95f4\u4fe1\u606f</p> <p><code>df -h</code> \u4ee5KB\u3001MB\u3001GB\u7684\u5355\u4f4d\u6765\u663e\u793a\uff0c\u53ef\u8bfb\u6027\u9ad8</p> <p><code>df -h -d 1</code> \u5728 <code>-h</code> \u7684\u6761\u4ef6\u4e0a\u518d\u52a0\u4e00\u4e2a\u201cdepth=1\u201d\u53ea\u770b\u4e00\u5c42</p> <p><code>du -h -d 1 | sort -h</code> \u518d\u6392\u5e8f\u4e00\u4e0b\u3010\uff01\uff01\uff01\u3011</p> <p>\u663e\u793a\u78c1\u76d8\u5206\u533a\u4e0a\u53ef\u4ee5\u4f7f\u7528\u7684\u78c1\u76d8\u7a7a\u95f4 <code>df</code></p> <p><code>df [-k]</code> \u9ed8\u8ba4\u4ee5\u5343\u5b57\u8282\u4e3a\u5355\u4f4d\u663e\u793a\u78c1\u76d8\u7a7a\u95f4\u4fe1\u606f</p> <p><code>df -h</code> \u4ee5KB\u3001MB\u3001GB\u7684\u5355\u4f4d\u6765\u663e\u793a\uff0c\u53ef\u8bfb\u6027\u9ad8\u3010\uff01\uff01\uff01\u3011</p> <p>\u7cfb\u7edf\u4e2d\u7a7a\u95f2\u7684\u3001\u5df2\u7528\u7684\u7269\u7406\u5185\u5b58\u53caswap\u5185\u5b58,\u53ca\u88ab\u5185\u6838\u4f7f\u7528\u7684buffer <code>free</code>, \u5b83\u662f\u5bf9 /proc/meminfo \u6536\u96c6\u5230\u7684\u4fe1\u606f\u7684\u4e00\u4e2a\u6982\u8ff0</p> <p>Linux\u4e2d du \uff08\u8be6\u89e3\uff09\u3001 df \uff08\u8be6\u89e3\uff09\u548c free\uff08\u8be6\u89e3\uff09\u4ee5\u53ca\u5b83\u4eec\u7684\u533a\u522b</p>"},{"location":"utils/linux/#iostat","title":"iostat\u547d\u4ee4","text":"<p>\u67e5\u770bCPU\u3001\u78c1\u76d8\u7684\u76f8\u5173\u4fe1\u606f</p> <p></p> <p></p>"},{"location":"utils/linux/#sar","title":"sar\u547d\u4ee4","text":"<p>\u67e5\u770b\u7f51\u7edc\u7edf\u8ba1</p> <p></p>"},{"location":"utils/linux/#_18","title":"\u73af\u5883\u53d8\u91cf","text":"<ul> <li>\u4e34\u65f6\u8bbe\u7f6e\uff1aexport \u53d8\u91cf\u540d=\u53d8\u91cf\u503c</li> <li>\u6c38\u4e45\u8bbe\u7f6e\uff1a<ul> <li>\u9488\u5bf9\u7528\u6237\uff0c\u8bbe\u7f6e\u7528\u6237HOME\u76ee\u5f55\u5185\uff1a<code>.bashrc</code>\u6587\u4ef6</li> <li>\u9488\u5bf9\u5168\u5c40\uff0c\u8bbe\u7f6e<code>/etc/profile</code></li> </ul> </li> </ul>"},{"location":"utils/linux/#path","title":"PATH\u53d8\u91cf","text":"<p>\u8bb0\u5f55\u4e86\u6267\u884c\u7a0b\u5e8f\u7684\u641c\u7d22\u8def\u5f84</p> <p>\u53ef\u4ee5\u5c06\u81ea\u5b9a\u4e49\u8def\u5f84\u52a0\u5165PATH\u5185\uff0c\u5b9e\u73b0\u81ea\u5b9a\u4e49\u547d\u4ee4\u5728\u4efb\u610f\u5730\u65b9\u5747\u53ef\u6267\u884c\u7684\u6548\u679c</p>"},{"location":"utils/linux/#_19","title":"$\u7b26\u53f7","text":"<p>\u53ef\u4ee5\u53d6\u51fa\u6307\u5b9a\u7684\u73af\u5883\u53d8\u91cf\u7684\u503c</p> <p>\u8bed\u6cd5\uff1a<code>$\u53d8\u91cf\u540d</code></p> <p>\u793a\u4f8b\uff1a</p> <p><code>echo $PATH</code>\uff0c\u8f93\u51faPATH\u73af\u5883\u53d8\u91cf\u7684\u503c</p> <p><code>echo ${PATH}ABC</code>\uff0c\u8f93\u51faPATH\u73af\u5883\u53d8\u91cf\u7684\u503c\u4ee5\u53caABC</p> <p>\u5982\u679c\u53d8\u91cf\u540d\u548c\u5176\u5b83\u5185\u5bb9\u6df7\u6dc6\u5728\u4e00\u8d77\uff0c\u53ef\u4ee5\u4f7f\u7528${}</p>"},{"location":"utils/linux/#_20","title":"\u538b\u7f29\u89e3\u538b","text":""},{"location":"utils/linux/#_21","title":"\u538b\u7f29","text":"<p><code>tar -zcvf \u538b\u7f29\u5305 \u88ab\u538b\u7f291...\u88ab\u538b\u7f292...\u88ab\u538b\u7f29N</code></p> <ul> <li>-z\u8868\u793a\u4f7f\u7528gzip\uff0c\u53ef\u4ee5\u4e0d\u5199</li> </ul> <p><code>zip [-r] \u53c2\u65701 \u53c2\u65702 \u53c2\u6570N</code></p> <p></p>"},{"location":"utils/linux/#_22","title":"\u89e3\u538b","text":"<p><code>tar -zxvf \u88ab\u89e3\u538b\u7684\u6587\u4ef6 -C \u8981\u89e3\u538b\u53bb\u7684\u5730\u65b9</code></p> <ul> <li>-z\u8868\u793a\u4f7f\u7528gzip\uff0c\u53ef\u4ee5\u7701\u7565</li> <li>-C\uff0c\u53ef\u4ee5\u7701\u7565\uff0c\u6307\u5b9a\u8981\u89e3\u538b\u53bb\u7684\u5730\u65b9\uff0c\u4e0d\u5199\u89e3\u538b\u5230\u5f53\u524d\u76ee\u5f55</li> </ul> <p><code>unzip [-d] \u53c2\u6570</code></p> <p></p>"},{"location":"utils/linux/#su","title":"su\u547d\u4ee4","text":"<p>\u5207\u6362\u7528\u6237</p> <p>\u8bed\u6cd5\uff1a<code>su [-] [\u7528\u6237]</code></p> <p></p>"},{"location":"utils/linux/#sudo","title":"sudo\u547d\u4ee4","text":"<p>\u6bd4\u5982\uff1a</p> <pre><code>itheima ALL=(ALL)       NOPASSWD: ALL\n</code></pre> <p>\u5728visudo\u5185\u914d\u7f6e\u5982\u4e0a\u5185\u5bb9\uff0c\u53ef\u4ee5\u8ba9itheima\u7528\u6237\uff0c\u65e0\u9700\u5bc6\u7801\u76f4\u63a5\u4f7f\u7528<code>sudo</code></p>"},{"location":"utils/linux/#chmod","title":"chmod\u547d\u4ee4","text":"<p>\u4fee\u6539\u6587\u4ef6\u3001\u6587\u4ef6\u5939\u6743\u9650</p> <p>\u8bed\u6cd5\uff1a<code>chmod [-R] \u6743\u9650 \u53c2\u6570</code></p> <ul> <li>\u6743\u9650\uff0c\u8981\u8bbe\u7f6e\u7684\u6743\u9650\uff0c\u6bd4\u5982755\uff0c\u8868\u793a\uff1a<code>rwxr-xr-x</code></li> </ul> <p></p> <ul> <li> <p>\u53c2\u6570\uff0c\u88ab\u4fee\u6539\u7684\u6587\u4ef6\u3001\u6587\u4ef6\u5939</p> </li> <li> <p>\u9009\u9879-R\uff0c\u8bbe\u7f6e\u6587\u4ef6\u5939\u548c\u5176\u5185\u90e8\u5168\u90e8\u5185\u5bb9\u4e00\u6837\u751f\u6548</p> </li> </ul>"},{"location":"utils/linux/#chown","title":"chown\u547d\u4ee4","text":"<p>\u4fee\u6539\u6587\u4ef6\u3001\u6587\u4ef6\u5939\u6240\u5c5e\u7528\u6237\u3001\u7ec4</p> <p>\u8bed\u6cd5\uff1a<code>chown [-R] [\u7528\u6237][:][\u7528\u6237\u7ec4] \u6587\u4ef6\u6216\u6587\u4ef6\u5939</code></p> <p></p>"},{"location":"utils/linux/#_23","title":"\u7528\u6237\u7ec4\u7ba1\u7406","text":""},{"location":"utils/linux/#_24","title":"\u7528\u6237\u7ba1\u7406","text":""},{"location":"utils/linux/#genenv","title":"genenv\u547d\u4ee4","text":"<ul> <li><code>getenv group</code>\uff0c\u67e5\u770b\u7cfb\u7edf\u5168\u90e8\u7684\u7528\u6237\u7ec4</li> </ul> <ul> <li><code>getenv passwd</code>\uff0c\u67e5\u770b\u7cfb\u7edf\u5168\u90e8\u7684\u7528\u6237</li> </ul>"},{"location":"utils/linux/#env","title":"env\u547d\u4ee4","text":"<p>\u67e5\u770b\u7cfb\u7edf\u5168\u90e8\u7684\u73af\u5883\u53d8\u91cf</p> <p>\u8bed\u6cd5\uff1a<code>env</code></p>"},{"location":"utils/mapreduce/","title":"MapReduce","text":""},{"location":"utils/mapreduce/#background","title":"background","text":"<p>\u4ee5\u524d\u6211\u4eec\u8bbe\u8ba1\u6570\u636e\u5e93\u4ee5\u53ca\u5176 transaction \u64cd\u4f5c\u6700\u8feb\u5207\u5730\u8981\u6c42\u662f make sure the transactions safe and consistent\uff0c\u786e\u4fdd\u8fd9\u9879 transaction \u5b89\u5168\u4e00\u81f4\u3002\u9664\u6b64\u4e4b\u5916\u6ee1\u8db3\uff1athe throughput, the reliability, the asset property \u541e\u5410\u91cf\u3001\u53ef\u9760\u6027\u3001\u8d44\u4ea7\u5c5e\u6027\u3002</p> <p>\u4f46\u662f\u5bf9\u4e8e\u8c37\u6b4c\uff0c\u4e00\u4e2a\u505a search\u7684\uff0c\u6700\u8feb\u5207\u7684\u662f\u5feb\u3002\u65e0\u8bba\u662f\u80fd\u9a6c\u4e0a\u8fd4\u56de\u7528\u6237\u641c\u7d22\u7684\u7ed3\u679c\u7684\u5feb\uff0c\u8fd8\u662f break down\u4e4b\u540e\u80fd\u9a6c\u4e0a\u91cd\u542f\u7684\u5feb\uff08the fault tolerance \u5bb9\u9519\uff0c most important\uff09\u3002\u524d\u8005\u9700\u8981\u591a\u53f0\u673a\u5668\u5171\u540c\u534f\u4f5c\uff0c\u540e\u8005\u9700\u8981\u591a\u53f0\u673a\u5668\u72ec\u7acb\u5e76\u8db3\u591f\u5907\u4efd\u3002\u6839\u672c\u5c31\u662f parallel machines\u2192 distributed processing \u3002\u8003\u8651\u5230\u9884\u7b97\uff0c\u4ed6\u4eec\u53d1\u660e\u4e86Map-Reduce\uff0c\u5e76\u4e0d\u9700\u8981\u5f88\u6602\u8d35\u7684\u673a\u5668\uff0c\u800c\u662f\u7528\u975e\u5e38\u591a\u53f0\u6027\u80fd\u4e00\u822c\u5e76 heterogeneous \uff08\u5f02\u6784\u4e0d\u4e00\u6837\u7ed3\u6784\uff09\u673a\u5668\u53bb\u8fd0\u884c\u7ef4\u62a4\u3002</p> <p>Why not Parallel DBMS ?</p> Parallel DBMS we need most important speed the fault tolerance machine Use of 10-100 high-end and preferably\u00a0homogenous\u00a0set of machines  \u5c11\uff0c\u9ad8\u7aef\uff0c\u76f8\u540c\u7ed3\u6784 Cluster of thousands of\u00a0heterogeneous\u00a0low-end servers  \u5927\u91cf\uff0c\u53ef\u4ee5\u4e0d\u4e00\u6837\u7ed3\u6784\uff0c\u4f4e\u7aef transaction Long loading time: good for\u00a0load-once, query many times  \u52a0\u8f7d\u4e0d\u884c directly reads the file and processes the data  Just load the used data, process it, and go  \u75af\u72c2\u9700\u8981\u52a0\u8f7d"},{"location":"utils/mapreduce/#ideas-distributed-processing","title":"Ideas\uff1a Distributed Processing","text":"<p>In a computing cluster, a\u00a0worker\u00a0node is a computer that works on data. Data is split into several parts</p> <p>Details:</p> <ol> <li>incorrect\u00a0results by wrong update</li> </ol> Locking-based Solution MapReduce how to works must hold a lock on data before using Read/Write  \u8c01\u5728\u8bfb\u5199\u5c31\u9501\u4e0a\uff0c\u9632\u6b62\u540c\u65f6\u8bfb\u5199 using its\u00a0local storage,send their local arrays to the central node  \u672c\u5730\u81ea\u5df1\u8bfb\u5199\uff0c\u518d\u7edf\u4e00\u53d1\u5230\u4e2d\u5fc3\u70b9update Disadvantage 1. Complicate the implementation  2. Expensive runtime overhead.\u56e0\u4e3a1\u5728\u8bfb\u5199\u7684\u65f6\u5019\uff0c\u540c\u6837\u4e5f\u8bbf\u95ee\u8fd9\u4e2a\u4e1c\u897f\u76842\u5c31\u4f1a\u88ab\u8febsuspend postpone the corporation to the end of the task and the most of the time they're running in parallel without waiting."},{"location":"utils/mapreduce/#map-reduce","title":"Map-Reduce","text":"<p>Map-Reduce. A simple programming model that applies to many large-scale computing problems</p> <ul> <li>ability to explore large-scale cloud resources</li> <li>inherently designed for batch and high throughput \u4e13\u4e3a\u6279\u5904\u7406\u548c\u9ad8\u541e\u5410\u91cf\u800c\u8bbe\u8ba1</li> </ul>"},{"location":"utils/mapreduce/#messy-details-in-map-reduce-runtime-library","title":"messy details in Map-Reduce runtime library \u6f5c\u5728\u7684\u4e00\u4e9b\u95ee\u9898","text":""},{"location":"utils/mapreduce/#automatic-parallelization","title":"automatic\u00a0parallelization","text":"<p>\u65e2\u7136\u662f\u5e73\u884c\uff0c\u90a3\u4e48\u5c31\u6709\u53ef\u80fd</p> <ol> <li>\u540c\u65f6process\u540c\u4e00\u4efddata\uff0c\u5c31\u4f1a\u91cd\u590d<ul> <li>Do not allow workers to access shared data immediately</li> <li>Do not allow workers to interrupt each other</li> <li>Processing data sequentially to avoid random access</li> </ul> </li> <li>\u5b8c\u6210\u72ec\u7acb\u4efb\u52a1\u540e\uff0c\u600e\u4e48\u5408\u6210\u6210\u679c<ul> <li>Move operations\u00a0near\u00a0the data</li> <li>MapReduce assumes an architecture where processors and storage are co-located</li> <li>When workers finish, perform\u00a0batch updates</li> </ul> </li> </ol>"},{"location":"utils/mapreduce/#load-balancing","title":"load balancing","text":"<p>network and disk transfer optimization\uff1a</p> <p>Cluster of thousands of\u00a0heterogeneous\u00a0low-end servers</p> <ul> <li>Hide system-level details from the application developer</li> <li>Simple and well-defined interfaces between a small number of components</li> <li>When workers finish, perform\u00a0batch updates The reason is that random access will move the drive from one location to the other and take a longer time if the data is sequentially stored, one read will be upload will be will be uploading everything in in in in, in once. So the IO time is very limited.</li> </ul>"},{"location":"utils/mapreduce/#handling-of-machine-failures","title":"handling of machine\u00a0failures","text":"<p>Assume failures are common\u00a7\u00a0Fault-tolerant service must cope with failures</p> <p>without impacting the quality of service</p>"},{"location":"utils/mapreduce/#workflow","title":"Workflow","text":"<p>key-points\uff1a</p> <ol> <li>definition of key-value pairs</li> </ol>"},{"location":"utils/mapreduce/#map","title":"Map","text":"<p>a\u00a0mapping\u00a0that is responsible for</p> <ol> <li>dividing the data</li> <li>transform the original data into key-value pairs <code>input data \u2192 (key, value) pairs</code></li> <li>produces set of intermediate pairs</li> </ol>"},{"location":"utils/mapreduce/#shuffle-sort-and-segment","title":"Shuffle: Sort and Segment","text":"<p>the process of further organizing and delivering the Map output to the Reduce</p> <ol> <li>the output of the Map must be sorted and segmented\u00a0Sorting is done before calling \u201creduce\u201d</li> <li>then passed to the corresponding Reduce</li> </ol>"},{"location":"utils/mapreduce/#reduce","title":"Reduce","text":"<p>a\u00a0merge\u00a0that</p> <ol> <li>processes the values with the same key  <code>(key, value) pairs \u2192 &lt;result&gt;</code> All pairs in the same \u201creduce\u201d call share the same key</li> <li>produces a set of merged output values</li> </ol>"},{"location":"utils/mapreduce/#example","title":"Example","text":""},{"location":"utils/mapreduce/#the-average-gpa-for-the-male-students-in-each-year-from-table-student","title":"the average gpa for the male students in each year from table Student","text":"<p>Input: Given a 10TB table: Student(id, name, year, gpa, gender)</p> <p>*Target:* Finish the SQL Execution</p> <pre><code>SELECT year, AVG(gpa) \nFROM Student\nWHERE gender = \u2018Male\u2019 \nGROUP BY year\n</code></pre> <p>Map:</p> <pre><code>Map(String key, Record value){\n    // key: table name \n    // value: table content\n    for each row in value:\n        if (row.gender = \u2018Male\u2019):\n            emit(row.year, row.gpa) // intermediate key value pairs\n}\n</code></pre> <p>Reduce:</p> <pre><code>Reduce(String key, Iterator values){\n    // key: year\n    // values: a list of gpa\n    sumGPA = 0\n    for each gpa in values:\n        sumGPA += gpa\n    emit(key, sumGPA/sizeof(values))\n}\n</code></pre>"},{"location":"utils/mapreduce/#wordcount","title":"Wordcount","text":"<p>Input: </p> <pre><code>f = open(\"/content/drive/MyDrive/COMP5434-TA/input.txt\", \"r\")\ninput_data = f.readlines()\n</code></pre> <p>Map:</p> <p><code>char.strip()</code> # \u53bb\u9664\u9996\u5c3e\u7a7a\u683c</p> <pre><code>def Map():\n    while has lines left:\n        L = Read a line\n        S = tokenize(L) # S is a list of tokens \n        for each token in S:\n            emit(S[i], 1); # k: word, v:1\n</code></pre> <pre><code>def map(input_data):\n  map_result = []\n  for line in input_data:\n    words = line.split(\" \")\n    for word in words:\n      print(\" \".join([word.strip(), \"1\"]))\n      map_result.append(\" \".join([word.strip(), \"1\"]))\n  return map_result\n\nmap_result = map(input_data)\nprint(map_result)\n</code></pre> <p>Reduce:</p> <pre><code>def Reduce(k: word, value_list):\n    emit(k, len(value_list)) # k:word, v:wordcount\n</code></pre> <pre><code>def reduce(map_result):\n    word_cound_dict = {}\n    for line in map_result:\n        kv = line.split(\" \")\n        word = kv[0].strip()\n        count = int(kv[1].strip())\n        word_cound_dict[word] = word_cound_dict.get(word, 0) + count\n    sorted_word_count = sorted(word_cound_dict.items(), key=itemgetter(0))\n\n    for word, count in sorted_word_count:\n        print(\" \".join([word, str(count)]))\n\nreduce(map_result)\n</code></pre>"},{"location":"utils/mapreduce/#k-means-with-mapreduce","title":"K-Means with MapReduce","text":"<ul> <li>Each Mapper loads a set of data samples, and assign each sample to a nearest centroid</li> <li>Each Mapper needs to keep a copy of centroids</li> </ul>"},{"location":"utils/mapreduce/#find-the-most-pleasant-date","title":"Find the most pleasant date","text":"<pre><code>def Map():\n    for each turple(City, Data, Time, Temperature) in the table:\n        Temperature = Temperature,strip(\"C\")\n        value = Date + \"-\" + Temperature\n        emit(City, value)  # k:city, v:date+temperature\n</code></pre> Mapper1 Mapper2 output Beijing, 2020/10/1-26 Shanghai, 2020/10/3-30 Beijing, 2020/10/2-36 Shanghai, 2020/10/4-29 Beijing, 2020/10/3-27 Hongkong, 2020/10/1-33 Beijing, 2020/10/4-18 Hongkong, 2020/10/2-31 Shanghai, 2020/10/1-36 Hongkong, 2020/10/3-40 Shanghai, 2020/10/2-34 Hongkong, 2020/10/4-27 <pre><code>def Rdeuce(k:city, value_list):\n    tem_abs = 100\n    date_pleasant = 0\n    for each value in value_list:\n        date, temperature = value.strp(\"-\")\n        if abs(temperature, 25) &lt; tem_abs:\n            date_pleasant = date\n            tem_abs = abs(temperature, 25)\n    emit(k, date_pleasant) # k:city, v:date_pleasant \n</code></pre> Reducer1 Reducer2 Reducer3 input Beijing, 2020/10/1-26 Shanghai, 2020/10/1-36 Hongkong, 2020/10/1-33 Beijing, 2020/10/2-36 Shanghai, 2020/10/2-34 Hongkong, 2020/10/2-31 Beijing, 2020/10/3-27 Shanghai, 2020/10/3-30 Hongkong, 2020/10/3-40 Beijing, 2020/10/4-18 Shanghai, 2020/10/4-29 Hongkong, 2020/10/4-27 output Beijing, 2020/10/1 Shanghai, 2020/10/4 Hongkong, 2020/10/4 <ul> <li>Map and Reduce are the main operations: simple code</li> <li>\u00a7\u00a0All Map should be completed before Reduce starts</li> <li>\u00a7\u00a0Number of map tasks and reduce tasks are configurable</li> <li>\u00a7\u00a0Operations are provisioned near the data</li> <li>\u00a7\u00a0Commodity hardware and storage</li> <li>\u00a7\u00a0Runtime takes care of splitting and moving data</li> <li>\u00a7\u00a0Special distributed file system, e.g., Hadoop Distributed File System and Hadoop Runtime</li> </ul>"},{"location":"utils/other/","title":"other","text":""},{"location":"utils/other/#_1","title":"\u8ba1\u7b97\u673a\u7f51\u7edc","text":""},{"location":"utils/other/#_2","title":"\u6570\u636e\u52a0\u5bc6\u89e3\u5bc6\u4f53\u5236","text":""},{"location":"utils/other/#_3","title":"\u5bf9\u79f0\u5bc6\u94a5\u5bc6\u7801\u4f53\u5236","text":"<p>\u52a0\u5bc6 Encrypt\u3001\u89e3\u5bc6 Decrypt \u90fd\u7528\u540c\u4e00\u628a\u94a5\u5319</p> <ul> <li>DES \u6570\u636e\u52a0\u5bc6\u6807\u51c6</li> </ul>"},{"location":"utils/other/#_4","title":"\u4e0d\u5bf9\u79f0\u5bc6\u94a5","text":"<ul> <li>\u52a0\u5bc6\u5bc6\u94a5\u548c\u89e3\u5bc6\u5bc6\u94a5\u4e0d\u662f\u540c\u4e00\u628a</li> <li>\u7531 given public key \u5728\u8ba1\u7b97\u4e0a\u63a8\u65ad private key \u4e0d\u53ef\u80fd</li> <li>All public key\u3001 encrypt algorithm\uff0cdecrypt algorithm are open</li> </ul>"},{"location":"utils/other/#rsa","title":"RSA","text":"<ul> <li> <p>keys</p> <ul> <li><code>id_rsa</code>: private key \uff0c\u9700\u8981\u4fdd\u5bc6</li> <li><code>id_rsa.pub</code>: public key\uff0c \u516c\u5f00\u4fe1\u606f</li> </ul> </li> <li> <p>\u5177\u6709\u4fdd\u5bc6\u7684\u6570\u5b57\u7b7e\u540d (know1.jpg)</p> </li> </ul>"},{"location":"utils/other/#docker","title":"Docker","text":"<p>==\u4f20\u7edf\u865a\u62df\u673a\u6280\u672f==\u662f\u865a\u62df\u51fa\u4e00\u5957\u786c\u4ef6\u540e\uff0c\u5728\u5176\u4e0a\u8fd0\u884c\u4e00\u4e2a\u5b8c\u6574\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5728\u8be5\u7cfb\u7edf\u4e0a\u518d\u8fd0\u884c\u6240\u9700\u5e94\u7528\u8fdb\u7a0b\uff1b ==Container \u5bb9\u5668==\u5185\u7684\u5e94\u7528\u8fdb\u7a0b\u76f4\u63a5\u8fd0\u884c\u4e8e\u5bbf\u4e3b\u7684\u5185\u6838\uff0c\u5bb9\u5668\u5185\u6ca1\u6709\u81ea\u5df1\u7684\u5185\u6838\uff0c\u800c\u4e14\u4e5f\u6ca1\u6709\u8fdb\u884c\u786c\u4ef6\u865a\u62df\u3002\u56e0\u6b64\u5bb9\u5668\u8981\u6bd4\u4f20\u7edf\u865a\u62df\u673a\u66f4\u4e3a\u8f7b\u4fbf\u3002</p> <p>Ubuntu\u00a0is a Linux distribution based on Debian and composed mostly of free and open-source software.</p>"},{"location":"utils/other/#concept","title":"Concept","text":"<p>images, \u955c\u50cf \u5c31\u662f\u539f\u59cb\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u7528\u6237\u7a7a\u95f4\u652f\u6301 container \u5bb9\u5668 \u955c\u50cf\u8fd0\u884c\u7684\u5b9e\u4f53 repository \u4ed3\u5e93 \u5c31\u662f\u50a8\u5b58\u5206\u53d1\u955c\u50cf</p>"},{"location":"utils/other/#images","title":"images \u955c\u50cf","text":"<p>==\u64cd\u4f5c\u7cfb\u7edf==\u5206\u4e3a\u00a0\u5185\u6838\u548c\u00a0\u7528\u6237\u7a7a\u95f4\u3002\u5bf9\u4e8e\u00a0<code>Linux</code> \u800c\u8a00\uff0c\u5185\u6838\u542f\u52a8\u540e\uff0c\u4f1a\u6302\u8f7d\u00a0<code>root</code>\u6587\u4ef6\u7cfb\u7edf\u4e3a\u5176\u63d0\u4f9b\u7528\u6237\u7a7a\u95f4\u652f\u6301\u76f8\u5f53\u4e8e\u662f\u4e00\u4e2a\u00a0root \u6587\u4ef6\u7cfb\u7edf\u3002</p> <p>Docker \u955c\u50cf \u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u9664\u4e86\u63d0\u4f9b\u5bb9\u5668\u8fd0\u884c\u65f6\u6240\u9700\u7684\u7a0b\u5e8f\u3001\u5e93\u3001\u8d44\u6e90\u3001\u914d\u7f6e\u7b49\u6587\u4ef6\u5916\uff0c\u8fd8\u5305\u542b\u4e86\u4e00\u4e9b\u4e3a\u8fd0\u884c\u65f6\u51c6\u5907\u7684\u4e00\u4e9b\u914d\u7f6e\u53c2\u6570\uff08\u5982\u533f\u540d\u5377\u3001\u73af\u5883\u53d8\u91cf\u3001\u7528\u6237\u7b49\uff09\u3002\u955c\u50cf\u00a0\u4e0d\u5305\u542b \u4efb\u4f55\u52a8\u6001\u6570\u636e\uff0c\u5176\u5185\u5bb9\u5728\u6784\u5efa\u4e4b\u540e\u4e5f\u4e0d\u4f1a\u88ab\u6539\u53d8\u3002</p> <ul> <li> <p><code>docker images</code>  \u67e5\u770b\u6240\u6709\u7684 images</p> </li> <li> <p><code>docker pull &lt;images(repository)_name&gt;</code> eg: <code>docker pull ubuntu</code></p> </li> </ul>"},{"location":"utils/other/#container","title":"Container","text":"<p>\u6bcf\u4e00\u4e2a\u5bb9\u5668\u8fd0\u884c\u65f6\uff0c\u662f\u4ee5\u955c\u50cf\u4e3a\u57fa\u7840\u5c42\uff0c\u5728\u5176\u4e0a\u521b\u5efa\u4e00\u4e2a\u5f53\u524d\u5bb9\u5668\u7684\u5b58\u50a8\u5c42</p> <p>\u955c\u50cf\u662f\u9759\u6001\u7684\u5b9a\u4e49\uff0c\u5bb9\u5668\u662f\u955c\u50cf\u8fd0\u884c\u65f6\u7684\u5b9e\u4f53\u3002\u5bb9\u5668\u53ef\u4ee5\u88ab\u521b\u5efa\u3001\u542f\u52a8\u3001\u505c\u6b62\u3001\u5220\u9664\u3001\u6682\u505c</p>"},{"location":"utils/other/#repository","title":"repository","text":"<p>\u4ee5\u00a0Ubuntu \u955c\u50cf\u4e3a\u4f8b\uff0cubuntu\u662f\u4ed3\u5e93\u7684\u540d\u5b57\uff0c\u5176\u5185\u5305\u542b\u6709\u4e0d\u540c\u7684\u7248\u672c\u6807\u7b7e\uff0c\u5982\uff0c16.0,\u00a018.04\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u00a0ubuntu:16.04\uff0c\u6216\u8005\u00a0ubuntu:18.04\u6765\u5177\u4f53\u6307\u5b9a\u6240\u9700\u54ea\u4e2a\u7248\u672c\u7684\u955c\u50cf\u3002\u5982\u679c\u5ffd\u7565\u4e86\u6807\u7b7e\uff0c\u6bd4\u5982\u00a0ubuntu\uff0c\u90a3\u5c06\u89c6\u4e3a\u00a0ubuntu:latest\u3002</p> <p>!!! p \u4f7f\u7528images(repository)\u4e0a\u7684container</p> <ul> <li><code>docker run --name &lt;container_name&gt; -it &lt;images(repository)_name&gt; /bin/bash</code> \u521b\u5efaimage\u4e0a\u7684container eg: <code>docker run --name my_ubuntu -it ubuntu /bin/bash</code> \ud83d\udca1 \u6bcf\u4e00\u6b21run\u90fd\u662fcreate \u5b8c\u5168\u65b0\u7684container</li> <li><code>exit</code> \u9000\u51facontainer</li> <li><code>docker ps -a</code>  \u67e5\u770b\u6240\u6709\u7684containers</li> <li><code>docker start &lt;container_id&gt; or &lt;container_name&gt;</code> \u6253\u5f00restart</li> <li><code>docker attach &lt;container_id&gt; or &lt;container_name&gt;</code></li> </ul>"},{"location":"utils/other/#_5","title":"\u5b57\u7b26 \u95ee\u9898","text":"<p>\u5b57\u7b26\u7684\u6807\u8bc6\u901a\u5e38\u662f\u6307\u5b57\u7b26\u7684\u7f16\u7801\u65b9\u5f0f\uff0c\u7528\u4e8e\u5728\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\u8868\u793a\u548c\u5b58\u50a8\u5b57\u7b26\u3002\u6700\u5e38\u89c1\u7684\u5b57\u7b26\u7f16\u7801\u6807\u51c6\u662fASCII\uff08American Standard Code for Information Interchange\uff0c\u7f8e\u56fd\u4fe1\u606f\u4ea4\u6362\u6807\u51c6\u4ee3\u7801\uff09\uff0c\u5b83\u4f7f\u75287\u4f4d\u62168\u4f4d\u4e8c\u8fdb\u5236\u6570\u6765\u8868\u793a\u5b57\u7b26\uff0c\u5305\u62ec\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u6807\u70b9\u7b26\u53f7\u548c\u63a7\u5236\u5b57\u7b26\u3002</p> <p>\u9664\u4e86ASCII\u4e4b\u5916\uff0c\u8fd8\u6709\u5176\u4ed6\u7684\u5b57\u7b26\u7f16\u7801\u6807\u51c6\uff0c\u4f8b\u5982Unicode\uff08\u7edf\u4e00\u7801\u3001\u56fd\u9645\u7801\uff09\uff0c\u5b83\u662f\u4e00\u79cd\u7528\u4e8e\u8868\u793a\u4e16\u754c\u4e0a\u51e0\u4e4e\u6240\u6709\u5b57\u7b26\u7684\u5b57\u7b26\u96c6\u6807\u51c6\u3002Unicode\u4f7f\u7528\u4e0d\u540c\u7684\u7f16\u7801\u65b9\u6848\uff0c\u5982UTF-8\u3001UTF-16\u548cUTF-32\uff0c\u5176\u4e2dUTF-8\u662f\u6700\u5e38\u7528\u7684\u7f16\u7801\u65b9\u6848\uff0c\u53ef\u4ee5\u7528\u6765\u8868\u793a\u51e0\u4e4e\u6240\u6709\u7684\u5b57\u7b26\u3002</p> <p>\u5b57\u7b26\u7684\u5177\u4f53\u8868\u8ff0\u662f\u6307\u5b57\u7b26\u5728\u5177\u4f53\u7f16\u7801\u6807\u51c6\u4e0b\u7684\u8868\u793a\u65b9\u5f0f\u3002\u4f8b\u5982\uff0c\u5728ASCII\u7f16\u7801\u4e2d\uff0c\u5b57\u7b26'A'\u7684\u6807\u8bc6\u662f65\uff0c\u5b57\u7b26'a'\u7684\u6807\u8bc6\u662f97\u3002\u5728UTF-8\u7f16\u7801\u4e2d\uff0c\u5b57\u7b26'A'\u7684\u6807\u8bc6\u662f0x41\uff0c\u5b57\u7b26'a'\u7684\u6807\u8bc6\u662f0x61\u3002\u5177\u4f53\u7684\u8868\u8ff0\u65b9\u5f0f\u53d6\u51b3\u4e8e\u6240\u4f7f\u7528\u7684\u5b57\u7b26\u7f16\u7801\u6807\u51c6\u3002</p> <p>\u5b57\u7b26\u96c6\u6807\u51c6\uff0c\u5b9a\u4e49\u4e86\u5b57\u7b26\u96c6\uff0c\u8868\u793a\u4e16\u754c\u4e0a\u51e0\u4e4e\u6240\u6709\u7684\u5b57\u7b26\uff0c\u5b9a\u4e49\u4e86\u6bcf\u4e2a\u5b57\u7b26\u7684\u552f\u4e00\u7f16\u7801\u70b9\u3002 \u5b57\u7b26\u7f16\u7801\u65b9\u6848\uff0c\u4e00\u822c\u57fa\u4e8e\u4e00\u4e2a\u5b57\u7b26\u96c6\u6807\u51c6\uff0c\u5bf9\u5b57\u7b26\u8fdb\u884c\u7f16\u7801\uff0c\u4f7f\u5f97\u5728\u5b58\u50a8\u548c\u4f20\u8f93\u6587\u672c\u6570\u636e\u65f6\u8282\u7701\u7a7a\u95f4\u548c\u5e26\u5bbd\u3002\u4e5f\u5c31\u662f\u5c06\u5185\u5b58\u5b58\u5165\u786c\u76d8\u7684\u683c\u5f0f</p> <p>en + zh =\u300b unicode =\u300bgbk en + jp =\u300b unicode =\u300bshift-jis \u4e07\u56fd\u5b57\u7b26 =\u300b unicode =\u300butf-8</p> <p>!!! p \u5185\u5b58\u56fa\u5b9a\u4f7f\u7528 unicode \u5b8c\u6574, \u6211\u4eec\u6539\u53d8\u7684\u662f\u4ece\u5185\u5b58\u5b58\u5165\u786c\u76d8\u7684\u683c\u5f0f     linux \u9ed8\u8ba4 utf-8\uff0c windows \u9ed8\u8ba4 gbk</p> <pre><code>!!! danger \u6587\u672c\u5b58\u53d6\u4e71\u7801\u95ee\u9898\n    - \u5b58\u4e71\u4e86\uff0c\u7f16\u7801\u683c\u5f0f\u5e94\u8be5\u8bbe\u7f6e\u6210\u652f\u6301\u6587\u672c\u5185\u5b57\u7b26\u4e32\u7684\u683c\u5f0f\u3002\u65e5\u6587\u5c31\u4e0d\u8981\u7528 &lt;kbd&gt;gbk&lt;/kbd&gt;\n    - \u53d6\u4e71\u4e86\uff0c\u7f16\u7801\u683c\u5f0f\u5e94\u8be5\u5bf9\u5e94\u8be5\u6587\u4ef6\u5b58\u5165\u786c\u76d8\u7684\u683c\u5f0f\n</code></pre> <p>==Unicode==\u662f\u4e00\u79cd\u5b57\u7b26\u96c6\u6807\u51c6\u3002Unicode\uff0c\u901a\u5e38\u7528\u5341\u516d\u8fdb\u5236\u6570\u8868\u793a\u3002\u4f46\u4e5f\u53ef\u4ee5\u7528\u4e0d\u540c\u7684\u8868\u793a\u5f62\u5f0f\u8868\u793a\uff0c\u5982\u5341\u8fdb\u5236</p> <p>'A' = \u5341\u516d\u8fdb\u5236 U+0041 = \u5341\u8fdb\u5236 65</p> <p>\u57fa\u4e8e Unicode \u7684, * \uff1a\u8868\u793a\u4e0d\u652f\u6301</p> \u5b57\u7b26 Unicode \u7801\u4f4d ASCII gbk shift-jis utf-8 A U+0041 41 41 41 41 \u554a 21834 * b'\\xb0\\xa1' * b'\\xe5\\x95\\x8a' <ul> <li> <p>UTF-8 Unicode Transformation Format-8 \u662f\u4e00\u79cd\u57fa\u4e8eUnicode\u7684\u5b57\u7b26\u7f16\u7801\u65b9\u6848\u3002\u5b83\u4f7f\u7528\u53ef\u53d8\u957f\u5ea6\u7684\u7f16\u7801\u65b9\u5f0f\uff0c\u53ef\u4ee5\u8868\u793aUnicode\u5b57\u7b26\u96c6\u4e2d\u7684\u6240\u6709\u5b57\u7b26\u3002 \u7279\u70b9\uff1a\u517c\u5bb9ASCII\u7f16\u7801\uff0c\u5373ASCII\u5b57\u7b26\u7684UTF-8\u7f16\u7801\u4e0eASCII\u7f16\u7801\u5b8c\u5168\u4e00\u81f4\uff0c\u4e0d\u4f1a\u5f15\u5165\u989d\u5916\u7684\u5b57\u8282\u3002\u5bf9\u4e8e\u975eASCII\u5b57\u7b26\uff0cUTF-8\u4f7f\u7528\u591a\u5b57\u8282\u8868\u793a\uff0c\u6839\u636e\u5b57\u7b26\u7684Unicode\u7f16\u7801\u70b9\u8303\u56f4\uff0c\u5c06\u5b57\u7b26\u7f16\u7801\u4e3a1\u52304\u4e2a\u5b57\u8282\u3002 \u4f18\u52bf\uff1a\u5b83\u65e2\u53ef\u4ee5\u8868\u793aUnicode\u5b57\u7b26\u96c6\u4e2d\u7684\u6240\u6709\u5b57\u7b26\uff0c\u53c8\u80fd\u591f\u9ad8\u6548\u5730\u5904\u7406ASCII\u5b57\u7b26\uff0c\u4f7f\u5f97\u5728\u5b58\u50a8\u548c\u4f20\u8f93\u6587\u672c\u6570\u636e\u65f6\u8282\u7701\u7a7a\u95f4\u548c\u5e26\u5bbd\u3002\u56e0\u6b64\uff0cUTF-8\u6210\u4e3a\u4e86\u4e92\u8054\u7f51\u4e0a\u4f7f\u7528\u6700\u5e7f\u6cdb\u7684\u5b57\u7b26\u7f16\u7801\u65b9\u6848\u3002</p> <p>!!! p \u603b\u7ed3: UTF-8 \u662f\u57fa\u4e8e Unicode \u7684\u4e00\u79cd\u5b57\u7b26\u7f16\u7801\u65b9\u6848\uff0c\u7528\u4e8e\u8868\u793a Unicode \u5b57\u7b26\u96c6\u4e2d\u7684\u5b57\u7b26\uff0c\u5e76\u4e14\u517c\u5bb9 ASCII \u7f16\u7801\u3002 - gbk</p> </li> </ul> <p>'A \u88ab\u7f16\u7801\u6210\u4e00\u4e2a\u5b57\u8282\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u663e\u793a b'A' == b'\\x41'.</p> <pre><code>graph LR\nA[\u5b57\u7b26 character &lt;br&gt;A&lt;br&gt;\u554a]\nsubgraph \u5b57\u7b26\u7684\u7801\u4f4d:\u5341\u8fdb\u5236\nB[Unicode &lt;br&gt;U+0041=65&lt;br&gt;21834]\nC[ASCII ]\nend\nA -- ord--&gt; \u5b57\u7b26\u7684\u7801\u4f4d:\u5341\u8fdb\u5236\n\u5b57\u7b26\u7684\u7801\u4f4d:\u5341\u8fdb\u5236 -- chr--&gt; A\nsubgraph \u5b57\u7b26\u7684\u5177\u4f53\u8868\u8ff0:\u5b57\u8282bytes\nD[UTF-8&lt;br&gt;b'\\x41'=b'A'&lt;br&gt;b'\\xe5\\x95\\x8a']\nF[gbk&lt;br&gt;b'\\x41'=b'A'&lt;br&gt;b'\\xb0\\xa1']\nE[ASCII&lt;br&gt;&lt;br&gt;\u4e0d\u652f\u6301]\nend\n\u5b57\u7b26\u7684\u5177\u4f53\u8868\u8ff0:\u5b57\u8282bytes --decode--&gt; \u5b57\u7b26\u7684\u7801\u4f4d:\u5341\u8fdb\u5236\n\u5b57\u7b26\u7684\u7801\u4f4d:\u5341\u8fdb\u5236 --encode--&gt; \u5b57\u7b26\u7684\u5177\u4f53\u8868\u8ff0:\u5b57\u8282bytes </code></pre> <p>```python{highlight=[1,7,9,11]} 'A'.encode('utf8')</p>"},{"location":"utils/other/#ba","title":"&gt;&gt;&gt; b'A'","text":"<p>b'A' == b'\\x41'</p>"},{"location":"utils/other/#true","title":"&gt;&gt;&gt; True","text":"<p>A' == b'A'</p>"},{"location":"utils/other/#false","title":"&gt;&gt;&gt; False","text":"<p>b'\\x41'.decode('utf8')</p>"},{"location":"utils/other/#a","title":"&gt;&gt;&gt; 'A'","text":"<p>unicode_A = ord('A')</p>"},{"location":"utils/other/#unicode_a65","title":"&gt;&gt;&gt; unicode_A=65","text":"<p>chr(unicode_A)</p>"},{"location":"utils/other/#a_1","title":"&gt;&gt;&gt; 'A'","text":"<p>```</p>"},{"location":"utils/other/#clumsy","title":"clumsy","text":"<p>official \u5f31\u7f51\u6a21\u62df\u5de5\u5177Clumsy\u4f7f\u7528\u6307\u5357 add Bandwidth version</p> <p>1. \u91cd\u73b0\u7f51\u7edc\u5f02\u5e38\u9020\u6210\u7684\u7a0b\u5e8f\u9519\u8bef2. \u8bc4\u4f30\u5e94\u7528\u7a0b\u5e8f\u5728\u4e0d\u826f\u7f51\u7edc\u72b6\u51b5\u4e0b\u7684\u8868\u73b0</p> <p>\u5f53clumsy\u88ab\u6fc0\u6d3b\u65f6\uff0c\u53ea\u6709\u7b26\u5408\u8fd9\u4e9b\u6807\u51c6\u7684\u7f51\u7edc\u6570\u636e\u4f1a\u88ab\u8fdb\u884c\u5904\u7406\uff0c\u800c\u4f60\u4e0d\u9700\u8981\u7684\u6570\u636e\u4ecd\u7136\u4f1a\u7531\u7cfb\u7edf\u6b63\u5e38\u4f20\u8f93\u3002</p>"},{"location":"utils/other/#_6","title":"\u4f7f\u7528","text":"<ol> <li>\u81ea\u5b9a\u4e49filter\uff0c\u6b63\u786e\u7684 WinDivert \u89c4\u5219</li> <li>\u5982\u679c\u6709\u9884\u8bbe\u7684filter \u53ef\u4ee5\u81ea\u5b9a\u4e49 see: #self-define-presets</li> <li>Start\u3002</li> <li>\u9009\u62e9Fuctions\uff0c\u5bf9\u5e94\u6307\u6807\u524d\u9762\u51fa\u73b0\u7eff\u70b9\uff0c\u8868\u793a\u8be5\u9879\u62e6\u622a\u751f\u6548</li> <li>\u4fee\u6539params </li> <li>\u901a\u8fc7 ping \u7f51\u7edc\uff0c\u67e5\u770b\u5de5\u5177\u6a21\u62df\u7f51\u7edc\u662f\u5426\u751f\u6548 </li> </ol>"},{"location":"utils/other/#self-define-presets","title":"Self-define presets","text":"<p>\u8f6f\u4ef6\u6839\u76ee\u5f55\u4e0b\u7684config.txt\u4ee5\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\u586b\u5199\u81ea\u5df1\u7684\u914d\u7f6e</p> <p>\u6dfb\u52a0\u4e00\u4e2a \u8d77\u59cb\u548c\u76ee\u6807\u7aef\u53e3\u4e3a10003\uff0c10004\u7684udp\u8fde\u63a5 \u914d\u7f6e</p> <p>``` title=\"config.txt\"</p>"},{"location":"utils/other/#you-can-add-your-usual-filters-here-for-your-own-use","title":"you can add your usual filters here for your own use:","text":""},{"location":"utils/other/#http-requests-onlydata-transmit-on-other-ports-outbound-and-tcpdstport-80","title":"http requests ONLY(data transmit on other ports): outbound and tcp.DstPort == 80","text":"<p>NKGMoba: udp and (udp.DstPort == 10003 or udp.DstPort == 10004)          or (udp.SrcPort == 10003 or udp.SrcPort == 10004)  ```</p>"},{"location":"utils/other/#functions","title":"Functions","text":"<ul> <li>Lag, \u5ef6\u8fdf\uff0c\u628a\u6570\u636e\u5305\u7f13\u5b58\u4e00\u6bb5\u65f6\u95f4\u540e\u518d\u53d1\u51fa\uff0c\u8fd9\u6837\u80fd\u591f\u6a21\u62df\u7f51\u7edc\u5ef6\u8fdf\u7684\u72b6\u51b5\u3002</li> <li>Drop, \u6389\u5305\uff0c\u968f\u673a\u4e22\u5f03\u4e00\u4e9b\u6570\u636e\u3002</li> <li>Throttle, \u8282\u6d41\uff0c\u628a\u4e00\u5c0f\u6bb5\u65f6\u95f4\u5185\u7684\u6570\u636e\u62e6\u622a\u4e0b\u6765\u540e\u518d\u5728\u4e4b\u540e\u7684\u540c\u4e00\u65f6\u95f4\u4e00\u540c\u53d1\u51fa\u53bb\u3002</li> <li>Duplicate, \u91cd\u53d1\uff0c\u968f\u673a\u590d\u5236\u4e00\u4e9b\u6570\u636e\u5e76\u4e0e\u5176\u672c\u8eab\u4e00\u540c\u53d1\u9001\u3002</li> <li>Out of order, \u4e71\u5e8f\uff0c\u6253\u4e71\u6570\u636e\u5305\u53d1\u9001\u7684\u987a\u5e8f\u3002</li> <li>Tamper, \u7be1\u6539\uff0c\u968f\u673a\u4fee\u6539\u5c0f\u90e8\u5206\u7684\u5305\u88f9\u5185\u5bb9\u3002</li> <li>Bandwidth, \uff0c\u5c0f\u5e26\u5bbd     \u7edf\u8ba1\u5305\u5927\u5c0f\u65f6\u7528\u7684\u662f\u6574\u4e2a IP \u5305\u7684\u5927\u5c0f\uff08\u5305\u62ec\u5404\u79cd\u534f\u8bae\u5934\uff09\uff0c\u6240\u4ee5\u4f60\u8bbe\u7f6e\u6210 500 KB/s \u7684\u8bdd\uff0c\u5b9e\u9645\u6309 tcp \u8ba1\u7b97\u7684\u4e0b\u8f7d\u901f\u7387\u4f1a\u7565\u5c0f\u3002</li> </ul> <p>params</p> <ul> <li>Inbound/Outbound: \u662f\u5426\u5904\u7406\u8f93\u5165/\u8f93\u51fa\u6570\u636e\u5305\u3002\u8fd9\u91cc\u5728 filter \u7684\u63a7\u5236\u4e4b\u5916\u989d\u5916\u63d0\u4f9b\u4e00\u4e2a\u9009\u62e9\u7684\u673a\u4f1a\uff0c\u5e76\u4e14\u4e5f\u53ef\u4ee5\u5728\u5b9e\u65f6\u751f\u6548\u3002</li> <li>Chance: \u529f\u80fd\u751f\u6548\u7684\u6982\u7387\u3002\u663e\u7136\u4f60\u9700\u8981\u628a\u5b83\u4eec\u8bbe\u7f6e\u5728\u4e00\u4e2a\u5408\u7406\u7684\u8303\u56f4\u5185\u624d\u4e0d\u4f1a\u8ba9\u7f51\u7edc\u5728\u53ef\u4ee5\u63a5\u53d7\u7684\u8303\u56f4\u5185\u52a3\u5316\u3002</li> </ul> <p>Example</p>"},{"location":"utils/vscode/","title":"Vscode","text":""},{"location":"utils/vscode/#remote-development-extention","title":"Remote Development [extention]","text":"<p>\u8fdc\u7a0b\u4fee\u6539\u4e0e\u8c03\u8bd5\u670d\u52a1\u5668\u4e0a\u7684\u4ee3\u7801\uff0c\u540c\u65f6\u5177\u5907\u4ee3\u7801\u9ad8\u4eae\u4e0e\u8865\u5168\u529f\u80fd\uff0c\u5c31\u548c\u5728\u672c\u5730\u4f7f\u7528VScode\u4e00\u6837</p> <ol> <li>\u8fdc\u7a0b\u4e3b\u673a\u5b89\u88c5ssh-server(\u96e8\u5973\u65e0\u74dc)</li> <li>\u672c\u5730\u4e3b\u673a\u5b89\u88c5ssh-client</li> <li> <p>check \u6709\u6ca1\u6709 cmd <code>ssh</code></p> </li> <li> <p>vscode \u5b89\u88c5Remote Development \u63d2\u4ef6</p> </li> <li>extensions \u91cc download</li> <li>\u8fde\u63a5\u4e3b\u673a <code>ctrl+shift+p</code> search <code>Remote-SSH connect to Host</code><ul> <li><code>ssh &lt;\u7528\u6237\u540d&gt;@&lt;hostname&gt;</code>     \u5728 SSH \u8fde\u63a5\u65f6\uff0c\u683c\u5f0f\u901a\u5e38\u4e3a ssh &lt;\u7528\u6237\u540d&gt;@\uff0c\u5176\u4e2d &lt;\u7528\u6237\u540d&gt; \u8868\u793a\u4f60\u5728\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u767b\u5f55\u65f6\u4f7f\u7528\u7684\u7528\u6237\u540d\uff0c \u8868\u793a\u8fdc\u7a0b\u4e3b\u673a\u7684\u540d\u79f0\u6216 IP \u5730\u5740 <li>\u4fee\u6539\u8bbe\u5b9a <code>ctrl+shift+p</code> search <code>Remote-SSH Open SSH Setting</code><ul> <li>\u2714  <code>Show Login Terminal</code> \u663e\u793a\u767b\u5f55\u63a7\u5236\u53f0\u9009\u9879\u3002</li> <li>\u274c <code>Use Local Server</code>\uff0c\u4e0d\u4f7f\u7528\u672c\u5730\u670d\u52a1\u5668\uff0c\u56e0\u4e3a\u8fdc\u7a0b\u5f00\u53d1\uff0c\u800c\u975e\u672c\u5730\u5f00\u53d1\uff0c\u5982\u679c\u4e0d\u53d6\u6d88\u8fdc\u7a0b\u5f00\u53d1\u914d\u7f6e\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002</li> </ul> </li> <li> <p>\u514d\u5bc6\u8fde\u63a5 WIN10</p> <ul> <li> <p>\u4fee\u6539\u81ea\u5df1\u8bbe\u5b9a\uff0c\u544a\u8bc9\u5b83 private key \u7684\u4f4d\u7f6e <code>ctrl+shift+p</code> search <code>Remote-SSH Open SSH configuration File</code>, \u53c2\u7167ssh\u8fde\u63a5\u4e3b\u673a\u7684\u547d\u4ee4 <code>ssh &lt;\u7528\u6237\u540d&gt;@&lt;hostname&gt;</code></p> <pre><code>Host &lt;\u522b\u540d, \u4f60\u4e3a\u8fdc\u7a0b\u4e3b\u673a\u6307\u5b9a\u7684\u552f\u4e00\u522b\u540d&gt; \n    HostName &lt;hostname\uff1aIP \u5730\u5740\u6216\u57df\u540d&gt;\n    User &lt;\u7528\u6237\u540d\uff0c\u5728\u5de5\u4f5c\u7ad9\u4e0a\u7684\u7528\u6237\u540d&gt;\n    Port &lt;\u7aef\u53e3\u53f7\uff1a \u4e00\u822c\u662f22 openSSL&gt; \n    IdentityFile &lt;\u79c1\u94a5\u6587\u4ef6\u8def\u5f84\uff0c\u81ea\u5df1\u5728\u7ec8\u7aef\u5148\u914d\u7f6e\u5bc6\u94a5&gt;\n\n# e.g.\nHost company\n    HostName company.local\n    Port 22\n    IdentityFile C:\\user\\.ssh\\id_rsa\n</code></pre> <ul> <li>\u4fee\u6539\u8fdc\u7a0b\u4e3b\u673a\uff0c \u628a\u81ea\u5df1\u7684 public key \u53d1\u7ed9\u5b83\uff0c\u5728\u8fdc\u7a0b\u673a\u5668\u7528\u516c\u94a5\u751f\u6210authorized_keys</li> <li>\u4fee\u6539 <code>/home/user/.ssh/authorized_keys</code>, \u5982\u679c\u6ca1\u6709\u5c31\u521b\u5efa<ul> <li>\u521b\u5efa <code>mkdir \"~/.ssh\" &amp;&amp; touch ~/.ssh/authorized_keys</code></li> <li>\u4fee\u6539 <code>vim authorized_keys</code></li> <li>\u6253\u5f00\u81ea\u5df1\u7684 public key (\u4e00\u822c\u662f <code>C:\\user\\.ssh\\id_rsa.pub</code>)\u590d\u5236\u7c98\u8d34\u8fdb\u53bb\u3002</li> <li>\u867d\u7136\u5f88\u957f\uff0c\u4f46\u516c\u94a5\u6587\u4ef6\u7684\u6240\u6709\u5185\u5bb9\u53ea\u6709\u4e00\u884c</li> <li>\u4eba\u4eec\u53ef\u4ee5\u5c06\u4efb\u610f\u6570\u91cf\u7684\u516c\u94a5\u6dfb\u52a0\u5230 autorized_keys \u6587\u4ef6\u4e2d\u3002\u56e0\u6b64\u8be5\u6587\u4ef6\u5305\u542b\u591a\u884c\uff0c\u6bcf\u4e2a\u516c\u94a5\u4e00\u884c\u3002\u8fd9\u4f7f\u5f97\u591a\u53f0\u673a\u5668\u5728\u5de5\u4f5c\u7ad9\u4e0a\u6ce8\u518c\u3002</li> </ul> </li> <li>\u5982\u679c\u8be2\u95ee\u5bc6\u7801\uff0c\u90a3\u5c31\u662f\u6ca1\u914d\u7f6e\u597d\uff0c\u91cd\u65b0\u68c0\u67e5\u4e00\u4e0b</li> </ul> </li> </ul> </li> <li> <p>Reference</p> <ul> <li>VScode Remote \u8fdc\u7a0b\u5f00\u53d1\u4e0e\u8c03\u8bd5</li> <li>VScode\u8fde\u63a5\u670d\u52a1\u5668</li> <li>Using Conda Environment Remotely with Visual Studio Code</li> <li>Remote Access to the Workstation</li> </ul> </li>"},{"location":"utils/vscode/#_1","title":"\u914d\u7f6e","text":"<ul> <li>\u63d2\u4ef6\u914d\u7f6e</li> </ul> <p>\u767b\u9646\u4e0a\u8fdc\u7a0b\u670d\u52a1\u5668\u540e\uff0c\u63d2\u4ef6\u680f\u5c31\u53d8\u6210\u4e86\u672c\u5730\u548c\u8fdc\u7a0b\u4e24\u4e2a\u90e8\u5206\u3002\u767b\u9646\u4e0a\u540e\u8fdc\u7a0b\u81ea\u5df1\u4e5f\u4f1a\u81ea\u52a8\u5b89\u88c5\u63d2\u4ef6\uff0c\u6700\u540e\u53ef\u4ee5\u624b\u52a8\u6bd4\u5bf9\u4e00\u4e0b\uff0c\u5982\u679c\u54ea\u4e2a\u6ca1\u6709\u81ea\u52a8\u5b89\u88c5\u4e0a\u5c31\u8981\u81ea\u5df1\u518d\u5b89\u88c5\u3002\u5e76\u4e14\u914d\u7f6e\u8fc7\u7a0b\u548c\u672c\u5730debug\u914d\u7f6e\u8fc7\u7a0b\u662f\u4e00\u6837\u7684</p> <p></p>"},{"location":"utils/vscode/#ssh","title":"SSH \u914d\u7f6e","text":""},{"location":"utils/vscode/#practical-use","title":"practical use","text":"<ul> <li>\u5728\u672c\u5730\u673a\u5668\u751f\u6210\u5bc6\u94a5\u5bf9(\u516c\u94a5+\u79c1\u94a5)\uff1a<code>ssh-keygen</code><ul> <li>\u4e00\u822c\u5728 <code>C:\\user\\.ssh</code> \u91cc\uff0c\u9690\u85cf\u6587\u4ef6\u5939</li> <li><code>id_rsa.pub</code>\u662f\u516c\u94a5\uff0c<code>id_rsa</code>\u662f\u79c1\u94a5</li> <li>\u5982\u679c\u5df2\u7ecf\u5b58\u5728\u4f1a\u63d0\u9192\u662f\u5426 overwrite</li> </ul> </li> </ul>"}]}